timezoneJS.timezone.loadingScheme=timezoneJS.timezone.loadingSchemes.MANUAL_LOAD,timezoneJS.timezone.loadZoneDataFromObject({zones:{"Africa/Algiers":[["-12.2","-","LMT","-2486678340000"],["-9.35","-","PMT","-1855958400000"],["0","Algeria","WE%sT","-942012000000"],["-60","Algeria","CE%sT","-733276800000"],["0","-","WET","-439430400000"],["-60","-","CET","-212025600000"],["0","Algeria","WE%sT","246240000000"],["-60","Algeria","CE%sT","309744000000"],["0","Algeria","WE%sT","357523200000"],["-60","-","CET",null]],"Atlantic/Cape_Verde":[["94.06666666666668","-","LMT","-1956700800000"],["120","-","CVT","-862617600000"],["120","1:00","CVST","-764121600000"],["120","-","CVT","186112800000"],["60","-","CVT",null]],"Africa/Ndjamena":[["-60.2","-","LMT","-1798848000000"],["-60","-","WAT","308707200000"],["-60","1:00","WAST","321321600000"],["-60","-","WAT",null]],"Africa/Abidjan":[["16.133333333333333","-","LMT","-1798848000000"],["0","-","GMT",null]],"Africa/Bamako":"Africa/Abidjan","Africa/Banjul":"Africa/Abidjan","Africa/Conakry":"Africa/Abidjan","Africa/Dakar":"Africa/Abidjan","Africa/Freetown":"Africa/Abidjan","Africa/Lome":"Africa/Abidjan","Africa/Nouakchott":"Africa/Abidjan","Africa/Ouagadougou":"Africa/Abidjan","Africa/Sao_Tome":"Africa/Abidjan","Atlantic/St_Helena":"Africa/Abidjan","Africa/Cairo":[["-125.15","-","LMT","-2185401600000"],["-120","Egypt","EE%sT",null]],"Africa/Accra":[["0.8666666666666666","-","LMT","-1609545600000"],["0","Ghana","%s",null]],"Africa/Bissau":[["62.333333333333336","-","LMT","-1830384000000"],["60","-","WAT","189216000000"],["0","-","GMT",null]],"Africa/Nairobi":[["-147.26666666666665","-","LMT","-1309737600000"],["-180","-","EAT","-1230854400000"],["-150","-","BEAT","-915235200000"],["-165","-","BEAUT","-284083200000"],["-180","-","EAT",null]],"Africa/Addis_Ababa":"Africa/Nairobi","Africa/Asmara":"Africa/Nairobi","Africa/Dar_es_Salaam":"Africa/Nairobi","Africa/Djibouti":"Africa/Nairobi","Africa/Kampala":"Africa/Nairobi","Africa/Mogadishu":"Africa/Nairobi","Indian/Antananarivo":"Africa/Nairobi","Indian/Comoro":"Africa/Nairobi","Indian/Mayotte":"Africa/Nairobi","Africa/Monrovia":[["43.13333333333333","-","LMT","-2745532800000"],["43.13333333333333","-","MMT","-1604361600000"],["44.5","-","LRT","73526400000"],["0","-","GMT",null]],"Africa/Tripoli":[["-52.733333333333334","-","LMT","-1546387200000"],["-60","Libya","CE%sT","-315705600000"],["-120","-","EET","410140800000"],["-60","Libya","CE%sT","641779200000"],["-120","-","EET","844041600000"],["-60","Libya","CE%sT","875923200000"],["-120","-","EET","1352512800000"],["-60","Libya","CE%sT","1382666400000"],["-120","-","EET",null]],"Indian/Mauritius":[["-230","-","LMT","-1956700800000"],["-240","Mauritius","MU%sT",null]],"Africa/Casablanca":[["30.333333333333332","-","LMT","-1773014400000"],["0","Morocco","WE%sT","448243200000"],["-60","-","CET","536371200000"],["0","Morocco","WE%sT",null]],"Africa/El_Aaiun":[["52.8","-","LMT","-1136073600000"],["60","-","WAT","198288000000"],["0","Morocco","WE%sT",null]],"Africa/Maputo":[["-130.33333333333331","-","LMT","-2109283200000"],["-120","-","CAT",null]],"Africa/Blantyre":"Africa/Maputo","Africa/Bujumbura":"Africa/Maputo","Africa/Gaborone":"Africa/Maputo","Africa/Harare":"Africa/Maputo","Africa/Kigali":"Africa/Maputo","Africa/Lubumbashi":"Africa/Maputo","Africa/Lusaka":"Africa/Maputo","Africa/Windhoek":[["-68.4","-","LMT","-2458166400000"],["-90","-","SWAT","-2109283200000"],["-120","-","SAST","-860968800000"],["-120","1:00","SAST","-845244000000"],["-120","-","SAST","637977600000"],["-120","-","CAT","765331200000"],["-60","Namibia","WA%sT",null]],"Africa/Lagos":[["-13.6","-","LMT","-1588464000000"],["-60","-","WAT",null]],"Africa/Bangui":"Africa/Lagos","Africa/Brazzaville":"Africa/Lagos","Africa/Douala":"Africa/Lagos","Africa/Kinshasa":"Africa/Lagos","Africa/Libreville":"Africa/Lagos","Africa/Luanda":"Africa/Lagos","Africa/Malabo":"Africa/Lagos","Africa/Niamey":"Africa/Lagos","Africa/Porto-Novo":"Africa/Lagos","Indian/Reunion":[["-221.86666666666665","-","LMT","-1848873600000"],["-240","-","RET",null]],"Indian/Mahe":[["-221.8","-","LMT","-2006640000000"],["-240","-","SCT",null]],"Africa/Johannesburg":[["-112","-","LMT","-2458166400000"],["-90","-","SAST","-2109283200000"],["-120","SA","SAST",null]],"Africa/Maseru":"Africa/Johannesburg","Africa/Mbabane":"Africa/Johannesburg","Africa/Khartoum":[["-130.13333333333333","-","LMT","-1199318400000"],["-120","Sudan","CA%sT","947937600000"],["-180","-","EAT",null]],"Africa/Juba":"Africa/Khartoum","Africa/Tunis":[["-40.733333333333334","-","LMT","-2797200000000"],["-9.35","-","PMT","-1855958400000"],["-60","Tunisia","CE%sT",null]],"Antarctica/Casey":[["0","-","zzz","-86400000"],["-480","-","AWST","1255831200000"],["-660","-","CAST","1267754400000"],["-480","-","AWST","1319767200000"],["-660","-","CAST","1329843600000"],["-480","-","AWST",null]],"Antarctica/Davis":[["0","-","zzz","-409190400000"],["-420","-","DAVT","-163036800000"],["0","-","zzz","-28857600000"],["-420","-","DAVT","1255831200000"],["-300","-","DAVT","1268251200000"],["-420","-","DAVT","1319767200000"],["-300","-","DAVT","1329854400000"],["-420","-","DAVT",null]],"Antarctica/Mawson":[["0","-","zzz","-501206400000"],["-360","-","MAWT","1255831200000"],["-300","-","MAWT",null]],"Indian/Kerguelen":[["0","-","zzz","-599702400000"],["-300","-","TFT",null]],"Antarctica/DumontDUrville":[["0","-","zzz","-694396800000"],["-600","-","PMT","-566956800000"],["0","-","zzz","-415497600000"],["-600","-","DDUT",null]],"Antarctica/Syowa":[["0","-","zzz","-407808000000"],["-180","-","SYOT",null]],"Antarctica/Troll":[["0","-","zzz","1108166400000"],["0","Troll","%s",null]],"Antarctica/Vostok":[["0","-","zzz","-380073600000"],["-360","-","VOST",null]],"Antarctica/Rothera":[["0","-","zzz","218246400000"],["180","-","ROTT",null]],"Asia/Kabul":[["-276.8","-","LMT","-2493072000000"],["-240","-","AFT","-757468800000"],["-270","-","AFT",null]],"Asia/Yerevan":[["-178","-","LMT","-1441152000000"],["-180","-","YERT","-405129600000"],["-240","RussiaAsia","YER%sT","670384800000"],["-180","1:00","YERST","685584000000"],["-180","RussiaAsia","AM%sT","811908000000"],["-240","-","AMT","883526400000"],["-240","RussiaAsia","AM%sT","1332640800000"],["-240","-","AMT",null]],"Asia/Baku":[["-199.4","-","LMT","-1441152000000"],["-180","-","BAKT","-405129600000"],["-240","RussiaAsia","BAK%sT","670384800000"],["-180","1:00","BAKST","683510400000"],["-180","RussiaAsia","AZ%sT","715388400000"],["-240","-","AZT","851990400000"],["-240","EUAsia","AZ%sT","883526400000"],["-240","Azer","AZ%sT",null]],"Asia/Dhaka":[["-361.6666666666667","-","LMT","-2493072000000"],["-353.3333333333333","-","HMT","-891561600000"],["-390","-","BURT","-872035200000"],["-330","-","IST","-862617600000"],["-390","-","BURT","-576115200000"],["-360","-","DACT","38793600000"],["-360","-","BDT","1262217600000"],["-360","Dhaka","BD%sT",null]],"Asia/Thimphu":[["-358.6","-","LMT","-706320000000"],["-330","-","IST","560044800000"],["-360","-","BTT",null]],"Indian/Chagos":[["-289.6666666666667","-","LMT","-1956700800000"],["-300","-","IOT","851990400000"],["-360","-","IOT",null]],"Asia/Brunei":[["-459.6666666666667","-","LMT","-1383436800000"],["-450","-","BNT","-1136160000000"],["-480","-","BNT",null]],"Asia/Rangoon":[["-384.6666666666667","-","LMT","-2808604800000"],["-384.6666666666667","-","RMT","-1546387200000"],["-390","-","BURT","-873244800000"],["-540","-","JST","-778377600000"],["-390","-","MMT",null]],"Asia/Shanghai":[["-485.7166666666667","-","LMT","-2146003200000"],["-480","Shang","C%sT","-631238400000"],["-480","PRC","C%sT",null]],"Asia/Urumqi":[["-350.3333333333333","-","LMT","-1293926400000"],["-360","-","XJT",null]],"Asia/Hong_Kong":[["-456.7","-","LMT","-2056665600000"],["-480","HK","HK%sT","-884217600000"],["-540","-","JST","-766713600000"],["-480","HK","HK%sT",null]],"Asia/Taipei":[["-486","-","LMT","-2335219200000"],["-480","-","JWST","-1017792000000"],["-540","-","JST","-766191600000"],["-480","Taiwan","C%sT",null]],"Asia/Macau":[["-454.3333333333333","-","LMT","-1830384000000"],["-480","Macau","MO%sT","945648000000"],["-480","PRC","C%sT",null]],"Asia/Nicosia":[["-133.46666666666667","-","LMT","-1518912000000"],["-120","Cyprus","EE%sT","904608000000"],["-120","EUAsia","EE%sT",null]],"Europe/Nicosia":"Asia/Nicosia","Asia/Tbilisi":[["-179.18333333333334","-","LMT","-2808604800000"],["-179.18333333333334","-","TBMT","-1441152000000"],["-180","-","TBIT","-405129600000"],["-240","RussiaAsia","TBI%sT","670384800000"],["-180","1:00","TBIST","671155200000"],["-180","RussiaAsia","GE%sT","725760000000"],["-180","E-EurAsia","GE%sT","778377600000"],["-240","E-EurAsia","GE%sT","844128000000"],["-240","1:00","GEST","857174400000"],["-240","E-EurAsia","GE%sT","1088294400000"],["-180","RussiaAsia","GE%sT","1109642400000"],["-240","-","GET",null]],"Asia/Dili":[["-502.3333333333333","-","LMT","-1830384000000"],["-480","-","TLT","-879123600000"],["-540","-","JST","-766022400000"],["-540","-","TLT","199929600000"],["-480","-","WITA","969148800000"],["-540","-","TLT",null]],"Asia/Kolkata":[["-353.4666666666667","-","LMT","-2808604800000"],["-353.3333333333333","-","HMT","-891561600000"],["-390","-","BURT","-872035200000"],["-330","-","IST","-862617600000"],["-330","1:00","IST","-764121600000"],["-330","-","IST",null]],"Asia/Jakarta":[["-427.2","-","LMT","-3231273600000"],["-427.2","-","BMT","-1451693568000"],["-440","-","JAVT","-1172880000000"],["-450","-","WIB","-876614400000"],["-540","-","JST","-766022400000"],["-450","-","WIB","-683856000000"],["-480","-","WIB","-620784000000"],["-450","-","WIB","-157852800000"],["-420","-","WIB",null]],"Asia/Pontianak":[["-437.3333333333333","-","LMT","-1946160000000"],["-437.3333333333333","-","PMT","-1172880000000"],["-450","-","WIB","-881193600000"],["-540","-","JST","-766022400000"],["-450","-","WIB","-683856000000"],["-480","-","WIB","-620784000000"],["-450","-","WIB","-157852800000"],["-480","-","WITA","567993600000"],["-420","-","WIB",null]],"Asia/Makassar":[["-477.6","-","LMT","-1546387200000"],["-477.6","-","MMT","-1172880000000"],["-480","-","WITA","-880243200000"],["-540","-","JST","-766022400000"],["-480","-","WITA",null]],"Asia/Jayapura":[["-562.8","-","LMT","-1172880000000"],["-540","-","WIT","-799459200000"],["-570","-","ACST","-157852800000"],["-540","-","WIT",null]],"Asia/Tehran":[["-205.73333333333335","-","LMT","-1672617600000"],["-205.73333333333335","-","TMT","-725932800000"],["-210","-","IRST","247190400000"],["-240","Iran","IR%sT","315446400000"],["-210","Iran","IR%sT",null]],"Asia/Baghdad":[["-177.66666666666666","-","LMT","-2493072000000"],["-177.6","-","BMT","-1609545600000"],["-180","-","AST","389059200000"],["-180","Iraq","A%sT",null]],"Asia/Jerusalem":[["-140.9","-","LMT","-2808604800000"],["-140.66666666666666","-","JMT","-1609545600000"],["-120","Zion","I%sT",null]],"Asia/Tokyo":[["-558.9833333333333","-","LMT","-2587712400000"],["-540","-","JST","-2335219200000"],["-540","-","JCST","-1017792000000"],["-540","Japan","J%sT",null]],"Asia/Amman":[["-143.73333333333335","-","LMT","-1199318400000"],["-120","Jordan","EE%sT",null]],"Asia/Almaty":[["-307.8","-","LMT","-1441152000000"],["-300","-","ALMT","-1247529600000"],["-360","RussiaAsia","ALM%sT","694137600000"],["-360","-","ALMT","725760000000"],["-360","RussiaAsia","ALM%sT","1110844800000"],["-360","-","ALMT",null]],"Asia/Qyzylorda":[["-261.8666666666667","-","LMT","-1441152000000"],["-240","-","KIZT","-1247529600000"],["-300","-","KIZT","354931200000"],["-300","1:00","KIZST","370742400000"],["-360","-","KIZT","386467200000"],["-300","RussiaAsia","KIZ%sT","694137600000"],["-300","-","KIZT","692841600000"],["-300","-","QYZT","695786400000"],["-360","RussiaAsia","QYZ%sT","1110844800000"],["-360","-","QYZT",null]],"Asia/Aqtobe":[["-228.66666666666666","-","LMT","-1441152000000"],["-240","-","AKTT","-1247529600000"],["-300","-","AKTT","354931200000"],["-300","1:00","AKTST","370742400000"],["-360","-","AKTT","386467200000"],["-300","RussiaAsia","AKT%sT","694137600000"],["-300","-","AKTT","692841600000"],["-300","RussiaAsia","AQT%sT","1110844800000"],["-300","-","AQTT",null]],"Asia/Aqtau":[["-201.06666666666666","-","LMT","-1441152000000"],["-240","-","FORT","-1247529600000"],["-300","-","FORT","-189475200000"],["-300","-","SHET","370742400000"],["-360","-","SHET","386467200000"],["-300","RussiaAsia","SHE%sT","694137600000"],["-300","-","SHET","692841600000"],["-300","RussiaAsia","AQT%sT","794023200000"],["-240","RussiaAsia","AQT%sT","1110844800000"],["-300","-","AQTT",null]],"Asia/Oral":[["-205.4","-","LMT","-1441152000000"],["-240","-","URAT","-1247529600000"],["-300","-","URAT","354931200000"],["-300","1:00","URAST","370742400000"],["-360","-","URAT","386467200000"],["-300","RussiaAsia","URA%sT","606880800000"],["-240","RussiaAsia","URA%sT","694137600000"],["-240","-","URAT","692841600000"],["-240","RussiaAsia","ORA%sT","1110844800000"],["-300","-","ORAT",null]],"Asia/Bishkek":[["-298.4","-","LMT","-1441152000000"],["-300","-","FRUT","-1247529600000"],["-360","RussiaAsia","FRU%sT","670384800000"],["-300","1:00","FRUST","683604000000"],["-300","Kyrgyz","KG%sT","1123804800000"],["-360","-","KGT",null]],"Asia/Seoul":[["-507.8666666666667","-","LMT","-1948752000000"],["-510","-","KST","-1830384000000"],["-540","-","JCST","-1017792000000"],["-540","-","JST","-767318400000"],["-540","-","KST","-498096000000"],["-510","ROK","K%sT","-264902400000"],["-540","ROK","K%sT",null]],"Asia/Pyongyang":[["-503","-","LMT","-1948752000000"],["-510","-","KST","-1830384000000"],["-540","-","JCST","-1017792000000"],["-540","-","JST","-768614400000"],["-540","-","KST",null]],"Asia/Beirut":[["-142","-","LMT","-2808604800000"],["-120","Lebanon","EE%sT",null]],"Asia/Kuala_Lumpur":[["-406.7666666666667","-","LMT","-2177452800000"],["-415.4166666666667","-","SMT","-2038176000000"],["-420","-","MALT","-1167609600000"],["-420","0:20","MALST","-1073001600000"],["-440","-","MALT","-894153600000"],["-450","-","MALT","-879638400000"],["-540","-","JST","-766972800000"],["-450","-","MALT","378691200000"],["-480","-","MYT",null]],"Asia/Kuching":[["-441.3333333333333","-","LMT","-1383436800000"],["-450","-","BORT","-1136160000000"],["-480","NBorneo","BOR%sT","-879638400000"],["-540","-","JST","-766972800000"],["-480","-","BORT","378691200000"],["-480","-","MYT",null]],"Indian/Maldives":[["-294","-","LMT","-2808604800000"],["-294","-","MMT","-284083200000"],["-300","-","MVT",null]],"Asia/Hovd":[["-366.6","-","LMT","-2032905600000"],["-360","-","HOVT","283910400000"],["-420","Mongol","HOV%sT",null]],"Asia/Ulaanbaatar":[["-427.5333333333333","-","LMT","-2032905600000"],["-420","-","ULAT","283910400000"],["-480","Mongol","ULA%sT",null]],"Asia/Choibalsan":[["-458","-","LMT","-2032905600000"],["-420","-","ULAT","283910400000"],["-480","-","ULAT","418003200000"],["-540","Mongol","CHO%sT","1206921600000"],["-480","Mongol","CHO%sT",null]],"Asia/Kathmandu":[["-341.2666666666667","-","LMT","-1546387200000"],["-330","-","IST","536371200000"],["-345","-","NPT",null]],"Asia/Karachi":[["-268.2","-","LMT","-1956700800000"],["-330","-","IST","-862617600000"],["-330","1:00","IST","-764121600000"],["-330","-","IST","-576115200000"],["-300","-","KART","38793600000"],["-300","Pakistan","PK%sT",null]],"Asia/Gaza":[["-137.86666666666665","-","LMT","-2185401600000"],["-120","Zion","EET","-682646400000"],["-120","EgyptAsia","EE%sT","-81302400000"],["-120","Zion","I%sT","851990400000"],["-120","Jordan","EE%sT","946598400000"],["-120","Palestine","EE%sT","1219968000000"],["-120","-","EET","1220227200000"],["-120","Palestine","EE%sT","1293753600000"],["-120","-","EET","1269648060000"],["-120","Palestine","EE%sT","1312156800000"],["-120","-","EET","1356912000000"],["-120","Palestine","EE%sT",null]],"Asia/Hebron":[["-140.38333333333335","-","LMT","-2185401600000"],["-120","Zion","EET","-682646400000"],["-120","EgyptAsia","EE%sT","-81302400000"],["-120","Zion","I%sT","851990400000"],["-120","Jordan","EE%sT","946598400000"],["-120","Palestine","EE%sT",null]],"Asia/Manila":[["956","-","LMT","-3944678400000"],["-484","-","LMT","-2229292800000"],["-480","Phil","PH%sT","-873244800000"],["-540","-","JST","-794188800000"],["-480","Phil","PH%sT",null]],"Asia/Qatar":[["-206.13333333333335","-","LMT","-1546387200000"],["-240","-","GST","76204800000"],["-180","-","AST",null]],"Asia/Bahrain":"Asia/Qatar","Asia/Riyadh":[["-186.86666666666665","-","LMT","-719625600000"],["-180","-","AST",null]],"Asia/Aden":"Asia/Riyadh","Asia/Kuwait":"Asia/Riyadh","Asia/Singapore":[["-415.4166666666667","-","LMT","-2177452800000"],["-415.4166666666667","-","SMT","-2038176000000"],["-420","-","MALT","-1167609600000"],["-420","0:20","MALST","-1073001600000"],["-440","-","MALT","-894153600000"],["-450","-","MALT","-879638400000"],["-540","-","JST","-766972800000"],["-450","-","MALT","-138758400000"],["-450","-","SGT","378691200000"],["-480","-","SGT",null]],"Asia/Colombo":[["-319.4","-","LMT","-2808604800000"],["-319.5333333333333","-","MMT","-1988236800000"],["-330","-","IST","-883267200000"],["-330","0:30","IHST","-862617600000"],["-330","1:00","IST","-764028000000"],["-330","-","IST","832982400000"],["-390","-","LKT","846289800000"],["-360","-","LKT","1145061000000"],["-330","-","IST",null]],"Asia/Damascus":[["-145.2","-","LMT","-1546387200000"],["-120","Syria","EE%sT",null]],"Asia/Dushanbe":[["-275.2","-","LMT","-1441152000000"],["-300","-","DUST","-1247529600000"],["-360","RussiaAsia","DUS%sT","670384800000"],["-300","1:00","DUSST","684381600000"],["-300","-","TJT",null]],"Asia/Bangkok":[["-402.06666666666666","-","LMT","-2808604800000"],["-402.06666666666666","-","BMT","-1570060800000"],["-420","-","ICT",null]],"Asia/Phnom_Penh":"Asia/Bangkok","Asia/Vientiane":"Asia/Bangkok","Asia/Ashgabat":[["-233.53333333333333","-","LMT","-1441152000000"],["-240","-","ASHT","-1247529600000"],["-300","RussiaAsia","ASH%sT","670384800000"],["-240","RussiaAsia","ASH%sT","688521600000"],["-240","RussiaAsia","TM%sT","695786400000"],["-300","-","TMT",null]],"Asia/Dubai":[["-221.2","-","LMT","-1546387200000"],["-240","-","GST",null]],"Asia/Muscat":"Asia/Dubai","Asia/Samarkand":[["-267.8833333333333","-","LMT","-1441152000000"],["-240","-","SAMT","-1247529600000"],["-300","-","SAMT","354931200000"],["-300","1:00","SAMST","370742400000"],["-360","-","TAST","386467200000"],["-300","RussiaAsia","SAM%sT","683683200000"],["-300","RussiaAsia","UZ%sT","725760000000"],["-300","-","UZT",null]],"Asia/Tashkent":[["-277.18333333333334","-","LMT","-1441152000000"],["-300","-","TAST","-1247529600000"],["-360","RussiaAsia","TAS%sT","670384800000"],["-300","RussiaAsia","TAS%sT","683683200000"],["-300","RussiaAsia","UZ%sT","725760000000"],["-300","-","UZT",null]],"Asia/Ho_Chi_Minh":[["-426.6666666666667","-","LMT","-2004048000000"],["-426.5","-","PLMT","-1851552000000"],["-420","-","ICT","-852080400000"],["-480","-","IDT","-782614800000"],["-540","-","JST","-767836800000"],["-420","-","ICT","-718070400000"],["-480","-","IDT","-457747200000"],["-420","-","ICT","-315622800000"],["-480","-","IDT","171849600000"],["-420","-","ICT",null]],"Australia/Darwin":[["-523.3333333333333","-","LMT","-2364076800000"],["-540","-","ACST","-2230156800000"],["-570","Aus","AC%sT",null]],"Australia/Perth":[["-463.4","-","LMT","-2337897600000"],["-480","Aus","AW%sT","-836438400000"],["-480","AW","AW%sT",null]],"Australia/Eucla":[["-515.4666666666667","-","LMT","-2337897600000"],["-525","Aus","ACW%sT","-836438400000"],["-525","AW","ACW%sT",null]],"Australia/Brisbane":[["-612.1333333333333","-","LMT","-2335305600000"],["-600","Aus","AE%sT","62985600000"],["-600","AQ","AE%sT",null]],"Australia/Lindeman":[["-595.9333333333334","-","LMT","-2335305600000"],["-600","Aus","AE%sT","62985600000"],["-600","AQ","AE%sT","709948800000"],["-600","Holiday","AE%sT",null]],"Australia/Adelaide":[["-554.3333333333334","-","LMT","-2364076800000"],["-540","-","ACST","-2230156800000"],["-570","Aus","AC%sT","62985600000"],["-570","AS","AC%sT",null]],"Australia/Hobart":[["-589.2666666666667","-","LMT","-2345760000000"],["-600","-","AEST","-1680472800000"],["-600","1:00","AEDT","-1669852800000"],["-600","Aus","AE%sT","-63244800000"],["-600","AT","AE%sT",null]],"Australia/Currie":[["-575.4666666666666","-","LMT","-2345760000000"],["-600","-","AEST","-1680472800000"],["-600","1:00","AEDT","-1669852800000"],["-600","Aus","AE%sT","47174400000"],["-600","AT","AE%sT",null]],"Australia/Melbourne":[["-579.8666666666667","-","LMT","-2364076800000"],["-600","Aus","AE%sT","62985600000"],["-600","AV","AE%sT",null]],"Australia/Sydney":[["-604.8666666666667","-","LMT","-2364076800000"],["-600","Aus","AE%sT","62985600000"],["-600","AN","AE%sT",null]],"Australia/Broken_Hill":[["-565.8","-","LMT","-2364076800000"],["-600","-","AEST","-2314915200000"],["-540","-","ACST","-2230156800000"],["-570","Aus","AC%sT","62985600000"],["-570","AN","AC%sT","978220800000"],["-570","AS","AC%sT",null]],"Australia/Lord_Howe":[["-636.3333333333334","-","LMT","-2364076800000"],["-600","-","AEST","352252800000"],["-630","LH","LH%sT",null]],"Antarctica/Macquarie":[["0","-","zzz","-2214259200000"],["-600","-","AEST","-1680472800000"],["-600","1:00","AEDT","-1669852800000"],["-600","Aus","AE%sT","-1601683200000"],["0","-","zzz","-687052800000"],["-600","Aus","AE%sT","-63244800000"],["-600","AT","AE%sT","1270350000000"],["-660","-","MIST",null]],"Indian/Christmas":[["-422.8666666666667","-","LMT","-2364076800000"],["-420","-","CXT",null]],"Indian/Cocos":[["-387.6666666666667","-","LMT","-2177539200000"],["-390","-","CCT",null]],"Pacific/Fiji":[["-715.7333333333333","-","LMT","-1709942400000"],["-720","Fiji","FJ%sT",null]],"Pacific/Gambier":[["539.8","-","LMT","-1806710400000"],["540","-","GAMT",null]],"Pacific/Marquesas":[["558","-","LMT","-1806710400000"],["570","-","MART",null]],"Pacific/Tahiti":[["598.2666666666667","-","LMT","-1806710400000"],["600","-","TAHT",null]],"Pacific/Guam":[["861","-","LMT","-3944678400000"],["-579","-","LMT","-2146003200000"],["-600","-","GST","977529600000"],["-600","-","ChST",null]],"Pacific/Saipan":"Pacific/Guam","Pacific/Tarawa":[["-692.0666666666666","-","LMT","-2146003200000"],["-720","-","GILT",null]],"Pacific/Enderbury":[["684.3333333333334","-","LMT","-2146003200000"],["720","-","PHOT","307584000000"],["660","-","PHOT","820368000000"],["-780","-","PHOT",null]],"Pacific/Kiritimati":[["629.3333333333334","-","LMT","-2146003200000"],["640","-","LINT","307584000000"],["600","-","LINT","820368000000"],["-840","-","LINT",null]],"Pacific/Majuro":[["-684.8","-","LMT","-2146003200000"],["-660","-","MHT","-7948800000"],["-720","-","MHT",null]],"Pacific/Kwajalein":[["-669.3333333333334","-","LMT","-2146003200000"],["-660","-","MHT","-7948800000"],["720","-","KWAT","745804800000"],["-720","-","MHT",null]],"Pacific/Chuuk":[["-607.1333333333333","-","LMT","-2146003200000"],["-600","-","CHUT",null]],"Pacific/Pohnpei":[["-632.8666666666667","-","LMT","-2146003200000"],["-660","-","PONT",null]],"Pacific/Kosrae":[["-651.9333333333334","-","LMT","-2146003200000"],["-660","-","KOST","-7948800000"],["-720","-","KOST","946598400000"],["-660","-","KOST",null]],"Pacific/Nauru":[["-667.6666666666666","-","LMT","-1545091200000"],["-690","-","NRT","-877305600000"],["-540","-","JST","-800928000000"],["-690","-","NRT","294364800000"],["-720","-","NRT",null]],"Pacific/Noumea":[["-665.8","-","LMT","-1829347200000"],["-660","NC","NC%sT",null]],"Pacific/Auckland":[["-699.0666666666666","-","LMT","-3192393600000"],["-690","NZ","NZ%sT","-757382400000"],["-720","NZ","NZ%sT",null]],"Pacific/Chatham":[["-733.8","-","LMT","-3192393600000"],["-735","-","CHAST","-757382400000"],["-765","Chatham","CHA%sT",null]],"Antarctica/McMurdo":"Pacific/Auckland","Pacific/Rarotonga":[["639.0666666666666","-","LMT","-2146003200000"],["630","-","CKT","279676800000"],["600","Cook","CK%sT",null]],"Pacific/Niue":[["679.6666666666666","-","LMT","-2146003200000"],["680","-","NUT","-568166400000"],["690","-","NUT","276048000000"],["660","-","NUT",null]],"Pacific/Norfolk":[["-671.8666666666667","-","LMT","-2146003200000"],["-672","-","NMT","-568166400000"],["-690","-","NFT",null]],"Pacific/Palau":[["-537.9333333333334","-","LMT","-2146003200000"],["-540","-","PWT",null]],"Pacific/Port_Moresby":[["-588.6666666666666","-","LMT","-2808604800000"],["-588.5333333333334","-","PMMT","-2335305600000"],["-600","-","PGT",null]],"Pacific/Bougainville":[["-622.2666666666667","-","LMT","-2808604800000"],["-588.5333333333334","-","PMMT","-2335305600000"],["-600","-","PGT","-867974400000"],["-540","-","JST","-768873600000"],["-600","-","PGT","1419732000000"],["-660","-","BST",null]],"Pacific/Pitcairn":[["520.3333333333333","-","LMT","-2146003200000"],["510","-","PNT","893635200000"],["480","-","PST",null]],"Pacific/Pago_Pago":[["-757.2","-","LMT","-2855692800000"],["682.8","-","LMT","-1830470400000"],["660","-","NST","-86918400000"],["660","-","BST","438998400000"],["660","-","SST",null]],"Pacific/Midway":"Pacific/Pago_Pago","Pacific/Apia":[["-753.0666666666666","-","LMT","-2855692800000"],["686.9333333333334","-","LMT","-1830470400000"],["690","-","WSST","-599702400000"],["660","WS","S%sT","1325203200000"],["-780","WS","WS%sT",null]],"Pacific/Guadalcanal":[["-639.8","-","LMT","-1806710400000"],["-660","-","SBT",null]],"Pacific/Fakaofo":[["684.9333333333334","-","LMT","-2146003200000"],["660","-","TKT","1325203200000"],["-780","-","TKT",null]],"Pacific/Tongatapu":[["-739.3333333333334","-","LMT","-2146003200000"],["-740","-","TOT","-883699200000"],["-780","-","TOT","946598400000"],["-780","Tonga","TO%sT",null]],"Pacific/Funafuti":[["-716.8666666666667","-","LMT","-2146003200000"],["-720","-","TVT",null]],"Pacific/Wake":[["-666.4666666666666","-","LMT","-2146003200000"],["-720","-","WAKT",null]],"Pacific/Efate":[["-673.2666666666667","-","LMT","-1829347200000"],["-660","Vanuatu","VU%sT",null]],"Pacific/Wallis":[["-735.3333333333334","-","LMT","-2146003200000"],["-720","-","WFT",null]],"Africa/Asmera":"Africa/Nairobi","Africa/Timbuktu":"Africa/Abidjan","America/Argentina/ComodRivadavia":"America/Argentina/Catamarca","America/Atka":"America/Adak","America/Buenos_Aires":"America/Argentina/Buenos_Aires","America/Catamarca":"America/Argentina/Catamarca","America/Coral_Harbour":"America/Atikokan","America/Cordoba":"America/Argentina/Cordoba","America/Ensenada":"America/Tijuana","America/Fort_Wayne":"America/Indiana/Indianapolis","America/Indianapolis":"America/Indiana/Indianapolis","America/Jujuy":"America/Argentina/Jujuy","America/Knox_IN":"America/Indiana/Knox","America/Louisville":"America/Kentucky/Louisville","America/Mendoza":"America/Argentina/Mendoza","America/Montreal":"America/Toronto","America/Porto_Acre":"America/Rio_Branco","America/Rosario":"America/Argentina/Cordoba","America/Shiprock":"America/Denver","America/Virgin":"America/Port_of_Spain","Antarctica/South_Pole":"Pacific/Auckland","Asia/Ashkhabad":"Asia/Ashgabat","Asia/Calcutta":"Asia/Kolkata","Asia/Chongqing":"Asia/Shanghai","Asia/Chungking":"Asia/Shanghai","Asia/Dacca":"Asia/Dhaka","Asia/Harbin":"Asia/Shanghai","Asia/Kashgar":"Asia/Urumqi","Asia/Katmandu":"Asia/Kathmandu","Asia/Macao":"Asia/Macau","Asia/Saigon":"Asia/Ho_Chi_Minh","Asia/Tel_Aviv":"Asia/Jerusalem","Asia/Thimbu":"Asia/Thimphu","Asia/Ujung_Pandang":"Asia/Makassar","Asia/Ulan_Bator":"Asia/Ulaanbaatar","Atlantic/Faeroe":"Atlantic/Faroe","Atlantic/Jan_Mayen":"Europe/Oslo","Australia/ACT":"Australia/Sydney","Australia/Canberra":"Australia/Sydney","Australia/LHI":"Australia/Lord_Howe","Australia/NSW":"Australia/Sydney","Australia/North":"Australia/Darwin","Australia/Queensland":"Australia/Brisbane","Australia/South":"Australia/Adelaide","Australia/Tasmania":"Australia/Hobart","Australia/Victoria":"Australia/Melbourne","Australia/West":"Australia/Perth","Australia/Yancowinna":"Australia/Broken_Hill","Brazil/Acre":"America/Rio_Branco","Brazil/DeNoronha":"America/Noronha","Brazil/East":"America/Sao_Paulo","Brazil/West":"America/Manaus","Canada/Atlantic":"America/Halifax","Canada/Central":"America/Winnipeg","Canada/East-Saskatchewan":"America/Regina","Canada/Eastern":"America/Toronto","Canada/Mountain":"America/Edmonton","Canada/Newfoundland":"America/St_Johns","Canada/Pacific":"America/Vancouver","Canada/Saskatchewan":"America/Regina","Canada/Yukon":"America/Whitehorse","Chile/Continental":"America/Santiago","Chile/EasterIsland":"Pacific/Easter",Cuba:"America/Havana",Egypt:"Africa/Cairo",Eire:"Europe/Dublin","Europe/Belfast":"Europe/London","Europe/Tiraspol":"Europe/Chisinau",GB:"Europe/London","GB-Eire":"Europe/London","GMT+0":"Etc/GMT","GMT-0":"Etc/GMT",GMT0:"Etc/GMT",Greenwich:"Etc/GMT",Hongkong:"Asia/Hong_Kong",Iceland:"Atlantic/Reykjavik",Iran:"Asia/Tehran",Israel:"Asia/Jerusalem",Jamaica:"America/Jamaica",Japan:"Asia/Tokyo",Kwajalein:"Pacific/Kwajalein",Libya:"Africa/Tripoli","Mexico/BajaNorte":"America/Tijuana","Mexico/BajaSur":"America/Mazatlan","Mexico/General":"America/Mexico_City",NZ:"Pacific/Auckland","NZ-CHAT":"Pacific/Chatham",Navajo:"America/Denver",PRC:"Asia/Shanghai","Pacific/Ponape":"Pacific/Pohnpei","Pacific/Samoa":"Pacific/Pago_Pago","Pacific/Truk":"Pacific/Chuuk","Pacific/Yap":"Pacific/Chuuk",Poland:"Europe/Warsaw",Portugal:"Europe/Lisbon",ROC:"Asia/Taipei",ROK:"Asia/Seoul",Singapore:"Asia/Singapore",Turkey:"Europe/Istanbul",UCT:"Etc/UCT","US/Alaska":"America/Anchorage","US/Aleutian":"America/Adak","US/Arizona":"America/Phoenix","US/Central":"America/Chicago","US/East-Indiana":"America/Indiana/Indianapolis","US/Eastern":"America/New_York","US/Hawaii":"Pacific/Honolulu","US/Indiana-Starke":"America/Indiana/Knox","US/Michigan":"America/Detroit","US/Mountain":"America/Denver","US/Pacific":"America/Los_Angeles","US/Samoa":"Pacific/Pago_Pago",UTC:"Etc/UTC",Universal:"Etc/UTC","W-SU":"Europe/Moscow",Zulu:"Etc/UTC","Etc/GMT":[["0","-","GMT",null]],"Etc/UTC":[["0","-","UTC",null]],"Etc/UCT":[["0","-","UCT",null]],GMT:"Etc/GMT","Etc/Universal":"Etc/UTC","Etc/Zulu":"Etc/UTC","Etc/Greenwich":"Etc/GMT","Etc/GMT-0":"Etc/GMT","Etc/GMT+0":"Etc/GMT","Etc/GMT0":"Etc/GMT","Etc/GMT-14":[["-840","-","GMT-14",null]],"Etc/GMT-13":[["-780","-","GMT-13",null]],"Etc/GMT-12":[["-720","-","GMT-12",null]],"Etc/GMT-11":[["-660","-","GMT-11",null]],"Etc/GMT-10":[["-600","-","GMT-10",null]],"Etc/GMT-9":[["-540","-","GMT-9",null]],"Etc/GMT-8":[["-480","-","GMT-8",null]],"Etc/GMT-7":[["-420","-","GMT-7",null]],"Etc/GMT-6":[["-360","-","GMT-6",null]],"Etc/GMT-5":[["-300","-","GMT-5",null]],"Etc/GMT-4":[["-240","-","GMT-4",null]],"Etc/GMT-3":[["-180","-","GMT-3",null]],"Etc/GMT-2":[["-120","-","GMT-2",null]],"Etc/GMT-1":[["-60","-","GMT-1",null]],"Etc/GMT+1":[["60","-","GMT+1",null]],"Etc/GMT+2":[["120","-","GMT+2",null]],"Etc/GMT+3":[["180","-","GMT+3",null]],"Etc/GMT+4":[["240","-","GMT+4",null]],"Etc/GMT+5":[["300","-","GMT+5",null]],"Etc/GMT+6":[["360","-","GMT+6",null]],"Etc/GMT+7":[["420","-","GMT+7",null]],"Etc/GMT+8":[["480","-","GMT+8",null]],"Etc/GMT+9":[["540","-","GMT+9",null]],"Etc/GMT+10":[["600","-","GMT+10",null]],"Etc/GMT+11":[["660","-","GMT+11",null]],"Etc/GMT+12":[["720","-","GMT+12",null]],"Europe/London":[["1.25","-","LMT","-3852662400000"],["0","GB-Eire","%s","-37238400000"],["-60","-","BST","57722400000"],["0","GB-Eire","%s","851990400000"],["0","EU","GMT/BST",null]],"Europe/Jersey":"Europe/London","Europe/Guernsey":"Europe/London","Europe/Isle_of_Man":"Europe/London","Europe/Dublin":[["25","-","LMT","-2821651200000"],["25.35","-","DMT","-1691964000000"],["25.35","1:00","IST","-1680472800000"],["0","GB-Eire","%s","-1517011200000"],["0","GB-Eire","GMT/IST","-942012000000"],["0","1:00","IST","-733356000000"],["0","-","GMT","-719445600000"],["0","1:00","IST","-699487200000"],["0","-","GMT","-684972000000"],["0","GB-Eire","GMT/IST","-37238400000"],["-60","-","IST","57722400000"],["0","GB-Eire","GMT/IST","851990400000"],["0","EU","GMT/IST",null]],WET:[["0","EU","WE%sT",null]],CET:[["-60","C-Eur","CE%sT",null]],MET:[["-60","C-Eur","ME%sT",null]],EET:[["-120","EU","EE%sT",null]],
"Europe/Tirane":[["-79.33333333333333","-","LMT","-1735776000000"],["-60","-","CET","-932342400000"],["-60","Albania","CE%sT","457488000000"],["-60","EU","CE%sT",null]],"Europe/Andorra":[["-6.066666666666667","-","LMT","-2146003200000"],["0","-","WET","-733881600000"],["-60","-","CET","481082400000"],["-60","EU","CE%sT",null]],"Europe/Vienna":[["-65.35","-","LMT","-2422051200000"],["-60","C-Eur","CE%sT","-1546387200000"],["-60","Austria","CE%sT","-938901600000"],["-60","C-Eur","CE%sT","-781048800000"],["-60","1:00","CEST","-780184800000"],["-60","-","CET","-725932800000"],["-60","Austria","CE%sT","378604800000"],["-60","EU","CE%sT",null]],"Europe/Minsk":[["-110.26666666666667","-","LMT","-2808604800000"],["-110","-","MMT","-1441152000000"],["-120","-","EET","-1247529600000"],["-180","-","MSK","-899769600000"],["-60","C-Eur","CE%sT","-804643200000"],["-180","Russia","MSK/MSD","662601600000"],["-180","-","MSK","670384800000"],["-120","1:00","EEST","686109600000"],["-120","-","EET","701827200000"],["-120","1:00","EEST","717552000000"],["-120","Russia","EE%sT","1301191200000"],["-180","-","FET","1414285200000"],["-180","-","MSK",null]],"Europe/Brussels":[["-17.5","-","LMT","-2808604800000"],["-17.5","-","BMT","-2450952000000"],["0","-","WET","-1740355200000"],["-60","-","CET","-1693699200000"],["-60","C-Eur","CE%sT","-1613826000000"],["0","Belgium","WE%sT","-934668000000"],["-60","C-Eur","CE%sT","-799286400000"],["-60","Belgium","CE%sT","252374400000"],["-60","EU","CE%sT",null]],"Europe/Sofia":[["-93.26666666666667","-","LMT","-2808604800000"],["-116.93333333333332","-","IMT","-2369520000000"],["-120","-","EET","-857250000000"],["-60","C-Eur","CE%sT","-757468800000"],["-60","-","CET","-781045200000"],["-120","-","EET","291769200000"],["-120","Bulg","EE%sT","401853600000"],["-120","C-Eur","EE%sT","694137600000"],["-120","E-Eur","EE%sT","883526400000"],["-120","EU","EE%sT",null]],"Europe/Prague":[["-57.733333333333334","-","LMT","-3755376000000"],["-57.733333333333334","-","PMT","-2469398400000"],["-60","C-Eur","CE%sT","-798069600000"],["-60","Czech","CE%sT","315446400000"],["-60","EU","CE%sT",null]],"Europe/Copenhagen":[["-50.333333333333336","-","LMT","-2493072000000"],["-50.333333333333336","-","CMT","-2398291200000"],["-60","Denmark","CE%sT","-857253600000"],["-60","C-Eur","CE%sT","-781048800000"],["-60","Denmark","CE%sT","347068800000"],["-60","EU","CE%sT",null]],"Atlantic/Faroe":[["27.066666666666666","-","LMT","-1955750400000"],["0","-","WET","378604800000"],["0","EU","WE%sT",null]],"America/Danmarkshavn":[["74.66666666666667","-","LMT","-1686096000000"],["180","-","WGT","323834400000"],["180","EU","WG%sT","851990400000"],["0","-","GMT",null]],"America/Scoresbysund":[["87.86666666666667","-","LMT","-1686096000000"],["120","-","CGT","323834400000"],["120","C-Eur","CG%sT","354672000000"],["60","EU","EG%sT",null]],"America/Godthab":[["206.93333333333334","-","LMT","-1686096000000"],["180","-","WGT","323834400000"],["180","EU","WG%sT",null]],"America/Thule":[["275.1333333333333","-","LMT","-1686096000000"],["240","Thule","A%sT",null]],"Europe/Tallinn":[["-99","-","LMT","-2808604800000"],["-99","-","TMT","-1638316800000"],["-60","C-Eur","CE%sT","-1593820800000"],["-99","-","TMT","-1535932800000"],["-120","-","EET","-927936000000"],["-180","-","MSK","-892944000000"],["-60","C-Eur","CE%sT","-797644800000"],["-180","Russia","MSK/MSD","606880800000"],["-120","1:00","EEST","622605600000"],["-120","C-Eur","EE%sT","906422400000"],["-120","EU","EE%sT","941414400000"],["-120","-","EET","1014249600000"],["-120","EU","EE%sT",null]],"Europe/Helsinki":[["-99.81666666666668","-","LMT","-2890252800000"],["-99.81666666666668","-","HMT","-1535932800000"],["-120","Finland","EE%sT","441676800000"],["-120","EU","EE%sT",null]],"Europe/Mariehamn":"Europe/Helsinki","Europe/Paris":[["-9.35","-","LMT","-2486678340000"],["-9.35","-","PMT","-1855958340000"],["0","France","WE%sT","-932432400000"],["-60","C-Eur","CE%sT","-800064000000"],["0","France","WE%sT","-766616400000"],["-60","France","CE%sT","252374400000"],["-60","EU","CE%sT",null]],"Europe/Berlin":[["-53.46666666666666","-","LMT","-2422051200000"],["-60","C-Eur","CE%sT","-776556000000"],["-60","SovietZone","CE%sT","-725932800000"],["-60","Germany","CE%sT","347068800000"],["-60","EU","CE%sT",null]],"Europe/Busingen":"Europe/Zurich","Europe/Gibraltar":[["21.4","-","LMT","-2821651200000"],["0","GB-Eire","%s","-401320800000"],["-60","-","CET","410140800000"],["-60","EU","CE%sT",null]],"Europe/Athens":[["-94.86666666666667","-","LMT","-2344636800000"],["-94.86666666666667","-","AMT","-1686095940000"],["-120","Greece","EE%sT","-904867200000"],["-60","Greece","CE%sT","-812419200000"],["-120","Greece","EE%sT","378604800000"],["-120","EU","EE%sT",null]],"Europe/Budapest":[["-76.33333333333333","-","LMT","-2500934400000"],["-60","C-Eur","CE%sT","-1609545600000"],["-60","Hungary","CE%sT","-906768000000"],["-60","C-Eur","CE%sT","-757468800000"],["-60","Hungary","CE%sT","338954400000"],["-60","EU","CE%sT",null]],"Atlantic/Reykjavik":[["88","-","LMT","-1925078400000"],["60","Iceland","IS%sT","-54774000000"],["0","-","GMT",null]],"Europe/Rome":[["-49.93333333333334","-","LMT","-3259094400000"],["-49.93333333333334","-","RMT","-2403561600000"],["-60","Italy","CE%sT","-857253600000"],["-60","C-Eur","CE%sT","-804816000000"],["-60","Italy","CE%sT","347068800000"],["-60","EU","CE%sT",null]],"Europe/Vatican":"Europe/Rome","Europe/San_Marino":"Europe/Rome","Europe/Riga":[["-96.56666666666668","-","LMT","-2808604800000"],["-96.56666666666668","-","RMT","-1632002400000"],["-96.56666666666668","1:00","LST","-1618693200000"],["-96.56666666666668","-","RMT","-1601676000000"],["-96.56666666666668","1:00","LST","-1597266000000"],["-96.56666666666668","-","RMT","-1377302400000"],["-120","-","EET","-928022400000"],["-180","-","MSK","-899510400000"],["-60","C-Eur","CE%sT","-795830400000"],["-180","Russia","MSK/MSD","604720800000"],["-120","1:00","EEST","620618400000"],["-120","Latvia","EE%sT","853804800000"],["-120","EU","EE%sT","951782400000"],["-120","-","EET","978393600000"],["-120","EU","EE%sT",null]],"Europe/Vaduz":"Europe/Zurich","Europe/Vilnius":[["-101.26666666666667","-","LMT","-2808604800000"],["-84","-","WMT","-1641081600000"],["-95.6","-","KMT","-1585094400000"],["-60","-","CET","-1561248000000"],["-120","-","EET","-1553558400000"],["-60","-","CET","-928195200000"],["-180","-","MSK","-900115200000"],["-60","C-Eur","CE%sT","-802137600000"],["-180","Russia","MSK/MSD","670384800000"],["-120","1:00","EEST","686109600000"],["-120","C-Eur","EE%sT","915062400000"],["-120","-","EET","891133200000"],["-60","EU","CE%sT","941331600000"],["-120","-","EET","1041379200000"],["-120","EU","EE%sT",null]],"Europe/Luxembourg":[["-24.6","-","LMT","-2069712000000"],["-60","Lux","CE%sT","-1612656000000"],["0","Lux","WE%sT","-1269813600000"],["0","Belgium","WE%sT","-935182800000"],["-60","C-Eur","WE%sT","-797979600000"],["-60","Belgium","CE%sT","252374400000"],["-60","EU","CE%sT",null]],"Europe/Malta":[["-58.06666666666666","-","LMT","-2403475200000"],["-60","Italy","CE%sT","-857253600000"],["-60","C-Eur","CE%sT","-781048800000"],["-60","Italy","CE%sT","102384000000"],["-60","Malta","CE%sT","378604800000"],["-60","EU","CE%sT",null]],"Europe/Chisinau":[["-115.33333333333333","-","LMT","-2808604800000"],["-115","-","CMT","-1637107200000"],["-104.4","-","BMT","-1213142400000"],["-120","Romania","EE%sT","-927158400000"],["-120","1:00","EEST","-898128000000"],["-60","C-Eur","CE%sT","-800150400000"],["-180","Russia","MSK/MSD","662601600000"],["-180","-","MSK","641952000000"],["-120","-","EET","694137600000"],["-120","Russia","EE%sT","725760000000"],["-120","E-Eur","EE%sT","883526400000"],["-120","EU","EE%sT",null]],"Europe/Monaco":[["-29.53333333333333","-","LMT","-2486678400000"],["-9.35","-","PMT","-1855958400000"],["0","France","WE%sT","-766616400000"],["-60","France","CE%sT","252374400000"],["-60","EU","CE%sT",null]],"Europe/Amsterdam":[["-19.53333333333333","-","LMT","-4228761600000"],["-19.53333333333333","Neth","%s","-1025740800000"],["-20","Neth","NE%sT","-935020800000"],["-60","C-Eur","CE%sT","-781048800000"],["-60","Neth","CE%sT","252374400000"],["-60","EU","CE%sT",null]],"Europe/Oslo":[["-43","-","LMT","-2366755200000"],["-60","Norway","CE%sT","-927507600000"],["-60","C-Eur","CE%sT","-781048800000"],["-60","Norway","CE%sT","347068800000"],["-60","EU","CE%sT",null]],"Arctic/Longyearbyen":"Europe/Oslo","Europe/Warsaw":[["-84","-","LMT","-2808604800000"],["-84","-","WMT","-1717027200000"],["-60","C-Eur","CE%sT","-1618693200000"],["-120","Poland","EE%sT","-1501718400000"],["-60","Poland","CE%sT","-931730400000"],["-60","C-Eur","CE%sT","-796867200000"],["-60","Poland","CE%sT","252374400000"],["-60","W-Eur","CE%sT","599529600000"],["-60","EU","CE%sT",null]],"Europe/Lisbon":[["36.75","-","LMT","-2682374400000"],["36.75","-","LMT","-1830384000000"],["0","Port","WE%sT","-118274400000"],["-60","-","CET","212547600000"],["0","Port","WE%sT","433299600000"],["0","W-Eur","WE%sT","717555600000"],["-60","EU","CE%sT","828234000000"],["0","EU","WE%sT",null]],"Atlantic/Azores":[["102.66666666666667","-","LMT","-2682374400000"],["114.53333333333333","-","HMT","-1830384000000"],["120","Port","AZO%sT","-118274400000"],["60","Port","AZO%sT","433299600000"],["60","W-Eur","AZO%sT","717555600000"],["0","EU","WE%sT","733280400000"],["60","EU","AZO%sT",null]],"Atlantic/Madeira":[["67.6","-","LMT","-2682374400000"],["67.6","-","FMT","-1830384000000"],["60","Port","MAD%sT","-118274400000"],["0","Port","WE%sT","433299600000"],["0","EU","WE%sT",null]],"Europe/Bucharest":[["-104.4","-","LMT","-2469398400000"],["-104.4","-","BMT","-1213142400000"],["-120","Romania","EE%sT","354679200000"],["-120","C-Eur","EE%sT","694137600000"],["-120","Romania","EE%sT","788832000000"],["-120","E-Eur","EE%sT","883526400000"],["-120","EU","EE%sT",null]],"Europe/Kaliningrad":[["-82","-","LMT","-2422051200000"],["-60","C-Eur","CE%sT","-757468800000"],["-120","Poland","CE%sT","-725932800000"],["-180","Russia","MSK/MSD","670384800000"],["-120","Russia","EE%sT","1301191200000"],["-180","-","FET","1414288800000"],["-120","-","EET",null]],"Europe/Moscow":[["-150.28333333333333","-","LMT","-2808604800000"],["-150.28333333333333","-","MMT","-1688256000000"],["-151.31666666666666","Russia","%s","-1593813600000"],["-180","Russia","%s","-1522713600000"],["-180","Russia","MSK/MSD","-1491177600000"],["-120","-","EET","-1247529600000"],["-180","Russia","MSK/MSD","670384800000"],["-120","Russia","EE%sT","695786400000"],["-180","Russia","MSK/MSD","1301191200000"],["-240","-","MSK","1414288800000"],["-180","-","MSK",null]],"Europe/Simferopol":[["-136.4","-","LMT","-2808604800000"],["-136","-","SMT","-1441152000000"],["-120","-","EET","-1247529600000"],["-180","-","MSK","-888883200000"],["-60","C-Eur","CE%sT","-811641600000"],["-180","Russia","MSK/MSD","662601600000"],["-180","-","MSK","646797600000"],["-120","-","EET","725760000000"],["-120","E-Eur","EE%sT","767750400000"],["-180","E-Eur","MSK/MSD","828241200000"],["-180","1:00","MSD","846385200000"],["-180","Russia","MSK/MSD","883526400000"],["-180","-","MSK","857178000000"],["-120","EU","EE%sT","1396144800000"],["-240","-","MSK","1414288800000"],["-180","-","MSK",null]],"Europe/Volgograd":[["-177.66666666666666","-","LMT","-1577750400000"],["-180","-","TSAT","-1411862400000"],["-180","-","STAT","-1247529600000"],["-240","-","STAT","-256867200000"],["-240","Russia","VOL%sT","606880800000"],["-180","Russia","VOL%sT","670384800000"],["-240","-","VOLT","701834400000"],["-180","Russia","MSK/MSD","1301191200000"],["-240","-","MSK","1414288800000"],["-180","-","MSK",null]],"Europe/Samara":[["-200.33333333333334","-","LMT","-1593813600000"],["-180","-","SAMT","-1247529600000"],["-240","-","SAMT","-1102291200000"],["-240","Russia","KUY%sT","606880800000"],["-180","Russia","MSK/MSD","670384800000"],["-120","Russia","EE%sT","686109600000"],["-180","-","KUYT","687927600000"],["-240","Russia","SAM%sT","1269741600000"],["-180","Russia","SAM%sT","1301191200000"],["-240","-","SAMT",null]],"Asia/Yekaterinburg":[["-242.55","-","LMT","-1688256000000"],["-225.08333333333334","-","PMT","-1592596800000"],["-240","-","SVET","-1247529600000"],["-300","Russia","SVE%sT","670384800000"],["-240","Russia","SVE%sT","695786400000"],["-300","Russia","YEK%sT","1301191200000"],["-360","-","YEKT","1414288800000"],["-300","-","YEKT",null]],"Asia/Omsk":[["-293.5","-","LMT","-1582070400000"],["-300","-","OMST","-1247529600000"],["-360","Russia","OMS%sT","670384800000"],["-300","Russia","OMS%sT","695786400000"],["-360","Russia","OMS%sT","1301191200000"],["-420","-","OMST","1414288800000"],["-360","-","OMST",null]],"Asia/Novosibirsk":[["-331.6666666666667","-","LMT","-1579456800000"],["-360","-","NOVT","-1247529600000"],["-420","Russia","NOV%sT","670384800000"],["-360","Russia","NOV%sT","695786400000"],["-420","Russia","NOV%sT","738115200000"],["-360","Russia","NOV%sT","1301191200000"],["-420","-","NOVT","1414288800000"],["-360","-","NOVT",null]],"Asia/Novokuznetsk":[["-348.8","-","LMT","-1441238400000"],["-360","-","KRAT","-1247529600000"],["-420","Russia","KRA%sT","670384800000"],["-360","Russia","KRA%sT","695786400000"],["-420","Russia","KRA%sT","1269741600000"],["-360","Russia","NOV%sT","1301191200000"],["-420","-","NOVT","1414288800000"],["-420","-","KRAT",null]],"Asia/Krasnoyarsk":[["-371.43333333333334","-","LMT","-1577491200000"],["-360","-","KRAT","-1247529600000"],["-420","Russia","KRA%sT","670384800000"],["-360","Russia","KRA%sT","695786400000"],["-420","Russia","KRA%sT","1301191200000"],["-480","-","KRAT","1414288800000"],["-420","-","KRAT",null]],"Asia/Irkutsk":[["-417.0833333333333","-","LMT","-2808604800000"],["-417.0833333333333","-","IMT","-1575849600000"],["-420","-","IRKT","-1247529600000"],["-480","Russia","IRK%sT","670384800000"],["-420","Russia","IRK%sT","695786400000"],["-480","Russia","IRK%sT","1301191200000"],["-540","-","IRKT","1414288800000"],["-480","-","IRKT",null]],"Asia/Chita":[["-453.8666666666667","-","LMT","-1579392000000"],["-480","-","YAKT","-1247529600000"],["-540","Russia","YAK%sT","670384800000"],["-480","Russia","YAK%sT","695786400000"],["-540","Russia","YAK%sT","1301191200000"],["-600","-","YAKT","1414288800000"],["-480","-","IRKT",null]],"Asia/Yakutsk":[["-518.9666666666667","-","LMT","-1579392000000"],["-480","-","YAKT","-1247529600000"],["-540","Russia","YAK%sT","670384800000"],["-480","Russia","YAK%sT","695786400000"],["-540","Russia","YAK%sT","1301191200000"],["-600","-","YAKT","1414288800000"],["-540","-","YAKT",null]],"Asia/Vladivostok":[["-527.5166666666667","-","LMT","-1487289600000"],["-540","-","VLAT","-1247529600000"],["-600","Russia","VLA%sT","670384800000"],["-540","Russia","VLA%sT","695786400000"],["-600","Russia","VLA%sT","1301191200000"],["-660","-","VLAT","1414288800000"],["-600","-","VLAT",null]],"Asia/Khandyga":[["-542.2166666666666","-","LMT","-1579392000000"],["-480","-","YAKT","-1247529600000"],["-540","Russia","YAK%sT","670384800000"],["-480","Russia","YAK%sT","695786400000"],["-540","Russia","YAK%sT","1104451200000"],["-600","Russia","VLA%sT","1301191200000"],["-660","-","VLAT","1315872000000"],["-600","-","YAKT","1414288800000"],["-540","-","YAKT",null]],"Asia/Sakhalin":[["-570.8","-","LMT","-2031004800000"],["-540","-","JCST","-1017792000000"],["-540","-","JST","-768528000000"],["-660","Russia","SAK%sT","670384800000"],["-600","Russia","SAK%sT","695786400000"],["-660","Russia","SAK%sT","857181600000"],["-600","Russia","SAK%sT","1301191200000"],["-660","-","SAKT","1414288800000"],["-600","-","SAKT",null]],"Asia/Magadan":[["-603.2","-","LMT","-1441152000000"],["-600","-","MAGT","-1247529600000"],["-660","Russia","MAG%sT","670384800000"],["-600","Russia","MAG%sT","695786400000"],["-660","Russia","MAG%sT","1301191200000"],["-720","-","MAGT","1414288800000"],["-600","-","MAGT",null]],"Asia/Srednekolymsk":[["-614.8666666666667","-","LMT","-1441152000000"],["-600","-","MAGT","-1247529600000"],["-660","Russia","MAG%sT","670384800000"],["-600","Russia","MAG%sT","695786400000"],["-660","Russia","MAG%sT","1301191200000"],["-720","-","MAGT","1414288800000"],["-660","-","SRET",null]],"Asia/Ust-Nera":[["-572.9","-","LMT","-1579392000000"],["-480","-","YAKT","-1247529600000"],["-540","Russia","YAKT","354931200000"],["-660","Russia","MAG%sT","670384800000"],["-600","Russia","MAG%sT","695786400000"],["-660","Russia","MAG%sT","1301191200000"],["-720","-","MAGT","1315872000000"],["-660","-","VLAT","1414288800000"],["-600","-","VLAT",null]],"Asia/Kamchatka":[["-634.6","-","LMT","-1487721600000"],["-660","-","PETT","-1247529600000"],["-720","Russia","PET%sT","670384800000"],["-660","Russia","PET%sT","695786400000"],["-720","Russia","PET%sT","1269741600000"],["-660","Russia","PET%sT","1301191200000"],["-720","-","PETT",null]],"Asia/Anadyr":[["-709.9333333333334","-","LMT","-1441152000000"],["-720","-","ANAT","-1247529600000"],["-780","Russia","ANA%sT","386467200000"],["-720","Russia","ANA%sT","670384800000"],["-660","Russia","ANA%sT","695786400000"],["-720","Russia","ANA%sT","1269741600000"],["-660","Russia","ANA%sT","1301191200000"],["-720","-","ANAT",null]],"Europe/Belgrade":[["-82","-","LMT","-2682374400000"],["-60","-","CET","-905821200000"],["-60","C-Eur","CE%sT","-757468800000"],["-60","-","CET","-777938400000"],["-60","1:00","CEST","-766620000000"],["-60","-","CET","407203200000"],["-60","EU","CE%sT",null]],"Europe/Ljubljana":"Europe/Belgrade","Europe/Podgorica":"Europe/Belgrade","Europe/Sarajevo":"Europe/Belgrade","Europe/Skopje":"Europe/Belgrade","Europe/Zagreb":"Europe/Belgrade","Europe/Bratislava":"Europe/Prague","Europe/Madrid":[["14.733333333333334","-","LMT","-2177452800000"],["0","Spain","WE%sT","-733881600000"],["-60","Spain","CE%sT","315446400000"],["-60","EU","CE%sT",null]],"Africa/Ceuta":[["21.26666666666667","-","LMT","-2146003200000"],["0","-","WET","-1630112400000"],["0","1:00","WEST","-1616806800000"],["0","-","WET","-1420156800000"],["0","Spain","WE%sT","-1262390400000"],["0","SpainAfrica","WE%sT","448243200000"],["-60","-","CET","536371200000"],["-60","EU","CE%sT",null]],"Atlantic/Canary":[["61.6","-","LMT","-1509667200000"],["60","-","CANT","-733878000000"],["0","-","WET","323827200000"],["0","1:00","WEST","338947200000"],["0","EU","WE%sT",null]],"Europe/Stockholm":[["-72.2","-","LMT","-2871676800000"],["-60.233333333333334","-","SET","-2208988800000"],["-60","-","CET","-1692493200000"],["-60","1:00","CEST","-1680476400000"],["-60","-","CET","347068800000"],["-60","EU","CE%sT",null]],"Europe/Zurich":[["-34.13333333333333","-","LMT","-3675196800000"],["-29.76666666666667","-","BMT","-2385244800000"],["-60","Swiss","CE%sT","378604800000"],["-60","EU","CE%sT",null]],"Europe/Istanbul":[["-115.86666666666667","-","LMT","-2808604800000"],["-116.93333333333332","-","IMT","-1869868800000"],["-120","Turkey","EE%sT","277257600000"],["-180","Turkey","TR%sT","482803200000"],["-120","Turkey","EE%sT","1199059200000"],["-120","EU","EE%sT","1301187600000"],["-120","-","EET","1301274000000"],["-120","EU","EE%sT","1396141200000"],["-120","-","EET","1396227600000"],["-120","EU","EE%sT",null]],"Asia/Istanbul":"Europe/Istanbul","Europe/Kiev":[["-122.06666666666668","-","LMT","-2808604800000"],["-122.06666666666668","-","KMT","-1441152000000"],["-120","-","EET","-1247529600000"],["-180","-","MSK","-892512000000"],["-60","C-Eur","CE%sT","-825379200000"],["-180","Russia","MSK/MSD","646797600000"],["-120","1:00","EEST","686113200000"],["-120","E-Eur","EE%sT","820368000000"],["-120","EU","EE%sT",null]],"Europe/Uzhgorod":[["-89.2","-","LMT","-2500934400000"],["-60","-","CET","-915235200000"],["-60","C-Eur","CE%sT","-796867200000"],["-60","1:00","CEST","-794707200000"],["-60","-","CET","-773452800000"],["-180","Russia","MSK/MSD","662601600000"],["-180","-","MSK","646797600000"],["-60","-","CET","670388400000"],["-120","-","EET","725760000000"],["-120","E-Eur","EE%sT","820368000000"],["-120","EU","EE%sT",null]],"Europe/Zaporozhye":[["-140.66666666666666","-","LMT","-2808604800000"],["-140","-","CUT","-1441152000000"],["-120","-","EET","-1247529600000"],["-180","-","MSK","-894758400000"],["-60","C-Eur","CE%sT","-826416000000"],["-180","Russia","MSK/MSD","670384800000"],["-120","E-Eur","EE%sT","820368000000"],["-120","EU","EE%sT",null]],EST:[["300","-","EST",null]],MST:[["420","-","MST",null]],HST:[["600","-","HST",null]],EST5EDT:[["300","US","E%sT",null]],CST6CDT:[["360","US","C%sT",null]],MST7MDT:[["420","US","M%sT",null]],PST8PDT:[["480","US","P%sT",null]],"America/New_York":[["296.0333333333333","-","LMT","-2717668562000"],["300","US","E%sT","-1546387200000"],["300","NYC","E%sT","-852163200000"],["300","US","E%sT","-725932800000"],["300","NYC","E%sT","-63244800000"],["300","US","E%sT",null]],"America/Chicago":[["350.6","-","LMT","-2717668236000"],["360","US","C%sT","-1546387200000"],["360","Chicago","C%sT","-1067810400000"],["300","-","EST","-1045432800000"],["360","Chicago","C%sT","-852163200000"],["360","US","C%sT","-725932800000"],["360","Chicago","C%sT","-63244800000"],["360","US","C%sT",null]],"America/North_Dakota/Center":[["405.2","-","LMT","-2717667912000"],["420","US","M%sT","719978400000"],["360","US","C%sT",null]],"America/North_Dakota/New_Salem":[["405.65","-","LMT","-2717667939000"],["420","US","M%sT","1067133600000"],["360","US","C%sT",null]],"America/North_Dakota/Beulah":[["407.1166666666667","-","LMT","-2717668027000"],["420","US","M%sT","1289095200000"],["360","US","C%sT",null]],"America/Denver":[["419.93333333333334","-","LMT","-2717668796000"],["420","US","M%sT","-1546387200000"],["420","Denver","M%sT","-852163200000"],["420","US","M%sT","-725932800000"],["420","Denver","M%sT","-63244800000"],["420","US","M%sT",null]],"America/Los_Angeles":[["472.9666666666667","-","LMT","-2717668378000"],["480","US","P%sT","-725932800000"],["480","CA","P%sT","-63244800000"],["480","US","P%sT",null]],"America/Juneau":[["-902.3166666666666","-","LMT","-3225312000000"],["537.6833333333334","-","LMT","-2188987200000"],["480","-","PST","-852163200000"],["480","US","P%sT","-725932800000"],["480","-","PST","-86400000"],["480","US","P%sT","325648800000"],["540","US","Y%sT","341373600000"],["480","US","P%sT","436327200000"],["540","US","Y%sT","438998400000"],["540","US","AK%sT",null]],"America/Sitka":[["-898.7833333333334","-","LMT","-3225312000000"],["541.2166666666666","-","LMT","-2188987200000"],["480","-","PST","-852163200000"],["480","US","P%sT","-725932800000"],["480","-","PST","-86400000"],["480","US","P%sT","436327200000"],["540","US","Y%sT","438998400000"],["540","US","AK%sT",null]],"America/Metlakatla":[["-913.7","-","LMT","-3225312000000"],["526.3","-","LMT","-2188987200000"],["480","-","PST","-852163200000"],["480","US","P%sT","-725932800000"],["480","-","PST","-86400000"],["480","US","P%sT","436327200000"],["480","-","PST",null]],"America/Yakutat":[["-881.0833333333334","-","LMT","-3225312000000"],["558.9166666666666","-","LMT","-2188987200000"],["540","-","YST","-852163200000"],["540","US","Y%sT","-725932800000"],["540","-","YST","-86400000"],["540","US","Y%sT","438998400000"],["540","US","AK%sT",null]],"America/Anchorage":[["-840.4","-","LMT","-3225312000000"],["599.6","-","LMT","-2188987200000"],["600","-","CAT","-852163200000"],["600","US","CAT/CAWT","-769395600000"],["600","US","CAT/CAPT","-725932800000"],["600","-","CAT","-86918400000"],["600","-","AHST","-86400000"],["600","US","AH%sT","436327200000"],["540","US","Y%sT","438998400000"],["540","US","AK%sT",null]],"America/Nome":[["-778.35","-","LMT","-3225312000000"],["661.6333333333333","-","LMT","-2188987200000"],["660","-","NST","-852163200000"],["660","US","N%sT","-725932800000"],["660","-","NST","-86918400000"],["660","-","BST","-86400000"],["660","US","B%sT","436327200000"],["540","US","Y%sT","438998400000"],["540","US","AK%sT",null]],"America/Adak":[["-733.35","-","LMT","-3225312000000"],["706.6333333333333","-","LMT","-2188987200000"],["660","-","NST","-852163200000"],["660","US","N%sT","-725932800000"],["660","-","NST","-86918400000"],["660","-","BST","-86400000"],["660","US","B%sT","436327200000"],["600","US","AH%sT","438998400000"],["600","US","H%sT",null]],"Pacific/Honolulu":[["631.4333333333334","-","LMT","-2334139200000"],["630","-","HST","-1157320800000"],["630","1:00","HDT","-1155470400000"],["630","-","HST","-880236000000"],["630","1:00","HDT","-765410400000"],["630","-","HST","-712188000000"],["600","-","HST",null]],"Pacific/Johnston":"Pacific/Honolulu","America/Phoenix":[["448.3","-","LMT","-2717670498000"],["420","US","M%sT","-820540740000"],["420","-","MST","-812678340000"],["420","US","M%sT","-796867140000"],["420","-","MST","-63244800000"],["420","US","M%sT","-56246400000"],["420","-","MST",null]],"America/Boise":[["464.81666666666666","-","LMT","-2717667889000"],["480","US","P%sT","-1471816800000"],["420","US","M%sT","157680000000"],["420","-","MST","129088800000"],["420","US","M%sT",null]],"America/Indiana/Indianapolis":[["344.6333333333333","-","LMT","-2717667878000"],["360","US","C%sT","-1546387200000"],["360","Indianapolis","C%sT","-852163200000"],["360","US","C%sT","-725932800000"],["360","Indianapolis","C%sT","-463615200000"],["300","-","EST","-386805600000"],["360","-","CST","-368661600000"],["300","-","EST","-86400000"],["300","US","E%sT","62985600000"],["300","-","EST","1167523200000"],["300","US","E%sT",null]],"America/Indiana/Marengo":[["345.3833333333333","-","LMT","-2717667923000"],["360","US","C%sT","-568166400000"],["360","Marengo","C%sT","-273708000000"],["300","-","EST","-86400000"],["300","US","E%sT","126669600000"],["360","1:00","CDT","152071200000"],["300","US","E%sT","220838400000"],["300","-","EST","1167523200000"],["300","US","E%sT",null]],"America/Indiana/Vincennes":[["350.1166666666667","-","LMT","-2717668207000"],["360","US","C%sT","-725932800000"],["360","Vincennes","C%sT","-179359200000"],["300","-","EST","-86400000"],["300","US","E%sT","62985600000"],["300","-","EST","1143943200000"],["360","US","C%sT","1194141600000"],["300","US","E%sT",null]],"America/Indiana/Tell_City":[["347.05","-","LMT","-2717668023000"],["360","US","C%sT","-725932800000"],["360","Perry","C%sT","-179359200000"],["300","-","EST","-86400000"],["300","US","E%sT","62985600000"],["300","-","EST","1143943200000"],["360","US","C%sT",null]],"America/Indiana/Petersburg":[["349.1166666666667","-","LMT","-2717668147000"],["360","US","C%sT","-441936000000"],["360","Pike","C%sT","-147909600000"],["300","-","EST","-100130400000"],["360","US","C%sT","247024800000"],["300","-","EST","1143943200000"],["360","US","C%sT","1194141600000"],["300","US","E%sT",null]],"America/Indiana/Knox":[["346.5","-","LMT","-2717667990000"],["360","US","C%sT","-694396800000"],["360","Starke","C%sT","-242258400000"],["300","-","EST","-195084000000"],["360","US","C%sT","688528800000"],["300","-","EST","1143943200000"],["360","US","C%sT",null]],"America/Indiana/Winamac":[["346.4166666666667","-","LMT","-2717667985000"],["360","US","C%sT","-725932800000"],["360","Pulaski","C%sT","-273708000000"],["300","-","EST","-86400000"],["300","US","E%sT","62985600000"],["300","-","EST","1143943200000"],["360","US","C%sT","1173578400000"],["300","US","E%sT",null]],"America/Indiana/Vevay":[["340.2666666666667","-","LMT","-2717667616000"],["360","US","C%sT","-495064800000"],["300","-","EST","-86400000"],["300","US","E%sT","126144000000"],["300","-","EST","1167523200000"],["300","US","E%sT",null]],"America/Kentucky/Louisville":[["343.0333333333333","-","LMT","-2717667782000"],["360","US","C%sT","-1514851200000"],["360","Louisville","C%sT","-852163200000"],["360","US","C%sT","-725932800000"],["360","Louisville","C%sT","-266450400000"],["300","-","EST","-31622400000"],["300","US","E%sT","126669600000"],["360","1:00","CDT","152071200000"],["300","US","E%sT",null]],"America/Kentucky/Monticello":[["339.4","-","LMT","-2717667564000"],["360","US","C%sT","-725932800000"],["360","-","CST","-31622400000"],["360","US","C%sT","972784800000"],["300","US","E%sT",null]],"America/Detroit":[["332.18333333333334","-","LMT","-2019772800000"],["360","-","CST","-1724104800000"],["300","-","EST","-852163200000"],["300","US","E%sT","-725932800000"],["300","Detroit","E%sT","126144000000"],["300","US","E%sT","189216000000"],["300","-","EST","167796000000"],["300","US","E%sT",null]],"America/Menominee":[["350.45","-","LMT","-2659780800000"],["360","US","C%sT","-725932800000"],["360","Menominee","C%sT","-21506400000"],["300","-","EST","104896800000"],["360","US","C%sT",null]],"America/St_Johns":[["210.86666666666665","-","LMT","-2682374400000"],["210.86666666666665","StJohns","N%sT","-1609545600000"],["210.86666666666665","Canada","N%sT","-1578009600000"],["210.86666666666665","StJohns","N%sT","-1096934400000"],["210","StJohns","N%sT","-872380800000"],["210","Canada","N%sT","-725932800000"],["210","StJohns","N%sT","1320105600000"],["210","Canada","N%sT",null]],"America/Goose_Bay":[["241.66666666666666","-","LMT","-2682374400000"],["210.86666666666665","-","NST","-1609545600000"],["210.86666666666665","Canada","N%sT","-1578009600000"],["210.86666666666665","-","NST","-1096934400000"],["210","-","NST","-1041465600000"],["210","StJohns","N%sT","-872380800000"],["210","Canada","N%sT","-725932800000"],["210","StJohns","N%sT","-119916000000"],["240","StJohns","A%sT","1320105600000"],["240","Canada","A%sT",null]],"America/Halifax":[["254.4","-","LMT","-2131660800000"],["240","Halifax","A%sT","-1609545600000"],["240","Canada","A%sT","-1578009600000"],["240","Halifax","A%sT","-880236000000"],["240","Canada","A%sT","-725932800000"],["240","Halifax","A%sT","157680000000"],["240","Canada","A%sT",null]],"America/Glace_Bay":[["239.8","-","LMT","-2131660800000"],["240","Canada","A%sT","-505008000000"],["240","Halifax","A%sT","-473472000000"],["240","-","AST","94608000000"],["240","Halifax","A%sT","157680000000"],["240","Canada","A%sT",null]],"America/Moncton":[["259.1333333333333","-","LMT","-2715897600000"],["300","-","EST","-2131660800000"],["240","Canada","A%sT","-1136160000000"],["240","Moncton","A%sT","-852163200000"],["240","Canada","A%sT","-725932800000"],["240","Moncton","A%sT","126144000000"],["240","Canada","A%sT","757296000000"],["240","Moncton","A%sT","1199059200000"],["240","Canada","A%sT",null]],"America/Blanc-Sablon":[["228.46666666666667","-","LMT","-2682374400000"],["240","Canada","A%sT","31449600000"],["240","-","AST",null]],"America/Toronto":[["317.5333333333333","-","LMT","-2335305600000"],["300","Canada","E%sT","-1578009600000"],["300","Toronto","E%sT","-880236000000"],["300","Canada","E%sT","-725932800000"],["300","Toronto","E%sT","157680000000"],["300","Canada","E%sT",null]],"America/Thunder_Bay":[["357","-","LMT","-2335305600000"],["360","-","CST","-1862006400000"],["300","-","EST","-852163200000"],["300","Canada","E%sT","31449600000"],["300","Toronto","E%sT","126144000000"],["300","-","EST","157680000000"],["300","Canada","E%sT",null]],"America/Nipigon":[["353.06666666666666","-","LMT","-2335305600000"],["300","Canada","E%sT","-923270400000"],["300","1:00","EDT","-880236000000"],["300","Canada","E%sT",null]],"America/Rainy_River":[["378.2666666666667","-","LMT","-2335305600000"],["360","Canada","C%sT","-923270400000"],["360","1:00","CDT","-880236000000"],["360","Canada","C%sT",null]],"America/Atikokan":[["366.4666666666667","-","LMT","-2335305600000"],["360","Canada","C%sT","-923270400000"],["360","1:00","CDT","-880236000000"],["360","Canada","C%sT","-765410400000"],["300","-","EST",null]],"America/Winnipeg":[["388.6","-","LMT","-2602281600000"],["360","Winn","C%sT","1167523200000"],["360","Canada","C%sT",null]],"America/Regina":[["418.6","-","LMT","-2030227200000"],["420","Regina","M%sT","-307749600000"],["360","-","CST",null]],"America/Swift_Current":[["431.3333333333333","-","LMT","-2030227200000"],["420","Canada","M%sT","-749599200000"],["420","Regina","M%sT","-599702400000"],["420","Swift","M%sT","70941600000"],["360","-","CST",null]],"America/Edmonton":[["453.8666666666667","-","LMT","-1998691200000"],["420","Edm","M%sT","567907200000"],["420","Canada","M%sT",null]],
"America/Vancouver":[["492.4666666666667","-","LMT","-2682374400000"],["480","Vanc","P%sT","567907200000"],["480","Canada","P%sT",null]],"America/Dawson_Creek":[["480.93333333333334","-","LMT","-2682374400000"],["480","Canada","P%sT","-694396800000"],["480","Vanc","P%sT","83988000000"],["420","-","MST",null]],"America/Creston":[["466.06666666666666","-","LMT","-2682374400000"],["420","-","MST","-1680480000000"],["480","-","PST","-1627862400000"],["420","-","MST",null]],"America/Pangnirtung":[["0","-","zzz","-1514851200000"],["240","NT_YK","A%sT","796701600000"],["300","Canada","E%sT","941335200000"],["360","Canada","C%sT","972784800000"],["300","Canada","E%sT",null]],"America/Iqaluit":[["0","-","zzz","-865296000000"],["300","NT_YK","E%sT","941335200000"],["360","Canada","C%sT","972784800000"],["300","Canada","E%sT",null]],"America/Resolute":[["0","-","zzz","-704937600000"],["360","NT_YK","C%sT","972784800000"],["300","-","EST","986094000000"],["360","Canada","C%sT","1162087200000"],["300","-","EST","1173582000000"],["360","Canada","C%sT",null]],"America/Rankin_Inlet":[["0","-","zzz","-378777600000"],["360","NT_YK","C%sT","972784800000"],["300","-","EST","986094000000"],["360","Canada","C%sT",null]],"America/Cambridge_Bay":[["0","-","zzz","-1546387200000"],["420","NT_YK","M%sT","941335200000"],["360","Canada","C%sT","972784800000"],["300","-","EST","973382400000"],["360","-","CST","986094000000"],["420","Canada","M%sT",null]],"America/Yellowknife":[["0","-","zzz","-1073088000000"],["420","NT_YK","M%sT","347068800000"],["420","Canada","M%sT",null]],"America/Inuvik":[["0","-","zzz","-505008000000"],["480","NT_YK","P%sT","291780000000"],["420","NT_YK","M%sT","347068800000"],["420","Canada","M%sT",null]],"America/Whitehorse":[["540.2","-","LMT","-2189030400000"],["540","NT_YK","Y%sT","-81993600000"],["480","NT_YK","P%sT","347068800000"],["480","Canada","P%sT",null]],"America/Dawson":[["557.6666666666666","-","LMT","-2189030400000"],["540","NT_YK","Y%sT","120614400000"],["480","NT_YK","P%sT","347068800000"],["480","Canada","P%sT",null]],"America/Cancun":[["347.06666666666666","-","LMT","-1514764024000"],["360","-","CST","377913600000"],["300","Mexico","E%sT","902023200000"],["360","Mexico","C%sT","1422756000000"],["300","-","EST",null]],"America/Merida":[["358.4666666666667","-","LMT","-1514764708000"],["360","-","CST","377913600000"],["300","-","EST","407635200000"],["360","Mexico","C%sT",null]],"America/Matamoros":[["400","-","LMT","-1514767200000"],["360","-","CST","599529600000"],["360","US","C%sT","631065600000"],["360","Mexico","C%sT","1293753600000"],["360","US","C%sT",null]],"America/Monterrey":[["401.2666666666667","-","LMT","-1514767276000"],["360","-","CST","599529600000"],["360","US","C%sT","631065600000"],["360","Mexico","C%sT",null]],"America/Mexico_City":[["396.6","-","LMT","-1514763396000"],["420","-","MST","-1343091600000"],["360","-","CST","-1234828800000"],["420","-","MST","-1220317200000"],["360","-","CST","-1207180800000"],["420","-","MST","-1191369600000"],["360","Mexico","C%sT","1001815200000"],["360","-","CST","1014163200000"],["360","Mexico","C%sT",null]],"America/Ojinaga":[["417.6666666666667","-","LMT","-1514764660000"],["420","-","MST","-1343091600000"],["360","-","CST","-1234828800000"],["420","-","MST","-1220317200000"],["360","-","CST","-1207180800000"],["420","-","MST","-1191369600000"],["360","-","CST","851990400000"],["360","Mexico","C%sT","915062400000"],["360","-","CST","891399600000"],["420","Mexico","M%sT","1293753600000"],["420","US","M%sT",null]],"America/Chihuahua":[["424.3333333333333","-","LMT","-1514765060000"],["420","-","MST","-1343091600000"],["360","-","CST","-1234828800000"],["420","-","MST","-1220317200000"],["360","-","CST","-1207180800000"],["420","-","MST","-1191369600000"],["360","-","CST","851990400000"],["360","Mexico","C%sT","915062400000"],["360","-","CST","891399600000"],["420","Mexico","M%sT",null]],"America/Hermosillo":[["443.8666666666667","-","LMT","-1514766232000"],["420","-","MST","-1343091600000"],["360","-","CST","-1234828800000"],["420","-","MST","-1220317200000"],["360","-","CST","-1207180800000"],["420","-","MST","-1191369600000"],["360","-","CST","-873849600000"],["420","-","MST","-661564800000"],["480","-","PST","31449600000"],["420","Mexico","M%sT","946598400000"],["420","-","MST",null]],"America/Mazatlan":[["425.6666666666667","-","LMT","-1514765140000"],["420","-","MST","-1343091600000"],["360","-","CST","-1234828800000"],["420","-","MST","-1220317200000"],["360","-","CST","-1207180800000"],["420","-","MST","-1191369600000"],["360","-","CST","-873849600000"],["420","-","MST","-661564800000"],["480","-","PST","31449600000"],["420","Mexico","M%sT",null]],"America/Bahia_Banderas":[["421","-","LMT","-1514764860000"],["420","-","MST","-1343091600000"],["360","-","CST","-1234828800000"],["420","-","MST","-1220317200000"],["360","-","CST","-1207180800000"],["420","-","MST","-1191369600000"],["360","-","CST","-873849600000"],["420","-","MST","-661564800000"],["480","-","PST","31449600000"],["420","Mexico","M%sT","1270346400000"],["360","Mexico","C%sT",null]],"America/Tijuana":[["468.06666666666666","-","LMT","-1514764084000"],["420","-","MST","-1420156800000"],["480","-","PST","-1343091600000"],["420","-","MST","-1234828800000"],["480","-","PST","-1222992000000"],["480","1:00","PDT","-1207267200000"],["480","-","PST","-873849600000"],["480","1:00","PWT","-769395600000"],["480","1:00","PPT","-761702400000"],["480","-","PST","-686102400000"],["480","1:00","PDT","-661564800000"],["480","-","PST","-473472000000"],["480","CA","P%sT","-252547200000"],["480","-","PST","220838400000"],["480","US","P%sT","851990400000"],["480","Mexico","P%sT","1009756800000"],["480","US","P%sT","1014163200000"],["480","Mexico","P%sT","1293753600000"],["480","US","P%sT",null]],"America/Santa_Isabel":[["459.4666666666667","-","LMT","-1514763568000"],["420","-","MST","-1420156800000"],["480","-","PST","-1343091600000"],["420","-","MST","-1234828800000"],["480","-","PST","-1222992000000"],["480","1:00","PDT","-1207267200000"],["480","-","PST","-873849600000"],["480","1:00","PWT","-769395600000"],["480","1:00","PPT","-761702400000"],["480","-","PST","-686102400000"],["480","1:00","PDT","-661564800000"],["480","-","PST","-473472000000"],["480","CA","P%sT","-252547200000"],["480","-","PST","220838400000"],["480","US","P%sT","851990400000"],["480","Mexico","P%sT","1009756800000"],["480","US","P%sT","1014163200000"],["480","Mexico","P%sT",null]],"America/Nassau":[["309.5","-","LMT","-1825113600000"],["300","Bahamas","E%sT","220838400000"],["300","US","E%sT",null]],"America/Barbados":[["238.48333333333335","-","LMT","-1420156800000"],["238.48333333333335","-","BMT","-1167696000000"],["240","Barb","A%sT",null]],"America/Belize":[["352.8","-","LMT","-1822521600000"],["360","Belize","C%sT",null]],"Atlantic/Bermuda":[["259.3","-","LMT","-1262296800000"],["240","-","AST","136346400000"],["240","Canada","A%sT","220838400000"],["240","US","A%sT",null]],"America/Costa_Rica":[["336.2166666666667","-","LMT","-2493072000000"],["336.2166666666667","-","SJMT","-1545091200000"],["360","CR","C%sT",null]],"America/Havana":[["329.4666666666667","-","LMT","-2493072000000"],["329.6","-","HMT","-1402833600000"],["300","Cuba","C%sT",null]],"America/Santo_Domingo":[["279.6","-","LMT","-2493072000000"],["280","-","SDMT","-1159790400000"],["300","DR","E%sT","152064000000"],["240","-","AST","972784800000"],["300","US","E%sT","975805200000"],["240","-","AST",null]],"America/El_Salvador":[["356.8","-","LMT","-1514851200000"],["360","Salv","C%sT",null]],"America/Guatemala":[["362.06666666666666","-","LMT","-1617062400000"],["360","Guat","C%sT",null]],"America/Port-au-Prince":[["289.3333333333333","-","LMT","-2493072000000"],["289","-","PPMT","-1670500800000"],["300","Haiti","E%sT",null]],"America/Tegucigalpa":[["348.8666666666667","-","LMT","-1538524800000"],["360","Hond","C%sT",null]],"America/Jamaica":[["307.18333333333334","-","LMT","-2493072000000"],["307.18333333333334","-","KMT","-1827705600000"],["300","-","EST","157680000000"],["300","US","E%sT","473299200000"],["300","-","EST",null]],"America/Martinique":[["244.33333333333334","-","LMT","-2493072000000"],["244.33333333333334","-","FFMT","-1851552000000"],["240","-","AST","323827200000"],["240","1:00","ADT","338947200000"],["240","-","AST",null]],"America/Managua":[["345.1333333333333","-","LMT","-2493072000000"],["345.2","-","MMT","-1121126400000"],["360","-","CST","105062400000"],["300","-","EST","161740800000"],["360","Nic","C%sT","694238400000"],["300","-","EST","717292800000"],["360","-","CST","757296000000"],["300","-","EST","883526400000"],["360","Nic","C%sT",null]],"America/Panama":[["318.1333333333333","-","LMT","-2493072000000"],["319.6","-","CMT","-1946937600000"],["300","-","EST",null]],"America/Cayman":"America/Panama","America/Puerto_Rico":[["264.4166666666667","-","LMT","-2233051200000"],["240","-","AST","-873072000000"],["240","US","A%sT","-725932800000"],["240","-","AST",null]],"America/Miquelon":[["224.66666666666666","-","LMT","-1850342400000"],["240","-","AST","325987200000"],["180","-","PMST","567907200000"],["180","Canada","PM%sT",null]],"America/Grand_Turk":[["284.5333333333333","-","LMT","-2493072000000"],["307.18333333333334","-","KMT","-1827705600000"],["300","-","EST","315446400000"],["300","US","E%sT","1446343200000"],["240","-","AST",null]],"US/Pacific-New":"America/Los_Angeles","America/Argentina/Buenos_Aires":[["233.8","-","LMT","-2372112000000"],["256.8","-","CMT","-1567468800000"],["240","-","ART","-1233446400000"],["240","Arg","AR%sT","-7603200000"],["180","Arg","AR%sT","938908800000"],["240","Arg","AR%sT","952041600000"],["180","Arg","AR%sT",null]],"America/Argentina/Cordoba":[["256.8","-","LMT","-2372112000000"],["256.8","-","CMT","-1567468800000"],["240","-","ART","-1233446400000"],["240","Arg","AR%sT","-7603200000"],["180","Arg","AR%sT","667958400000"],["240","-","WART","687916800000"],["180","Arg","AR%sT","938908800000"],["240","Arg","AR%sT","952041600000"],["180","Arg","AR%sT",null]],"America/Argentina/Salta":[["261.66666666666663","-","LMT","-2372112000000"],["256.8","-","CMT","-1567468800000"],["240","-","ART","-1233446400000"],["240","Arg","AR%sT","-7603200000"],["180","Arg","AR%sT","667958400000"],["240","-","WART","687916800000"],["180","Arg","AR%sT","938908800000"],["240","Arg","AR%sT","952041600000"],["180","Arg","AR%sT","1224288000000"],["180","-","ART",null]],"America/Argentina/Tucuman":[["260.8666666666667","-","LMT","-2372112000000"],["256.8","-","CMT","-1567468800000"],["240","-","ART","-1233446400000"],["240","Arg","AR%sT","-7603200000"],["180","Arg","AR%sT","667958400000"],["240","-","WART","687916800000"],["180","Arg","AR%sT","938908800000"],["240","Arg","AR%sT","952041600000"],["180","-","ART","1086048000000"],["240","-","WART","1087084800000"],["180","Arg","AR%sT",null]],"America/Argentina/La_Rioja":[["267.4","-","LMT","-2372112000000"],["256.8","-","CMT","-1567468800000"],["240","-","ART","-1233446400000"],["240","Arg","AR%sT","-7603200000"],["180","Arg","AR%sT","667785600000"],["240","-","WART","673574400000"],["180","Arg","AR%sT","938908800000"],["240","Arg","AR%sT","952041600000"],["180","-","ART","1086048000000"],["240","-","WART","1087689600000"],["180","Arg","AR%sT","1224288000000"],["180","-","ART",null]],"America/Argentina/San_Juan":[["274.06666666666666","-","LMT","-2372112000000"],["256.8","-","CMT","-1567468800000"],["240","-","ART","-1233446400000"],["240","Arg","AR%sT","-7603200000"],["180","Arg","AR%sT","667785600000"],["240","-","WART","673574400000"],["180","Arg","AR%sT","938908800000"],["240","Arg","AR%sT","952041600000"],["180","-","ART","1085961600000"],["240","-","WART","1090713600000"],["180","Arg","AR%sT","1224288000000"],["180","-","ART",null]],"America/Argentina/Jujuy":[["261.2","-","LMT","-2372112000000"],["256.8","-","CMT","-1567468800000"],["240","-","ART","-1233446400000"],["240","Arg","AR%sT","-7603200000"],["180","Arg","AR%sT","636508800000"],["240","-","WART","657072000000"],["240","1:00","WARST","669168000000"],["240","-","WART","686707200000"],["180","1:00","ARST","725760000000"],["180","Arg","AR%sT","938908800000"],["240","Arg","AR%sT","952041600000"],["180","Arg","AR%sT","1224288000000"],["180","-","ART",null]],"America/Argentina/Catamarca":[["263.1333333333333","-","LMT","-2372112000000"],["256.8","-","CMT","-1567468800000"],["240","-","ART","-1233446400000"],["240","Arg","AR%sT","-7603200000"],["180","Arg","AR%sT","667958400000"],["240","-","WART","687916800000"],["180","Arg","AR%sT","938908800000"],["240","Arg","AR%sT","952041600000"],["180","-","ART","1086048000000"],["240","-","WART","1087689600000"],["180","Arg","AR%sT","1224288000000"],["180","-","ART",null]],"America/Argentina/Mendoza":[["275.2666666666667","-","LMT","-2372112000000"],["256.8","-","CMT","-1567468800000"],["240","-","ART","-1233446400000"],["240","Arg","AR%sT","-7603200000"],["180","Arg","AR%sT","636508800000"],["240","-","WART","655948800000"],["240","1:00","WARST","667785600000"],["240","-","WART","687484800000"],["240","1:00","WARST","699408000000"],["240","-","WART","719366400000"],["180","Arg","AR%sT","938908800000"],["240","Arg","AR%sT","952041600000"],["180","-","ART","1085270400000"],["240","-","WART","1096156800000"],["180","Arg","AR%sT","1224288000000"],["180","-","ART",null]],"America/Argentina/San_Luis":[["265.4","-","LMT","-2372112000000"],["256.8","-","CMT","-1567468800000"],["240","-","ART","-1233446400000"],["240","Arg","AR%sT","-7603200000"],["180","Arg","AR%sT","662601600000"],["180","1:00","ARST","637372800000"],["240","-","WART","655948800000"],["240","1:00","WARST","667785600000"],["240","-","WART","675734400000"],["180","-","ART","938908800000"],["240","1:00","WARST","952041600000"],["180","-","ART","1085961600000"],["240","-","WART","1090713600000"],["180","Arg","AR%sT","1200873600000"],["240","SanLuis","WAR%sT","1255219200000"],["180","-","ART",null]],"America/Argentina/Rio_Gallegos":[["276.8666666666667","-","LMT","-2372112000000"],["256.8","-","CMT","-1567468800000"],["240","-","ART","-1233446400000"],["240","Arg","AR%sT","-7603200000"],["180","Arg","AR%sT","938908800000"],["240","Arg","AR%sT","952041600000"],["180","-","ART","1086048000000"],["240","-","WART","1087689600000"],["180","Arg","AR%sT","1224288000000"],["180","-","ART",null]],"America/Argentina/Ushuaia":[["273.2","-","LMT","-2372112000000"],["256.8","-","CMT","-1567468800000"],["240","-","ART","-1233446400000"],["240","Arg","AR%sT","-7603200000"],["180","Arg","AR%sT","938908800000"],["240","Arg","AR%sT","952041600000"],["180","-","ART","1085875200000"],["240","-","WART","1087689600000"],["180","Arg","AR%sT","1224288000000"],["180","-","ART",null]],"America/Aruba":"America/Curacao","America/La_Paz":[["272.6","-","LMT","-2493072000000"],["272.6","-","CMT","-1205971200000"],["272.6","1:00","BOST","-1192320000000"],["240","-","BOT",null]],"America/Noronha":[["129.66666666666669","-","LMT","-1735776000000"],["120","Brazil","FN%sT","653529600000"],["120","-","FNT","938649600000"],["120","Brazil","FN%sT","971568000000"],["120","-","FNT","1000339200000"],["120","Brazil","FN%sT","1033430400000"],["120","-","FNT",null]],"America/Belem":[["193.93333333333334","-","LMT","-1735776000000"],["180","Brazil","BR%sT","590025600000"],["180","-","BRT",null]],"America/Santarem":[["218.8","-","LMT","-1735776000000"],["240","Brazil","AM%sT","590025600000"],["240","-","AMT","1214265600000"],["180","-","BRT",null]],"America/Fortaleza":[["154","-","LMT","-1735776000000"],["180","Brazil","BR%sT","653529600000"],["180","-","BRT","938649600000"],["180","Brazil","BR%sT","972172800000"],["180","-","BRT","1000339200000"],["180","Brazil","BR%sT","1033430400000"],["180","-","BRT",null]],"America/Recife":[["139.6","-","LMT","-1735776000000"],["180","Brazil","BR%sT","653529600000"],["180","-","BRT","938649600000"],["180","Brazil","BR%sT","971568000000"],["180","-","BRT","1000339200000"],["180","Brazil","BR%sT","1033430400000"],["180","-","BRT",null]],"America/Araguaina":[["192.8","-","LMT","-1735776000000"],["180","Brazil","BR%sT","653529600000"],["180","-","BRT","811036800000"],["180","Brazil","BR%sT","1064361600000"],["180","-","BRT","1350777600000"],["180","Brazil","BR%sT","1377993600000"],["180","-","BRT",null]],"America/Maceio":[["142.86666666666665","-","LMT","-1735776000000"],["180","Brazil","BR%sT","653529600000"],["180","-","BRT","813542400000"],["180","Brazil","BR%sT","841795200000"],["180","-","BRT","938649600000"],["180","Brazil","BR%sT","972172800000"],["180","-","BRT","1000339200000"],["180","Brazil","BR%sT","1033430400000"],["180","-","BRT",null]],"America/Bahia":[["154.06666666666666","-","LMT","-1735776000000"],["180","Brazil","BR%sT","1064361600000"],["180","-","BRT","1318723200000"],["180","Brazil","BR%sT","1350777600000"],["180","-","BRT",null]],"America/Sao_Paulo":[["186.46666666666667","-","LMT","-1735776000000"],["180","Brazil","BR%sT","-195436800000"],["180","1:00","BRST","-157852800000"],["180","Brazil","BR%sT",null]],"America/Campo_Grande":[["218.46666666666667","-","LMT","-1735776000000"],["240","Brazil","AM%sT",null]],"America/Cuiaba":[["224.33333333333334","-","LMT","-1735776000000"],["240","Brazil","AM%sT","1064361600000"],["240","-","AMT","1096588800000"],["240","Brazil","AM%sT",null]],"America/Porto_Velho":[["255.6","-","LMT","-1735776000000"],["240","Brazil","AM%sT","590025600000"],["240","-","AMT",null]],"America/Boa_Vista":[["242.66666666666666","-","LMT","-1735776000000"],["240","Brazil","AM%sT","590025600000"],["240","-","AMT","938649600000"],["240","Brazil","AM%sT","971568000000"],["240","-","AMT",null]],"America/Manaus":[["240.06666666666666","-","LMT","-1735776000000"],["240","Brazil","AM%sT","590025600000"],["240","-","AMT","749174400000"],["240","Brazil","AM%sT","780192000000"],["240","-","AMT",null]],"America/Eirunepe":[["279.4666666666667","-","LMT","-1735776000000"],["300","Brazil","AC%sT","590025600000"],["300","-","ACT","749174400000"],["300","Brazil","AC%sT","780192000000"],["300","-","ACT","1214265600000"],["240","-","AMT","1384041600000"],["300","-","ACT",null]],"America/Rio_Branco":[["271.2","-","LMT","-1735776000000"],["300","Brazil","AC%sT","590025600000"],["300","-","ACT","1214265600000"],["240","-","AMT","1384041600000"],["300","-","ACT",null]],"America/Santiago":[["282.7666666666667","-","LMT","-2493072000000"],["282.7666666666667","-","SMT","-1892678400000"],["300","-","CLT","-1688428800000"],["282.7666666666667","-","SMT","-1619222400000"],["240","-","CLT","-1593820800000"],["282.7666666666667","-","SMT","-1336003200000"],["300","Chile","CL%sT","-1178150400000"],["240","-","CLT","-870566400000"],["300","-","CLT","-865296000000"],["240","-","CLT","-740534400000"],["240","1:00","CLST","-736387200000"],["240","-","CLT","-718070400000"],["300","-","CLT","-713667600000"],["240","Chile","CL%sT","1430017200000"],["180","-","CLT",null]],"Pacific/Easter":[["437.4666666666667","-","LMT","-2493072000000"],["437.4666666666667","-","EMT","-1178150400000"],["420","Chile","EAS%sT","384922800000"],["360","Chile","EAS%sT","1430017200000"],["300","-","EAST",null]],"Antarctica/Palmer":[["0","-","zzz","-126316800000"],["240","Arg","AR%sT","-7603200000"],["180","Arg","AR%sT","389059200000"],["240","Chile","CL%sT","1430017200000"],["180","-","CLT",null]],"America/Bogota":[["296.2666666666667","-","LMT","-2707689600000"],["296.2666666666667","-","BMT","-1739059200000"],["300","CO","CO%sT",null]],"America/Curacao":[["275.7833333333333","-","LMT","-1826755200000"],["270","-","ANT","-126316800000"],["240","-","AST",null]],"America/Lower_Princes":"America/Curacao","America/Kralendijk":"America/Curacao","America/Guayaquil":[["319.3333333333333","-","LMT","-2493072000000"],["314","-","QMT","-1199318400000"],["300","-","ECT",null]],"Pacific/Galapagos":[["358.4","-","LMT","-1199318400000"],["300","-","ECT","536371200000"],["360","-","GALT",null]],"Atlantic/Stanley":[["231.4","-","LMT","-2493072000000"],["231.4","-","SMT","-1824249600000"],["240","Falk","FK%sT","420595200000"],["180","Falk","FK%sT","495590400000"],["240","Falk","FK%sT","1283652000000"],["180","-","FKST",null]],"America/Cayenne":[["209.33333333333334","-","LMT","-1846281600000"],["240","-","GFT","-71107200000"],["180","-","GFT",null]],"America/Guyana":[["232.66666666666666","-","LMT","-1730592000000"],["225","-","GBGT","-113702400000"],["225","-","GYT","175996800000"],["180","-","GYT","694137600000"],["240","-","GYT",null]],"America/Asuncion":[["230.66666666666666","-","LMT","-2493072000000"],["230.66666666666666","-","AMT","-1206403200000"],["240","-","PYT","86745600000"],["180","-","PYT","134006400000"],["240","Para","PY%sT",null]],"America/Lima":[["308.2","-","LMT","-2493072000000"],["308.6","-","LMT","-1938556800000"],["300","Peru","PE%sT",null]],"Atlantic/South_Georgia":[["146.13333333333335","-","LMT","-2493072000000"],["120","-","GST",null]],"America/Paramaribo":[["220.66666666666666","-","LMT","-1830470400000"],["220.86666666666665","-","PMT","-1073088000000"],["220.6","-","PMT","-765331200000"],["210","-","NEGT","185673600000"],["210","-","SRT","465436800000"],["180","-","SRT",null]],"America/Port_of_Spain":[["246.06666666666666","-","LMT","-1825113600000"],["240","-","AST",null]],"America/Anguilla":"America/Port_of_Spain","America/Antigua":"America/Port_of_Spain","America/Dominica":"America/Port_of_Spain","America/Grenada":"America/Port_of_Spain","America/Guadeloupe":"America/Port_of_Spain","America/Marigot":"America/Port_of_Spain","America/Montserrat":"America/Port_of_Spain","America/St_Barthelemy":"America/Port_of_Spain","America/St_Kitts":"America/Port_of_Spain","America/St_Lucia":"America/Port_of_Spain","America/St_Thomas":"America/Port_of_Spain","America/St_Vincent":"America/Port_of_Spain","America/Tortola":"America/Port_of_Spain","America/Montevideo":[["224.73333333333335","-","LMT","-2256681600000"],["224.73333333333335","-","MMT","-1567468800000"],["210","Uruguay","UY%sT","-853632000000"],["180","Uruguay","UY%sT",null]],"America/Caracas":[["267.7333333333333","-","LMT","-2493072000000"],["267.6666666666667","-","CMT","-1826755200000"],["270","-","VET","-126316800000"],["240","-","VET","1197169200000"],["270","-","VET",null]]},rules:{Algeria:[["1916","only","-","Jun","14",["23","0","0","s"],"60","S"],["1916","1919","-","Oct","Sun>=1",["23","0","0","s"],"0","-"],["1917","only","-","Mar","24",["23","0","0","s"],"60","S"],["1918","only","-","Mar","9",["23","0","0","s"],"60","S"],["1919","only","-","Mar","1",["23","0","0","s"],"60","S"],["1920","only","-","Feb","14",["23","0","0","s"],"60","S"],["1920","only","-","Oct","23",["23","0","0","s"],"0","-"],["1921","only","-","Mar","14",["23","0","0","s"],"60","S"],["1921","only","-","Jun","21",["23","0","0","s"],"0","-"],["1939","only","-","Sep","11",["23","0","0","s"],"60","S"],["1939","only","-","Nov","19",["1","0","0",null],"0","-"],["1944","1945","-","Apr","Mon>=1",["2","0","0",null],"60","S"],["1944","only","-","Oct","8",["2","0","0",null],"0","-"],["1945","only","-","Sep","16",["1","0","0",null],"0","-"],["1971","only","-","Apr","25",["23","0","0","s"],"60","S"],["1971","only","-","Sep","26",["23","0","0","s"],"0","-"],["1977","only","-","May","6",["0","0","0",null],"60","S"],["1977","only","-","Oct","21",["0","0","0",null],"0","-"],["1978","only","-","Mar","24",["1","0","0",null],"60","S"],["1978","only","-","Sep","22",["3","0","0",null],"0","-"],["1980","only","-","Apr","25",["0","0","0",null],"60","S"],["1980","only","-","Oct","31",["2","0","0",null],"0","-"]],Egypt:[["1940","only","-","Jul","15",["0","0","0",null],"60","S"],["1940","only","-","Oct","1",["0","0","0",null],"0","-"],["1941","only","-","Apr","15",["0","0","0",null],"60","S"],["1941","only","-","Sep","16",["0","0","0",null],"0","-"],["1942","1944","-","Apr","1",["0","0","0",null],"60","S"],["1942","only","-","Oct","27",["0","0","0",null],"0","-"],["1943","1945","-","Nov","1",["0","0","0",null],"0","-"],["1945","only","-","Apr","16",["0","0","0",null],"60","S"],["1957","only","-","May","10",["0","0","0",null],"60","S"],["1957","1958","-","Oct","1",["0","0","0",null],"0","-"],["1958","only","-","May","1",["0","0","0",null],"60","S"],["1959","1981","-","May","1",["1","0","0",null],"60","S"],["1959","1965","-","Sep","30",["3","0","0",null],"0","-"],["1966","1994","-","Oct","1",["3","0","0",null],"0","-"],["1982","only","-","Jul","25",["1","0","0",null],"60","S"],["1983","only","-","Jul","12",["1","0","0",null],"60","S"],["1984","1988","-","May","1",["1","0","0",null],"60","S"],["1989","only","-","May","6",["1","0","0",null],"60","S"],["1990","1994","-","May","1",["1","0","0",null],"60","S"],["1995","2010","-","Apr","lastFri",["0","0","0","s"],"60","S"],["1995","2005","-","Sep","lastThu",["24","0","0",null],"0","-"],["2006","only","-","Sep","21",["24","0","0",null],"0","-"],["2007","only","-","Sep","Thu>=1",["24","0","0",null],"0","-"],["2008","only","-","Aug","lastThu",["24","0","0",null],"0","-"],["2009","only","-","Aug","20",["24","0","0",null],"0","-"],["2010","only","-","Aug","10",["24","0","0",null],"0","-"],["2010","only","-","Sep","9",["24","0","0",null],"60","S"],["2010","only","-","Sep","lastThu",["24","0","0",null],"0","-"],["2014","only","-","May","15",["24","0","0",null],"60","S"],["2014","only","-","Jun","26",["24","0","0",null],"0","-"],["2014","only","-","Jul","31",["24","0","0",null],"60","S"],["2014","only","-","Sep","lastThu",["24","0","0",null],"0","-"]],Ghana:[["1920","1942","-","Sep","1",["0","0","0",null],"20","GHST"],["1920","1942","-","Dec","31",["0","0","0",null],"0","GMT"]],Libya:[["1951","only","-","Oct","14",["2","0","0",null],"60","S"],["1952","only","-","Jan","1",["0","0","0",null],"0","-"],["1953","only","-","Oct","9",["2","0","0",null],"60","S"],["1954","only","-","Jan","1",["0","0","0",null],"0","-"],["1955","only","-","Sep","30",["0","0","0",null],"60","S"],["1956","only","-","Jan","1",["0","0","0",null],"0","-"],["1982","1984","-","Apr","1",["0","0","0",null],"60","S"],["1982","1985","-","Oct","1",["0","0","0",null],"0","-"],["1985","only","-","Apr","6",["0","0","0",null],"60","S"],["1986","only","-","Apr","4",["0","0","0",null],"60","S"],["1986","only","-","Oct","3",["0","0","0",null],"0","-"],["1987","1989","-","Apr","1",["0","0","0",null],"60","S"],["1987","1989","-","Oct","1",["0","0","0",null],"0","-"],["1997","only","-","Apr","4",["0","0","0",null],"60","S"],["1997","only","-","Oct","4",["0","0","0",null],"0","-"],["2013","only","-","Mar","lastFri",["1","0","0",null],"60","S"],["2013","only","-","Oct","lastFri",["2","0","0",null],"0","-"]],Mauritius:[["1982","only","-","Oct","10",["0","0","0",null],"60","S"],["1983","only","-","Mar","21",["0","0","0",null],"0","-"],["2008","only","-","Oct","lastSun",["2","0","0",null],"60","S"],["2009","only","-","Mar","lastSun",["2","0","0",null],"0","-"]],Morocco:[["1939","only","-","Sep","12",["0","0","0",null],"60","S"],["1939","only","-","Nov","19",["0","0","0",null],"0","-"],["1940","only","-","Feb","25",["0","0","0",null],"60","S"],["1945","only","-","Nov","18",["0","0","0",null],"0","-"],["1950","only","-","Jun","11",["0","0","0",null],"60","S"],["1950","only","-","Oct","29",["0","0","0",null],"0","-"],["1967","only","-","Jun","3",["12","0","0",null],"60","S"],["1967","only","-","Oct","1",["0","0","0",null],"0","-"],["1974","only","-","Jun","24",["0","0","0",null],"60","S"],["1974","only","-","Sep","1",["0","0","0",null],"0","-"],["1976","1977","-","May","1",["0","0","0",null],"60","S"],["1976","only","-","Aug","1",["0","0","0",null],"0","-"],["1977","only","-","Sep","28",["0","0","0",null],"0","-"],["1978","only","-","Jun","1",["0","0","0",null],"60","S"],["1978","only","-","Aug","4",["0","0","0",null],"0","-"],["2008","only","-","Jun","1",["0","0","0",null],"60","S"],["2008","only","-","Sep","1",["0","0","0",null],"0","-"],["2009","only","-","Jun","1",["0","0","0",null],"60","S"],["2009","only","-","Aug","21",["0","0","0",null],"0","-"],["2010","only","-","May","2",["0","0","0",null],"60","S"],["2010","only","-","Aug","8",["0","0","0",null],"0","-"],["2011","only","-","Apr","3",["0","0","0",null],"60","S"],["2011","only","-","Jul","31",["0","0","0",null],"0","-"],["2012","2013","-","Apr","lastSun",["2","0","0",null],"60","S"],["2012","only","-","Sep","30",["3","0","0",null],"0","-"],["2012","only","-","Jul","20",["3","0","0",null],"0","-"],["2012","only","-","Aug","20",["2","0","0",null],"60","S"],["2013","only","-","Jul","7",["3","0","0",null],"0","-"],["2013","only","-","Aug","10",["2","0","0",null],"60","S"],["2013","max","-","Oct","lastSun",["3","0","0",null],"0","-"],["2014","2022","-","Mar","lastSun",["2","0","0",null],"60","S"],["2014","only","-","Jun","28",["3","0","0",null],"0","-"],["2014","only","-","Aug","2",["2","0","0",null],"60","S"],["2015","only","-","Jun","13",["3","0","0",null],"0","-"],["2015","only","-","Jul","18",["2","0","0",null],"60","S"],["2016","only","-","Jun","4",["3","0","0",null],"0","-"],["2016","only","-","Jul","9",["2","0","0",null],"60","S"],["2017","only","-","May","20",["3","0","0",null],"0","-"],["2017","only","-","Jul","1",["2","0","0",null],"60","S"],["2018","only","-","May","12",["3","0","0",null],"0","-"],["2018","only","-","Jun","16",["2","0","0",null],"60","S"],["2019","only","-","May","4",["3","0","0",null],"0","-"],["2019","only","-","Jun","8",["2","0","0",null],"60","S"],["2020","only","-","Apr","18",["3","0","0",null],"0","-"],["2020","only","-","May","30",["2","0","0",null],"60","S"],["2021","only","-","Apr","10",["3","0","0",null],"0","-"],["2021","only","-","May","15",["2","0","0",null],"60","S"],["2022","only","-","Apr","2",["3","0","0",null],"0","-"],["2022","only","-","May","7",["2","0","0",null],"60","S"],["2023","only","-","Apr","22",["2","0","0",null],"60","S"],["2024","only","-","Apr","13",["2","0","0",null],"60","S"],["2025","only","-","Apr","5",["2","0","0",null],"60","S"],["2026","max","-","Mar","lastSun",["2","0","0",null],"60","S"],["2035","only","-","Oct","27",["3","0","0",null],"0","-"],["2036","only","-","Oct","18",["3","0","0",null],"0","-"],["2037","only","-","Oct","10",["3","0","0",null],"0","-"]],Namibia:[["1994","max","-","Sep","Sun>=1",["2","0","0",null],"60","S"],["1995","max","-","Apr","Sun>=1",["2","0","0",null],"0","-"]],SA:[["1942","1943","-","Sep","Sun>=15",["2","0","0",null],"60","-"],["1943","1944","-","Mar","Sun>=15",["2","0","0",null],"0","-"]],Sudan:[["1970","only","-","May","1",["0","0","0",null],"60","S"],["1970","1985","-","Oct","15",["0","0","0",null],"0","-"],["1971","only","-","Apr","30",["0","0","0",null],"60","S"],["1972","1985","-","Apr","lastSun",["0","0","0",null],"60","S"]],Tunisia:[["1939","only","-","Apr","15",["23","0","0","s"],"60","S"],["1939","only","-","Nov","18",["23","0","0","s"],"0","-"],["1940","only","-","Feb","25",["23","0","0","s"],"60","S"],["1941","only","-","Oct","6",["0","0","0",null],"0","-"],["1942","only","-","Mar","9",["0","0","0",null],"60","S"],["1942","only","-","Nov","2",["3","0","0",null],"0","-"],["1943","only","-","Mar","29",["2","0","0",null],"60","S"],["1943","only","-","Apr","17",["2","0","0",null],"0","-"],["1943","only","-","Apr","25",["2","0","0",null],"60","S"],["1943","only","-","Oct","4",["2","0","0",null],"0","-"],["1944","1945","-","Apr","Mon>=1",["2","0","0",null],"60","S"],["1944","only","-","Oct","8",["0","0","0",null],"0","-"],["1945","only","-","Sep","16",["0","0","0",null],"0","-"],["1977","only","-","Apr","30",["0","0","0","s"],"60","S"],["1977","only","-","Sep","24",["0","0","0","s"],"0","-"],["1978","only","-","May","1",["0","0","0","s"],"60","S"],["1978","only","-","Oct","1",["0","0","0","s"],"0","-"],["1988","only","-","Jun","1",["0","0","0","s"],"60","S"],["1988","1990","-","Sep","lastSun",["0","0","0","s"],"0","-"],["1989","only","-","Mar","26",["0","0","0","s"],"60","S"],["1990","only","-","May","1",["0","0","0","s"],"60","S"],["2005","only","-","May","1",["0","0","0","s"],"60","S"],["2005","only","-","Sep","30",["1","0","0","s"],"0","-"],["2006","2008","-","Mar","lastSun",["2","0","0","s"],"60","S"],["2006","2008","-","Oct","lastSun",["2","0","0","s"],"0","-"]],
Troll:[["2005","max","-","Mar","lastSun",["1","0","0","u"],"120","CEST"],["2004","max","-","Oct","lastSun",["1","0","0","u"],"0","UTC"]],EUAsia:[["1981","max","-","Mar","lastSun",["1","0","0","u"],"60","S"],["1979","1995","-","Sep","lastSun",["1","0","0","u"],"0","-"],["1996","max","-","Oct","lastSun",["1","0","0","u"],"0","-"]],"E-EurAsia":[["1981","max","-","Mar","lastSun",["0","0","0",null],"60","S"],["1979","1995","-","Sep","lastSun",["0","0","0",null],"0","-"],["1996","max","-","Oct","lastSun",["0","0","0",null],"0","-"]],RussiaAsia:[["1981","1984","-","Apr","1",["0","0","0",null],"60","S"],["1981","1983","-","Oct","1",["0","0","0",null],"0","-"],["1984","1991","-","Sep","lastSun",["2","0","0","s"],"0","-"],["1985","1991","-","Mar","lastSun",["2","0","0","s"],"60","S"],["1992","only","-","Mar","lastSat",["23","0","0",null],"60","S"],["1992","only","-","Sep","lastSat",["23","0","0",null],"0","-"],["1993","max","-","Mar","lastSun",["2","0","0","s"],"60","S"],["1993","1995","-","Sep","lastSun",["2","0","0","s"],"0","-"],["1996","max","-","Oct","lastSun",["2","0","0","s"],"0","-"]],Azer:[["1997","max","-","Mar","lastSun",["4","0","0",null],"60","S"],["1997","max","-","Oct","lastSun",["5","0","0",null],"0","-"]],Dhaka:[["2009","only","-","Jun","19",["23","0","0",null],"60","S"],["2009","only","-","Dec","31",["24","0","0",null],"0","-"]],Shang:[["1940","only","-","Jun","3",["0","0","0",null],"60","D"],["1940","1941","-","Oct","1",["0","0","0",null],"0","S"],["1941","only","-","Mar","16",["0","0","0",null],"60","D"]],PRC:[["1986","only","-","May","4",["0","0","0",null],"60","D"],["1986","1991","-","Sep","Sun>=11",["0","0","0",null],"0","S"],["1987","1991","-","Apr","Sun>=10",["0","0","0",null],"60","D"]],HK:[["1941","only","-","Apr","1",["3","30","0",null],"60","S"],["1941","only","-","Sep","30",["3","30","0",null],"0","-"],["1946","only","-","Apr","20",["3","30","0",null],"60","S"],["1946","only","-","Dec","1",["3","30","0",null],"0","-"],["1947","only","-","Apr","13",["3","30","0",null],"60","S"],["1947","only","-","Dec","30",["3","30","0",null],"0","-"],["1948","only","-","May","2",["3","30","0",null],"60","S"],["1948","1951","-","Oct","lastSun",["3","30","0",null],"0","-"],["1952","only","-","Oct","25",["3","30","0",null],"0","-"],["1949","1953","-","Apr","Sun>=1",["3","30","0",null],"60","S"],["1953","only","-","Nov","1",["3","30","0",null],"0","-"],["1954","1964","-","Mar","Sun>=18",["3","30","0",null],"60","S"],["1954","only","-","Oct","31",["3","30","0",null],"0","-"],["1955","1964","-","Nov","Sun>=1",["3","30","0",null],"0","-"],["1965","1976","-","Apr","Sun>=16",["3","30","0",null],"60","S"],["1965","1976","-","Oct","Sun>=16",["3","30","0",null],"0","-"],["1973","only","-","Dec","30",["3","30","0",null],"60","S"],["1979","only","-","May","Sun>=8",["3","30","0",null],"60","S"],["1979","only","-","Oct","Sun>=16",["3","30","0",null],"0","-"]],Taiwan:[["1946","only","-","May","15",["0","0","0",null],"60","D"],["1946","only","-","Oct","1",["0","0","0",null],"0","S"],["1947","only","-","Apr","15",["0","0","0",null],"60","D"],["1947","only","-","Nov","1",["0","0","0",null],"0","S"],["1948","1951","-","May","1",["0","0","0",null],"60","D"],["1948","1951","-","Oct","1",["0","0","0",null],"0","S"],["1952","only","-","Mar","1",["0","0","0",null],"60","D"],["1952","1954","-","Nov","1",["0","0","0",null],"0","S"],["1953","1959","-","Apr","1",["0","0","0",null],"60","D"],["1955","1961","-","Oct","1",["0","0","0",null],"0","S"],["1960","1961","-","Jun","1",["0","0","0",null],"60","D"],["1974","1975","-","Apr","1",["0","0","0",null],"60","D"],["1974","1975","-","Oct","1",["0","0","0",null],"0","S"],["1979","only","-","Jul","1",["0","0","0",null],"60","D"],["1979","only","-","Oct","1",["0","0","0",null],"0","S"]],Macau:[["1961","1962","-","Mar","Sun>=16",["3","30","0",null],"60","S"],["1961","1964","-","Nov","Sun>=1",["3","30","0",null],"0","-"],["1963","only","-","Mar","Sun>=16",["0","0","0",null],"60","S"],["1964","only","-","Mar","Sun>=16",["3","30","0",null],"60","S"],["1965","only","-","Mar","Sun>=16",["0","0","0",null],"60","S"],["1965","only","-","Oct","31",["0","0","0",null],"0","-"],["1966","1971","-","Apr","Sun>=16",["3","30","0",null],"60","S"],["1966","1971","-","Oct","Sun>=16",["3","30","0",null],"0","-"],["1972","1974","-","Apr","Sun>=15",["0","0","0",null],"60","S"],["1972","1973","-","Oct","Sun>=15",["0","0","0",null],"0","-"],["1974","1977","-","Oct","Sun>=15",["3","30","0",null],"0","-"],["1975","1977","-","Apr","Sun>=15",["3","30","0",null],"60","S"],["1978","1980","-","Apr","Sun>=15",["0","0","0",null],"60","S"],["1978","1980","-","Oct","Sun>=15",["0","0","0",null],"0","-"]],Cyprus:[["1975","only","-","Apr","13",["0","0","0",null],"60","S"],["1975","only","-","Oct","12",["0","0","0",null],"0","-"],["1976","only","-","May","15",["0","0","0",null],"60","S"],["1976","only","-","Oct","11",["0","0","0",null],"0","-"],["1977","1980","-","Apr","Sun>=1",["0","0","0",null],"60","S"],["1977","only","-","Sep","25",["0","0","0",null],"0","-"],["1978","only","-","Oct","2",["0","0","0",null],"0","-"],["1979","1997","-","Sep","lastSun",["0","0","0",null],"0","-"],["1981","1998","-","Mar","lastSun",["0","0","0",null],"60","S"]],Iran:[["1978","1980","-","Mar","21",["0","0","0",null],"60","D"],["1978","only","-","Oct","21",["0","0","0",null],"0","S"],["1979","only","-","Sep","19",["0","0","0",null],"0","S"],["1980","only","-","Sep","23",["0","0","0",null],"0","S"],["1991","only","-","May","3",["0","0","0",null],"60","D"],["1992","1995","-","Mar","22",["0","0","0",null],"60","D"],["1991","1995","-","Sep","22",["0","0","0",null],"0","S"],["1996","only","-","Mar","21",["0","0","0",null],"60","D"],["1996","only","-","Sep","21",["0","0","0",null],"0","S"],["1997","1999","-","Mar","22",["0","0","0",null],"60","D"],["1997","1999","-","Sep","22",["0","0","0",null],"0","S"],["2000","only","-","Mar","21",["0","0","0",null],"60","D"],["2000","only","-","Sep","21",["0","0","0",null],"0","S"],["2001","2003","-","Mar","22",["0","0","0",null],"60","D"],["2001","2003","-","Sep","22",["0","0","0",null],"0","S"],["2004","only","-","Mar","21",["0","0","0",null],"60","D"],["2004","only","-","Sep","21",["0","0","0",null],"0","S"],["2005","only","-","Mar","22",["0","0","0",null],"60","D"],["2005","only","-","Sep","22",["0","0","0",null],"0","S"],["2008","only","-","Mar","21",["0","0","0",null],"60","D"],["2008","only","-","Sep","21",["0","0","0",null],"0","S"],["2009","2011","-","Mar","22",["0","0","0",null],"60","D"],["2009","2011","-","Sep","22",["0","0","0",null],"0","S"],["2012","only","-","Mar","21",["0","0","0",null],"60","D"],["2012","only","-","Sep","21",["0","0","0",null],"0","S"],["2013","2015","-","Mar","22",["0","0","0",null],"60","D"],["2013","2015","-","Sep","22",["0","0","0",null],"0","S"],["2016","only","-","Mar","21",["0","0","0",null],"60","D"],["2016","only","-","Sep","21",["0","0","0",null],"0","S"],["2017","2019","-","Mar","22",["0","0","0",null],"60","D"],["2017","2019","-","Sep","22",["0","0","0",null],"0","S"],["2020","only","-","Mar","21",["0","0","0",null],"60","D"],["2020","only","-","Sep","21",["0","0","0",null],"0","S"],["2021","2023","-","Mar","22",["0","0","0",null],"60","D"],["2021","2023","-","Sep","22",["0","0","0",null],"0","S"],["2024","only","-","Mar","21",["0","0","0",null],"60","D"],["2024","only","-","Sep","21",["0","0","0",null],"0","S"],["2025","2027","-","Mar","22",["0","0","0",null],"60","D"],["2025","2027","-","Sep","22",["0","0","0",null],"0","S"],["2028","2029","-","Mar","21",["0","0","0",null],"60","D"],["2028","2029","-","Sep","21",["0","0","0",null],"0","S"],["2030","2031","-","Mar","22",["0","0","0",null],"60","D"],["2030","2031","-","Sep","22",["0","0","0",null],"0","S"],["2032","2033","-","Mar","21",["0","0","0",null],"60","D"],["2032","2033","-","Sep","21",["0","0","0",null],"0","S"],["2034","2035","-","Mar","22",["0","0","0",null],"60","D"],["2034","2035","-","Sep","22",["0","0","0",null],"0","S"],["2036","2037","-","Mar","21",["0","0","0",null],"60","D"],["2036","2037","-","Sep","21",["0","0","0",null],"0","S"]],Iraq:[["1982","only","-","May","1",["0","0","0",null],"60","D"],["1982","1984","-","Oct","1",["0","0","0",null],"0","S"],["1983","only","-","Mar","31",["0","0","0",null],"60","D"],["1984","1985","-","Apr","1",["0","0","0",null],"60","D"],["1985","1990","-","Sep","lastSun",["1","0","0","s"],"0","S"],["1986","1990","-","Mar","lastSun",["1","0","0","s"],"60","D"],["1991","2007","-","Apr","1",["3","0","0","s"],"60","D"],["1991","2007","-","Oct","1",["3","0","0","s"],"0","S"]],Zion:[["1940","only","-","Jun","1",["0","0","0",null],"60","D"],["1942","1944","-","Nov","1",["0","0","0",null],"0","S"],["1943","only","-","Apr","1",["2","0","0",null],"60","D"],["1944","only","-","Apr","1",["0","0","0",null],"60","D"],["1945","only","-","Apr","16",["0","0","0",null],"60","D"],["1945","only","-","Nov","1",["2","0","0",null],"0","S"],["1946","only","-","Apr","16",["2","0","0",null],"60","D"],["1946","only","-","Nov","1",["0","0","0",null],"0","S"],["1948","only","-","May","23",["0","0","0",null],"120","DD"],["1948","only","-","Sep","1",["0","0","0",null],"60","D"],["1948","1949","-","Nov","1",["2","0","0",null],"0","S"],["1949","only","-","May","1",["0","0","0",null],"60","D"],["1950","only","-","Apr","16",["0","0","0",null],"60","D"],["1950","only","-","Sep","15",["3","0","0",null],"0","S"],["1951","only","-","Apr","1",["0","0","0",null],"60","D"],["1951","only","-","Nov","11",["3","0","0",null],"0","S"],["1952","only","-","Apr","20",["2","0","0",null],"60","D"],["1952","only","-","Oct","19",["3","0","0",null],"0","S"],["1953","only","-","Apr","12",["2","0","0",null],"60","D"],["1953","only","-","Sep","13",["3","0","0",null],"0","S"],["1954","only","-","Jun","13",["0","0","0",null],"60","D"],["1954","only","-","Sep","12",["0","0","0",null],"0","S"],["1955","only","-","Jun","11",["2","0","0",null],"60","D"],["1955","only","-","Sep","11",["0","0","0",null],"0","S"],["1956","only","-","Jun","3",["0","0","0",null],"60","D"],["1956","only","-","Sep","30",["3","0","0",null],"0","S"],["1957","only","-","Apr","29",["2","0","0",null],"60","D"],["1957","only","-","Sep","22",["0","0","0",null],"0","S"],["1974","only","-","Jul","7",["0","0","0",null],"60","D"],["1974","only","-","Oct","13",["0","0","0",null],"0","S"],["1975","only","-","Apr","20",["0","0","0",null],"60","D"],["1975","only","-","Aug","31",["0","0","0",null],"0","S"],["1985","only","-","Apr","14",["0","0","0",null],"60","D"],["1985","only","-","Sep","15",["0","0","0",null],"0","S"],["1986","only","-","May","18",["0","0","0",null],"60","D"],["1986","only","-","Sep","7",["0","0","0",null],"0","S"],["1987","only","-","Apr","15",["0","0","0",null],"60","D"],["1987","only","-","Sep","13",["0","0","0",null],"0","S"],["1988","only","-","Apr","10",["0","0","0",null],"60","D"],["1988","only","-","Sep","4",["0","0","0",null],"0","S"],["1989","only","-","Apr","30",["0","0","0",null],"60","D"],["1989","only","-","Sep","3",["0","0","0",null],"0","S"],["1990","only","-","Mar","25",["0","0","0",null],"60","D"],["1990","only","-","Aug","26",["0","0","0",null],"0","S"],["1991","only","-","Mar","24",["0","0","0",null],"60","D"],["1991","only","-","Sep","1",["0","0","0",null],"0","S"],["1992","only","-","Mar","29",["0","0","0",null],"60","D"],["1992","only","-","Sep","6",["0","0","0",null],"0","S"],["1993","only","-","Apr","2",["0","0","0",null],"60","D"],["1993","only","-","Sep","5",["0","0","0",null],"0","S"],["1994","only","-","Apr","1",["0","0","0",null],"60","D"],["1994","only","-","Aug","28",["0","0","0",null],"0","S"],["1995","only","-","Mar","31",["0","0","0",null],"60","D"],["1995","only","-","Sep","3",["0","0","0",null],"0","S"],["1996","only","-","Mar","15",["0","0","0",null],"60","D"],["1996","only","-","Sep","16",["0","0","0",null],"0","S"],["1997","only","-","Mar","21",["0","0","0",null],"60","D"],["1997","only","-","Sep","14",["0","0","0",null],"0","S"],["1998","only","-","Mar","20",["0","0","0",null],"60","D"],["1998","only","-","Sep","6",["0","0","0",null],"0","S"],["1999","only","-","Apr","2",["2","0","0",null],"60","D"],["1999","only","-","Sep","3",["2","0","0",null],"0","S"],["2000","only","-","Apr","14",["2","0","0",null],"60","D"],["2000","only","-","Oct","6",["1","0","0",null],"0","S"],["2001","only","-","Apr","9",["1","0","0",null],"60","D"],["2001","only","-","Sep","24",["1","0","0",null],"0","S"],["2002","only","-","Mar","29",["1","0","0",null],"60","D"],["2002","only","-","Oct","7",["1","0","0",null],"0","S"],["2003","only","-","Mar","28",["1","0","0",null],"60","D"],["2003","only","-","Oct","3",["1","0","0",null],"0","S"],["2004","only","-","Apr","7",["1","0","0",null],"60","D"],["2004","only","-","Sep","22",["1","0","0",null],"0","S"],["2005","only","-","Apr","1",["2","0","0",null],"60","D"],["2005","only","-","Oct","9",["2","0","0",null],"0","S"],["2006","2010","-","Mar","Fri>=26",["2","0","0",null],"60","D"],["2006","only","-","Oct","1",["2","0","0",null],"0","S"],["2007","only","-","Sep","16",["2","0","0",null],"0","S"],["2008","only","-","Oct","5",["2","0","0",null],"0","S"],["2009","only","-","Sep","27",["2","0","0",null],"0","S"],["2010","only","-","Sep","12",["2","0","0",null],"0","S"],["2011","only","-","Apr","1",["2","0","0",null],"60","D"],["2011","only","-","Oct","2",["2","0","0",null],"0","S"],["2012","only","-","Mar","Fri>=26",["2","0","0",null],"60","D"],["2012","only","-","Sep","23",["2","0","0",null],"0","S"],["2013","max","-","Mar","Fri>=23",["2","0","0",null],"60","D"],["2013","max","-","Oct","lastSun",["2","0","0",null],"0","S"]],Japan:[["1948","only","-","May","Sun>=1",["2","0","0",null],"60","D"],["1948","1951","-","Sep","Sat>=8",["2","0","0",null],"0","S"],["1949","only","-","Apr","Sun>=1",["2","0","0",null],"60","D"],["1950","1951","-","May","Sun>=1",["2","0","0",null],"60","D"]],Jordan:[["1973","only","-","Jun","6",["0","0","0",null],"60","S"],["1973","1975","-","Oct","1",["0","0","0",null],"0","-"],["1974","1977","-","May","1",["0","0","0",null],"60","S"],["1976","only","-","Nov","1",["0","0","0",null],"0","-"],["1977","only","-","Oct","1",["0","0","0",null],"0","-"],["1978","only","-","Apr","30",["0","0","0",null],"60","S"],["1978","only","-","Sep","30",["0","0","0",null],"0","-"],["1985","only","-","Apr","1",["0","0","0",null],"60","S"],["1985","only","-","Oct","1",["0","0","0",null],"0","-"],["1986","1988","-","Apr","Fri>=1",["0","0","0",null],"60","S"],["1986","1990","-","Oct","Fri>=1",["0","0","0",null],"0","-"],["1989","only","-","May","8",["0","0","0",null],"60","S"],["1990","only","-","Apr","27",["0","0","0",null],"60","S"],["1991","only","-","Apr","17",["0","0","0",null],"60","S"],["1991","only","-","Sep","27",["0","0","0",null],"0","-"],["1992","only","-","Apr","10",["0","0","0",null],"60","S"],["1992","1993","-","Oct","Fri>=1",["0","0","0",null],"0","-"],["1993","1998","-","Apr","Fri>=1",["0","0","0",null],"60","S"],["1994","only","-","Sep","Fri>=15",["0","0","0",null],"0","-"],["1995","1998","-","Sep","Fri>=15",["0","0","0","s"],"0","-"],["1999","only","-","Jul","1",["0","0","0","s"],"60","S"],["1999","2002","-","Sep","lastFri",["0","0","0","s"],"0","-"],["2000","2001","-","Mar","lastThu",["0","0","0","s"],"60","S"],["2002","2012","-","Mar","lastThu",["24","0","0",null],"60","S"],["2003","only","-","Oct","24",["0","0","0","s"],"0","-"],["2004","only","-","Oct","15",["0","0","0","s"],"0","-"],["2005","only","-","Sep","lastFri",["0","0","0","s"],"0","-"],["2006","2011","-","Oct","lastFri",["0","0","0","s"],"0","-"],["2013","only","-","Dec","20",["0","0","0",null],"0","-"],["2014","max","-","Mar","lastThu",["24","0","0",null],"60","S"],["2014","max","-","Oct","lastFri",["0","0","0","s"],"0","-"]],Kyrgyz:[["1992","1996","-","Apr","Sun>=7",["0","0","0","s"],"60","S"],["1992","1996","-","Sep","lastSun",["0","0","0",null],"0","-"],["1997","2005","-","Mar","lastSun",["2","30","0",null],"60","S"],["1997","2004","-","Oct","lastSun",["2","30","0",null],"0","-"]],ROK:[["1948","only","-","Jun","1",["0","0","0",null],"60","D"],["1948","only","-","Sep","13",["0","0","0",null],"0","S"],["1949","only","-","Apr","3",["0","0","0",null],"60","D"],["1949","1951","-","Sep","Sun>=8",["0","0","0",null],"0","S"],["1950","only","-","Apr","1",["0","0","0",null],"60","D"],["1951","only","-","May","6",["0","0","0",null],"60","D"],["1955","only","-","May","5",["0","0","0",null],"60","D"],["1955","only","-","Sep","9",["0","0","0",null],"0","S"],["1956","only","-","May","20",["0","0","0",null],"60","D"],["1956","only","-","Sep","30",["0","0","0",null],"0","S"],["1957","1960","-","May","Sun>=1",["0","0","0",null],"60","D"],["1957","1960","-","Sep","Sun>=18",["0","0","0",null],"0","S"],["1987","1988","-","May","Sun>=8",["2","0","0",null],"60","D"],["1987","1988","-","Oct","Sun>=8",["3","0","0",null],"0","S"]],Lebanon:[["1920","only","-","Mar","28",["0","0","0",null],"60","S"],["1920","only","-","Oct","25",["0","0","0",null],"0","-"],["1921","only","-","Apr","3",["0","0","0",null],"60","S"],["1921","only","-","Oct","3",["0","0","0",null],"0","-"],["1922","only","-","Mar","26",["0","0","0",null],"60","S"],["1922","only","-","Oct","8",["0","0","0",null],"0","-"],["1923","only","-","Apr","22",["0","0","0",null],"60","S"],["1923","only","-","Sep","16",["0","0","0",null],"0","-"],["1957","1961","-","May","1",["0","0","0",null],"60","S"],["1957","1961","-","Oct","1",["0","0","0",null],"0","-"],["1972","only","-","Jun","22",["0","0","0",null],"60","S"],["1972","1977","-","Oct","1",["0","0","0",null],"0","-"],["1973","1977","-","May","1",["0","0","0",null],"60","S"],["1978","only","-","Apr","30",["0","0","0",null],"60","S"],["1978","only","-","Sep","30",["0","0","0",null],"0","-"],["1984","1987","-","May","1",["0","0","0",null],"60","S"],["1984","1991","-","Oct","16",["0","0","0",null],"0","-"],["1988","only","-","Jun","1",["0","0","0",null],"60","S"],["1989","only","-","May","10",["0","0","0",null],"60","S"],["1990","1992","-","May","1",["0","0","0",null],"60","S"],["1992","only","-","Oct","4",["0","0","0",null],"0","-"],["1993","max","-","Mar","lastSun",["0","0","0",null],"60","S"],["1993","1998","-","Sep","lastSun",["0","0","0",null],"0","-"],["1999","max","-","Oct","lastSun",["0","0","0",null],"0","-"]],NBorneo:[["1935","1941","-","Sep","14",["0","0","0",null],"20","TS",""],["1935","1941","-","Dec","14",["0","0","0",null],"0","-"]],Mongol:[["1983","1984","-","Apr","1",["0","0","0",null],"60","S"],["1983","only","-","Oct","1",["0","0","0",null],"0","-"],["1985","1998","-","Mar","lastSun",["0","0","0",null],"60","S"],["1984","1998","-","Sep","lastSun",["0","0","0",null],"0","-"],["2001","only","-","Apr","lastSat",["2","0","0",null],"60","S"],["2001","2006","-","Sep","lastSat",["2","0","0",null],"0","-"],["2002","2006","-","Mar","lastSat",["2","0","0",null],"60","S"],["2015","max","-","Mar","lastSat",["2","0","0",null],"60","S"],["2015","max","-","Sep","lastSat",["0","0","0",null],"0","-"]],Pakistan:[["2002","only","-","Apr","Sun>=2",["0","1","0",null],"60","S"],["2002","only","-","Oct","Sun>=2",["0","1","0",null],"0","-"],["2008","only","-","Jun","1",["0","0","0",null],"60","S"],["2008","2009","-","Nov","1",["0","0","0",null],"0","-"],["2009","only","-","Apr","15",["0","0","0",null],"60","S"]],EgyptAsia:[["1957","only","-","May","10",["0","0","0",null],"60","S"],["1957","1958","-","Oct","1",["0","0","0",null],"0","-"],["1958","only","-","May","1",["0","0","0",null],"60","S"],["1959","1967","-","May","1",["1","0","0",null],"60","S"],["1959","1965","-","Sep","30",["3","0","0",null],"0","-"],["1966","only","-","Oct","1",["3","0","0",null],"0","-"]],Palestine:[["1999","2005","-","Apr","Fri>=15",["0","0","0",null],"60","S"],["1999","2003","-","Oct","Fri>=15",["0","0","0",null],"0","-"],["2004","only","-","Oct","1",["1","0","0",null],"0","-"],["2005","only","-","Oct","4",["2","0","0",null],"0","-"],["2006","2007","-","Apr","1",["0","0","0",null],"60","S"],["2006","only","-","Sep","22",["0","0","0",null],"0","-"],["2007","only","-","Sep","Thu>=8",["2","0","0",null],"0","-"],["2008","2009","-","Mar","lastFri",["0","0","0",null],"60","S"],["2008","only","-","Sep","1",["0","0","0",null],"0","-"],["2009","only","-","Sep","Fri>=1",["1","0","0",null],"0","-"],["2010","only","-","Mar","26",["0","0","0",null],"60","S"],["2010","only","-","Aug","11",["0","0","0",null],"0","-"],["2011","only","-","Apr","1",["0","1","0",null],"60","S"],["2011","only","-","Aug","1",["0","0","0",null],"0","-"],["2011","only","-","Aug","30",["0","0","0",null],"60","S"],["2011","only","-","Sep","30",["0","0","0",null],"0","-"],["2012","2014","-","Mar","lastThu",["24","0","0",null],"60","S"],["2012","only","-","Sep","21",["1","0","0",null],"0","-"],["2013","only","-","Sep","Fri>=21",["0","0","0",null],"0","-"],["2014","max","-","Oct","Fri>=21",["0","0","0",null],"0","-"],["2015","max","-","Mar","lastFri",["24","0","0",null],"60","S"]],Phil:[["1936","only","-","Nov","1",["0","0","0",null],"60","S"],["1937","only","-","Feb","1",["0","0","0",null],"0","-"],["1954","only","-","Apr","12",["0","0","0",null],"60","S"],["1954","only","-","Jul","1",["0","0","0",null],"0","-"],["1978","only","-","Mar","22",["0","0","0",null],"60","S"],["1978","only","-","Sep","21",["0","0","0",null],"0","-"]],Syria:[["1920","1923","-","Apr","Sun>=15",["2","0","0",null],"60","S"],["1920","1923","-","Oct","Sun>=1",["2","0","0",null],"0","-"],["1962","only","-","Apr","29",["2","0","0",null],"60","S"],["1962","only","-","Oct","1",["2","0","0",null],"0","-"],["1963","1965","-","May","1",["2","0","0",null],"60","S"],["1963","only","-","Sep","30",["2","0","0",null],"0","-"],["1964","only","-","Oct","1",["2","0","0",null],"0","-"],["1965","only","-","Sep","30",["2","0","0",null],"0","-"],["1966","only","-","Apr","24",["2","0","0",null],"60","S"],["1966","1976","-","Oct","1",["2","0","0",null],"0","-"],["1967","1978","-","May","1",["2","0","0",null],"60","S"],["1977","1978","-","Sep","1",["2","0","0",null],"0","-"],["1983","1984","-","Apr","9",["2","0","0",null],"60","S"],["1983","1984","-","Oct","1",["2","0","0",null],"0","-"],["1986","only","-","Feb","16",["2","0","0",null],"60","S"],["1986","only","-","Oct","9",["2","0","0",null],"0","-"],["1987","only","-","Mar","1",["2","0","0",null],"60","S"],["1987","1988","-","Oct","31",["2","0","0",null],"0","-"],["1988","only","-","Mar","15",["2","0","0",null],"60","S"],["1989","only","-","Mar","31",["2","0","0",null],"60","S"],["1989","only","-","Oct","1",["2","0","0",null],"0","-"],["1990","only","-","Apr","1",["2","0","0",null],"60","S"],["1990","only","-","Sep","30",["2","0","0",null],"0","-"],["1991","only","-","Apr","1",["0","0","0",null],"60","S"],["1991","1992","-","Oct","1",["0","0","0",null],"0","-"],["1992","only","-","Apr","8",["0","0","0",null],"60","S"],["1993","only","-","Mar","26",["0","0","0",null],"60","S"],["1993","only","-","Sep","25",["0","0","0",null],"0","-"],["1994","1996","-","Apr","1",["0","0","0",null],"60","S"],["1994","2005","-","Oct","1",["0","0","0",null],"0","-"],["1997","1998","-","Mar","lastMon",["0","0","0",null],"60","S"],["1999","2006","-","Apr","1",["0","0","0",null],"60","S"],["2006","only","-","Sep","22",["0","0","0",null],"0","-"],["2007","only","-","Mar","lastFri",["0","0","0",null],"60","S"],["2007","only","-","Nov","Fri>=1",["0","0","0",null],"0","-"],["2008","only","-","Apr","Fri>=1",["0","0","0",null],"60","S"],["2008","only","-","Nov","1",["0","0","0",null],"0","-"],["2009","only","-","Mar","lastFri",["0","0","0",null],"60","S"],["2010","2011","-","Apr","Fri>=1",["0","0","0",null],"60","S"],["2012","max","-","Mar","lastFri",["0","0","0",null],"60","S"],["2009","max","-","Oct","lastFri",["0","0","0",null],"0","-"]],Aus:[["1917","only","-","Jan","1",["0","1","0",null],"60","D"],["1917","only","-","Mar","25",["2","0","0",null],"0","S"],["1942","only","-","Jan","1",["2","0","0",null],"60","D"],["1942","only","-","Mar","29",["2","0","0",null],"0","S"],["1942","only","-","Sep","27",["2","0","0",null],"60","D"],["1943","1944","-","Mar","lastSun",["2","0","0",null],"0","S"],["1943","only","-","Oct","3",["2","0","0",null],"60","D"]],AW:[["1974","only","-","Oct","lastSun",["2","0","0","s"],"60","D"],["1975","only","-","Mar","Sun>=1",["2","0","0","s"],"0","S"],["1983","only","-","Oct","lastSun",["2","0","0","s"],"60","D"],["1984","only","-","Mar","Sun>=1",["2","0","0","s"],"0","S"],["1991","only","-","Nov","17",["2","0","0","s"],"60","D"],["1992","only","-","Mar","Sun>=1",["2","0","0","s"],"0","S"],["2006","only","-","Dec","3",["2","0","0","s"],"60","D"],["2007","2009","-","Mar","lastSun",["2","0","0","s"],"0","S"],["2007","2008","-","Oct","lastSun",["2","0","0","s"],"60","D"]],AQ:[["1971","only","-","Oct","lastSun",["2","0","0","s"],"60","D"],["1972","only","-","Feb","lastSun",["2","0","0","s"],"0","S"],["1989","1991","-","Oct","lastSun",["2","0","0","s"],"60","D"],["1990","1992","-","Mar","Sun>=1",["2","0","0","s"],"0","S"]],Holiday:[["1992","1993","-","Oct","lastSun",["2","0","0","s"],"60","D"],["1993","1994","-","Mar","Sun>=1",["2","0","0","s"],"0","S"]],AS:[["1971","1985","-","Oct","lastSun",["2","0","0","s"],"60","D"],["1986","only","-","Oct","19",["2","0","0","s"],"60","D"],["1987","2007","-","Oct","lastSun",["2","0","0","s"],"60","D"],["1972","only","-","Feb","27",["2","0","0","s"],"0","S"],["1973","1985","-","Mar","Sun>=1",["2","0","0","s"],"0","S"],["1986","1990","-","Mar","Sun>=15",["2","0","0","s"],"0","S"],["1991","only","-","Mar","3",["2","0","0","s"],"0","S"],["1992","only","-","Mar","22",["2","0","0","s"],"0","S"],["1993","only","-","Mar","7",["2","0","0","s"],"0","S"],["1994","only","-","Mar","20",["2","0","0","s"],"0","S"],["1995","2005","-","Mar","lastSun",["2","0","0","s"],"0","S"],["2006","only","-","Apr","2",["2","0","0","s"],"0","S"],["2007","only","-","Mar","lastSun",["2","0","0","s"],"0","S"],["2008","max","-","Apr","Sun>=1",["2","0","0","s"],"0","S"],["2008","max","-","Oct","Sun>=1",["2","0","0","s"],"60","D"]],AT:[["1967","only","-","Oct","Sun>=1",["2","0","0","s"],"60","D"],["1968","only","-","Mar","lastSun",["2","0","0","s"],"0","S"],["1968","1985","-","Oct","lastSun",["2","0","0","s"],"60","D"],["1969","1971","-","Mar","Sun>=8",["2","0","0","s"],"0","S"],["1972","only","-","Feb","lastSun",["2","0","0","s"],"0","S"],["1973","1981","-","Mar","Sun>=1",["2","0","0","s"],"0","S"],["1982","1983","-","Mar","lastSun",["2","0","0","s"],"0","S"],["1984","1986","-","Mar","Sun>=1",["2","0","0","s"],"0","S"],["1986","only","-","Oct","Sun>=15",["2","0","0","s"],"60","D"],["1987","1990","-","Mar","Sun>=15",["2","0","0","s"],"0","S"],["1987","only","-","Oct","Sun>=22",["2","0","0","s"],"60","D"],["1988","1990","-","Oct","lastSun",["2","0","0","s"],"60","D"],["1991","1999","-","Oct","Sun>=1",["2","0","0","s"],"60","D"],["1991","2005","-","Mar","lastSun",["2","0","0","s"],"0","S"],["2000","only","-","Aug","lastSun",["2","0","0","s"],"60","D"],["2001","max","-","Oct","Sun>=1",["2","0","0","s"],"60","D"],["2006","only","-","Apr","Sun>=1",["2","0","0","s"],"0","S"],["2007","only","-","Mar","lastSun",["2","0","0","s"],"0","S"],["2008","max","-","Apr","Sun>=1",["2","0","0","s"],"0","S"]],AV:[["1971","1985","-","Oct","lastSun",["2","0","0","s"],"60","D"],["1972","only","-","Feb","lastSun",["2","0","0","s"],"0","S"],["1973","1985","-","Mar","Sun>=1",["2","0","0","s"],"0","S"],["1986","1990","-","Mar","Sun>=15",["2","0","0","s"],"0","S"],["1986","1987","-","Oct","Sun>=15",["2","0","0","s"],"60","D"],["1988","1999","-","Oct","lastSun",["2","0","0","s"],"60","D"],["1991","1994","-","Mar","Sun>=1",["2","0","0","s"],"0","S"],["1995","2005","-","Mar","lastSun",["2","0","0","s"],"0","S"],["2000","only","-","Aug","lastSun",["2","0","0","s"],"60","D"],["2001","2007","-","Oct","lastSun",["2","0","0","s"],"60","D"],["2006","only","-","Apr","Sun>=1",["2","0","0","s"],"0","S"],["2007","only","-","Mar","lastSun",["2","0","0","s"],"0","S"],["2008","max","-","Apr","Sun>=1",["2","0","0","s"],"0","S"],["2008","max","-","Oct","Sun>=1",["2","0","0","s"],"60","D"]],AN:[["1971","1985","-","Oct","lastSun",["2","0","0","s"],"60","D"],["1972","only","-","Feb","27",["2","0","0","s"],"0","S"],["1973","1981","-","Mar","Sun>=1",["2","0","0","s"],"0","S"],["1982","only","-","Apr","Sun>=1",["2","0","0","s"],"0","S"],["1983","1985","-","Mar","Sun>=1",["2","0","0","s"],"0","S"],["1986","1989","-","Mar","Sun>=15",["2","0","0","s"],"0","S"],["1986","only","-","Oct","19",["2","0","0","s"],"60","D"],["1987","1999","-","Oct","lastSun",["2","0","0","s"],"60","D"],["1990","1995","-","Mar","Sun>=1",["2","0","0","s"],"0","S"],["1996","2005","-","Mar","lastSun",["2","0","0","s"],"0","S"],["2000","only","-","Aug","lastSun",["2","0","0","s"],"60","D"],["2001","2007","-","Oct","lastSun",["2","0","0","s"],"60","D"],["2006","only","-","Apr","Sun>=1",["2","0","0","s"],"0","S"],["2007","only","-","Mar","lastSun",["2","0","0","s"],"0","S"],["2008","max","-","Apr","Sun>=1",["2","0","0","s"],"0","S"],["2008","max","-","Oct","Sun>=1",["2","0","0","s"],"60","D"]],LH:[["1981","1984","-","Oct","lastSun",["2","0","0",null],"60","D"],["1982","1985","-","Mar","Sun>=1",["2","0","0",null],"0","S"],["1985","only","-","Oct","lastSun",["2","0","0",null],"30","D"],["1986","1989","-","Mar","Sun>=15",["2","0","0",null],"0","S"],["1986","only","-","Oct","19",["2","0","0",null],"30","D"],["1987","1999","-","Oct","lastSun",["2","0","0",null],"30","D"],["1990","1995","-","Mar","Sun>=1",["2","0","0",null],"0","S"],["1996","2005","-","Mar","lastSun",["2","0","0",null],"0","S"],["2000","only","-","Aug","lastSun",["2","0","0",null],"30","D"],["2001","2007","-","Oct","lastSun",["2","0","0",null],"30","D"],["2006","only","-","Apr","Sun>=1",["2","0","0",null],"0","S"],["2007","only","-","Mar","lastSun",["2","0","0",null],"0","S"],["2008","max","-","Apr","Sun>=1",["2","0","0",null],"0","S"],["2008","max","-","Oct","Sun>=1",["2","0","0",null],"30","D"]],Fiji:[["1998","1999","-","Nov","Sun>=1",["2","0","0",null],"60","S"],["1999","2000","-","Feb","lastSun",["3","0","0",null],"0","-"],["2009","only","-","Nov","29",["2","0","0",null],"60","S"],["2010","only","-","Mar","lastSun",["3","0","0",null],"0","-"],["2010","2013","-","Oct","Sun>=21",["2","0","0",null],"60","S"],["2011","only","-","Mar","Sun>=1",["3","0","0",null],"0","-"],["2012","2013","-","Jan","Sun>=18",["3","0","0",null],"0","-"],["2014","only","-","Jan","Sun>=18",["2","0","0",null],"0","-"],["2014","max","-","Nov","Sun>=1",["2","0","0",null],"60","S"],["2015","max","-","Jan","Sun>=18",["3","0","0",null],"0","-"]],NC:[["1977","1978","-","Dec","Sun>=1",["0","0","0",null],"60","S"],["1978","1979","-","Feb","27",["0","0","0",null],"0","-"],["1996","only","-","Dec","1",["2","0","0","s"],"60","S"],["1997","only","-","Mar","2",["2","0","0","s"],"0","-"]],NZ:[["1927","only","-","Nov","6",["2","0","0",null],"60","S"],["1928","only","-","Mar","4",["2","0","0",null],"0","M"],["1928","1933","-","Oct","Sun>=8",["2","0","0",null],"30","S"],["1929","1933","-","Mar","Sun>=15",["2","0","0",null],"0","M"],["1934","1940","-","Apr","lastSun",["2","0","0",null],"0","M"],["1934","1940","-","Sep","lastSun",["2","0","0",null],"30","S"],["1946","only","-","Jan","1",["0","0","0",null],"0","S"],["1974","only","-","Nov","Sun>=1",["2","0","0","s"],"60","D"],["1975","only","-","Feb","lastSun",["2","0","0","s"],"0","S"],["1975","1988","-","Oct","lastSun",["2","0","0","s"],"60","D"],["1976","1989","-","Mar","Sun>=1",["2","0","0","s"],"0","S"],["1989","only","-","Oct","Sun>=8",["2","0","0","s"],"60","D"],["1990","2006","-","Oct","Sun>=1",["2","0","0","s"],"60","D"],["1990","2007","-","Mar","Sun>=15",["2","0","0","s"],"0","S"],["2007","max","-","Sep","lastSun",["2","0","0","s"],"60","D"],["2008","max","-","Apr","Sun>=1",["2","0","0","s"],"0","S"]],Chatham:[["1974","only","-","Nov","Sun>=1",["2","45","0","s"],"60","D"],["1975","only","-","Feb","lastSun",["2","45","0","s"],"0","S"],["1975","1988","-","Oct","lastSun",["2","45","0","s"],"60","D"],["1976","1989","-","Mar","Sun>=1",["2","45","0","s"],"0","S"],["1989","only","-","Oct","Sun>=8",["2","45","0","s"],"60","D"],["1990","2006","-","Oct","Sun>=1",["2","45","0","s"],"60","D"],["1990","2007","-","Mar","Sun>=15",["2","45","0","s"],"0","S"],["2007","max","-","Sep","lastSun",["2","45","0","s"],"60","D"],["2008","max","-","Apr","Sun>=1",["2","45","0","s"],"0","S"]],
Cook:[["1978","only","-","Nov","12",["0","0","0",null],"30","HS"],["1979","1991","-","Mar","Sun>=1",["0","0","0",null],"0","-"],["1979","1990","-","Oct","lastSun",["0","0","0",null],"30","HS"]],WS:[["2010","only","-","Sep","lastSun",["0","0","0",null],"60","D"],["2011","only","-","Apr","Sat>=1",["4","0","0",null],"0","S"],["2011","only","-","Sep","lastSat",["3","0","0",null],"60","D"],["2012","max","-","Apr","Sun>=1",["4","0","0",null],"0","S"],["2012","max","-","Sep","lastSun",["3","0","0",null],"60","D"]],Tonga:[["1999","only","-","Oct","7",["2","0","0","s"],"60","S"],["2000","only","-","Mar","19",["2","0","0","s"],"0","-"],["2000","2001","-","Nov","Sun>=1",["2","0","0",null],"60","S"],["2001","2002","-","Jan","lastSun",["2","0","0",null],"0","-"]],Vanuatu:[["1983","only","-","Sep","25",["0","0","0",null],"60","S"],["1984","1991","-","Mar","Sun>=23",["0","0","0",null],"0","-"],["1984","only","-","Oct","23",["0","0","0",null],"60","S"],["1985","1991","-","Sep","Sun>=23",["0","0","0",null],"60","S"],["1992","1993","-","Jan","Sun>=23",["0","0","0",null],"0","-"],["1992","only","-","Oct","Sun>=23",["0","0","0",null],"60","S"]],"GB-Eire":[["1916","only","-","May","21",["2","0","0","s"],"60","BST"],["1916","only","-","Oct","1",["2","0","0","s"],"0","GMT"],["1917","only","-","Apr","8",["2","0","0","s"],"60","BST"],["1917","only","-","Sep","17",["2","0","0","s"],"0","GMT"],["1918","only","-","Mar","24",["2","0","0","s"],"60","BST"],["1918","only","-","Sep","30",["2","0","0","s"],"0","GMT"],["1919","only","-","Mar","30",["2","0","0","s"],"60","BST"],["1919","only","-","Sep","29",["2","0","0","s"],"0","GMT"],["1920","only","-","Mar","28",["2","0","0","s"],"60","BST"],["1920","only","-","Oct","25",["2","0","0","s"],"0","GMT"],["1921","only","-","Apr","3",["2","0","0","s"],"60","BST"],["1921","only","-","Oct","3",["2","0","0","s"],"0","GMT"],["1922","only","-","Mar","26",["2","0","0","s"],"60","BST"],["1922","only","-","Oct","8",["2","0","0","s"],"0","GMT"],["1923","only","-","Apr","Sun>=16",["2","0","0","s"],"60","BST"],["1923","1924","-","Sep","Sun>=16",["2","0","0","s"],"0","GMT"],["1924","only","-","Apr","Sun>=9",["2","0","0","s"],"60","BST"],["1925","1926","-","Apr","Sun>=16",["2","0","0","s"],"60","BST"],["1925","1938","-","Oct","Sun>=2",["2","0","0","s"],"0","GMT"],["1927","only","-","Apr","Sun>=9",["2","0","0","s"],"60","BST"],["1928","1929","-","Apr","Sun>=16",["2","0","0","s"],"60","BST"],["1930","only","-","Apr","Sun>=9",["2","0","0","s"],"60","BST"],["1931","1932","-","Apr","Sun>=16",["2","0","0","s"],"60","BST"],["1933","only","-","Apr","Sun>=9",["2","0","0","s"],"60","BST"],["1934","only","-","Apr","Sun>=16",["2","0","0","s"],"60","BST"],["1935","only","-","Apr","Sun>=9",["2","0","0","s"],"60","BST"],["1936","1937","-","Apr","Sun>=16",["2","0","0","s"],"60","BST"],["1938","only","-","Apr","Sun>=9",["2","0","0","s"],"60","BST"],["1939","only","-","Apr","Sun>=16",["2","0","0","s"],"60","BST"],["1939","only","-","Nov","Sun>=16",["2","0","0","s"],"0","GMT"],["1940","only","-","Feb","Sun>=23",["2","0","0","s"],"60","BST"],["1941","only","-","May","Sun>=2",["1","0","0","s"],"120","BDST"],["1941","1943","-","Aug","Sun>=9",["1","0","0","s"],"60","BST"],["1942","1944","-","Apr","Sun>=2",["1","0","0","s"],"120","BDST"],["1944","only","-","Sep","Sun>=16",["1","0","0","s"],"60","BST"],["1945","only","-","Apr","Mon>=2",["1","0","0","s"],"120","BDST"],["1945","only","-","Jul","Sun>=9",["1","0","0","s"],"60","BST"],["1945","1946","-","Oct","Sun>=2",["2","0","0","s"],"0","GMT"],["1946","only","-","Apr","Sun>=9",["2","0","0","s"],"60","BST"],["1947","only","-","Mar","16",["2","0","0","s"],"60","BST"],["1947","only","-","Apr","13",["1","0","0","s"],"120","BDST"],["1947","only","-","Aug","10",["1","0","0","s"],"60","BST"],["1947","only","-","Nov","2",["2","0","0","s"],"0","GMT"],["1948","only","-","Mar","14",["2","0","0","s"],"60","BST"],["1948","only","-","Oct","31",["2","0","0","s"],"0","GMT"],["1949","only","-","Apr","3",["2","0","0","s"],"60","BST"],["1949","only","-","Oct","30",["2","0","0","s"],"0","GMT"],["1950","1952","-","Apr","Sun>=14",["2","0","0","s"],"60","BST"],["1950","1952","-","Oct","Sun>=21",["2","0","0","s"],"0","GMT"],["1953","only","-","Apr","Sun>=16",["2","0","0","s"],"60","BST"],["1953","1960","-","Oct","Sun>=2",["2","0","0","s"],"0","GMT"],["1954","only","-","Apr","Sun>=9",["2","0","0","s"],"60","BST"],["1955","1956","-","Apr","Sun>=16",["2","0","0","s"],"60","BST"],["1957","only","-","Apr","Sun>=9",["2","0","0","s"],"60","BST"],["1958","1959","-","Apr","Sun>=16",["2","0","0","s"],"60","BST"],["1960","only","-","Apr","Sun>=9",["2","0","0","s"],"60","BST"],["1961","1963","-","Mar","lastSun",["2","0","0","s"],"60","BST"],["1961","1968","-","Oct","Sun>=23",["2","0","0","s"],"0","GMT"],["1964","1967","-","Mar","Sun>=19",["2","0","0","s"],"60","BST"],["1968","only","-","Feb","18",["2","0","0","s"],"60","BST"],["1972","1980","-","Mar","Sun>=16",["2","0","0","s"],"60","BST"],["1972","1980","-","Oct","Sun>=23",["2","0","0","s"],"0","GMT"],["1981","1995","-","Mar","lastSun",["1","0","0","u"],"60","BST"],["1981","1989","-","Oct","Sun>=23",["1","0","0","u"],"0","GMT"],["1990","1995","-","Oct","Sun>=22",["1","0","0","u"],"0","GMT"]],EU:[["1977","1980","-","Apr","Sun>=1",["1","0","0","u"],"60","S"],["1977","only","-","Sep","lastSun",["1","0","0","u"],"0","-"],["1978","only","-","Oct","1",["1","0","0","u"],"0","-"],["1979","1995","-","Sep","lastSun",["1","0","0","u"],"0","-"],["1981","max","-","Mar","lastSun",["1","0","0","u"],"60","S"],["1996","max","-","Oct","lastSun",["1","0","0","u"],"0","-"]],"W-Eur":[["1977","1980","-","Apr","Sun>=1",["1","0","0","s"],"60","S"],["1977","only","-","Sep","lastSun",["1","0","0","s"],"0","-"],["1978","only","-","Oct","1",["1","0","0","s"],"0","-"],["1979","1995","-","Sep","lastSun",["1","0","0","s"],"0","-"],["1981","max","-","Mar","lastSun",["1","0","0","s"],"60","S"],["1996","max","-","Oct","lastSun",["1","0","0","s"],"0","-"]],"C-Eur":[["1916","only","-","Apr","30",["23","0","0",null],"60","S"],["1916","only","-","Oct","1",["1","0","0",null],"0","-"],["1917","1918","-","Apr","Mon>=15",["2","0","0","s"],"60","S"],["1917","1918","-","Sep","Mon>=15",["2","0","0","s"],"0","-"],["1940","only","-","Apr","1",["2","0","0","s"],"60","S"],["1942","only","-","Nov","2",["2","0","0","s"],"0","-"],["1943","only","-","Mar","29",["2","0","0","s"],"60","S"],["1943","only","-","Oct","4",["2","0","0","s"],"0","-"],["1944","1945","-","Apr","Mon>=1",["2","0","0","s"],"60","S"],["1944","only","-","Oct","2",["2","0","0","s"],"0","-"],["1945","only","-","Sep","16",["2","0","0","s"],"0","-"],["1977","1980","-","Apr","Sun>=1",["2","0","0","s"],"60","S"],["1977","only","-","Sep","lastSun",["2","0","0","s"],"0","-"],["1978","only","-","Oct","1",["2","0","0","s"],"0","-"],["1979","1995","-","Sep","lastSun",["2","0","0","s"],"0","-"],["1981","max","-","Mar","lastSun",["2","0","0","s"],"60","S"],["1996","max","-","Oct","lastSun",["2","0","0","s"],"0","-"]],"E-Eur":[["1977","1980","-","Apr","Sun>=1",["0","0","0",null],"60","S"],["1977","only","-","Sep","lastSun",["0","0","0",null],"0","-"],["1978","only","-","Oct","1",["0","0","0",null],"0","-"],["1979","1995","-","Sep","lastSun",["0","0","0",null],"0","-"],["1981","max","-","Mar","lastSun",["0","0","0",null],"60","S"],["1996","max","-","Oct","lastSun",["0","0","0",null],"0","-"]],Russia:[["1917","only","-","Jul","1",["23","0","0",null],"60","MST",""],["1917","only","-","Dec","28",["0","0","0",null],"0","MMT",""],["1918","only","-","May","31",["22","0","0",null],"120","MDST",""],["1918","only","-","Sep","16",["1","0","0",null],"60","MST"],["1919","only","-","May","31",["23","0","0",null],"120","MDST"],["1919","only","-","Jul","1",["2","0","0",null],"60","MSD"],["1919","only","-","Aug","16",["0","0","0",null],"0","MSK"],["1921","only","-","Feb","14",["23","0","0",null],"60","MSD"],["1921","only","-","Mar","20",["23","0","0",null],"120","MSM",""],["1921","only","-","Sep","1",["0","0","0",null],"60","MSD"],["1921","only","-","Oct","1",["0","0","0",null],"0","-"],["1981","1984","-","Apr","1",["0","0","0",null],"60","S"],["1981","1983","-","Oct","1",["0","0","0",null],"0","-"],["1984","1991","-","Sep","lastSun",["2","0","0","s"],"0","-"],["1985","1991","-","Mar","lastSun",["2","0","0","s"],"60","S"],["1992","only","-","Mar","lastSat",["23","0","0",null],"60","S"],["1992","only","-","Sep","lastSat",["23","0","0",null],"0","-"],["1993","2010","-","Mar","lastSun",["2","0","0","s"],"60","S"],["1993","1995","-","Sep","lastSun",["2","0","0","s"],"0","-"],["1996","2010","-","Oct","lastSun",["2","0","0","s"],"0","-"]],Albania:[["1940","only","-","Jun","16",["0","0","0",null],"60","S"],["1942","only","-","Nov","2",["3","0","0",null],"0","-"],["1943","only","-","Mar","29",["2","0","0",null],"60","S"],["1943","only","-","Apr","10",["3","0","0",null],"0","-"],["1974","only","-","May","4",["0","0","0",null],"60","S"],["1974","only","-","Oct","2",["0","0","0",null],"0","-"],["1975","only","-","May","1",["0","0","0",null],"60","S"],["1975","only","-","Oct","2",["0","0","0",null],"0","-"],["1976","only","-","May","2",["0","0","0",null],"60","S"],["1976","only","-","Oct","3",["0","0","0",null],"0","-"],["1977","only","-","May","8",["0","0","0",null],"60","S"],["1977","only","-","Oct","2",["0","0","0",null],"0","-"],["1978","only","-","May","6",["0","0","0",null],"60","S"],["1978","only","-","Oct","1",["0","0","0",null],"0","-"],["1979","only","-","May","5",["0","0","0",null],"60","S"],["1979","only","-","Sep","30",["0","0","0",null],"0","-"],["1980","only","-","May","3",["0","0","0",null],"60","S"],["1980","only","-","Oct","4",["0","0","0",null],"0","-"],["1981","only","-","Apr","26",["0","0","0",null],"60","S"],["1981","only","-","Sep","27",["0","0","0",null],"0","-"],["1982","only","-","May","2",["0","0","0",null],"60","S"],["1982","only","-","Oct","3",["0","0","0",null],"0","-"],["1983","only","-","Apr","18",["0","0","0",null],"60","S"],["1983","only","-","Oct","1",["0","0","0",null],"0","-"],["1984","only","-","Apr","1",["0","0","0",null],"60","S"]],Austria:[["1920","only","-","Apr","5",["2","0","0","s"],"60","S"],["1920","only","-","Sep","13",["2","0","0","s"],"0","-"],["1946","only","-","Apr","14",["2","0","0","s"],"60","S"],["1946","1948","-","Oct","Sun>=1",["2","0","0","s"],"0","-"],["1947","only","-","Apr","6",["2","0","0","s"],"60","S"],["1948","only","-","Apr","18",["2","0","0","s"],"60","S"],["1980","only","-","Apr","6",["0","0","0",null],"60","S"],["1980","only","-","Sep","28",["0","0","0",null],"0","-"]],Belgium:[["1918","only","-","Mar","9",["0","0","0","s"],"60","S"],["1918","1919","-","Oct","Sat>=1",["23","0","0","s"],"0","-"],["1919","only","-","Mar","1",["23","0","0","s"],"60","S"],["1920","only","-","Feb","14",["23","0","0","s"],"60","S"],["1920","only","-","Oct","23",["23","0","0","s"],"0","-"],["1921","only","-","Mar","14",["23","0","0","s"],"60","S"],["1921","only","-","Oct","25",["23","0","0","s"],"0","-"],["1922","only","-","Mar","25",["23","0","0","s"],"60","S"],["1922","1927","-","Oct","Sat>=1",["23","0","0","s"],"0","-"],["1923","only","-","Apr","21",["23","0","0","s"],"60","S"],["1924","only","-","Mar","29",["23","0","0","s"],"60","S"],["1925","only","-","Apr","4",["23","0","0","s"],"60","S"],["1926","only","-","Apr","17",["23","0","0","s"],"60","S"],["1927","only","-","Apr","9",["23","0","0","s"],"60","S"],["1928","only","-","Apr","14",["23","0","0","s"],"60","S"],["1928","1938","-","Oct","Sun>=2",["2","0","0","s"],"0","-"],["1929","only","-","Apr","21",["2","0","0","s"],"60","S"],["1930","only","-","Apr","13",["2","0","0","s"],"60","S"],["1931","only","-","Apr","19",["2","0","0","s"],"60","S"],["1932","only","-","Apr","3",["2","0","0","s"],"60","S"],["1933","only","-","Mar","26",["2","0","0","s"],"60","S"],["1934","only","-","Apr","8",["2","0","0","s"],"60","S"],["1935","only","-","Mar","31",["2","0","0","s"],"60","S"],["1936","only","-","Apr","19",["2","0","0","s"],"60","S"],["1937","only","-","Apr","4",["2","0","0","s"],"60","S"],["1938","only","-","Mar","27",["2","0","0","s"],"60","S"],["1939","only","-","Apr","16",["2","0","0","s"],"60","S"],["1939","only","-","Nov","19",["2","0","0","s"],"0","-"],["1940","only","-","Feb","25",["2","0","0","s"],"60","S"],["1944","only","-","Sep","17",["2","0","0","s"],"0","-"],["1945","only","-","Apr","2",["2","0","0","s"],"60","S"],["1945","only","-","Sep","16",["2","0","0","s"],"0","-"],["1946","only","-","May","19",["2","0","0","s"],"60","S"],["1946","only","-","Oct","7",["2","0","0","s"],"0","-"]],Bulg:[["1979","only","-","Mar","31",["23","0","0",null],"60","S"],["1979","only","-","Oct","1",["1","0","0",null],"0","-"],["1980","1982","-","Apr","Sat>=1",["23","0","0",null],"60","S"],["1980","only","-","Sep","29",["1","0","0",null],"0","-"],["1981","only","-","Sep","27",["2","0","0",null],"0","-"]],Czech:[["1945","only","-","Apr","8",["2","0","0","s"],"60","S"],["1945","only","-","Nov","18",["2","0","0","s"],"0","-"],["1946","only","-","May","6",["2","0","0","s"],"60","S"],["1946","1949","-","Oct","Sun>=1",["2","0","0","s"],"0","-"],["1947","only","-","Apr","20",["2","0","0","s"],"60","S"],["1948","only","-","Apr","18",["2","0","0","s"],"60","S"],["1949","only","-","Apr","9",["2","0","0","s"],"60","S"]],Denmark:[["1916","only","-","May","14",["23","0","0",null],"60","S"],["1916","only","-","Sep","30",["23","0","0",null],"0","-"],["1940","only","-","May","15",["0","0","0",null],"60","S"],["1945","only","-","Apr","2",["2","0","0","s"],"60","S"],["1945","only","-","Aug","15",["2","0","0","s"],"0","-"],["1946","only","-","May","1",["2","0","0","s"],"60","S"],["1946","only","-","Sep","1",["2","0","0","s"],"0","-"],["1947","only","-","May","4",["2","0","0","s"],"60","S"],["1947","only","-","Aug","10",["2","0","0","s"],"0","-"],["1948","only","-","May","9",["2","0","0","s"],"60","S"],["1948","only","-","Aug","8",["2","0","0","s"],"0","-"]],Thule:[["1991","1992","-","Mar","lastSun",["2","0","0",null],"60","D"],["1991","1992","-","Sep","lastSun",["2","0","0",null],"0","S"],["1993","2006","-","Apr","Sun>=1",["2","0","0",null],"60","D"],["1993","2006","-","Oct","lastSun",["2","0","0",null],"0","S"],["2007","max","-","Mar","Sun>=8",["2","0","0",null],"60","D"],["2007","max","-","Nov","Sun>=1",["2","0","0",null],"0","S"]],Finland:[["1942","only","-","Apr","2",["24","0","0",null],"60","S"],["1942","only","-","Oct","4",["1","0","0",null],"0","-"],["1981","1982","-","Mar","lastSun",["2","0","0",null],"60","S"],["1981","1982","-","Sep","lastSun",["3","0","0",null],"0","-"]],France:[["1916","only","-","Jun","14",["23","0","0","s"],"60","S"],["1916","1919","-","Oct","Sun>=1",["23","0","0","s"],"0","-"],["1917","only","-","Mar","24",["23","0","0","s"],"60","S"],["1918","only","-","Mar","9",["23","0","0","s"],"60","S"],["1919","only","-","Mar","1",["23","0","0","s"],"60","S"],["1920","only","-","Feb","14",["23","0","0","s"],"60","S"],["1920","only","-","Oct","23",["23","0","0","s"],"0","-"],["1921","only","-","Mar","14",["23","0","0","s"],"60","S"],["1921","only","-","Oct","25",["23","0","0","s"],"0","-"],["1922","only","-","Mar","25",["23","0","0","s"],"60","S"],["1922","1938","-","Oct","Sat>=1",["23","0","0","s"],"0","-"],["1923","only","-","May","26",["23","0","0","s"],"60","S"],["1924","only","-","Mar","29",["23","0","0","s"],"60","S"],["1925","only","-","Apr","4",["23","0","0","s"],"60","S"],["1926","only","-","Apr","17",["23","0","0","s"],"60","S"],["1927","only","-","Apr","9",["23","0","0","s"],"60","S"],["1928","only","-","Apr","14",["23","0","0","s"],"60","S"],["1929","only","-","Apr","20",["23","0","0","s"],"60","S"],["1930","only","-","Apr","12",["23","0","0","s"],"60","S"],["1931","only","-","Apr","18",["23","0","0","s"],"60","S"],["1932","only","-","Apr","2",["23","0","0","s"],"60","S"],["1933","only","-","Mar","25",["23","0","0","s"],"60","S"],["1934","only","-","Apr","7",["23","0","0","s"],"60","S"],["1935","only","-","Mar","30",["23","0","0","s"],"60","S"],["1936","only","-","Apr","18",["23","0","0","s"],"60","S"],["1937","only","-","Apr","3",["23","0","0","s"],"60","S"],["1938","only","-","Mar","26",["23","0","0","s"],"60","S"],["1939","only","-","Apr","15",["23","0","0","s"],"60","S"],["1939","only","-","Nov","18",["23","0","0","s"],"0","-"],["1940","only","-","Feb","25",["2","0","0",null],"60","S"],["1941","only","-","May","5",["0","0","0",null],"120","M",""],["1941","only","-","Oct","6",["0","0","0",null],"60","S"],["1942","only","-","Mar","9",["0","0","0",null],"120","M"],["1942","only","-","Nov","2",["3","0","0",null],"60","S"],["1943","only","-","Mar","29",["2","0","0",null],"120","M"],["1943","only","-","Oct","4",["3","0","0",null],"60","S"],["1944","only","-","Apr","3",["2","0","0",null],"120","M"],["1944","only","-","Oct","8",["1","0","0",null],"60","S"],["1945","only","-","Apr","2",["2","0","0",null],"120","M"],["1945","only","-","Sep","16",["3","0","0",null],"0","-"],["1976","only","-","Mar","28",["1","0","0",null],"60","S"],["1976","only","-","Sep","26",["1","0","0",null],"0","-"]],Germany:[["1946","only","-","Apr","14",["2","0","0","s"],"60","S"],["1946","only","-","Oct","7",["2","0","0","s"],"0","-"],["1947","1949","-","Oct","Sun>=1",["2","0","0","s"],"0","-"],["1947","only","-","Apr","6",["3","0","0","s"],"60","S"],["1947","only","-","May","11",["2","0","0","s"],"120","M"],["1947","only","-","Jun","29",["3","0","0",null],"60","S"],["1948","only","-","Apr","18",["2","0","0","s"],"60","S"],["1949","only","-","Apr","10",["2","0","0","s"],"60","S"]],SovietZone:[["1945","only","-","May","24",["2","0","0",null],"120","M",""],["1945","only","-","Sep","24",["3","0","0",null],"60","S"],["1945","only","-","Nov","18",["2","0","0","s"],"0","-"]],Greece:[["1932","only","-","Jul","7",["0","0","0",null],"60","S"],["1932","only","-","Sep","1",["0","0","0",null],"0","-"],["1941","only","-","Apr","7",["0","0","0",null],"60","S"],["1942","only","-","Nov","2",["3","0","0",null],"0","-"],["1943","only","-","Mar","30",["0","0","0",null],"60","S"],["1943","only","-","Oct","4",["0","0","0",null],"0","-"],["1952","only","-","Jul","1",["0","0","0",null],"60","S"],["1952","only","-","Nov","2",["0","0","0",null],"0","-"],["1975","only","-","Apr","12",["0","0","0","s"],"60","S"],["1975","only","-","Nov","26",["0","0","0","s"],"0","-"],["1976","only","-","Apr","11",["2","0","0","s"],"60","S"],["1976","only","-","Oct","10",["2","0","0","s"],"0","-"],["1977","1978","-","Apr","Sun>=1",["2","0","0","s"],"60","S"],["1977","only","-","Sep","26",["2","0","0","s"],"0","-"],["1978","only","-","Sep","24",["4","0","0",null],"0","-"],["1979","only","-","Apr","1",["9","0","0",null],"60","S"],["1979","only","-","Sep","29",["2","0","0",null],"0","-"],["1980","only","-","Apr","1",["0","0","0",null],"60","S"],["1980","only","-","Sep","28",["0","0","0",null],"0","-"]],Hungary:[["1918","only","-","Apr","1",["3","0","0",null],"60","S"],["1918","only","-","Sep","16",["3","0","0",null],"0","-"],["1919","only","-","Apr","15",["3","0","0",null],"60","S"],["1919","only","-","Nov","24",["3","0","0",null],"0","-"],["1945","only","-","May","1",["23","0","0",null],"60","S"],["1945","only","-","Nov","1",["0","0","0",null],"0","-"],["1946","only","-","Mar","31",["2","0","0","s"],"60","S"],["1946","1949","-","Oct","Sun>=1",["2","0","0","s"],"0","-"],["1947","1949","-","Apr","Sun>=4",["2","0","0","s"],"60","S"],["1950","only","-","Apr","17",["2","0","0","s"],"60","S"],["1950","only","-","Oct","23",["2","0","0","s"],"0","-"],["1954","1955","-","May","23",["0","0","0",null],"60","S"],["1954","1955","-","Oct","3",["0","0","0",null],"0","-"],["1956","only","-","Jun","Sun>=1",["0","0","0",null],"60","S"],["1956","only","-","Sep","lastSun",["0","0","0",null],"0","-"],["1957","only","-","Jun","Sun>=1",["1","0","0",null],"60","S"],["1957","only","-","Sep","lastSun",["3","0","0",null],"0","-"],["1980","only","-","Apr","6",["1","0","0",null],"60","S"]],Iceland:[["1917","1919","-","Feb","19",["23","0","0",null],"60","S"],["1917","only","-","Oct","21",["1","0","0",null],"0","-"],["1918","1919","-","Nov","16",["1","0","0",null],"0","-"],["1921","only","-","Mar","19",["23","0","0",null],"60","S"],["1921","only","-","Jun","23",["1","0","0",null],"0","-"],["1939","only","-","Apr","29",["23","0","0",null],"60","S"],["1939","only","-","Oct","29",["2","0","0",null],"0","-"],["1940","only","-","Feb","25",["2","0","0",null],"60","S"],["1940","1941","-","Nov","Sun>=2",["1","0","0","s"],"0","-"],["1941","1942","-","Mar","Sun>=2",["1","0","0","s"],"60","S"],["1943","1946","-","Mar","Sun>=1",["1","0","0","s"],"60","S"],["1942","1948","-","Oct","Sun>=22",["1","0","0","s"],"0","-"],["1947","1967","-","Apr","Sun>=1",["1","0","0","s"],"60","S"],["1949","only","-","Oct","30",["1","0","0","s"],"0","-"],["1950","1966","-","Oct","Sun>=22",["1","0","0","s"],"0","-"],["1967","only","-","Oct","29",["1","0","0","s"],"0","-"]],Italy:[["1916","only","-","Jun","3",["0","0","0","s"],"60","S"],["1916","only","-","Oct","1",["0","0","0","s"],"0","-"],["1917","only","-","Apr","1",["0","0","0","s"],"60","S"],["1917","only","-","Sep","30",["0","0","0","s"],"0","-"],["1918","only","-","Mar","10",["0","0","0","s"],"60","S"],["1918","1919","-","Oct","Sun>=1",["0","0","0","s"],"0","-"],["1919","only","-","Mar","2",["0","0","0","s"],"60","S"],["1920","only","-","Mar","21",["0","0","0","s"],"60","S"],["1920","only","-","Sep","19",["0","0","0","s"],"0","-"],["1940","only","-","Jun","15",["0","0","0","s"],"60","S"],["1944","only","-","Sep","17",["0","0","0","s"],"0","-"],["1945","only","-","Apr","2",["2","0","0",null],"60","S"],["1945","only","-","Sep","15",["0","0","0","s"],"0","-"],["1946","only","-","Mar","17",["2","0","0","s"],"60","S"],["1946","only","-","Oct","6",["2","0","0","s"],"0","-"],["1947","only","-","Mar","16",["0","0","0","s"],"60","S"],["1947","only","-","Oct","5",["0","0","0","s"],"0","-"],["1948","only","-","Feb","29",["2","0","0","s"],"60","S"],["1948","only","-","Oct","3",["2","0","0","s"],"0","-"],["1966","1968","-","May","Sun>=22",["0","0","0",null],"60","S"],["1966","1969","-","Sep","Sun>=22",["0","0","0",null],"0","-"],["1969","only","-","Jun","1",["0","0","0",null],"60","S"],["1970","only","-","May","31",["0","0","0",null],"60","S"],["1970","only","-","Sep","lastSun",["0","0","0",null],"0","-"],["1971","1972","-","May","Sun>=22",["0","0","0",null],"60","S"],["1971","only","-","Sep","lastSun",["1","0","0",null],"0","-"],["1972","only","-","Oct","1",["0","0","0",null],"0","-"],["1973","only","-","Jun","3",["0","0","0",null],"60","S"],["1973","1974","-","Sep","lastSun",["0","0","0",null],"0","-"],["1974","only","-","May","26",["0","0","0",null],"60","S"],["1975","only","-","Jun","1",["0","0","0","s"],"60","S"],["1975","1977","-","Sep","lastSun",["0","0","0","s"],"0","-"],["1976","only","-","May","30",["0","0","0","s"],"60","S"],["1977","1979","-","May","Sun>=22",["0","0","0","s"],"60","S"],["1978","only","-","Oct","1",["0","0","0","s"],"0","-"],["1979","only","-","Sep","30",["0","0","0","s"],"0","-"]],Latvia:[["1989","1996","-","Mar","lastSun",["2","0","0","s"],"60","S"],["1989","1996","-","Sep","lastSun",["2","0","0","s"],"0","-"]],Lux:[["1916","only","-","May","14",["23","0","0",null],"60","S"],["1916","only","-","Oct","1",["1","0","0",null],"0","-"],["1917","only","-","Apr","28",["23","0","0",null],"60","S"],["1917","only","-","Sep","17",["1","0","0",null],"0","-"],["1918","only","-","Apr","Mon>=15",["2","0","0","s"],"60","S"],["1918","only","-","Sep","Mon>=15",["2","0","0","s"],"0","-"],["1919","only","-","Mar","1",["23","0","0",null],"60","S"],["1919","only","-","Oct","5",["3","0","0",null],"0","-"],["1920","only","-","Feb","14",["23","0","0",null],"60","S"],["1920","only","-","Oct","24",["2","0","0",null],"0","-"],["1921","only","-","Mar","14",["23","0","0",null],"60","S"],["1921","only","-","Oct","26",["2","0","0",null],"0","-"],["1922","only","-","Mar","25",["23","0","0",null],"60","S"],["1922","only","-","Oct","Sun>=2",["1","0","0",null],"0","-"],["1923","only","-","Apr","21",["23","0","0",null],"60","S"],["1923","only","-","Oct","Sun>=2",["2","0","0",null],"0","-"],["1924","only","-","Mar","29",["23","0","0",null],"60","S"],["1924","1928","-","Oct","Sun>=2",["1","0","0",null],"0","-"],["1925","only","-","Apr","5",["23","0","0",null],"60","S"],["1926","only","-","Apr","17",["23","0","0",null],"60","S"],["1927","only","-","Apr","9",["23","0","0",null],"60","S"],["1928","only","-","Apr","14",["23","0","0",null],"60","S"],["1929","only","-","Apr","20",["23","0","0",null],"60","S"]],Malta:[["1973","only","-","Mar","31",["0","0","0","s"],"60","S"],["1973","only","-","Sep","29",["0","0","0","s"],"0","-"],["1974","only","-","Apr","21",["0","0","0","s"],"60","S"],["1974","only","-","Sep","16",["0","0","0","s"],"0","-"],["1975","1979","-","Apr","Sun>=15",["2","0","0",null],"60","S"],["1975","1980","-","Sep","Sun>=15",["2","0","0",null],"0","-"],["1980","only","-","Mar","31",["2","0","0",null],"60","S"]],Neth:[["1916","only","-","May","1",["0","0","0",null],"60","NST",""],["1916","only","-","Oct","1",["0","0","0",null],"0","AMT",""],["1917","only","-","Apr","16",["2","0","0","s"],"60","NST"],["1917","only","-","Sep","17",["2","0","0","s"],"0","AMT"],["1918","1921","-","Apr","Mon>=1",["2","0","0","s"],"60","NST"],["1918","1921","-","Sep","lastMon",["2","0","0","s"],"0","AMT"],["1922","only","-","Mar","lastSun",["2","0","0","s"],"60","NST"],["1922","1936","-","Oct","Sun>=2",["2","0","0","s"],"0","AMT"],["1923","only","-","Jun","Fri>=1",["2","0","0","s"],"60","NST"],["1924","only","-","Mar","lastSun",["2","0","0","s"],"60","NST"],["1925","only","-","Jun","Fri>=1",["2","0","0","s"],"60","NST"],["1926","1931","-","May","15",["2","0","0","s"],"60","NST"],["1932","only","-","May","22",["2","0","0","s"],"60","NST"],["1933","1936","-","May","15",["2","0","0","s"],"60","NST"],["1937","only","-","May","22",["2","0","0","s"],"60","NST"],["1937","only","-","Jul","1",["0","0","0",null],"60","S"],["1937","1939","-","Oct","Sun>=2",["2","0","0","s"],"0","-"],["1938","1939","-","May","15",["2","0","0","s"],"60","S"],["1945","only","-","Apr","2",["2","0","0","s"],"60","S"],["1945","only","-","Sep","16",["2","0","0","s"],"0","-"]],Norway:[["1916","only","-","May","22",["1","0","0",null],"60","S"],["1916","only","-","Sep","30",["0","0","0",null],"0","-"],["1945","only","-","Apr","2",["2","0","0","s"],"60","S"],["1945","only","-","Oct","1",["2","0","0","s"],"0","-"],["1959","1964","-","Mar","Sun>=15",["2","0","0","s"],"60","S"],["1959","1965","-","Sep","Sun>=15",["2","0","0","s"],"0","-"],["1965","only","-","Apr","25",["2","0","0","s"],"60","S"]],Poland:[["1918","1919","-","Sep","16",["2","0","0","s"],"0","-"],["1919","only","-","Apr","15",["2","0","0","s"],"60","S"],["1944","only","-","Apr","3",["2","0","0","s"],"60","S"],["1944","only","-","Oct","4",["2","0","0",null],"0","-"],["1945","only","-","Apr","29",["0","0","0",null],"60","S"],["1945","only","-","Nov","1",["0","0","0",null],"0","-"],["1946","only","-","Apr","14",["0","0","0","s"],"60","S"],["1946","only","-","Oct","7",["2","0","0","s"],"0","-"],["1947","only","-","May","4",["2","0","0","s"],"60","S"],["1947","1949","-","Oct","Sun>=1",["2","0","0","s"],"0","-"],["1948","only","-","Apr","18",["2","0","0","s"],"60","S"],["1949","only","-","Apr","10",["2","0","0","s"],"60","S"],["1957","only","-","Jun","2",["1","0","0","s"],"60","S"],["1957","1958","-","Sep","lastSun",["1","0","0","s"],"0","-"],["1958","only","-","Mar","30",["1","0","0","s"],"60","S"],["1959","only","-","May","31",["1","0","0","s"],"60","S"],["1959","1961","-","Oct","Sun>=1",["1","0","0","s"],"0","-"],["1960","only","-","Apr","3",["1","0","0","s"],"60","S"],["1961","1964","-","May","lastSun",["1","0","0","s"],"60","S"],["1962","1964","-","Sep","lastSun",["1","0","0","s"],"0","-"]],Port:[["1916","only","-","Jun","17",["23","0","0",null],"60","S"],["1916","only","-","Nov","1",["1","0","0",null],"0","-"],["1917","only","-","Feb","28",["23","0","0","s"],"60","S"],["1917","1921","-","Oct","14",["23","0","0","s"],"0","-"],["1918","only","-","Mar","1",["23","0","0","s"],"60","S"],["1919","only","-","Feb","28",["23","0","0","s"],"60","S"],["1920","only","-","Feb","29",["23","0","0","s"],"60","S"],["1921","only","-","Feb","28",["23","0","0","s"],"60","S"],["1924","only","-","Apr","16",["23","0","0","s"],"60","S"],["1924","only","-","Oct","14",["23","0","0","s"],"0","-"],["1926","only","-","Apr","17",["23","0","0","s"],"60","S"],["1926","1929","-","Oct","Sat>=1",["23","0","0","s"],"0","-"],["1927","only","-","Apr","9",["23","0","0","s"],"60","S"],["1928","only","-","Apr","14",["23","0","0","s"],"60","S"],["1929","only","-","Apr","20",["23","0","0","s"],"60","S"],["1931","only","-","Apr","18",["23","0","0","s"],"60","S"],["1931","1932","-","Oct","Sat>=1",["23","0","0","s"],"0","-"],["1932","only","-","Apr","2",["23","0","0","s"],"60","S"],["1934","only","-","Apr","7",["23","0","0","s"],"60","S"],["1934","1938","-","Oct","Sat>=1",["23","0","0","s"],"0","-"],["1935","only","-","Mar","30",["23","0","0","s"],"60","S"],["1936","only","-","Apr","18",["23","0","0","s"],"60","S"],["1937","only","-","Apr","3",["23","0","0","s"],"60","S"],["1938","only","-","Mar","26",["23","0","0","s"],"60","S"],["1939","only","-","Apr","15",["23","0","0","s"],"60","S"],["1939","only","-","Nov","18",["23","0","0","s"],"0","-"],["1940","only","-","Feb","24",["23","0","0","s"],"60","S"],["1940","1941","-","Oct","5",["23","0","0","s"],"0","-"],["1941","only","-","Apr","5",["23","0","0","s"],"60","S"],["1942","1945","-","Mar","Sat>=8",["23","0","0","s"],"60","S"],["1942","only","-","Apr","25",["22","0","0","s"],"120","M",""],["1942","only","-","Aug","15",["22","0","0","s"],"60","S"],["1942","1945","-","Oct","Sat>=24",["23","0","0","s"],"0","-"],["1943","only","-","Apr","17",["22","0","0","s"],"120","M"],["1943","1945","-","Aug","Sat>=25",["22","0","0","s"],"60","S"],["1944","1945","-","Apr","Sat>=21",["22","0","0","s"],"120","M"],["1946","only","-","Apr","Sat>=1",["23","0","0","s"],"60","S"],["1946","only","-","Oct","Sat>=1",["23","0","0","s"],"0","-"],["1947","1949","-","Apr","Sun>=1",["2","0","0","s"],"60","S"],["1947","1949","-","Oct","Sun>=1",["2","0","0","s"],"0","-"],["1951","1965","-","Apr","Sun>=1",["2","0","0","s"],"60","S"],["1951","1965","-","Oct","Sun>=1",["2","0","0","s"],"0","-"],["1977","only","-","Mar","27",["0","0","0","s"],"60","S"],["1977","only","-","Sep","25",["0","0","0","s"],"0","-"],["1978","1979","-","Apr","Sun>=1",["0","0","0","s"],"60","S"],["1978","only","-","Oct","1",["0","0","0","s"],"0","-"],["1979","1982","-","Sep","lastSun",["1","0","0","s"],"0","-"],["1980","only","-","Mar","lastSun",["0","0","0","s"],"60","S"],["1981","1982","-","Mar","lastSun",["1","0","0","s"],"60","S"],["1983","only","-","Mar","lastSun",["2","0","0","s"],"60","S"]],Romania:[["1932","only","-","May","21",["0","0","0","s"],"60","S"],["1932","1939","-","Oct","Sun>=1",["0","0","0","s"],"0","-"],["1933","1939","-","Apr","Sun>=2",["0","0","0","s"],"60","S"],["1979","only","-","May","27",["0","0","0",null],"60","S"],["1979","only","-","Sep","lastSun",["0","0","0",null],"0","-"],["1980","only","-","Apr","5",["23","0","0",null],"60","S"],["1980","only","-","Sep","lastSun",["1","0","0",null],"0","-"],["1991","1993","-","Mar","lastSun",["0","0","0","s"],"60","S"],["1991","1993","-","Sep","lastSun",["0","0","0","s"],"0","-"]],Spain:[["1917","only","-","May","5",["23","0","0","s"],"60","S"],["1917","1919","-","Oct","6",["23","0","0","s"],"0","-"],["1918","only","-","Apr","15",["23","0","0","s"],"60","S"],["1919","only","-","Apr","5",["23","0","0","s"],"60","S"],["1924","only","-","Apr","16",["23","0","0","s"],"60","S"],["1924","only","-","Oct","4",["23","0","0","s"],"0","-"],["1926","only","-","Apr","17",["23","0","0","s"],"60","S"],["1926","1929","-","Oct","Sat>=1",["23","0","0","s"],"0","-"],["1927","only","-","Apr","9",["23","0","0","s"],"60","S"],["1928","only","-","Apr","14",["23","0","0","s"],"60","S"],["1929","only","-","Apr","20",["23","0","0","s"],"60","S"],["1937","only","-","May","22",["23","0","0","s"],"60","S"],["1937","1939","-","Oct","Sat>=1",["23","0","0","s"],"0","-"],["1938","only","-","Mar","22",["23","0","0","s"],"60","S"],["1939","only","-","Apr","15",["23","0","0","s"],"60","S"],["1940","only","-","Mar","16",["23","0","0","s"],"60","S"],["1942","only","-","May","2",["22","0","0","s"],"120","M",""],["1942","only","-","Sep","1",["22","0","0","s"],"60","S"],["1943","1946","-","Apr","Sat>=13",["22","0","0","s"],"120","M"],["1943","only","-","Oct","3",["22","0","0","s"],"60","S"],["1944","only","-","Oct","10",["22","0","0","s"],"60","S"],["1945","only","-","Sep","30",["1","0","0",null],"60","S"],["1946","only","-","Sep","30",["0","0","0",null],"0","-"],["1949","only","-","Apr","30",["23","0","0",null],"60","S"],["1949","only","-","Sep","30",["1","0","0",null],"0","-"],["1974","1975","-","Apr","Sat>=13",["23","0","0",null],"60","S"],["1974","1975","-","Oct","Sun>=1",["1","0","0",null],"0","-"],["1976","only","-","Mar","27",["23","0","0",null],"60","S"],["1976","1977","-","Sep","lastSun",["1","0","0",null],"0","-"],["1977","1978","-","Apr","2",["23","0","0",null],"60","S"],["1978","only","-","Oct","1",["1","0","0",null],"0","-"]],
SpainAfrica:[["1967","only","-","Jun","3",["12","0","0",null],"60","S"],["1967","only","-","Oct","1",["0","0","0",null],"0","-"],["1974","only","-","Jun","24",["0","0","0",null],"60","S"],["1974","only","-","Sep","1",["0","0","0",null],"0","-"],["1976","1977","-","May","1",["0","0","0",null],"60","S"],["1976","only","-","Aug","1",["0","0","0",null],"0","-"],["1977","only","-","Sep","28",["0","0","0",null],"0","-"],["1978","only","-","Jun","1",["0","0","0",null],"60","S"],["1978","only","-","Aug","4",["0","0","0",null],"0","-"]],Swiss:[["1941","1942","-","May","Mon>=1",["1","0","0",null],"60","S"],["1941","1942","-","Oct","Mon>=1",["2","0","0",null],"0","-"]],Turkey:[["1916","only","-","May","1",["0","0","0",null],"60","S"],["1916","only","-","Oct","1",["0","0","0",null],"0","-"],["1920","only","-","Mar","28",["0","0","0",null],"60","S"],["1920","only","-","Oct","25",["0","0","0",null],"0","-"],["1921","only","-","Apr","3",["0","0","0",null],"60","S"],["1921","only","-","Oct","3",["0","0","0",null],"0","-"],["1922","only","-","Mar","26",["0","0","0",null],"60","S"],["1922","only","-","Oct","8",["0","0","0",null],"0","-"],["1924","only","-","May","13",["0","0","0",null],"60","S"],["1924","1925","-","Oct","1",["0","0","0",null],"0","-"],["1925","only","-","May","1",["0","0","0",null],"60","S"],["1940","only","-","Jun","30",["0","0","0",null],"60","S"],["1940","only","-","Oct","5",["0","0","0",null],"0","-"],["1940","only","-","Dec","1",["0","0","0",null],"60","S"],["1941","only","-","Sep","21",["0","0","0",null],"0","-"],["1942","only","-","Apr","1",["0","0","0",null],"60","S"],["1942","only","-","Nov","1",["0","0","0",null],"0","-"],["1945","only","-","Apr","2",["0","0","0",null],"60","S"],["1945","only","-","Oct","8",["0","0","0",null],"0","-"],["1946","only","-","Jun","1",["0","0","0",null],"60","S"],["1946","only","-","Oct","1",["0","0","0",null],"0","-"],["1947","1948","-","Apr","Sun>=16",["0","0","0",null],"60","S"],["1947","1950","-","Oct","Sun>=2",["0","0","0",null],"0","-"],["1949","only","-","Apr","10",["0","0","0",null],"60","S"],["1950","only","-","Apr","19",["0","0","0",null],"60","S"],["1951","only","-","Apr","22",["0","0","0",null],"60","S"],["1951","only","-","Oct","8",["0","0","0",null],"0","-"],["1962","only","-","Jul","15",["0","0","0",null],"60","S"],["1962","only","-","Oct","8",["0","0","0",null],"0","-"],["1964","only","-","May","15",["0","0","0",null],"60","S"],["1964","only","-","Oct","1",["0","0","0",null],"0","-"],["1970","1972","-","May","Sun>=2",["0","0","0",null],"60","S"],["1970","1972","-","Oct","Sun>=2",["0","0","0",null],"0","-"],["1973","only","-","Jun","3",["1","0","0",null],"60","S"],["1973","only","-","Nov","4",["3","0","0",null],"0","-"],["1974","only","-","Mar","31",["2","0","0",null],"60","S"],["1974","only","-","Nov","3",["5","0","0",null],"0","-"],["1975","only","-","Mar","30",["0","0","0",null],"60","S"],["1975","1976","-","Oct","lastSun",["0","0","0",null],"0","-"],["1976","only","-","Jun","1",["0","0","0",null],"60","S"],["1977","1978","-","Apr","Sun>=1",["0","0","0",null],"60","S"],["1977","only","-","Oct","16",["0","0","0",null],"0","-"],["1979","1980","-","Apr","Sun>=1",["3","0","0",null],"60","S"],["1979","1982","-","Oct","Mon>=11",["0","0","0",null],"0","-"],["1981","1982","-","Mar","lastSun",["3","0","0",null],"60","S"],["1983","only","-","Jul","31",["0","0","0",null],"60","S"],["1983","only","-","Oct","2",["0","0","0",null],"0","-"],["1985","only","-","Apr","20",["0","0","0",null],"60","S"],["1985","only","-","Sep","28",["0","0","0",null],"0","-"],["1986","1990","-","Mar","lastSun",["2","0","0","s"],"60","S"],["1986","1990","-","Sep","lastSun",["2","0","0","s"],"0","-"],["1991","2006","-","Mar","lastSun",["1","0","0","s"],"60","S"],["1991","1995","-","Sep","lastSun",["1","0","0","s"],"0","-"],["1996","2006","-","Oct","lastSun",["1","0","0","s"],"0","-"]],US:[["1918","1919","-","Mar","lastSun",["2","0","0",null],"60","D"],["1918","1919","-","Oct","lastSun",["2","0","0",null],"0","S"],["1942","only","-","Feb","9",["2","0","0",null],"60","W",""],["1945","only","-","Aug","14",["23","0","0","u"],"60","P",""],["1945","only","-","Sep","lastSun",["2","0","0",null],"0","S"],["1967","2006","-","Oct","lastSun",["2","0","0",null],"0","S"],["1967","1973","-","Apr","lastSun",["2","0","0",null],"60","D"],["1974","only","-","Jan","6",["2","0","0",null],"60","D"],["1975","only","-","Feb","23",["2","0","0",null],"60","D"],["1976","1986","-","Apr","lastSun",["2","0","0",null],"60","D"],["1987","2006","-","Apr","Sun>=1",["2","0","0",null],"60","D"],["2007","max","-","Mar","Sun>=8",["2","0","0",null],"60","D"],["2007","max","-","Nov","Sun>=1",["2","0","0",null],"0","S"]],NYC:[["1920","only","-","Mar","lastSun",["2","0","0",null],"60","D"],["1920","only","-","Oct","lastSun",["2","0","0",null],"0","S"],["1921","1966","-","Apr","lastSun",["2","0","0",null],"60","D"],["1921","1954","-","Sep","lastSun",["2","0","0",null],"0","S"],["1955","1966","-","Oct","lastSun",["2","0","0",null],"0","S"]],Chicago:[["1920","only","-","Jun","13",["2","0","0",null],"60","D"],["1920","1921","-","Oct","lastSun",["2","0","0",null],"0","S"],["1921","only","-","Mar","lastSun",["2","0","0",null],"60","D"],["1922","1966","-","Apr","lastSun",["2","0","0",null],"60","D"],["1922","1954","-","Sep","lastSun",["2","0","0",null],"0","S"],["1955","1966","-","Oct","lastSun",["2","0","0",null],"0","S"]],Denver:[["1920","1921","-","Mar","lastSun",["2","0","0",null],"60","D"],["1920","only","-","Oct","lastSun",["2","0","0",null],"0","S"],["1921","only","-","May","22",["2","0","0",null],"0","S"],["1965","1966","-","Apr","lastSun",["2","0","0",null],"60","D"],["1965","1966","-","Oct","lastSun",["2","0","0",null],"0","S"]],CA:[["1948","only","-","Mar","14",["2","0","0",null],"60","D"],["1949","only","-","Jan","1",["2","0","0",null],"0","S"],["1950","1966","-","Apr","lastSun",["2","0","0",null],"60","D"],["1950","1961","-","Sep","lastSun",["2","0","0",null],"0","S"],["1962","1966","-","Oct","lastSun",["2","0","0",null],"0","S"]],Indianapolis:[["1941","only","-","Jun","22",["2","0","0",null],"60","D"],["1941","1954","-","Sep","lastSun",["2","0","0",null],"0","S"],["1946","1954","-","Apr","lastSun",["2","0","0",null],"60","D"]],Marengo:[["1951","only","-","Apr","lastSun",["2","0","0",null],"60","D"],["1951","only","-","Sep","lastSun",["2","0","0",null],"0","S"],["1954","1960","-","Apr","lastSun",["2","0","0",null],"60","D"],["1954","1960","-","Sep","lastSun",["2","0","0",null],"0","S"]],Vincennes:[["1946","only","-","Apr","lastSun",["2","0","0",null],"60","D"],["1946","only","-","Sep","lastSun",["2","0","0",null],"0","S"],["1953","1954","-","Apr","lastSun",["2","0","0",null],"60","D"],["1953","1959","-","Sep","lastSun",["2","0","0",null],"0","S"],["1955","only","-","May","1",["0","0","0",null],"60","D"],["1956","1963","-","Apr","lastSun",["2","0","0",null],"60","D"],["1960","only","-","Oct","lastSun",["2","0","0",null],"0","S"],["1961","only","-","Sep","lastSun",["2","0","0",null],"0","S"],["1962","1963","-","Oct","lastSun",["2","0","0",null],"0","S"]],Perry:[["1946","only","-","Apr","lastSun",["2","0","0",null],"60","D"],["1946","only","-","Sep","lastSun",["2","0","0",null],"0","S"],["1953","1954","-","Apr","lastSun",["2","0","0",null],"60","D"],["1953","1959","-","Sep","lastSun",["2","0","0",null],"0","S"],["1955","only","-","May","1",["0","0","0",null],"60","D"],["1956","1963","-","Apr","lastSun",["2","0","0",null],"60","D"],["1960","only","-","Oct","lastSun",["2","0","0",null],"0","S"],["1961","only","-","Sep","lastSun",["2","0","0",null],"0","S"],["1962","1963","-","Oct","lastSun",["2","0","0",null],"0","S"]],Pike:[["1955","only","-","May","1",["0","0","0",null],"60","D"],["1955","1960","-","Sep","lastSun",["2","0","0",null],"0","S"],["1956","1964","-","Apr","lastSun",["2","0","0",null],"60","D"],["1961","1964","-","Oct","lastSun",["2","0","0",null],"0","S"]],Starke:[["1947","1961","-","Apr","lastSun",["2","0","0",null],"60","D"],["1947","1954","-","Sep","lastSun",["2","0","0",null],"0","S"],["1955","1956","-","Oct","lastSun",["2","0","0",null],"0","S"],["1957","1958","-","Sep","lastSun",["2","0","0",null],"0","S"],["1959","1961","-","Oct","lastSun",["2","0","0",null],"0","S"]],Pulaski:[["1946","1960","-","Apr","lastSun",["2","0","0",null],"60","D"],["1946","1954","-","Sep","lastSun",["2","0","0",null],"0","S"],["1955","1956","-","Oct","lastSun",["2","0","0",null],"0","S"],["1957","1960","-","Sep","lastSun",["2","0","0",null],"0","S"]],Louisville:[["1921","only","-","May","1",["2","0","0",null],"60","D"],["1921","only","-","Sep","1",["2","0","0",null],"0","S"],["1941","1961","-","Apr","lastSun",["2","0","0",null],"60","D"],["1941","only","-","Sep","lastSun",["2","0","0",null],"0","S"],["1946","only","-","Jun","2",["2","0","0",null],"0","S"],["1950","1955","-","Sep","lastSun",["2","0","0",null],"0","S"],["1956","1960","-","Oct","lastSun",["2","0","0",null],"0","S"]],Detroit:[["1948","only","-","Apr","lastSun",["2","0","0",null],"60","D"],["1948","only","-","Sep","lastSun",["2","0","0",null],"0","S"],["1967","only","-","Jun","14",["2","0","0",null],"60","D"],["1967","only","-","Oct","lastSun",["2","0","0",null],"0","S"]],Menominee:[["1946","only","-","Apr","lastSun",["2","0","0",null],"60","D"],["1946","only","-","Sep","lastSun",["2","0","0",null],"0","S"],["1966","only","-","Apr","lastSun",["2","0","0",null],"60","D"],["1966","only","-","Oct","lastSun",["2","0","0",null],"0","S"]],Canada:[["1918","only","-","Apr","14",["2","0","0",null],"60","D"],["1918","only","-","Oct","27",["2","0","0",null],"0","S"],["1942","only","-","Feb","9",["2","0","0",null],"60","W",""],["1945","only","-","Aug","14",["23","0","0","u"],"60","P",""],["1945","only","-","Sep","30",["2","0","0",null],"0","S"],["1974","1986","-","Apr","lastSun",["2","0","0",null],"60","D"],["1974","2006","-","Oct","lastSun",["2","0","0",null],"0","S"],["1987","2006","-","Apr","Sun>=1",["2","0","0",null],"60","D"],["2007","max","-","Mar","Sun>=8",["2","0","0",null],"60","D"],["2007","max","-","Nov","Sun>=1",["2","0","0",null],"0","S"]],StJohns:[["1917","only","-","Apr","8",["2","0","0",null],"60","D"],["1917","only","-","Sep","17",["2","0","0",null],"0","S"],["1919","only","-","May","5",["23","0","0",null],"60","D"],["1919","only","-","Aug","12",["23","0","0",null],"0","S"],["1920","1935","-","May","Sun>=1",["23","0","0",null],"60","D"],["1920","1935","-","Oct","lastSun",["23","0","0",null],"0","S"],["1936","1941","-","May","Mon>=9",["0","0","0",null],"60","D"],["1936","1941","-","Oct","Mon>=2",["0","0","0",null],"0","S"],["1946","1950","-","May","Sun>=8",["2","0","0",null],"60","D"],["1946","1950","-","Oct","Sun>=2",["2","0","0",null],"0","S"],["1951","1986","-","Apr","lastSun",["2","0","0",null],"60","D"],["1951","1959","-","Sep","lastSun",["2","0","0",null],"0","S"],["1960","1986","-","Oct","lastSun",["2","0","0",null],"0","S"],["1987","only","-","Apr","Sun>=1",["0","1","0",null],"60","D"],["1987","2006","-","Oct","lastSun",["0","1","0",null],"0","S"],["1988","only","-","Apr","Sun>=1",["0","1","0",null],"120","DD"],["1989","2006","-","Apr","Sun>=1",["0","1","0",null],"60","D"],["2007","2011","-","Mar","Sun>=8",["0","1","0",null],"60","D"],["2007","2010","-","Nov","Sun>=1",["0","1","0",null],"0","S"]],Halifax:[["1916","only","-","Apr","1",["0","0","0",null],"60","D"],["1916","only","-","Oct","1",["0","0","0",null],"0","S"],["1920","only","-","May","9",["0","0","0",null],"60","D"],["1920","only","-","Aug","29",["0","0","0",null],"0","S"],["1921","only","-","May","6",["0","0","0",null],"60","D"],["1921","1922","-","Sep","5",["0","0","0",null],"0","S"],["1922","only","-","Apr","30",["0","0","0",null],"60","D"],["1923","1925","-","May","Sun>=1",["0","0","0",null],"60","D"],["1923","only","-","Sep","4",["0","0","0",null],"0","S"],["1924","only","-","Sep","15",["0","0","0",null],"0","S"],["1925","only","-","Sep","28",["0","0","0",null],"0","S"],["1926","only","-","May","16",["0","0","0",null],"60","D"],["1926","only","-","Sep","13",["0","0","0",null],"0","S"],["1927","only","-","May","1",["0","0","0",null],"60","D"],["1927","only","-","Sep","26",["0","0","0",null],"0","S"],["1928","1931","-","May","Sun>=8",["0","0","0",null],"60","D"],["1928","only","-","Sep","9",["0","0","0",null],"0","S"],["1929","only","-","Sep","3",["0","0","0",null],"0","S"],["1930","only","-","Sep","15",["0","0","0",null],"0","S"],["1931","1932","-","Sep","Mon>=24",["0","0","0",null],"0","S"],["1932","only","-","May","1",["0","0","0",null],"60","D"],["1933","only","-","Apr","30",["0","0","0",null],"60","D"],["1933","only","-","Oct","2",["0","0","0",null],"0","S"],["1934","only","-","May","20",["0","0","0",null],"60","D"],["1934","only","-","Sep","16",["0","0","0",null],"0","S"],["1935","only","-","Jun","2",["0","0","0",null],"60","D"],["1935","only","-","Sep","30",["0","0","0",null],"0","S"],["1936","only","-","Jun","1",["0","0","0",null],"60","D"],["1936","only","-","Sep","14",["0","0","0",null],"0","S"],["1937","1938","-","May","Sun>=1",["0","0","0",null],"60","D"],["1937","1941","-","Sep","Mon>=24",["0","0","0",null],"0","S"],["1939","only","-","May","28",["0","0","0",null],"60","D"],["1940","1941","-","May","Sun>=1",["0","0","0",null],"60","D"],["1946","1949","-","Apr","lastSun",["2","0","0",null],"60","D"],["1946","1949","-","Sep","lastSun",["2","0","0",null],"0","S"],["1951","1954","-","Apr","lastSun",["2","0","0",null],"60","D"],["1951","1954","-","Sep","lastSun",["2","0","0",null],"0","S"],["1956","1959","-","Apr","lastSun",["2","0","0",null],"60","D"],["1956","1959","-","Sep","lastSun",["2","0","0",null],"0","S"],["1962","1973","-","Apr","lastSun",["2","0","0",null],"60","D"],["1962","1973","-","Oct","lastSun",["2","0","0",null],"0","S"]],Moncton:[["1933","1935","-","Jun","Sun>=8",["1","0","0",null],"60","D"],["1933","1935","-","Sep","Sun>=8",["1","0","0",null],"0","S"],["1936","1938","-","Jun","Sun>=1",["1","0","0",null],"60","D"],["1936","1938","-","Sep","Sun>=1",["1","0","0",null],"0","S"],["1939","only","-","May","27",["1","0","0",null],"60","D"],["1939","1941","-","Sep","Sat>=21",["1","0","0",null],"0","S"],["1940","only","-","May","19",["1","0","0",null],"60","D"],["1941","only","-","May","4",["1","0","0",null],"60","D"],["1946","1972","-","Apr","lastSun",["2","0","0",null],"60","D"],["1946","1956","-","Sep","lastSun",["2","0","0",null],"0","S"],["1957","1972","-","Oct","lastSun",["2","0","0",null],"0","S"],["1993","2006","-","Apr","Sun>=1",["0","1","0",null],"60","D"],["1993","2006","-","Oct","lastSun",["0","1","0",null],"0","S"]],Toronto:[["1919","only","-","Mar","30",["23","30","0",null],"60","D"],["1919","only","-","Oct","26",["0","0","0",null],"0","S"],["1920","only","-","May","2",["2","0","0",null],"60","D"],["1920","only","-","Sep","26",["0","0","0",null],"0","S"],["1921","only","-","May","15",["2","0","0",null],"60","D"],["1921","only","-","Sep","15",["2","0","0",null],"0","S"],["1922","1923","-","May","Sun>=8",["2","0","0",null],"60","D"],["1922","1926","-","Sep","Sun>=15",["2","0","0",null],"0","S"],["1924","1927","-","May","Sun>=1",["2","0","0",null],"60","D"],["1927","1932","-","Sep","lastSun",["2","0","0",null],"0","S"],["1928","1931","-","Apr","lastSun",["2","0","0",null],"60","D"],["1932","only","-","May","1",["2","0","0",null],"60","D"],["1933","1940","-","Apr","lastSun",["2","0","0",null],"60","D"],["1933","only","-","Oct","1",["2","0","0",null],"0","S"],["1934","1939","-","Sep","lastSun",["2","0","0",null],"0","S"],["1945","1946","-","Sep","lastSun",["2","0","0",null],"0","S"],["1946","only","-","Apr","lastSun",["2","0","0",null],"60","D"],["1947","1949","-","Apr","lastSun",["0","0","0",null],"60","D"],["1947","1948","-","Sep","lastSun",["0","0","0",null],"0","S"],["1949","only","-","Nov","lastSun",["0","0","0",null],"0","S"],["1950","1973","-","Apr","lastSun",["2","0","0",null],"60","D"],["1950","only","-","Nov","lastSun",["2","0","0",null],"0","S"],["1951","1956","-","Sep","lastSun",["2","0","0",null],"0","S"],["1957","1973","-","Oct","lastSun",["2","0","0",null],"0","S"]],Winn:[["1916","only","-","Apr","23",["0","0","0",null],"60","D"],["1916","only","-","Sep","17",["0","0","0",null],"0","S"],["1918","only","-","Apr","14",["2","0","0",null],"60","D"],["1918","only","-","Oct","27",["2","0","0",null],"0","S"],["1937","only","-","May","16",["2","0","0",null],"60","D"],["1937","only","-","Sep","26",["2","0","0",null],"0","S"],["1942","only","-","Feb","9",["2","0","0",null],"60","W",""],["1945","only","-","Aug","14",["23","0","0","u"],"60","P",""],["1945","only","-","Sep","lastSun",["2","0","0",null],"0","S"],["1946","only","-","May","12",["2","0","0",null],"60","D"],["1946","only","-","Oct","13",["2","0","0",null],"0","S"],["1947","1949","-","Apr","lastSun",["2","0","0",null],"60","D"],["1947","1949","-","Sep","lastSun",["2","0","0",null],"0","S"],["1950","only","-","May","1",["2","0","0",null],"60","D"],["1950","only","-","Sep","30",["2","0","0",null],"0","S"],["1951","1960","-","Apr","lastSun",["2","0","0",null],"60","D"],["1951","1958","-","Sep","lastSun",["2","0","0",null],"0","S"],["1959","only","-","Oct","lastSun",["2","0","0",null],"0","S"],["1960","only","-","Sep","lastSun",["2","0","0",null],"0","S"],["1963","only","-","Apr","lastSun",["2","0","0",null],"60","D"],["1963","only","-","Sep","22",["2","0","0",null],"0","S"],["1966","1986","-","Apr","lastSun",["2","0","0","s"],"60","D"],["1966","2005","-","Oct","lastSun",["2","0","0","s"],"0","S"],["1987","2005","-","Apr","Sun>=1",["2","0","0","s"],"60","D"]],Regina:[["1918","only","-","Apr","14",["2","0","0",null],"60","D"],["1918","only","-","Oct","27",["2","0","0",null],"0","S"],["1930","1934","-","May","Sun>=1",["0","0","0",null],"60","D"],["1930","1934","-","Oct","Sun>=1",["0","0","0",null],"0","S"],["1937","1941","-","Apr","Sun>=8",["0","0","0",null],"60","D"],["1937","only","-","Oct","Sun>=8",["0","0","0",null],"0","S"],["1938","only","-","Oct","Sun>=1",["0","0","0",null],"0","S"],["1939","1941","-","Oct","Sun>=8",["0","0","0",null],"0","S"],["1942","only","-","Feb","9",["2","0","0",null],"60","W",""],["1945","only","-","Aug","14",["23","0","0","u"],"60","P",""],["1945","only","-","Sep","lastSun",["2","0","0",null],"0","S"],["1946","only","-","Apr","Sun>=8",["2","0","0",null],"60","D"],["1946","only","-","Oct","Sun>=8",["2","0","0",null],"0","S"],["1947","1957","-","Apr","lastSun",["2","0","0",null],"60","D"],["1947","1957","-","Sep","lastSun",["2","0","0",null],"0","S"],["1959","only","-","Apr","lastSun",["2","0","0",null],"60","D"],["1959","only","-","Oct","lastSun",["2","0","0",null],"0","S"]],Swift:[["1957","only","-","Apr","lastSun",["2","0","0",null],"60","D"],["1957","only","-","Oct","lastSun",["2","0","0",null],"0","S"],["1959","1961","-","Apr","lastSun",["2","0","0",null],"60","D"],["1959","only","-","Oct","lastSun",["2","0","0",null],"0","S"],["1960","1961","-","Sep","lastSun",["2","0","0",null],"0","S"]],Edm:[["1918","1919","-","Apr","Sun>=8",["2","0","0",null],"60","D"],["1918","only","-","Oct","27",["2","0","0",null],"0","S"],["1919","only","-","May","27",["2","0","0",null],"0","S"],["1920","1923","-","Apr","lastSun",["2","0","0",null],"60","D"],["1920","only","-","Oct","lastSun",["2","0","0",null],"0","S"],["1921","1923","-","Sep","lastSun",["2","0","0",null],"0","S"],["1942","only","-","Feb","9",["2","0","0",null],"60","W",""],["1945","only","-","Aug","14",["23","0","0","u"],"60","P",""],["1945","only","-","Sep","lastSun",["2","0","0",null],"0","S"],["1947","only","-","Apr","lastSun",["2","0","0",null],"60","D"],["1947","only","-","Sep","lastSun",["2","0","0",null],"0","S"],["1967","only","-","Apr","lastSun",["2","0","0",null],"60","D"],["1967","only","-","Oct","lastSun",["2","0","0",null],"0","S"],["1969","only","-","Apr","lastSun",["2","0","0",null],"60","D"],["1969","only","-","Oct","lastSun",["2","0","0",null],"0","S"],["1972","1986","-","Apr","lastSun",["2","0","0",null],"60","D"],["1972","2006","-","Oct","lastSun",["2","0","0",null],"0","S"]],Vanc:[["1918","only","-","Apr","14",["2","0","0",null],"60","D"],["1918","only","-","Oct","27",["2","0","0",null],"0","S"],["1942","only","-","Feb","9",["2","0","0",null],"60","W",""],["1945","only","-","Aug","14",["23","0","0","u"],"60","P",""],["1945","only","-","Sep","30",["2","0","0",null],"0","S"],["1946","1986","-","Apr","lastSun",["2","0","0",null],"60","D"],["1946","only","-","Oct","13",["2","0","0",null],"0","S"],["1947","1961","-","Sep","lastSun",["2","0","0",null],"0","S"],["1962","2006","-","Oct","lastSun",["2","0","0",null],"0","S"]],NT_YK:[["1918","only","-","Apr","14",["2","0","0",null],"60","D"],["1918","only","-","Oct","27",["2","0","0",null],"0","S"],["1919","only","-","May","25",["2","0","0",null],"60","D"],["1919","only","-","Nov","1",["0","0","0",null],"0","S"],["1942","only","-","Feb","9",["2","0","0",null],"60","W",""],["1945","only","-","Aug","14",["23","0","0","u"],"60","P",""],["1945","only","-","Sep","30",["2","0","0",null],"0","S"],["1965","only","-","Apr","lastSun",["0","0","0",null],"120","DD"],["1965","only","-","Oct","lastSun",["2","0","0",null],"0","S"],["1980","1986","-","Apr","lastSun",["2","0","0",null],"60","D"],["1980","2006","-","Oct","lastSun",["2","0","0",null],"0","S"],["1987","2006","-","Apr","Sun>=1",["2","0","0",null],"60","D"]],Mexico:[["1939","only","-","Feb","5",["0","0","0",null],"60","D"],["1939","only","-","Jun","25",["0","0","0",null],"0","S"],["1940","only","-","Dec","9",["0","0","0",null],"60","D"],["1941","only","-","Apr","1",["0","0","0",null],"0","S"],["1943","only","-","Dec","16",["0","0","0",null],"60","W",""],["1944","only","-","May","1",["0","0","0",null],"0","S"],["1950","only","-","Feb","12",["0","0","0",null],"60","D"],["1950","only","-","Jul","30",["0","0","0",null],"0","S"],["1996","2000","-","Apr","Sun>=1",["2","0","0",null],"60","D"],["1996","2000","-","Oct","lastSun",["2","0","0",null],"0","S"],["2001","only","-","May","Sun>=1",["2","0","0",null],"60","D"],["2001","only","-","Sep","lastSun",["2","0","0",null],"0","S"],["2002","max","-","Apr","Sun>=1",["2","0","0",null],"60","D"],["2002","max","-","Oct","lastSun",["2","0","0",null],"0","S"]],Bahamas:[["1964","1975","-","Oct","lastSun",["2","0","0",null],"0","S"],["1964","1975","-","Apr","lastSun",["2","0","0",null],"60","D"]],Barb:[["1977","only","-","Jun","12",["2","0","0",null],"60","D"],["1977","1978","-","Oct","Sun>=1",["2","0","0",null],"0","S"],["1978","1980","-","Apr","Sun>=15",["2","0","0",null],"60","D"],["1979","only","-","Sep","30",["2","0","0",null],"0","S"],["1980","only","-","Sep","25",["2","0","0",null],"0","S"]],Belize:[["1918","1942","-","Oct","Sun>=2",["0","0","0",null],"30","HD"],["1919","1943","-","Feb","Sun>=9",["0","0","0",null],"0","S"],["1973","only","-","Dec","5",["0","0","0",null],"60","D"],["1974","only","-","Feb","9",["0","0","0",null],"0","S"],["1982","only","-","Dec","18",["0","0","0",null],"60","D"],["1983","only","-","Feb","12",["0","0","0",null],"0","S"]],CR:[["1979","1980","-","Feb","lastSun",["0","0","0",null],"60","D"],["1979","1980","-","Jun","Sun>=1",["0","0","0",null],"0","S"],["1991","1992","-","Jan","Sat>=15",["0","0","0",null],"60","D"],["1991","only","-","Jul","1",["0","0","0",null],"0","S"],["1992","only","-","Mar","15",["0","0","0",null],"0","S"]],Cuba:[["1928","only","-","Jun","10",["0","0","0",null],"60","D"],["1928","only","-","Oct","10",["0","0","0",null],"0","S"],["1940","1942","-","Jun","Sun>=1",["0","0","0",null],"60","D"],["1940","1942","-","Sep","Sun>=1",["0","0","0",null],"0","S"],["1945","1946","-","Jun","Sun>=1",["0","0","0",null],"60","D"],["1945","1946","-","Sep","Sun>=1",["0","0","0",null],"0","S"],["1965","only","-","Jun","1",["0","0","0",null],"60","D"],["1965","only","-","Sep","30",["0","0","0",null],"0","S"],["1966","only","-","May","29",["0","0","0",null],"60","D"],["1966","only","-","Oct","2",["0","0","0",null],"0","S"],["1967","only","-","Apr","8",["0","0","0",null],"60","D"],["1967","1968","-","Sep","Sun>=8",["0","0","0",null],"0","S"],["1968","only","-","Apr","14",["0","0","0",null],"60","D"],["1969","1977","-","Apr","lastSun",["0","0","0",null],"60","D"],["1969","1971","-","Oct","lastSun",["0","0","0",null],"0","S"],["1972","1974","-","Oct","8",["0","0","0",null],"0","S"],["1975","1977","-","Oct","lastSun",["0","0","0",null],"0","S"],["1978","only","-","May","7",["0","0","0",null],"60","D"],["1978","1990","-","Oct","Sun>=8",["0","0","0",null],"0","S"],["1979","1980","-","Mar","Sun>=15",["0","0","0",null],"60","D"],["1981","1985","-","May","Sun>=5",["0","0","0",null],"60","D"],["1986","1989","-","Mar","Sun>=14",["0","0","0",null],"60","D"],["1990","1997","-","Apr","Sun>=1",["0","0","0",null],"60","D"],["1991","1995","-","Oct","Sun>=8",["0","0","0","s"],"0","S"],["1996","only","-","Oct","6",["0","0","0","s"],"0","S"],["1997","only","-","Oct","12",["0","0","0","s"],"0","S"],["1998","1999","-","Mar","lastSun",["0","0","0","s"],"60","D"],["1998","2003","-","Oct","lastSun",["0","0","0","s"],"0","S"],["2000","2003","-","Apr","Sun>=1",["0","0","0","s"],"60","D"],["2004","only","-","Mar","lastSun",["0","0","0","s"],"60","D"],["2006","2010","-","Oct","lastSun",["0","0","0","s"],"0","S"],["2007","only","-","Mar","Sun>=8",["0","0","0","s"],"60","D"],["2008","only","-","Mar","Sun>=15",["0","0","0","s"],"60","D"],["2009","2010","-","Mar","Sun>=8",["0","0","0","s"],"60","D"],["2011","only","-","Mar","Sun>=15",["0","0","0","s"],"60","D"],["2011","only","-","Nov","13",["0","0","0","s"],"0","S"],["2012","only","-","Apr","1",["0","0","0","s"],"60","D"],["2012","max","-","Nov","Sun>=1",["0","0","0","s"],"0","S"],["2013","max","-","Mar","Sun>=8",["0","0","0","s"],"60","D"]],DR:[["1966","only","-","Oct","30",["0","0","0",null],"60","D"],["1967","only","-","Feb","28",["0","0","0",null],"0","S"],["1969","1973","-","Oct","lastSun",["0","0","0",null],"30","HD"],["1970","only","-","Feb","21",["0","0","0",null],"0","S"],["1971","only","-","Jan","20",["0","0","0",null],"0","S"],["1972","1974","-","Jan","21",["0","0","0",null],"0","S"]],Salv:[["1987","1988","-","May","Sun>=1",["0","0","0",null],"60","D"],["1987","1988","-","Sep","lastSun",["0","0","0",null],"0","S"]],Guat:[["1973","only","-","Nov","25",["0","0","0",null],"60","D"],["1974","only","-","Feb","24",["0","0","0",null],"0","S"],["1983","only","-","May","21",["0","0","0",null],"60","D"],["1983","only","-","Sep","22",["0","0","0",null],"0","S"],["1991","only","-","Mar","23",["0","0","0",null],"60","D"],["1991","only","-","Sep","7",["0","0","0",null],"0","S"],["2006","only","-","Apr","30",["0","0","0",null],"60","D"],["2006","only","-","Oct","1",["0","0","0",null],"0","S"]],Haiti:[["1983","only","-","May","8",["0","0","0",null],"60","D"],["1984","1987","-","Apr","lastSun",["0","0","0",null],"60","D"],["1983","1987","-","Oct","lastSun",["0","0","0",null],"0","S"],["1988","1997","-","Apr","Sun>=1",["1","0","0","s"],"60","D"],["1988","1997","-","Oct","lastSun",["1","0","0","s"],"0","S"],["2005","2006","-","Apr","Sun>=1",["0","0","0",null],"60","D"],["2005","2006","-","Oct","lastSun",["0","0","0",null],"0","S"],["2012","max","-","Mar","Sun>=8",["2","0","0",null],"60","D"],["2012","max","-","Nov","Sun>=1",["2","0","0",null],"0","S"]],Hond:[["1987","1988","-","May","Sun>=1",["0","0","0",null],"60","D"],["1987","1988","-","Sep","lastSun",["0","0","0",null],"0","S"],["2006","only","-","May","Sun>=1",["0","0","0",null],"60","D"],["2006","only","-","Aug","Mon>=1",["0","0","0",null],"0","S"]],Nic:[["1979","1980","-","Mar","Sun>=16",["0","0","0",null],"60","D"],["1979","1980","-","Jun","Mon>=23",["0","0","0",null],"0","S"],["2005","only","-","Apr","10",["0","0","0",null],"60","D"],["2005","only","-","Oct","Sun>=1",["0","0","0",null],"0","S"],["2006","only","-","Apr","30",["2","0","0",null],"60","D"],["2006","only","-","Oct","Sun>=1",["1","0","0",null],"0","S"]],Arg:[["1930","only","-","Dec","1",["0","0","0",null],"60","S"],["1931","only","-","Apr","1",["0","0","0",null],"0","-"],["1931","only","-","Oct","15",["0","0","0",null],"60","S"],["1932","1940","-","Mar","1",["0","0","0",null],"0","-"],["1932","1939","-","Nov","1",["0","0","0",null],"60","S"],["1940","only","-","Jul","1",["0","0","0",null],"60","S"],["1941","only","-","Jun","15",["0","0","0",null],"0","-"],["1941","only","-","Oct","15",["0","0","0",null],"60","S"],["1943","only","-","Aug","1",["0","0","0",null],"0","-"],["1943","only","-","Oct","15",["0","0","0",null],"60","S"],["1946","only","-","Mar","1",["0","0","0",null],"0","-"],["1946","only","-","Oct","1",["0","0","0",null],"60","S"],["1963","only","-","Oct","1",["0","0","0",null],"0","-"],["1963","only","-","Dec","15",["0","0","0",null],"60","S"],["1964","1966","-","Mar","1",["0","0","0",null],"0","-"],["1964","1966","-","Oct","15",["0","0","0",null],"60","S"],["1967","only","-","Apr","2",["0","0","0",null],"0","-"],["1967","1968","-","Oct","Sun>=1",["0","0","0",null],"60","S"],["1968","1969","-","Apr","Sun>=1",["0","0","0",null],"0","-"],["1974","only","-","Jan","23",["0","0","0",null],"60","S"],["1974","only","-","May","1",["0","0","0",null],"0","-"],["1988","only","-","Dec","1",["0","0","0",null],"60","S"],["1989","1993","-","Mar","Sun>=1",["0","0","0",null],"0","-"],["1989","1992","-","Oct","Sun>=15",["0","0","0",null],"60","S"],["1999","only","-","Oct","Sun>=1",["0","0","0",null],"60","S"],["2000","only","-","Mar","3",["0","0","0",null],"0","-"],["2007","only","-","Dec","30",["0","0","0",null],"60","S"],["2008","2009","-","Mar","Sun>=15",["0","0","0",null],"0","-"],["2008","only","-","Oct","Sun>=15",["0","0","0",null],"60","S"]],SanLuis:[["2008","2009","-","Mar","Sun>=8",["0","0","0",null],"0","-"],["2007","2008","-","Oct","Sun>=8",["0","0","0",null],"60","S"]],Brazil:[["1931","only","-","Oct","3",["11","0","0",null],"60","S"],["1932","1933","-","Apr","1",["0","0","0",null],"0","-"],["1932","only","-","Oct","3",["0","0","0",null],"60","S"],["1949","1952","-","Dec","1",["0","0","0",null],"60","S"],["1950","only","-","Apr","16",["1","0","0",null],"0","-"],["1951","1952","-","Apr","1",["0","0","0",null],"0","-"],["1953","only","-","Mar","1",["0","0","0",null],"0","-"],["1963","only","-","Dec","9",["0","0","0",null],"60","S"],["1964","only","-","Mar","1",["0","0","0",null],"0","-"],["1965","only","-","Jan","31",["0","0","0",null],"60","S"],["1965","only","-","Mar","31",["0","0","0",null],"0","-"],["1965","only","-","Dec","1",["0","0","0",null],"60","S"],["1966","1968","-","Mar","1",["0","0","0",null],"0","-"],["1966","1967","-","Nov","1",["0","0","0",null],"60","S"],["1985","only","-","Nov","2",["0","0","0",null],"60","S"],["1986","only","-","Mar","15",["0","0","0",null],"0","-"],["1986","only","-","Oct","25",["0","0","0",null],"60","S"],["1987","only","-","Feb","14",["0","0","0",null],"0","-"],["1987","only","-","Oct","25",["0","0","0",null],"60","S"],["1988","only","-","Feb","7",["0","0","0",null],"0","-"],["1988","only","-","Oct","16",["0","0","0",null],"60","S"],["1989","only","-","Jan","29",["0","0","0",null],"0","-"],["1989","only","-","Oct","15",["0","0","0",null],"60","S"],["1990","only","-","Feb","11",["0","0","0",null],"0","-"],["1990","only","-","Oct","21",["0","0","0",null],"60","S"],["1991","only","-","Feb","17",["0","0","0",null],"0","-"],["1991","only","-","Oct","20",["0","0","0",null],"60","S"],["1992","only","-","Feb","9",["0","0","0",null],"0","-"],["1992","only","-","Oct","25",["0","0","0",null],"60","S"],["1993","only","-","Jan","31",["0","0","0",null],"0","-"],["1993","1995","-","Oct","Sun>=11",["0","0","0",null],"60","S"],["1994","1995","-","Feb","Sun>=15",["0","0","0",null],"0","-"],["1996","only","-","Feb","11",["0","0","0",null],"0","-"],["1996","only","-","Oct","6",["0","0","0",null],"60","S"],["1997","only","-","Feb","16",["0","0","0",null],"0","-"],["1997","only","-","Oct","6",["0","0","0",null],"60","S"],["1998","only","-","Mar","1",["0","0","0",null],"0","-"],["1998","only","-","Oct","11",["0","0","0",null],"60","S"],["1999","only","-","Feb","21",["0","0","0",null],"0","-"],["1999","only","-","Oct","3",["0","0","0",null],"60","S"],["2000","only","-","Feb","27",["0","0","0",null],"0","-"],["2000","2001","-","Oct","Sun>=8",["0","0","0",null],"60","S"],["2001","2006","-","Feb","Sun>=15",["0","0","0",null],"0","-"],["2002","only","-","Nov","3",["0","0","0",null],"60","S"],["2003","only","-","Oct","19",["0","0","0",null],"60","S"],["2004","only","-","Nov","2",["0","0","0",null],"60","S"],["2005","only","-","Oct","16",["0","0","0",null],"60","S"],["2006","only","-","Nov","5",["0","0","0",null],"60","S"],["2007","only","-","Feb","25",["0","0","0",null],"0","-"],["2007","only","-","Oct","Sun>=8",["0","0","0",null],"60","S"],["2008","max","-","Oct","Sun>=15",["0","0","0",null],"60","S"],["2008","2011","-","Feb","Sun>=15",["0","0","0",null],"0","-"],["2012","only","-","Feb","Sun>=22",["0","0","0",null],"0","-"],["2013","2014","-","Feb","Sun>=15",["0","0","0",null],"0","-"],["2015","only","-","Feb","Sun>=22",["0","0","0",null],"0","-"],["2016","2022","-","Feb","Sun>=15",["0","0","0",null],"0","-"],["2023","only","-","Feb","Sun>=22",["0","0","0",null],"0","-"],["2024","2025","-","Feb","Sun>=15",["0","0","0",null],"0","-"],["2026","only","-","Feb","Sun>=22",["0","0","0",null],"0","-"],["2027","2033","-","Feb","Sun>=15",["0","0","0",null],"0","-"],["2034","only","-","Feb","Sun>=22",["0","0","0",null],"0","-"],["2035","2036","-","Feb","Sun>=15",["0","0","0",null],"0","-"],["2037","only","-","Feb","Sun>=22",["0","0","0",null],"0","-"],["2038","max","-","Feb","Sun>=15",["0","0","0",null],"0","-"]],
Chile:[["1927","1931","-","Sep","1",["0","0","0",null],"60","S"],["1928","1932","-","Apr","1",["0","0","0",null],"0","-"],["1968","only","-","Nov","3",["4","0","0","u"],"60","S"],["1969","only","-","Mar","30",["3","0","0","u"],"0","-"],["1969","only","-","Nov","23",["4","0","0","u"],"60","S"],["1970","only","-","Mar","29",["3","0","0","u"],"0","-"],["1971","only","-","Mar","14",["3","0","0","u"],"0","-"],["1970","1972","-","Oct","Sun>=9",["4","0","0","u"],"60","S"],["1972","1986","-","Mar","Sun>=9",["3","0","0","u"],"0","-"],["1973","only","-","Sep","30",["4","0","0","u"],"60","S"],["1974","1987","-","Oct","Sun>=9",["4","0","0","u"],"60","S"],["1987","only","-","Apr","12",["3","0","0","u"],"0","-"],["1988","1990","-","Mar","Sun>=9",["3","0","0","u"],"0","-"],["1988","1989","-","Oct","Sun>=9",["4","0","0","u"],"60","S"],["1990","only","-","Sep","16",["4","0","0","u"],"60","S"],["1991","1996","-","Mar","Sun>=9",["3","0","0","u"],"0","-"],["1991","1997","-","Oct","Sun>=9",["4","0","0","u"],"60","S"],["1997","only","-","Mar","30",["3","0","0","u"],"0","-"],["1998","only","-","Mar","Sun>=9",["3","0","0","u"],"0","-"],["1998","only","-","Sep","27",["4","0","0","u"],"60","S"],["1999","only","-","Apr","4",["3","0","0","u"],"0","-"],["1999","2010","-","Oct","Sun>=9",["4","0","0","u"],"60","S"],["2000","2007","-","Mar","Sun>=9",["3","0","0","u"],"0","-"],["2008","only","-","Mar","30",["3","0","0","u"],"0","-"],["2009","only","-","Mar","Sun>=9",["3","0","0","u"],"0","-"],["2010","only","-","Apr","Sun>=1",["3","0","0","u"],"0","-"],["2011","only","-","May","Sun>=2",["3","0","0","u"],"0","-"],["2011","only","-","Aug","Sun>=16",["4","0","0","u"],"60","S"],["2012","2015","-","Apr","Sun>=23",["3","0","0","u"],"0","-"],["2012","2014","-","Sep","Sun>=2",["4","0","0","u"],"60","S"]],CO:[["1992","only","-","May","3",["0","0","0",null],"60","S"],["1993","only","-","Apr","4",["0","0","0",null],"0","-"]],Falk:[["1937","1938","-","Sep","lastSun",["0","0","0",null],"60","S"],["1938","1942","-","Mar","Sun>=19",["0","0","0",null],"0","-"],["1939","only","-","Oct","1",["0","0","0",null],"60","S"],["1940","1942","-","Sep","lastSun",["0","0","0",null],"60","S"],["1943","only","-","Jan","1",["0","0","0",null],"0","-"],["1983","only","-","Sep","lastSun",["0","0","0",null],"60","S"],["1984","1985","-","Apr","lastSun",["0","0","0",null],"0","-"],["1984","only","-","Sep","16",["0","0","0",null],"60","S"],["1985","2000","-","Sep","Sun>=9",["0","0","0",null],"60","S"],["1986","2000","-","Apr","Sun>=16",["0","0","0",null],"0","-"],["2001","2010","-","Apr","Sun>=15",["2","0","0",null],"0","-"],["2001","2010","-","Sep","Sun>=1",["2","0","0",null],"60","S"]],Para:[["1975","1988","-","Oct","1",["0","0","0",null],"60","S"],["1975","1978","-","Mar","1",["0","0","0",null],"0","-"],["1979","1991","-","Apr","1",["0","0","0",null],"0","-"],["1989","only","-","Oct","22",["0","0","0",null],"60","S"],["1990","only","-","Oct","1",["0","0","0",null],"60","S"],["1991","only","-","Oct","6",["0","0","0",null],"60","S"],["1992","only","-","Mar","1",["0","0","0",null],"0","-"],["1992","only","-","Oct","5",["0","0","0",null],"60","S"],["1993","only","-","Mar","31",["0","0","0",null],"0","-"],["1993","1995","-","Oct","1",["0","0","0",null],"60","S"],["1994","1995","-","Feb","lastSun",["0","0","0",null],"0","-"],["1996","only","-","Mar","1",["0","0","0",null],"0","-"],["1996","2001","-","Oct","Sun>=1",["0","0","0",null],"60","S"],["1997","only","-","Feb","lastSun",["0","0","0",null],"0","-"],["1998","2001","-","Mar","Sun>=1",["0","0","0",null],"0","-"],["2002","2004","-","Apr","Sun>=1",["0","0","0",null],"0","-"],["2002","2003","-","Sep","Sun>=1",["0","0","0",null],"60","S"],["2004","2009","-","Oct","Sun>=15",["0","0","0",null],"60","S"],["2005","2009","-","Mar","Sun>=8",["0","0","0",null],"0","-"],["2010","max","-","Oct","Sun>=1",["0","0","0",null],"60","S"],["2010","2012","-","Apr","Sun>=8",["0","0","0",null],"0","-"],["2013","max","-","Mar","Sun>=22",["0","0","0",null],"0","-"]],Peru:[["1938","only","-","Jan","1",["0","0","0",null],"60","S"],["1938","only","-","Apr","1",["0","0","0",null],"0","-"],["1938","1939","-","Sep","lastSun",["0","0","0",null],"60","S"],["1939","1940","-","Mar","Sun>=24",["0","0","0",null],"0","-"],["1986","1987","-","Jan","1",["0","0","0",null],"60","S"],["1986","1987","-","Apr","1",["0","0","0",null],"0","-"],["1990","only","-","Jan","1",["0","0","0",null],"60","S"],["1990","only","-","Apr","1",["0","0","0",null],"0","-"],["1994","only","-","Jan","1",["0","0","0",null],"60","S"],["1994","only","-","Apr","1",["0","0","0",null],"0","-"]],Uruguay:[["1923","only","-","Oct","2",["0","0","0",null],"30","HS"],["1924","1926","-","Apr","1",["0","0","0",null],"0","-"],["1924","1925","-","Oct","1",["0","0","0",null],"30","HS"],["1933","1935","-","Oct","lastSun",["0","0","0",null],"30","HS"],["1934","1936","-","Mar","Sat>=25",["23","30","0","s"],"0","-"],["1936","only","-","Nov","1",["0","0","0",null],"30","HS"],["1937","1941","-","Mar","lastSun",["0","0","0",null],"0","-"],["1937","1940","-","Oct","lastSun",["0","0","0",null],"30","HS"],["1941","only","-","Aug","1",["0","0","0",null],"30","HS"],["1942","only","-","Jan","1",["0","0","0",null],"0","-"],["1942","only","-","Dec","14",["0","0","0",null],"60","S"],["1943","only","-","Mar","14",["0","0","0",null],"0","-"],["1959","only","-","May","24",["0","0","0",null],"60","S"],["1959","only","-","Nov","15",["0","0","0",null],"0","-"],["1960","only","-","Jan","17",["0","0","0",null],"60","S"],["1960","only","-","Mar","6",["0","0","0",null],"0","-"],["1965","1967","-","Apr","Sun>=1",["0","0","0",null],"60","S"],["1965","only","-","Sep","26",["0","0","0",null],"0","-"],["1966","1967","-","Oct","31",["0","0","0",null],"0","-"],["1968","1970","-","May","27",["0","0","0",null],"30","HS"],["1968","1970","-","Dec","2",["0","0","0",null],"0","-"],["1972","only","-","Apr","24",["0","0","0",null],"60","S"],["1972","only","-","Aug","15",["0","0","0",null],"0","-"],["1974","only","-","Mar","10",["0","0","0",null],"30","HS"],["1974","only","-","Dec","22",["0","0","0",null],"60","S"],["1976","only","-","Oct","1",["0","0","0",null],"0","-"],["1977","only","-","Dec","4",["0","0","0",null],"60","S"],["1978","only","-","Apr","1",["0","0","0",null],"0","-"],["1979","only","-","Oct","1",["0","0","0",null],"60","S"],["1980","only","-","May","1",["0","0","0",null],"0","-"],["1987","only","-","Dec","14",["0","0","0",null],"60","S"],["1988","only","-","Mar","14",["0","0","0",null],"0","-"],["1988","only","-","Dec","11",["0","0","0",null],"60","S"],["1989","only","-","Mar","12",["0","0","0",null],"0","-"],["1989","only","-","Oct","29",["0","0","0",null],"60","S"],["1990","1992","-","Mar","Sun>=1",["0","0","0",null],"0","-"],["1990","1991","-","Oct","Sun>=21",["0","0","0",null],"60","S"],["1992","only","-","Oct","18",["0","0","0",null],"60","S"],["1993","only","-","Feb","28",["0","0","0",null],"0","-"],["2004","only","-","Sep","19",["0","0","0",null],"60","S"],["2005","only","-","Mar","27",["2","0","0",null],"0","-"],["2005","only","-","Oct","9",["2","0","0",null],"60","S"],["2006","only","-","Mar","12",["2","0","0",null],"0","-"],["2006","max","-","Oct","Sun>=1",["2","0","0",null],"60","S"],["2007","max","-","Mar","Sun>=8",["2","0","0",null],"0","-"]],SystemV:[["NaN","1973","-","Apr","lastSun",["2","0","0",null],"60","D"],["NaN","1973","-","Oct","lastSun",["2","0","0",null],"0","S"],["1974","only","-","Jan","6",["2","0","0",null],"60","D"],["1974","only","-","Nov","lastSun",["2","0","0",null],"0","S"],["1975","only","-","Feb","23",["2","0","0",null],"60","D"],["1975","only","-","Oct","lastSun",["2","0","0",null],"0","S"],["1976","max","-","Apr","lastSun",["2","0","0",null],"60","D"],["1976","max","-","Oct","lastSun",["2","0","0",null],"0","S"]]}});var CONFIG;window.SunriseMacBridge=window.SunriseMacBridge||window.macgap,window.$appTemplates=window.$appTemplates||{},function(){var a="app/",b="template/",c="1.7.104",d=8,e=15;CONFIG={environment:"SUNRISE:ENVIRONMENT:PRODUCTION",userLang:navigator.language||navigator.userLanguage||"en",userTimezone:jstz.determine().name(),version:c,storageVersion:d,dbVersion:e,baseDirectory:a,templateDirectory:b,templateFileQuerystring:"?v="+c,isChromeApp:"object"==typeof chrome&&chrome.storage,macPopupVersion:"1010",apiBaseUrl:"https://api.sunrise.am",apiUrl:"https://api.sunrise.am/v2",meetUrl:"https://meet.sunrise.am",meetV1Url:"https://meet.sunrise.am/v1",meetShortUrl:"https://sunrise.am/m",iconicUrl:"https://iconic.sunrise.am",metricsUrl:"https://metrics.sunrise.am",postalUrl:"https://postal.sunrise.am",supportUrl:"http://support.sunrise.am",betaUrl:"https://beta.sunrise.am",stagingUrl:"https://staging.sunrise.am",devUrl:"http://localhost",prodUrl:"https://calendar.sunrise.am",favoriteLocationUrl:"https://sr-sandbox-api.herokuapp.com/v2",anchormanUrl:"https://anchorman.sunrise.am",baseUrl:location.protocol+"//"+location.hostname+(location.port&&":"+location.port),timezoneUrl:"https://maps.googleapis.com/maps/api/timezone/json",staticMapUrl:"https://maps.googleapis.com/maps/api/staticmap?",mobileUrls:{testing:"sunrise-meet-testing://",prod:"sunrise-meet://",googlePlay:"https://play.google.com/store/apps/details?id=am.sunrise.android.calendar",appStore:"https://itunes.apple.com/app/sunrise-calendar./id599114150"},sentryAppId:"https://c7e2e7567d4f4991993d79e8ef00679b@app.getsentry.com/25098",facebookAppId:292375587511410,jsBridge:"SunriseJSBridge",services:{calendars:[{id:"office365",title:"Office 365",description:"OFFICE365_DESCRIPTION",calendar:!0},{id:"office365-sdf",title:"Office365 (SDF)",description:"OFFICE365_DESCRIPTION",calendar:!0},{id:"outlook",title:"Outlook.com",description:"OFFICE365_DESCRIPTION",calendar:!0},{id:"google",title:"Google",description:"GOOGLE_DESCRIPTION",calendar:!0},{id:"icloud",title:"iCloud",description:"ICLOUD_DESCRIPTION",calendar:!0},{id:"facebook",title:"Facebook",description:"FACEBOOK_DESCRIPTION",calendar:!0},{id:"store",title:"Store",description:"STORE_DESCRIPTION",calendar:!0},{id:"sunrise",title:"Sunrise",description:"SUNRISE_DESCRIPTION",calendar:!0}],apps:[{id:"foursquare",title:"Foursquare",description:"FOURSQUARE_DESCRIPTION",calendar:!0},{id:"google-task",title:"Google Tasks",description:"GTASK_DESCRIPTION",calendar:!0},{id:"wunderlist",title:"Wunderlist",description:"WUNDERLIST_DESCRIPTION",calendar:!0},{id:"twitter",title:"Twitter",description:"TWITTER_DESCRIPTION",calendar:!1},{id:"linkedin",title:"Linkedin",description:"LINNKEDIN_DESCRIPTION",calendar:!1},{id:"producteev",title:"Producteev",description:"PRODUCTEEV_DESCRIPTION",calendar:!0},{id:"evernote",title:"Evernote",description:"EVERNOTE_DESCRIPTION",calendar:!0},{id:"github",title:"GitHub",description:"GITHUB_DESCRIPTION",calendar:!0},{id:"songkick",title:"Songkick",description:"SONGKICK_DESCRIPTION",calendar:!0},{id:"asana",title:"Asana",description:"ASANA_DESCRIPTION",calendar:!0},{id:"tripit",title:"TripIt",description:"TRIPIT_DESCRIPTION",calendar:!0},{id:"todoist",title:"Todoist",description:"TODOIST_DESCRIPTION",calendar:!0},{id:"trello",title:"Trello",description:"TRELLO_DESCRIPTION",calendar:!0},{id:"eventbrite",title:"Eventbrite",description:"EVENTBRITE_DESCRIPTION",calendar:!0},{id:"meetup",title:"Meetup",description:"MEETUP_DESCRIPTION",calendar:!0},{id:"basecamp",title:"Basecamp",description:"BASECAMP_DESCRIPTION",calendar:!0}]},animationEnd:"webkitAnimationEnd oAnimationEnd msAnimationEnd animationend",transitionEnd:"webkitTransitionEnd oTransitionEnd msTransitionEnd transitionend",calendarMinDate:moment().startOf("month").subtract(12,"month").toDate(),calendarMaxDate:moment().startOf("month").add(25,"month").toDate(),eventRowMinHeight:24,eventColumnMinHeight:22,defaultTimezones:[{label:"Paris, France",name:"Europe/Paris"},{label:"London, United Kingdom",name:"Europe/London"},{label:"New York, NY",name:"America/New_York"},{label:"San Francisco, CA",name:"America/Los_Angeles"}],rsvpStatus:[{label:"Not replied",value:"notReplied"},{label:"Going",value:"attending"},{label:"Maybe",value:"unsure"},{label:"Decline",value:"declined"}],routing:{prefix:"",html5Mode:!0},viewUrlPrefix:b+"views/",partialUrlPrefix:b+"partials/_",templateFileSuffix:"_tpl.html",prepareViewTemplateUrl:function(a){return"/"+this.viewUrlPrefix+a+this.templateFileSuffix},preparePartialTemplateUrl:function(a){return"/"+this.partialUrlPrefix+a+this.templateFileSuffix}}}(),"undefined"==typeof String.prototype.contains&&(String.prototype.contains=function(a){return-1!==this.indexOf(a)}),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){return this.slice(0,a.length)==a}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(a){return this.slice(-a.length)==a}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Function.prototype.inheritsFrom||(Function.prototype.inheritsFrom=function(a){return a.constructor==Function?(this.prototype=new a,this.prototype.constructor=this,this.prototype["super"]=a.prototype,_.extend(this,a)):(this.prototype=a,this.prototype.constructor=this,this.prototype["super"]=a,_.extend(this,a)),this}),window.URL=window.URL||window.webkitURL,window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),_.mixin({chunk:function(a,b){return!a||_.isNaN(parseInt(b,10))?[]:_.toArray(_.groupBy(a,function(a,c){return Math.floor(c/parseInt(b,10))}))}}),Handlebars.registerHelper("compare",function(a,b,c,d){var e,f;if(arguments.length<3)throw new Error('Handlerbars Helper "compare" needs 2 parameters');if(void 0===d&&(d=c,c=b,b="==="),e={"===":function(a,b){return a===b},"!==":function(a,b){return a!==b},"<":function(a,b){return b>a},">":function(a,b){return a>b},"<=":function(a,b){return b>=a},">=":function(a,b){return a>=b},"typeof":function(a,b){return typeof a===b}},!e[b])throw new Error('Handlerbars Helper "compare" doesnt know the operator '+b);return f=e[b](a,c),f?d.fn(this):d.inverse(this)}),window.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||function(){function a(a){this._callback=a}return a._interval=void 0,a._intervalCbs=[],a._execute=function(){for(var b=a._intervalCbs.length-1;b>=0;b--)a._intervalCbs[b]()},a.prototype.observe=function(b,c){this._element=b,void 0===a._interval&&(a._interval=window.setInterval(a._execute,60)),a._intervalCbs.push(this._intervalCb.bind(this))},a.prototype.disconnect=function(){a._intervalCbs.splice(_.indexOf(a._intervalCbs,this._intervalCb),1),0===a._intervalCbs.length&&(window.clearInterval(a._interval),a._interval=void 0)},a.prototype._intervalCb=function(){var a=this._element.innerHTML;a!==this.oldHTML&&(this.oldHTML=a,this._callback())},a}(),this.$appTemplates=this.$appTemplates||{},this.$appTemplates["badge-month"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var c,d="";return d+='\n    <div class="'+k((c=a&&a.more,c=null==c||c===!1?c:c.cssClass,typeof c===j?c.apply(a):c))+'" data-date="'+k((c=a&&a.more,c=null==c||c===!1?c:c.attrDate,typeof c===j?c.apply(a):c))+'" style="'+k((c=a&&a.more,c=null==c||c===!1?c:c.attrStyle,typeof c===j?c.apply(a):c))+'">\n      <span>\n        '+k((c=a&&a.more,c=null==c||c===!1?c:c.count,typeof c===j?c.apply(a):c))+"\n      </span>\n    </div>\n  "}function g(a,b){var c,d="";return d+='\n    <div class="'+k((c=a&&a.birthdays,c=null==c||c===!1?c:c.cssClass,typeof c===j?c.apply(a):c))+'" data-date="'+k((c=a&&a.birthdays,c=null==c||c===!1?c:c.attrDate,typeof c===j?c.apply(a):c))+'">\n      <i class="icon icon_gift"></i>\n      <small>'+k((c=a&&a.birthdays,c=null==c||c===!1?c:c.count,typeof c===j?c.apply(a):c))+"</small>\n    </div>\n  "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+="<li>\n  ",h=c["if"].call(b,b&&b.more,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+="\n\n  ",h=c["if"].call(b,b&&b.birthdays,{hash:{},inverse:l.noop,fn:l.program(3,g,e),data:e}),(h||0===h)&&(i+=h),i+="\n</li>\n\n"}),this.$appTemplates.birthday=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<a\n  href="#"\n  role="button"\n  aria-label="',(f=c.ariaLabel)?f=f.call(b,{hash:{},data:e}):(f=b&&b.ariaLabel,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+'"\n  class="',(f=c.cssClass)?f=f.call(b,{hash:{},data:e}):(f=b&&b.cssClass,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+'"\n  data-id="',(f=c.attrId)?f=f.call(b,{hash:{},data:e}):(f=b&&b.attrId,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+'"\n  data-date="',(f=c.attrDate)?f=f.call(b,{hash:{},data:e}):(f=b&&b.attrDate,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+'"\n  data-colors="',(f=c.attrColors)?f=f.call(b,{hash:{},data:e}):(f=b&&b.attrColors,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+'"\n>\n  <span class="occurrence__title">\n    <i class="icon icon_gift"></i>\n    ',(f=c.label)?f=f.call(b,{hash:{},data:e}):(f=b&&b.label,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+"\n  </span>\n</a>\n"}),this.$appTemplates["date-duration"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f,h="";return h+="\n  <!-- one day -->\n  ",f={hash:{},inverse:t.noop,fn:t.program(2,g,b),data:b},d=c.compare||a&&a.compare,e=d?d.call(a,a&&a.durationDays,"===",1,f):w.call(a,"compare",a&&a.durationDays,"===",1,f),(e||0===e)&&(h+=e),h+="\n\n  ",f={hash:{},inverse:t.noop,fn:t.program(5,i,b),data:b},d=c.compare||a&&a.compare,e=d?d.call(a,a&&a.durationDays,">",1,f):w.call(a,"compare",a&&a.durationDays,">",1,f),(e||0===e)&&(h+=e),h+="\n\n"}function g(a,b){var d,e="";return e+='\n    <div class="media media--10">\n      ',d=c["if"].call(a,a&&a.hasIcon,{hash:{},inverse:t.noop,fn:t.program(3,h,b),data:b}),(d||0===d)&&(e+=d),e+='\n      <div class="media__body">\n        ',(d=c.start)?d=d.call(a,{hash:{},data:b}):(d=a&&a.start,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+"\n      </div>\n    </div>\n  "}function h(a,b){return'\n        <div class="media__object form__media-object"></div>\n      '}function i(a,b){var d,e="";return e+='\n    <div class="media media--10">\n      ',d=c["if"].call(a,a&&a.hasIcon,{hash:{},inverse:t.noop,fn:t.program(6,j,b),data:b}),(d||0===d)&&(e+=d),e+='\n      <div class="media__body">\n        ',(d=c.start)?d=d.call(a,{hash:{},data:b}):(d=a&&a.start,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+'\n      </div>\n    </div>\n\n    <div class="media media--10">\n      ',d=c["if"].call(a,a&&a.hasIcon,{hash:{},inverse:t.noop,fn:t.program(8,k,b),data:b}),(d||0===d)&&(e+=d),e+='\n      <div class="media__body">\n        ',(d=c.end)?d=d.call(a,{hash:{},data:b}):(d=a&&a.end,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+"\n      </div>\n    </div>\n  "}function j(a,b){return'\n        <div class="media__object form__media-object">\n          <i class="icon icon_arrow-start"></i>\n        </div>\n      '}function k(a,b){return'\n        <div class="media__object form__media-object">\n          <i class="icon icon_arrow-end"></i>\n        </div>\n      '}function l(a,b){var d,e="";return e+="\n\n  ",d=c["if"].call(a,a&&a.isSameDay,{hash:{},inverse:t.noop,fn:t.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n  ",d=c.unless.call(a,a&&a.isSameDay,{hash:{},inverse:t.noop,fn:t.program(11,m,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n"}function m(a,b){var d,e="";return e+='\n    <div class="media media--10">\n      ',d=c["if"].call(a,a&&a.hasIcon,{hash:{},inverse:t.noop,fn:t.program(6,j,b),data:b}),(d||0===d)&&(e+=d),e+='\n      <div class="media__body">\n        ',d=c.unless.call(a,a&&a.stickTimeToDate,{hash:{},inverse:t.noop,fn:t.program(12,n,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n        ",(d=c.start)?d=d.call(a,{hash:{},data:b}):(d=a&&a.start,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+"\n\n        ",d=c["if"].call(a,a&&a.stickTimeToDate,{hash:{},inverse:t.noop,fn:t.program(14,o,b),data:b}),(d||0===d)&&(e+=d),e+='\n      </div>\n    </div>\n\n    <div class="media media--10">\n      ',d=c["if"].call(a,a&&a.hasIcon,{hash:{},inverse:t.noop,fn:t.program(8,k,b),data:b}),(d||0===d)&&(e+=d),e+='\n      <div class="media__body">\n        ',d=c.unless.call(a,a&&a.stickTimeToDate,{hash:{},inverse:t.noop,fn:t.program(16,p,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n        ",(d=c.end)?d=d.call(a,{hash:{},data:b}):(d=a&&a.end,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+"\n\n        ",d=c["if"].call(a,a&&a.stickTimeToDate,{hash:{},inverse:t.noop,fn:t.program(18,q,b),data:b}),(d||0===d)&&(e+=d),e+="\n      </div>\n    </div>\n  "}function n(a,b){var d,e="";return e+='\n          <span class="float-right">',(d=c.startTime)?d=d.call(a,{hash:{},data:b}):(d=a&&a.startTime,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+"</span>\n        "}function o(a,b){var d,e="";return e+="\n          - ",(d=c.startTime)?d=d.call(a,{hash:{},data:b}):(d=a&&a.startTime,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+"\n        "}function p(a,b){var d,e="";return e+='\n          <span class="float-right">',(d=c.endTime)?d=d.call(a,{hash:{},data:b}):(d=a&&a.endTime,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+"</span>\n        "}function q(a,b){var d,e="";return e+="\n          - ",(d=c.endTime)?d=d.call(a,{hash:{},data:b}):(d=a&&a.endTime,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+"\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var r,s="",t=this,u="function",v=this.escapeExpression,w=c.helperMissing;return s+="\n",r=c["if"].call(b,b&&b.allDay,{hash:{},inverse:t.noop,fn:t.program(1,f,e),data:e}),(r||0===r)&&(s+=r),s+="\n\n",r=c.unless.call(b,b&&b.allDay,{hash:{},inverse:t.noop,fn:t.program(10,l,e),data:e}),(r||0===r)&&(s+=r),s+="\n"}),this.$appTemplates.dayname=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<li class="',(f=c.cssClass)?f=f.call(b,{hash:{},data:e}):(f=b&&b.cssClass,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+'">\n  ',(f=c.label)?f=f.call(b,{hash:{},data:e}):(f=b&&b.label,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+"\n</li>\n"}),this.$appTemplates["details-extension"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n  <div class="form__row form__row--border form-extension">\n    <label class="float-label">\n      <span class="float-label__label">',(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===i?d.call(a,{hash:{},data:b}):d),e+=j(d)+'</span>\n      <div class="form-extension__value">',(d=c.value)?d=d.call(a,{hash:{},data:b}):(d=a&&a.value,d=typeof d===i?d.call(a,{hash:{},data:b}):d),(d||0===d)&&(e+=d),e+="</div>\n    </label>\n  </div>\n"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return g=c.each.call(b,b&&b.values,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\n"}),this.$appTemplates["details-links"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n  <div class="media media--10">\n    <div class="media__object form__media-object">\n      <i class="icon icon_link"></i>\n    </div>\n    <div class="media__body">\n      <a href="',(d=c.uri)?d=d.call(a,{hash:{},data:b}):(d=a&&a.uri,d=typeof d===i?d.call(a,{hash:{},data:b}):d),e+=j(d)+'" role="link">\n        ',(d=c.label)?d=d.call(a,{hash:{},data:b}):(d=a&&a.label,d=typeof d===i?d.call(a,{hash:{},data:b}):d),e+=j(d)+"\n      </a>\n    </div>\n  </div>\n"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return g=c["if"].call(b,b&&b.uri,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\n"}),this.$appTemplates["event-title"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function";return(f=c.title)?f=f.call(b,{hash:{},data:e}):(f=b&&b.title,f=typeof f===h?f.call(b,{hash:{},data:e}):f),(f||0===f)&&(g+=f),g+="&nbsp;\n"}),this.$appTemplates["month-row"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div class="',(f=c.cssClass)?f=f.call(b,{hash:{},data:e}):(f=b&&b.cssClass,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+'" data-date="',(f=c.attrDate)?f=f.call(b,{hash:{},data:e}):(f=b&&b.attrDate,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+'">\n  <div class="month__day__date">',(f=c.label)?f=f.call(b,{hash:{},data:e}):(f=b&&b.label,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+'</div>\n  <div class="month__day__droppable js-droppable" data-date="',(f=c.attrDate)?f=f.call(b,{hash:{},data:e}):(f=b&&b.attrDate,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+'"></div>\n</div>\n'}),this.$appTemplates["row-events"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n      aria-label="',(d=c.ariaLabel)?d=d.call(a,{hash:{},data:b}):(d=a&&a.ariaLabel,d=typeof d===w?d.call(a,{hash:{},data:b}):d),e+=x(d)+'"\n    '}function g(a,b){var d,e="";return e+=" ",d=c["if"].call(a,a&&a.start,{hash:{},inverse:y.noop,fn:y.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e}function h(a,b){var d,e="";return e+=" - ",(d=c.start)?d=d.call(a,{hash:{},data:b}):(d=a&&a.start,d=typeof d===w?d.call(a,{hash:{},data:b}):d),e+=x(d)+" "}function i(a,b){return'\n      aria-disabled="true"\n      disabled="true"\n      tabindex="-1"\n    '}function j(a,b){var d,e="";return e+="\n      ",d=c["if"].call(a,a&&a.start,{hash:{},inverse:y.noop,fn:y.program(9,k,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n      ",d=c["if"].call(a,a&&a.end,{hash:{},inverse:y.noop,fn:y.program(11,l,b),data:b}),(d||0===d)&&(e+=d),e+='\n\n\n      <div class="media__body">\n        ',d=c["if"].call(a,a&&a.notReplied,{hash:{},inverse:y.noop,fn:y.program(13,m,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n        ",d=c["if"].call(a,a&&a.hasIconic,{hash:{},inverse:y.noop,fn:y.program(15,n,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n        ",d=c["if"].call(a,a&&a.isFoursquare,{hash:{},inverse:y.noop,fn:y.program(21,r,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n        ",d=c["if"].call(a,a&&a.title,{hash:{},inverse:y.noop,fn:y.program(23,s,b),data:b}),(d||0===d)&&(e+=d),e+="\n      </div>\n    "}function k(a,b){var d,e="";return e+='\n        <span class="occurrence__time media__object--rev">',(d=c.start)?d=d.call(a,{hash:{},data:b}):(d=a&&a.start,d=typeof d===w?d.call(a,{hash:{},data:b}):d),e+=x(d)+"</span>\n      "}function l(a,b){var d,e="";return e+='\n        <span class="occurrence__time media__object--rev">',(d=c.end)?d=d.call(a,{hash:{},data:b}):(d=a&&a.end,d=typeof d===w?d.call(a,{hash:{},data:b}):d),e+=x(d)+"</span>\n      "}function m(a,b){return'\n          <i class="icon icon_reply"></i>\n        '}function n(a,b){var d,e,f="";return f+='\n          <span class="iconic iconic--month-view">\n\n            ',e=c["if"].call(a,(d=a&&a.iconic,d=null==d||d===!1?d:d.cache,null==d||d===!1?d:d["default"]),{hash:{},inverse:y.noop,fn:y.program(16,o,b),data:b}),(e||0===e)&&(f+=e),f+="\n\n            ",e=c.unless.call(a,(d=a&&a.iconic,d=null==d||d===!1?d:d.cache,null==d||d===!1?d:d["default"]),{hash:{},inverse:y.noop,fn:y.program(18,p,b),data:b}),(e||0===e)&&(f+=e),f+="\n\n          </span>\n        "}function o(a,b){var c,d="";return d+='\n              <img src="'+x((c=a&&a.iconic,c=null==c||c===!1?c:c.cache,c=null==c||c===!1?c:c["default"],typeof c===w?c.apply(a):c))+'" alt="" draggable="false" class="iconic__img iconic__img--default">\n              <img src="'+x((c=a&&a.iconic,c=null==c||c===!1?c:c.cache,c=null==c||c===!1?c:c.focus,typeof c===w?c.apply(a):c))+'" alt="" draggable="false" class="iconic__img iconic__img--active">\n            '}function p(a,b){var d,e,f="";return f+='\n\n              <b class="iconic__circle" style="background-color: #'+x((d=a&&a.iconic,d=null==d||d===!1?d:d.colors,d=null==d||d===!1?d:d["default"],typeof d===w?d.apply(a):d))+';"></b>\n\n              ',e=c.unless.call(a,(d=a&&a.iconic,null==d||d===!1?d:d.offline),{hash:{},inverse:y.noop,fn:y.program(19,q,b),data:b}),(e||0===e)&&(f+=e),f+="\n\n            "}function q(a,b){var c,d="";return d+='\n                <img data-url="'+x((c=a&&a.iconic,c=null==c||c===!1?c:c.url,c=null==c||c===!1?c:c["default"],typeof c===w?c.apply(a):c))+'" alt="" draggable="false" class="iconic__img iconic__img--default iconic__img--nocache">\n                <img data-url="'+x((c=a&&a.iconic,c=null==c||c===!1?c:c.url,c=null==c||c===!1?c:c.focus,typeof c===w?c.apply(a):c))+'" alt="" draggable="false" class="iconic__img iconic__img--active iconic__img--nocache">\n              '}function r(a,b){return'\n          <i class="icon icon_marker"></i>\n        '}function s(a,b){var d,e="";return e+='\n          <span class="occurrence__title">',(d=c.title)?d=d.call(a,{hash:{},data:b}):(d=a&&a.title,d=typeof d===w?d.call(a,{hash:{},data:b}):d),e+=x(d)+"</span>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var t,u,v="",w="function",x=this.escapeExpression,y=this;return v+='<div class="',(t=c.rowCssClass)?t=t.call(b,{hash:{},data:e}):(t=b&&b.rowCssClass,t=typeof t===w?t.call(b,{hash:{},data:e}):t),v+=x(t)+'">\n  <a\n    href="#"\n    role="button"\n    ',t=c.unless.call(b,b&&b.invisible,{hash:{},inverse:y.noop,fn:y.program(1,f,e),data:e}),(t||0===t)&&(v+=t),v+='\n    title="',(t=c.title)?t=t.call(b,{hash:{},data:e}):(t=b&&b.title,t=typeof t===w?t.call(b,{hash:{},data:e}):t),v+=x(t)+" ",t=c.unless.call(b,b&&b.invisible,{hash:{},inverse:y.noop,fn:y.program(3,g,e),data:e}),(t||0===t)&&(v+=t),v+='"\n    draggable="false"\n    class="',(t=c.cssClass)?t=t.call(b,{hash:{},data:e}):(t=b&&b.cssClass,t=typeof t===w?t.call(b,{hash:{},data:e}):t),v+=x(t)+' media media--0"\n    style="',(t=c.cssStyle)?t=t.call(b,{hash:{},data:e}):(t=b&&b.cssStyle,t=typeof t===w?t.call(b,{hash:{},data:e}):t),v+=x(t)+'"\n    data-id="'+x((t=b&&b.occurrence,t=null==t||t===!1?t:t.id,typeof t===w?t.apply(b):t))+'"\n    data-colors="',(u=c.attrColors)?u=u.call(b,{hash:{},data:e}):(u=b&&b.attrColors,u=typeof u===w?u.call(b,{hash:{},data:e}):u),v+=x(u)+'"\n    ',u=c["if"].call(b,b&&b.isDisabled,{hash:{},inverse:y.noop,fn:y.program(6,i,e),data:e}),(u||0===u)&&(v+=u),v+="\n  >\n    ",u=c.unless.call(b,b&&b.invisible,{hash:{},inverse:y.noop,fn:y.program(8,j,e),data:e}),(u||0===u)&&(v+=u),v+="\n  </a>\n</div>\n"}),this.$appTemplates["time-duration"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n  <div class="media__object form__media-object">\n    <i class="icon ',(d=c.iconCssClass)?d=d.call(a,{hash:{},data:b}):(d=a&&a.iconCssClass,d=typeof d===z?d.call(a,{hash:{},data:b}):d),e+=A(d)+'"></i>\n  </div>\n'}function g(a,b){var d,e,f,g="";return g+="\n\n  ",f={hash:{},inverse:B.noop,fn:B.program(4,h,b),data:b},d=c.compare||a&&a.compare,e=d?d.call(a,a&&a.durationDays,"===",1,f):C.call(a,"compare",a&&a.durationDays,"===",1,f),(e||0===e)&&(g+=e),g+="\n\n  ",f={hash:{},inverse:B.noop,fn:B.program(6,i,b),data:b},d=c.compare||a&&a.compare,e=d?d.call(a,a&&a.durationDays,">",1,f):C.call(a,"compare",a&&a.durationDays,">",1,f),(e||0===e)&&(g+=e),g+="\n\n"}function h(a,b){var d,e="";return e+='\n    <div class="media__body muted">\n      ',(d=c.allDayEventLabel)?d=d.call(a,{hash:{},data:b}):(d=a&&a.allDayEventLabel,d=typeof d===z?d.call(a,{hash:{},data:b}):d),e+=A(d)+"\n    </div>\n  "}function i(a,b){var d,e="";return e+="\n    ",d=c["if"].call(a,a&&a.duration,{hash:{},inverse:B.noop,fn:B.program(7,j,b),data:b}),(d||0===d)&&(e+=d),e+="\n  "}function j(a,b){var d,e="";return e+='\n      <div class="media__body muted">\n        ',
(d=c.duration)?d=d.call(a,{hash:{},data:b}):(d=a&&a.duration,d=typeof d===z?d.call(a,{hash:{},data:b}):d),e+=A(d)+"\n      </div>\n    "}function k(a,b){var d,e="";return e+="\n\n  ",d=c["if"].call(a,a&&a.isSameDay,{hash:{},inverse:B.noop,fn:B.program(10,l,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n  ",d=c.unless.call(a,a&&a.isSameDay,{hash:{},inverse:B.noop,fn:B.program(20,s,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n"}function l(a,b){var d,e="";return e+='\n    <div class="media__body">\n      <div>\n        ',(d=c.startTime)?d=d.call(a,{hash:{},data:b}):(d=a&&a.startTime,d=typeof d===z?d.call(a,{hash:{},data:b}):d),e+=A(d)+"\n\n        ",d=c.unless.call(a,a&&a.isSame,{hash:{},inverse:B.noop,fn:B.program(11,m,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n        ",d=c["if"].call(a,a&&a.localTimezone,{hash:{},inverse:B.noop,fn:B.program(15,p,b),data:b}),(d||0===d)&&(e+=d),e+="\n      </div>\n\n      ",d=c["if"].call(a,a&&a.hasTimezone,{hash:{},inverse:B.noop,fn:B.program(17,q,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n    </div>\n  "}function m(a,b){var d,e="";return e+="\n          ",d=c.unless.call(a,a&&a.hideEnd,{hash:{},inverse:B.noop,fn:B.program(12,n,b),data:b}),(d||0===d)&&(e+=d),e+="\n        "}function n(a,b){var d,e="";return e+='\n            <span>\n              <i class="icon icon_arrow"></i>\n              ',(d=c.endTime)?d=d.call(a,{hash:{},data:b}):(d=a&&a.endTime,d=typeof d===z?d.call(a,{hash:{},data:b}):d),e+=A(d)+"\n              ",d=c["if"].call(a,a&&a.duration,{hash:{},inverse:B.noop,fn:B.program(13,o,b),data:b}),(d||0===d)&&(e+=d),e+="\n            </span>\n          "}function o(a,b){var d,e="";return e+='\n                <span class="muted">(',(d=c.duration)?d=d.call(a,{hash:{},data:b}):(d=a&&a.duration,d=typeof d===z?d.call(a,{hash:{},data:b}):d),e+=A(d)+")</span>\n              "}function p(a,b){var d,e="";return e+='\n          <span class="muted">(',(d=c.localTimezone)?d=d.call(a,{hash:{},data:b}):(d=a&&a.localTimezone,d=typeof d===z?d.call(a,{hash:{},data:b}):d),e+=A(d)+")</span>\n        "}function q(a,b){var d,e="";return e+='\n        <div class="form-date__small">\n          ',(d=c.startTimeDiff)?d=d.call(a,{hash:{},data:b}):(d=a&&a.startTimeDiff,d=typeof d===z?d.call(a,{hash:{},data:b}):d),e+=A(d)+"\n          ",d=c.unless.call(a,a&&a.isSame,{hash:{},inverse:B.noop,fn:B.program(18,r,b),data:b}),(d||0===d)&&(e+=d),e+='\n          <span class="muted">(',(d=c.timezone)?d=d.call(a,{hash:{},data:b}):(d=a&&a.timezone,d=typeof d===z?d.call(a,{hash:{},data:b}):d),e+=A(d)+")</span>\n        </div>\n      "}function r(a,b){var d,e="";return e+='\n            <span>\n              <i class="icon icon_arrow"></i>\n              ',(d=c.endTimeDiff)?d=d.call(a,{hash:{},data:b}):(d=a&&a.endTimeDiff,d=typeof d===z?d.call(a,{hash:{},data:b}):d),e+=A(d)+"\n            </span>\n          "}function s(a,b){var d,e="";return e+='\n    <div class="media__body muted">\n      ',d=c["if"].call(a,a&&a.duration,{hash:{},inverse:B.noop,fn:B.program(21,t,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n      ",d=c["if"].call(a,a&&a.localTimezone,{hash:{},inverse:B.noop,fn:B.program(23,u,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n      ",d=c["if"].call(a,a&&a.hasTimezone,{hash:{},inverse:B.noop,fn:B.program(25,v,b),data:b}),(d||0===d)&&(e+=d),e+="\n    </div>\n  "}function t(a,b){var d,e="";return e+="\n        ",(d=c.duration)?d=d.call(a,{hash:{},data:b}):(d=a&&a.duration,d=typeof d===z?d.call(a,{hash:{},data:b}):d),e+=A(d)+"\n      "}function u(a,b){var d,e="";return e+='\n        <span class="muted">(',(d=c.localTimezone)?d=d.call(a,{hash:{},data:b}):(d=a&&a.localTimezone,d=typeof d===z?d.call(a,{hash:{},data:b}):d),e+=A(d)+")</span>\n      "}function v(a,b){var d,e="";return e+='\n      <div class="form-date__small">\n        ',(d=c.startTimeDiff)?d=d.call(a,{hash:{},data:b}):(d=a&&a.startTimeDiff,d=typeof d===z?d.call(a,{hash:{},data:b}):d),e+=A(d)+"\n        ",d=c.unless.call(a,a&&a.isSame,{hash:{},inverse:B.noop,fn:B.program(26,w,b),data:b}),(d||0===d)&&(e+=d),e+='\n        <span class="muted">(',(d=c.timezone)?d=d.call(a,{hash:{},data:b}):(d=a&&a.timezone,d=typeof d===z?d.call(a,{hash:{},data:b}):d),e+=A(d)+")</span>\n      </div>\n      "}function w(a,b){var d,e="";return e+='\n          <span>\n            <i class="icon icon_arrow"></i>\n            ',(d=c.endTimeDiff)?d=d.call(a,{hash:{},data:b}):(d=a&&a.endTimeDiff,d=typeof d===z?d.call(a,{hash:{},data:b}):d),e+=A(d)+"\n          </span>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var x,y="",z="function",A=this.escapeExpression,B=this,C=c.helperMissing;return x=c["if"].call(b,b&&b.hasIcon,{hash:{},inverse:B.noop,fn:B.program(1,f,e),data:e}),(x||0===x)&&(y+=x),y+="\n\n",x=c["if"].call(b,b&&b.allDay,{hash:{},inverse:B.noop,fn:B.program(3,g,e),data:e}),(x||0===x)&&(y+=x),y+="\n\n",x=c.unless.call(b,b&&b.allDay,{hash:{},inverse:B.noop,fn:B.program(9,k,e),data:e}),(x||0===x)&&(y+=x),y+="\n"});var App=angular.module("App",["ngRoute","ngAnimate","ui.bootstrap","ngQueue","ngTouch","ngAria","ngSanitize"]).config(["$routeProvider","$locationProvider","$compileProvider","$logProvider","$httpProvider",function(a,b,c,d,e){function f(a,b){var c=b.defer();return g?c.resolve():a.bootstrap().then(function(){g=!0,c.resolve()},function(a){var b=["initError"];a&&_.isString(a)&&b.push(a),c.reject(b.join(":"))}),c.promise}var g=!1,h="SUNRISE:ENVIRONMENT:PRODUCTION"===CONFIG.environment;(function(){return!!navigator.userAgent.match(/Android|BlackBerry|BB10; Touch|iPhone|iPad|iPod|Opera Mini|IEMobile/i)})();if(window.ZeroClipboard&&ZeroClipboard.config({swfPath:CONFIG.baseUrl+"/ZeroClipboard.swf"}),e.interceptors.push("SRHttpRequestInterceptorService"),e.useApplyAsync(!0),c.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|file|blob|chrome-extension):|data:image\//),c.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|file|sunrise):/),h&&(c.debugInfoEnabled(!1),d.debugEnabled(!1)),CONFIG.routing.html5Mode&&!CONFIG.isChromeApp)b.html5Mode(!0);else{var i=CONFIG.routing.prefix;i&&i.length>0&&b.hashPrefix(i)}f.$inject=["SRBootstrapService","$q"];var j={"/":{templateUrl:CONFIG.prepareViewTemplateUrl("calendar"),controller:"SRCalendarCtrl",resolve:{init:f}},"/close":{templateUrl:CONFIG.prepareViewTemplateUrl("wait"),controller:"SRWaitCtrl"},"/meets/:meetId":{templateUrl:CONFIG.prepareViewTemplateUrl("meet"),controller:"SRCalendarCtrl",resolve:{init:f}}};a.when("/",j["/"]).when("/close",j["/close"]).when("/meets/:meetId",j["/meets/:meetId"]).when("/meet/:meetId",j["/meets/:meetId"]).otherwise({redirectTo:"/"})}]).config(["$tooltipProvider",function(a){a.setTriggers({mouseenter:"mouseleave",click:"click",focus:"blur",openTrigger:"closeTrigger"})}]).run(["SRApiService","$rootScope","$window","SRPlaceService",function(a,b,c,d){c.$windowScope=b,b.$on("$routeChangeSuccess",function(a,c){c&&c.controller&&(b.currentCtrl=c.controller.toLowerCase())})}]);angular.module("App").filter("SRDateFilter_calendarHeadDay",["$filter","SRSettingsService",function(a,b){return function(c){return a("date")(c,b.get("mediumDate"))}}]).filter("SRDateFilter_age",["SRI18nService",function(a){return function(b,c){if(_.isDate(b)){c=c||{},b=moment(b);var d=function(){return c.from&&_.isDate(c.from)?moment(c.from):moment()}(),e=d.diff(b,"years");return c.limit&&e<=c.limit?void 0:1>=e?a.getMessage("AGE_SINGULAR",e):a.getMessage("AGE_PLURAL",e)}}}]).filter("SRDateFilter_calendarMonthDay",["$filter","SRSettingsService",function(a,b){return function(c){var d=c.getDate();return 1===d?(d=[a("date")(c,"MMM"),d],0===b.get("shortDate").indexOf("d")&&d.reverse(),d.join(" ")):d}}]).filter("SRDateFilter_zoneAbbr",["SRDateService",function(a){return function(b,c){return c=c||CONFIG.userTimezone,_.isObject(b)&&!_.isDate(b)&&(b=b.dateTime||b.date),a.getTimezoneAbbreviation(b,c)}}]).filter("SRDateFilter_calendarDay",["SRDateService","SRI18nService",function(a,b){return function(c,d,e){var f,g;c=function(){return _.isDate(c)?c:_.isNumber(c)?new Date(c):new Date}(),f=function(){var b;return b=d?a.allDayUtcToMidnight(c):e?new Date(c):a.dateToCurrentTimezone(c),moment(b).startOf("day")}();var h=-1*moment().startOf("day").diff(f,"day");switch(h){case-1:g=b.getMessage("YESTERDAY");break;case 0:g=b.getMessage("TODAY");break;case 1:g=b.getMessage("TOMORROW")}return g}}]).filter("SRDateFilter_toHour",["$filter","SRSettingsService",function(a,b){return function(c){var d=b.get("format24HourTime")?"HH:mm":"h a";return a("date")(new Date(1970,1,1,c,0,0,0),d)}}]).filter("pad",function(){return function(a,b){return b=b||"minute","minute"===b||"hour"===b&&0===a?("0"+a).slice(-2):a}}).filter("SRDateFilter_fromNow",["SRCacheService","SRI18nService",function(a,b){return function(a,c,d){var e;if(c&&"short"!==c?"long"===c&&(e=moment().subtract(a,"ms").twitterLong()):e=moment().subtract(a,"ms").twitter(),6===Math.min(6,a/864e5))return e;var f,g={"^([0-9]) sec$":d?"RELATIVE_TIME_FUTURE_S_LONG":"RELATIVE_TIME_PAST_S_LONG","^([0-9]+) secs$":d?"RELATIVE_TIME_FUTURE_SS_LONG":"RELATIVE_TIME_PAST_SS_LONG","^([0-9]+)s$":d?"RELATIVE_TIME_FUTURE_SS_SHORT":"RELATIVE_TIME_PAST_SS_SHORT","^([0-9]) min$":d?"RELATIVE_TIME_FUTURE_M_LONG":"RELATIVE_TIME_PAST_M_LONG","^([0-9]+) mins$":d?"RELATIVE_TIME_FUTURE_MM_LONG":"RELATIVE_TIME_PAST_MM_LONG","^([0-9]+)m$":d?"RELATIVE_TIME_FUTURE_MM_SHORT":"RELATIVE_TIME_PAST_MM_SHORT","^([0-9]) hour$":d?"RELATIVE_TIME_FUTURE_H_LONG":"RELATIVE_TIME_PAST_H_LONG","^([0-9]+) hours$":d?"RELATIVE_TIME_FUTURE_HH_LONG":"RELATIVE_TIME_PAST_HH_LONG","^([0-9]+)h$":d?"RELATIVE_TIME_FUTURE_HH_SHORT":"RELATIVE_TIME_PAST_HH_SHORT","^([0-9]) day$":d?"RELATIVE_TIME_FUTURE_D_LONG":"RELATIVE_TIME_PAST_D_LONG","^([0-9]+) days$":d?"RELATIVE_TIME_FUTURE_DD_LONG":"RELATIVE_TIME_PAST_DD_LONG","^([0-9]+)d$":d?"RELATIVE_TIME_FUTURE_DD_SHORT":"RELATIVE_TIME_PAST_DD_SHORT"};for(var h in g){var i=new RegExp(h),j=e.match(i);if(j){f=g[h],e=j[1];break}}return b.getMessage(f,e)}}]).filter("SRDateFilter_localTime",["SRSettingsService","SRDateService","$filter",function(a,b,c){return function(a){if(a===CONFIG.userTimezone)return c("SRDateFilter_timeFormat")(new Date,!1,!0);var d=b.getTimezoneJSDate(Date.now(),a),e=new Date(d.year,d.month,d.date,d.hours,d.minutes);return c("SRDateFilter_timeFormat")(e,!1,!0)}}]).filter("SRDateFilter_longDate",["$filter","SRDateService","SRLocaleService",function(a,b,c){return function(d,e,f){var g,h=c.getLongDate({year:!1});return d=function(){return _.isDate(d)?d:_.isNumber(d)?new Date(d):new Date}(),e?g=b.allDayUtcToMidnight(d):f||(g=b.dateToCurrentTimezone(d)),a("date")(g,h)}}]).filter("SRDateFilter_timeFormat",["SRSettingsService","SRDateService","SRCacheService","SRLocaleService",function(a,b,c,d){return function(e,f,g,h){e=function(){return g?e:b.dateToCurrentTimezone(e)}();var i=function(){var a=[];return a.push(e.getTime()),f&&a.push("reduced"),g&&a.push("originalDate"),h&&a.push("skipTranslate"),a.join(":")}(),j=c.get("SRDateFilter_timeFormat",i);if(j)return j;var k,l=function(){return h?["AM","PM"]:d.getAMPMS()}(),m=a.get("format24HourTime"),n=e.getHours(),o=e.getMinutes(),p=m?"":n>=12?" "+l[1]:" "+l[0];return m||(n%=12,n=n?n:12),o=10>o?"0"+o:o,k=n+":"+o+p,0===e.getMinutes()&&f&&!m&&(k=n+p),f&&(k=k.replace(/ /g,"").toLowerCase()),c.put("SRDateFilter_timeFormat",i,k),k}}]).filter("SRDateFilter_duration",["SRCacheService","SRI18nService",function(a,b){return function(c,d,e,f){var g=function(){var a=[];return a.push(c),d&&a.push(d),e&&a.push(e),f&&a.push("short"),a.join(":")}(),h=a.put("SRDateFilter_duration",g);if(h)return h;if(0===c&&"minutes"===d)return a.put("SRDateFilter_duration",g,b.getMessage("AT_TIME_OF_EVENT")),b.getMessage("AT_TIME_OF_EVENT");"seconds"===d&&(c=1e3*c),"minutes"===d&&(c=60*c*1e3);var i=[],j=moment.duration(c)._data;if(j.years){var k=function(){var a=j.years;return f?a+b.getMessage("SHORT_YEAR"):a>1?b.getMessage("RELATIVE_TIME_YY").replace(/%d/,a):b.getMessage("RELATIVE_TIME_Y")}();i.push(k)}if(j.months){var l=function(){var a=j.months;return f?a+b.getMessage("SHORT_MONTH"):a>1?b.getMessage("RELATIVE_TIME_MM_MONTH").replace(/%d/,a):b.getMessage("RELATIVE_TIME_M_MONTH")}();i.push(l)}if(j.days){var m=function(){var a=j.days;return f?a+b.getMessage("SHORT_DAY"):a>1?b.getMessage("RELATIVE_TIME_DD").replace(/%d/,a):b.getMessage("RELATIVE_TIME_D")}();i.push(m)}if(j.hours){var n=function(){var a=j.hours;return f?a+b.getMessage("SHORT_HOUR"):a>1?b.getMessage("RELATIVE_TIME_HH").replace(/%d/,a):b.getMessage("RELATIVE_TIME_H")}();i.push(n)}if(j.minutes){var o=function(){var a=j.minutes;return f?[a,j.hours?"":b.getMessage("SHORT_MINUTE")].join(""):a>1?b.getMessage("RELATIVE_TIME_MM").replace(/%d/,a):b.getMessage("RELATIVE_TIME_M")}();i.push(o)}if(j.seconds){var p=function(){var a=j.seconds;return f?[a,j.hours||j.minutes?"":b.getMessage("SHORT_SEC")].join(""):a>1?b.getMessage("RELATIVE_TIME_SS").replace(/%d/,a):b.getMessage("RELATIVE_TIME_S")}();i.push(p)}var q=i.join(f?"":", ");return e&&(q=b.getMessage(e,q)),a.put("SRDateFilter_duration",g,q),q}}]).filter("SRDateFilter_fullDate",["$filter","SRDateService",function(a,b){return function(c,d){var e;return c=c||new Date,e=d?b.allDayUtcToMidnight(c):b.dateToCurrentTimezone(c),a("date")(e,"fullDate")}}]).filter("SRDateFilter_dateStringToTime",["$filter",function(a){return function(b){var c=moment(b).toDate();return a("SRDateFilter_timeFormat")(c,!0)}}]),angular.module("App").filter("SRStringFilter_titleCase",function(){return function(a){if("icloud"===a)return"iCloud";if("github"===a)return"GitHub";for(var b=a.split(" "),c=0;c<b.length;c++)b[c]=b[c].charAt(0).toUpperCase()+b[c].slice(1);return b.join(" ")}}).filter("SRStringFilter_foursquareTitle",function(){return function(a){return a?0===a.indexOf("@")?[a.substring(1,a.length).trim()].join(" ").trim():[a].join(" ").trim():""}}).filter("SRStringFilter_limitTo",function(){return function(a,b,c){if(isNaN(b))return a;if(0>=b)return"";if(a&&a.length>=b){if(a=a.substring(0,b),c)for(;" "===a.charAt(a.length-1);)a=a.substr(0,a.length-1);else{var d=a.lastIndexOf(" ");-1!==d&&(a=a.substr(0,d))}return a+"..."}return a}}).filter("SRStringFilter_convertLinks",function(){return function(a){if(a){var b=Autolinker.link(a,{newWindow:!0,stripPrefix:!1,twitter:!1,className:"converted-link"});return b}}}).filter("SRStringFilter_linesbreak",function(){return function(a){return a.replace(/\n\r?/g,"<br>")}}).filter("SRStringFilter_noLinesbreak",function(){return function(a){return a.replace(/<br>?/g," ")}}).filter("SRStringFilter_noHTML",function(){var a=document.createElement("div");return function(b){return a.innerText?a.innerText=b:a.textContent=b,a.innerHTML}}),angular.module("App").filter("SRHelperFilter_range",function(){return function(a,b){b=parseInt(b,10);for(var c=0;b>c;c++)a.push(c);return a}}).filter("SRHelperFilter_toValidElementId",["SRSanitizeService",function(a){return function(b){b=[].concat(b);var c=b.join(" ");return c=a.removeDiacritics(c),c=c.toLowerCase(),c=a.prepareForUrl(c)}}]).filter("SRHelperFilter_translate",["SRI18nService",function(a){return function(b,c){return a.getMessage(b,c)}}]).filter("SRHelperFilter_isEmpty",function(){return function(a){return _.isEmpty(a)}}).filter("SRHelperFilter_trustAsResourceUrl",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]).filter("SRHelperFilter_objectFilteredFromHash",["$filter",function(a){return function(b,c){var d;if(_.keys(b).length>0){d={};for(var e in b)b.hasOwnProperty(e)&&(c[e]===!0?d[e]=b[e]:_.isObject(c[e])&&(d[e]=a("SRHelperFilter_objectFilteredFromHash")(b[e],c[e])))}return d}}]).filter("SRHelperFilter_objectsFilteredFromHash",["$filter",function(a){return function(b,c){for(var d=[],e=0;e<b.length;e++){var f=a("SRHelperFilter_objectFilteredFromHash")(b[e],c);d.push(f)}return d}}]).filter("SRHelperFilter_hashFromSkeleton",["$filter",function(a){return function(b){var c={};for(var d in b)_.isString(b[d])?c[d]=!0:_.isObject(b[d])&&(c[d]=a("SRHelperFilter_hashFromSkeleton")(b[d]));return c}}]),angular.module("App").filter("SRContactFilter_byQueryString",["SRSanitizeService",function(a){var b=function(b,c){for(var d=function(b){var c=b;return c=a.removeDiacritics(c),c=c.toLowerCase(),c=c.replace("-"," "),c=c.replace("."," ")},e=function(b){var c=b;return c=a.removeDiacritics(c),c=c.toLowerCase()},f=d(c),g=e(c),h=[],i=b.length,j=0;i>j;j++){var k=b[j];if(k.email){if(0===k.email.toLowerCase().indexOf(g)){h.push(k);continue}var l=k.email.split("@"),m=l[1]||!1;if(m&&0===m.indexOf(f)){h.push(k);continue}}if(k.name){var n=d(k.name);if(0===n.indexOf(f)){h.push(k);continue}if(-1!==n.indexOf(" "+f)){h.push(k);continue}}}return h},c=function(a,b){for(var c=[],d=a.length,e=0;d>e;e++){var f=a[e],g=0;f.name&&(g+=1,0===f.name.toLowerCase().indexOf(b)&&(g+=3)),f.firstName&&(g+=1,0===f.firstName.toLowerCase().indexOf(b)&&(g+=3)),f.lastName&&(g+=1,0===f.lastName.toLowerCase().indexOf(b)&&(g+=3)),f.email&&(g+=1,0===f.email.toLowerCase().indexOf(b)&&(g+=2)),f.score&&(g+=5,g+=f.score),c.push(g)}return c};return function(a,d){var e=b(a,d),f=c(e,d),g=_.sortBy(e,function(a,b){return-f[b]});return g}}]),angular.module("App").controller("SRMainCtrl",["$scope","$rootScope","SROnlineStatusService","SRBrowserService","SRMessageService","SRI18nService",function(a,b,c,d,e,f){a.onlineStatus=c,a.isMacApp=d.isMacApp(),b.$on("$routeChangeError",function(a,b,c,d){d&&_.isString(d)&&d.startsWith("initError")&&"initError:migration"===d&&e.add({msg:f.getMessage("MIGRATION_ISSUE"),cssClass:"message--init-error message--init-error--migration"})})}]),angular.module("App").controller("SRCalendarCtrl",["$scope","SRCurrentService","SRRefreshService","SRUserService","SRToggleSidebarService","$routeParams","$rootScope","SRBrowserService","$document","$timeout",function(a,b,c,d,e,f,g,h,i,j){g.hasMeetReply=void 0!==f.meetId,a.meetId=f.meetId,a.appCurrent=b,a.SRToggleSidebarService=e,a.isLogged=!!d.getAccessToken(),a.isMacApp=h.isMacApp(),a.showFeedbackBanner=!CONFIG.environment.endsWith("PRODUCTION")}]),angular.module("App").controller("SRWaitCtrl",["$scope","$window","$route","$rootScope","SRBrowserService","SRLocationService","SRI18nService","SRLoadingService",function(a,b,c,d,e,f,g,h){var i=this;this._routeParams=_.getPath(c,"current.params")||{},this._onSuccess=function(){e.isMacApp()&&e.isMacAppVersionBelow(CONFIG.macPopupVersion)?i._routeParams.accessToken?(b.angular.element(document).injector().get("SRSettingsService").set("hideSidebar",!1),b.angular.element(document).injector().get("SRUserService").setAccessToken(i._routeParams.accessToken)["finally"](function(){f.gotoURL("/?mac=1&connect=1")})):f.gotoURL("/?mac"):(b.opener.$windowScope.$broadcast("onPopupSuccess",i._routeParams),b.close(),d.$apply())},this._onError=function(){e.isMacApp()&&e.isMacAppVersionBelow(CONFIG.macPopupVersion)?f.gotoURL("/?mac=1"):(b.opener.$windowScope.$broadcast("onPopupError",i._routeParams),b.close(),d.$apply())},this.init=function(){h.message.add(g.getMessage("PLEASE_WAIT"),!0),i._routeParams.errorDescription?i._onError():i._onSuccess()},this.init()}]),angular.module("App").directive("srMeetReply",["$filter","$interval","$rootScope","SRCurrentMeetService","SRBrowserService","SRPageVisibilityService",function(a,b,c,d,e,f){return{restrict:"E",replace:!0,templateUrl:CONFIG.preparePartialTemplateUrl("meet-reply"),transclude:!0,scope:{meetId:"@"},controller:"SRMeetReplyCtrl",link:function(a,b,g,h){var i=e.isMobile.Android();a.onAttendeeEmailChange=h.onAttendeeEmailChange,a.switchTimezone=h.switchTimezone;var j=c.$on("onChangeTimezone",function(){h.onSwitchTimezone()}),k=c.$on("onCalendarRefresh",function(b,e){if(h.hasSubmitted){var f=a.meetValues.calendarId,g=a.calendarsHash[a.meetValues.calendarId].connectionId;f===e.calendarId&&g===e.connectionId&&(d.get().suggestedTimes=[],c.$emit("reLayout"),k())}});f.register(h.onVisibilityChange),i&&$(window).on("resize.meetAndroidResize",function(){"INPUT"===document.activeElement.tagName&&window.setTimeout(function(){document.activeElement.scrollIntoViewIfNeeded()})}),a.$watch("meetValues.calendarId",function(a,b){a!==b&&h.onCalendarIdChange()},!0),a.$on("$destroy",function(){i&&$(window).off("resize.meetAndroidResize"),f.unregister(h.onVisibilityChange),k(),j(),h.onDestroy()})}}}]),angular.module("App").directive("srMeetReplyProfilePicture",["$timeout","$animate","SRPeopleService","SRParserService",function(a,b,c,d){var e=1e3;return{restrict:"E",templateUrl:CONFIG.preparePartialTemplateUrl("meet-reply-profile-picture"),replace:!0,scope:{attendeeEmail:"=?",organizerEmail:"=?"},link:function(f,g,h,i){var j={};j._hasChanged=!1,j._animate=function(){var c=g.find(".profile-picture").eq(0),d=g.find(".profile-picture").eq(1);b.addClass(c,"animate"),b.addClass(d,"animate"),a(function(){d.css({zIndex:4})},e/2)},j.init=function(a){a&&!j._hasChanged&&(j._hasChanged=!0,c.getImage(a).then(j._animate,j._animate))};var k=f.$watch("attendeeEmail",function(a,b){d.isEmail(a)&&(j.init(a),k())},!0)}}}]),angular.module("App").directive("srMeetReplyAction",["$timeout","$animate","$q","SRLocaleService","SRBrowserService","$filter",function(a,b,c,d,e,f){var g="meet-reply",h=g+"__content",i=h+"--shake",j=g+"__action__spinner",k=g+"__form",l=g+"__confirm",m=l+"__checkmark";return{restrict:"E",templateUrl:CONFIG.preparePartialTemplateUrl("meet-reply-action"),replace:!0,scope:{selectedTimeSlotId:"=?",timeSlotsStartDates:"=?",timezone:"=?",disabled:"="},require:"^srMeetReply",link:function(a,d,n,o){var p=function(){var b=[];return b.push(f("SRDateFilter_longDate")(a.timeSlotsStartDates[a.selectedTimeSlotId])),b.push("@"),b.push(f("SRDateFilter_timeFormat")(a.timeSlotsStartDates[a.selectedTimeSlotId],!0)),b.push("("+f("SRDateFilter_zoneAbbr")(a.timeSlotsStartDates[a.selectedTimeSlotId],a.timezone)+")"),b.join(" ")},q={};q._isAnimating=!1,q._shakeBox=function(){var a=c.defer(),d=$("."+h);return b.addClass(d,i).then(function(){d.removeClass(i),a.resolve()},a.resolve),a.promise},q._showSpinner=function(){var a=c.defer(),e=d.find("."+j);return b.addClass(e,"show").then(a.resolve,a.resolve),a.promise},q._hideSpinner=function(){var a=c.defer(),e=d.find("."+j);return b.removeClass(e,"show").then(a.resolve,a.resolve),a.promise},q._setCustomHeight=function(){if(!e.isMobile.any()){var a=$("."+k);a.css({height:a.height()}).addClass("animate")}},q._showConfirm=function(){var a=c.defer(),d=[],f=$("."+k),g=$("."+l),h=g.find("."+m);return e.isMobile.any()||f.css({height:g.height()}),d.push(b.removeClass(g,"hide")),d.push(b.addClass(f,"hide")),b.addClass(h,"show"),c.all(d).then(a.resolve,a.resolve),a.promise["finally"](function(){f.css({display:"none"})}),a.promise},q._returnToTop=function(){$("."+g).animate({scrollTop:0},e.isMobile.any()?0:800)},a.date=p(),a.hideLabels=!1,a.onClickAction=function(){d.blur(),q._isAnimating||(q._isAnimating=!0,o.shouldSubmitReply()?(q._isAnimating=!0,a.hideLabels=!0,q._showSpinner(),o.submit().then(function(){q._hideSpinner(),q._setCustomHeight(),q._returnToTop(),q._showConfirm()},function(){q._isAnimating=!1,a.hideLabels=!1,q._hideSpinner()})):q._shakeBox().then(function(){q._isAnimating=!1}))},a.$watch("timezone + selectedTimeSlotId",function(b,c){b!==c&&(a.date=p())},!0)}}}]),angular.module("App").directive("srMeetReplyLoading",["$animate",function(a){return{restrict:"E",templateUrl:CONFIG.preparePartialTemplateUrl("meet-reply-loading"),replace:!0,scope:{errors:"=?"}}}]),angular.module("App").directive("srMeetReplyTimeslotsGroup",function(){return{restrict:"E",templateUrl:CONFIG.preparePartialTemplateUrl("meet-reply-timeslots-group"),replace:!0,scope:{timeSlots:"=?",selectedTimeSlotId:"=?",timezone:"=?",type:"@",dateLabel:"@"},require:"^srMeetReply",link:function(a,b,c,d){a.onClickTimeSlot=d.onClickTimeSlot}}}),angular.module("App").directive("srMeetReplyWeekEvents",function(){return{restrict:"A",require:"^srMeetReply",link:function(a,b,c,d){b.on("click",".occurrence--meet",function(b){var c=$(this).attr("data-timeslot-id");a.$apply(function(){d.onClickTimeSlot(c)})}),a.$on("$destroy",function(){b.off("click",".occurrence")})}}}),angular.module("App").directive("srMeetReplyRealtime",["$interval","$filter","SRUserService","SRBrowserService",function(a,b,c,d){return{restrict:"E",templateUrl:CONFIG.preparePartialTemplateUrl("meet-reply-realtime"),replace:!0,scope:{organizer:"=?",updatedDate:"="},link:function(e,f,g,h){e.hideSpinner=c.isLogged()||d.isMobile.any();var i=function(){e.updatedTimeslotsStr=b("SRDateFilter_fromNow")(Date.now()-e.updatedDate,"long")},j=a(i,1e3);i(),e.$on("$destroy",function(){a.cancel(j)})}}}]),angular.module("App").directive("srMeetReplyMap",["SRUserService","SRPlaceService",function(a,b){return{restrict:"E",templateUrl:CONFIG.preparePartialTemplateUrl("meet-reply-map"),replace:!1,scope:{place:"="},link:function(c){c.placeUrl=function(){return _.hasPath(c.place,"address.street")?b.getItineraryUrl(c.place,{startAddress:!0}):b.getMapUrl(c.place)}(),c.mapHeight=a.isLogged()?50:100}}}]),angular.module("App").directive("srMeetReplyConfirmed",["SRMeetModel","SRUserService","$filter","SRI18nService",function(a,b,c,d){return{restrict:"E",templateUrl:CONFIG.preparePartialTemplateUrl("meet-reply-confirmed"),replace:!0,scope:{suggestedTimes:"=",confirmedTimeId:"=",timezone:"=?"},link:function(e){var f=function(b,c){var d=_.find(b,{id:c});return d?a.getTimeSlotDate(d):new Date},g=function(a){var b=[];return b.push(c("SRDateFilter_longDate")(a)),b.push("@"),b.push(c("SRDateFilter_timeFormat")(a,!0)),b.push(c("SRDateFilter_zoneAbbr")(a)),b.join(" ")};e.confirmedText=function(){var a=f(e.suggestedTimes,e.confirmedTimeId),b=g(a);return d.getMessage("MEET_CONFIRMED_FOR","<strong>"+b+"</strong>")}(),e.isLogged=b.isLogged()}}}]),angular.module("App").directive("srMeetReplyDownloadApp",function(){return{restrict:"E",templateUrl:CONFIG.preparePartialTemplateUrl("meet-reply-download-app"),replace:!1,scope:{}}}),angular.module("App").controller("SRMeetReplyCtrl",["$scope","$filter","$timeout","$q","$rootScope","$log","SRParserService","SRPeopleService","SRUserService","SRCalendarModel","SRConnectionModel","SRStorageService","SRSettingsService","SRBeforeUnloadService","SRDateService","SRMeetModel","SRI18nService","SRApiService","SRBrowserService","SRCurrentMeetService","SRNavigateToService","SRLocationService","SRSanitizeService","SRMessageService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y=this;Date.now()-12e4;this._mailsByConnectionId={},this._getErrorMessage=function(a){a=a||{};var b=_.getPath(a,"meta.code"),c=function(){return void 0!==_.getPath(a,"meta.message")?a.meta.message:void 0!==_.getPath(a,"meta.errorMessage")?a.meta.errorMessage:void 0!==_.getPath(a,"meta.error_message")?a.meta.error_message:q.getMessage("API_ISSUE")}();return b>=400?c:q.getMessage("API_ISSUE")},this._getPlaceAddress=function(a){if(a.place&&a.place.address){var b=a.place.address,c=[];return b.street&&c.push(b.street),b.city&&c.push(b.city),b.state&&c.push(b.state),b.country&&c.push(b.country),c.join(", ")}},this._getTimeSlotsStartDates=function(a){return a&&a.length?_.reduce(a,function(a,b,c){var d=p.getTimeSlotDate(b);return a[b.id]=d,a},{}):{}},this._getTimeSlotsOrderedByDay=function(a){var b=a.getAvailableTimeSlotsSorted(),c=Date.now(),d=_.groupBy(b,function(a){var b=p.getTimeSlotDate(a);return moment(o.dateToCurrentTimezone(b)).startOf("day").valueOf()});return _.reduce(d,function(a,b,d){var e=Number(d);b=_.sortBy(b,function(a){var b=p.getTimeSlotDate(a);return b.getTime()});var f=_.groupBy(b,function(a){var b=p.getTimeSlotDate(a);b=o.dateToCurrentTimezone(b);var c=b.getHours();return 0===c||8>c?"NIGHT":8===c||12>c?"MORNING":12===c||18>c?"AFTERNOON":"EVENING"});return a[d]={id:[d,c].join(":"),timeStamp:e,date:new Date(e),groupsOfTimeSlots:f},a},{})},this._getMeetTitle=function(a){if(!_.isEmpty(a)){if(a.title)return b("SRStringFilter_noHTML")(a.title);var c=function(){return a.organizer&&a.organizer.name?a.organizer.name:a.organizer&&a.organizer.email?a.organizer.email:void 0}();return"Meet with <strong>"+b("SRStringFilter_noHTML")(c)+"</strong>"}},this._getMeetDate=function(a){return a.suggestedTimes&&a.suggestedTimes.length?p.getTimeSlotDate(a.suggestedTimes[0]):new Date},this._getMainCalendarsByConnectionId=function(){var a=d.defer();return d.all([j.getFilteredByWritable(),k.getAll({useCache:!0})]).then(function(b){var c=[],d=b[0],e=b[1];if(!(_.isEmpty(b)||_.isEmpty(d)||_.isEmpty(e))){var f=_.groupBy(d,"connectionId"),g=_.keys(f);c=_.reduce(e,function(a,b,c){if(!p.isValidConnectionType(b.type))return a;if(_.hasPath(b,"user.email")&&_.contains(g,b.id)){var d=_.min(f[b.id],function(a){return _.hasPath(a,"defaults.priority")&&_.isNumber(a.defaults.priority)?a.defaults.priority:999});a[b.id]=[d]}return a},{})}a.resolve(c)}),a.promise},this._getMailsByConnectionsId=function(){var a=d.defer(),b={};return k.getAll({useCache:!0}).then(function(c){_.each(c,function(a){_.hasPath(a,"user.email")&&p.isValidConnectionType(a.type)&&(b[a.id]={id:a.id,email:_.getPath(a,"user.email")})}),a.resolve(b)},a.reject),a.promise},this._getCalendarIdByEmail=function(a,b){var c=_.find(y._mailsByConnectionId,function(b){return a===b.email});return c&&_.isArray(b[c.id])?b[c.id][0].id:void 0},this._navigateToMeet=function(a){var b=a.getAvailableTimeSlotsSorted();_.size(b)&&u.meet(b[0])},this._navigateToEvent=function(a){var b=_.getPath(a,"event.id"),c=_.getPath(a,"event.calendarId");_.isUndefined(b)||_.isUndefined(c)||r.meets.getConfirmedEvent(b,c).then(function(a){u.occurrence(a,"week")})},this.hasSubmitted=!1,this.onDestroy=function(){delete e.selectedTimeSlotId,t.remove(),e.hasMeetReply=!1,m.set("currentTimezone",a.meetValues.originalCurrentTimezone),n.unregister(y.onDestroy)},this.onVisibilityChange=function(b,c){if(s.isMobile.iOS()&&"hidden"===c&&"visible"===b){var d=a.meet.id,e=a.meet.status;r.meets.getMeeting(d).then(function(b){b&&"confirmed"===b.status&&"pending"===e&&(t.set(b),a.meet=b)})}},this.shouldSubmitReply=function(){return(y.identity.isLogged||a.validate.attendeeEmail)&&e.selectedTimeSlotId?!0:!1},this.openMeetInApp=function(a,b){if(s.isMobile.any())if(s.isMobile.Android())b&&v.gotoURL(CONFIG.mobileUrls.googlePlay);else if(s.isMobile.iOS()){var c="meets/"+w.prepareForUrl(a),d={delay:250};v.openInApp(CONFIG.mobileUrls.prod+c,d).then(function(){return v.openInApp(CONFIG.mobileUrls.testing+c,d)}).then(function(){b&&v.openInApp(CONFIG.mobileUrls.appStore,d)})}},this.submit=function(){var b=d.defer(),c=a.meet.id,f={timeId:e.selectedTimeSlotId,email:a.identity.email,name:a.identity.name,skipNotificationEmail:!a.meetValues.sendNotificationEmail};return y.identity.set(),a.errors={},r.meets.confirm(c,f).then(function(c){if(i.isLogged()){c=p.createFromJSON(c);var d=c.getConfirmedTimeSlot();c.suggestedTimes=[d],t.set(c),e.$emit("reLayout"),y.hasSubmitted=!0}a.meetValues.hasSubmitted=!0,b.resolve()},function(d){d=d||{},409===_.getPath(d,"meta.code")||410===_.getPath(d,"meta.code")?(a.errors.timeSlotGone=!0,r.meets.getSuggestedTimes(c).then(function(b){a.updatedDate=Date.now(),a.meet.suggestedTimes=b,e.selectedTimeSlotId=null,a.meetValues.startDates=y._getTimeSlotsStartDates(b),a.meetValues.timeSlotsGroupedByDay=y._getTimeSlotsOrderedByDay(a.meet)})):x.add({msg:q.getMessage("API_ISSUE"),closeable:!0}),b.reject()}),b.promise},this.getMeetById=function(b){var c=d.defer();return b?(r.meets.getMeeting(b).then(function(b){var d=function(){a.errors.loadingError=this._getErrorMessage(),c.reject()}.bind(this);_.isEmpty(b)?d():(b=p.createFromJSON(b),f.debug(b),"cancelled"===b.status?d():c.resolve(b))}.bind(this),function(b){a.errors.loadingError=this._getErrorMessage(b),c.reject(b)}.bind(this)),c.promise):(c.reject(),c.promise)},this.getSuggestedTimesById=function(b){var c=d.defer();return r.meets.getSuggestedTimes(b).then(c.resolve,function(b){a.errors.loadingError=this._getErrorMessage(b),c.reject(b)}.bind(this)),c.promise},this.onAttendeeEmailChange=function(){var b=a.identity.email,c=g.isEmail(b);a.validate.attendeeEmail=c,a.loading.attendeeEmail=!1,c&&(a.loading.attendeeEmail=!0,
h.getPersonName(b).then(function(b){a.identity.name=b,a.validate.shouldShowName=!1},function(){a.validate.shouldShowName=!0})["finally"](function(){a.loading.attendeeEmail=!1}))},this.onCalendarIdChange=function(){var b=a.calendarsHash[a.meetValues.calendarId].connectionId,c=_.find(a.connections,{id:b});c&&(a.identity.email=c.info)},this.onClickTimeSlot=function(b,c){if(c=c||{},a.meetValues.shouldShowConfirmButton=!0,i.isLogged()){var d=_.find(a.meet.suggestedTimes,function(a){return a.id===b});c.scrollToTimeSlot?u.meet(d).then(function(){e.selectedTimeSlotId=b}):e.selectedTimeSlotId=b}else e.selectedTimeSlotId=b},this.onSwitchTimezone=function(){a.meetValues.timezone=m.get("currentTimezone"),a.meetValues.timeSlotsGroupedByDay=y._getTimeSlotsOrderedByDay(a.meet),e.selectedTimeSlotId=null,i.isLogged()&&(e.selectedTimeSlotId=null,e.$emit("reLayout"))},this.prepareMeetValues=function(b){var c=d.defer();a.meet=b,a.meetValues.isMobile=s.isMobile.any(),a.meetValues.hasSubmitted=!1,a.meetValues.date=null,a.meetValues.startDates={},a.meetValues.timeSlotsGroupedByDay={},a.meetValues.placeAddress=y._getPlaceAddress(b),a.meetValues.title=y._getMeetTitle(b),a.meetValues.timezone=m.get("currentTimezone"),a.meetValues.originalCurrentTimezone=m.get("currentTimezone"),a.meetValues.sendNotificationEmail=!0,a.meetValues.showViewInAppButton=s.isMobile.Android()||s.isMobile.iOS();var e=o.getDifferrenceBetweenTimezone(a.meetValues.timezone,a.meet.timeZone);return _.hasPath(a,"meet.place.geometry.location.lat")&&0!==e&&(a.meetValues.shouldShowTimeZonePicker=!0,m.set("currentTimezone",a.meet.timeZone)),n.register(y.onDestroy),c.resolve(),c.promise},this.identity={},this.identity.isLogged=i.isLogged(),this.identity.getDefaultEmail=function(){var a=d.defer(),b=m.get("defaultCalendar");return d.all([j.getAll({useCache:!0}),k.getAll({useCache:!0})]).then(function(c){var d=c[0],e=c[1],f=_.find(d,{id:b}),h=_.find(e,{id:_.getPath(f,"connectionId")});if(h&&p.isValidConnectionType(h.type)&&void 0!==_.getPath(h,"user.email"))a.resolve(h.user.email);else if(h&&p.isValidConnectionType(h.type)&&g.isEmail(h.info))a.resolve(h.info);else if(_.isEmpty(e))a.reject();else{k.sortConnectionsByPriority(e);var i=_.chain(e).filter(function(a){return p.isValidConnectionType(a.type)&&(void 0!==_.getPath(a,"user.email")||g.isEmail(a.info))}).first().value();i?a.resolve(_.getPath(i,"user.email")||i.info):a.reject()}},a.reject),a.promise},this.identity.get=function(){var a=d.defer();return y.identity.isLogged?y.identity.getDefaultEmail().then(function(b){a.resolve({name:i.getUserName(),email:b})}):l.get("identity").then(function(b){b=b||{},_.hasPath(b,"email")&&(b.email=b.email.toLowerCase()),a.resolve(b)}),a.promise},this.identity.set=function(){y.identity.isLogged||l.set("identity",a.identity)},this.identity.getCustomIdentity=function(a,b){var c=_.find(a,function(a){return b&&b.email&&a.value===b.email});return c?c:(b&&b.email&&a.unshit({value:b.email,label:b.email}),a[0])},this.init=function(){a.meetId&&(this.openMeetInApp(a.meetId,!1),e.hasMeetReply=!0,a.meetId&&(a.isLogged=this.identity.isLogged,a.updatedDate=Date.now(),a.hasLoadedTimeSlots=!1,a.meetValues={},a.identity={},a.errors={},a.validate={},a.loading={},a.calendarsByConnectionId={},a.calendarsHash={},a.connections=[],i.isLogged()&&(a.meetValues.shouldShowConfirmButton=!0),this.identity.get().then(function(b){a.identity=b,b.email?(a.meetValues.shouldHideInputs=!0,y.onAttendeeEmailChange()):a.meetValues.shouldFocusOnEmailField=!0,y.identity.isLogged&&d.all([y._getMailsByConnectionsId(),y._getMainCalendarsByConnectionId(),k.getAll({useCache:!0}),j.getAll({useCache:!0})]).then(function(c){y._mailsByConnectionId=c[0],a.calendarsByConnectionId=c[1],a.connections=c[2],a.meetValues.calendarId=y._getCalendarIdByEmail(b.email,c[1]),a.calendarsHash=_.zipObject(_.pluck(c[3],"id"),c[3])})}),d.all([y.getMeetById(a.meetId).then(y.prepareMeetValues),y.getSuggestedTimesById(a.meetId)]).then(function(b){var c=b[1];if(a.meet.suggestedTimes=c,a.meetValues.date=y._getMeetDate(a.meet),a.meetValues.startDates=y._getTimeSlotsStartDates(c),a.meetValues.timeSlotsGroupedByDay=y._getTimeSlotsOrderedByDay(a.meet),a.hasLoadedTimeSlots=!0,i.isLogged()){var d=a.meet.copy();"confirmed"===d.status&&(d.suggestedTimes=[],y._navigateToEvent(a.meet)),t.set(d),e.$emit("reLayout"),"pending"===a.meet.status&&y._navigateToMeet(a.meet)}})))},this.init()}]),angular.module("App").directive("srMeetEdit",["SRLayerService","$log","SRDebounceService","SRKeyboardManagerService","SRBrowserService",function(a,b,c,d,e){return{restrict:"E",replace:!0,scope:{},templateUrl:CONFIG.preparePartialTemplateUrl("meet-edit"),controller:"SRMeetEditCtrl",link:function(b,c,f,g){b.srUiClosePopover=function(){b.hasPopover=!1},b.showPopover=function(a){b.hasPopover=a},b.hasPopover=!1,b.forceUrl=!e.isChromeApp()&&!e.isMacApp()&&e.isFlashUnusable(),a.add(c),d.bind("c",g.openTimeSlotModal,{inputDisabled:!0}),b.$on("$destroy",function(){d.unbind("c"),a.remove()})}}}]),angular.module("App").directive("srMeetEditCancel",function(){return{restrict:"E",replace:!0,require:"^srMeetEdit",templateUrl:CONFIG.preparePartialTemplateUrl("meet-edit-cancel"),link:function(a,b,c,d){a.cancel=d.cancel}}}),angular.module("App").directive("srMeetEditSubmit",["$timeout","$document","SRI18nService","SRBrowserService",function(a,b,c,d){return{restrict:"E",replace:!0,require:"^srMeetEdit",templateUrl:CONFIG.preparePartialTemplateUrl("meet-edit-submit"),link:function(e,f,g,h){var i,j=null,k=function(){if(i=$("#copy-url"),!i.length)return a(k,10);var f=function(){void 0!==_.getPath(e,["meet","suggestedTimes",0])&&h.submit()};if(d.hasClipboardSupport())i.on("click",function(b){d.copyURLToClipboard(e.meetUrl),i.trigger("closeTrigger"),e.tooltipValue=c.getMessage("COPIED_EXCL_MARK"),a(function(){i.trigger("openTrigger")},10),a(f,1e3)}).on("mouseenter.zeroClipboard",function(){i.trigger("openTrigger")}).on("mouseleave.zeroClipboard",function(){i.trigger("closeTrigger")});else if(d.isFlashUnusable())i.on("click",f);else{var g="#global-zeroclipboard-html-bridge",j=new ZeroClipboard(i,{hoverClass:"hover",activeClass:"active",debug:!CONFIG.environment.endsWith("PRODUCTION")});j.on("aftercopy",function(b,d){a(function(){i.trigger("closeTrigger"),e.tooltipValue=c.getMessage("COPIED_EXCL_MARK"),a(function(){i.trigger("openTrigger")},10)}),a(f,1e3)}),b.on("mouseenter.zeroClipboard",g,function(){i.trigger("openTrigger")}),b.on("mouseleave.zeroClipboard",g,function(){i.trigger("closeTrigger"),e.tooltipValue=c.getMessage("COPY_TO_CLIPBOARD")})}};e.submitFromKeyboard=h.submit,e.meetUrl=[CONFIG.meetShortUrl,"/",e.meet.id].join(""),e.tooltipValue=c.getMessage("COPY_TO_CLIPBOARD"),k(),e.$on("$destroy",function(){d.hasClipboardSupport()?i.off("click").off("mouseenter.zeroClipboard").off("mouseleave.zeroClipboard"):d.isFlashUnusable()?i.off("click"):(b.off("zeroClipboard.zeroClipboard").off("mouseleave.zeroClipboard"),ZeroClipboard.destroy()),a.cancel(j)})}}}]),angular.module("App").directive("srMeetEditDuration",["$filter",function(a){return{restrict:"E",replace:!0,require:"^srMeetEdit",templateUrl:CONFIG.preparePartialTemplateUrl("meet-edit-duration"),link:function(b,c,d,e){var f=function(){return a("SRDateFilter_duration")(b.meet.duration||0,"minutes")},g=function(){return[{label:a("SRDateFilter_duration")(30,"minutes",null,!0),value:30},{label:a("SRDateFilter_duration")(60,"minutes",null,!0),value:60},{label:a("SRDateFilter_duration")(120,"minutes",null,!0),value:120}]};b.onChange=function(a){b.meet.changeDuration(a.value),b.duration=f(),b.togglePopover()},b.togglePopover=b.srUiClosePopover=function(){b.hasPopover=!b.hasPopover,c.find(".meet-edit__popover-button").blur()},b.hasPopover=!1,b.durations=g(),b.duration=f()}}}]),angular.module("App").directive("srMeetEditLocation",["$rootScope","SRSettingsService","SRPlaceService","$timeout",function(a,b,c,d){return{restrict:"E",replace:!0,require:"^srMeetEdit",templateUrl:CONFIG.preparePartialTemplateUrl("meet-edit-location"),scope:{place:"=?",timezone:"@?"},link:function(a,e,f,g){var h="place",i="later",j=angular.copy(a.timezone),k=function(){b.set("currentTimezone",j),e.find(".form-input--place").val(""),g.updateTimezone()};a.togglePopover=a.srUiClosePopover=function(){a.place=_.isEmpty(a.selected)?void 0:a.selected,a.hasPopover=!a.hasPopover,e.find(".meet-edit__popover-button").blur()},a.onSelectPlace=function(){d(function(){if(!_.isEmpty(a.selected)&&_.hasPath(a.selected,"geometry.location.lat")&&_.hasPath(a.selected,"geometry.location.lng")){var d=a.selected.geometry.location;c.getTimezone([d.lat,d.lng],Date.now()).then(function(a){a&&_.hasPath(a,"timeZoneId")&&a.timeZoneId!==b.get("currentTimezone")&&(b.set("currentTimezone",a.timeZoneId),g.updateTimezone())})}a.srUiClosePopover()})},a.setToLater=function(){a.place={},a.selected=void 0,k(),a.srUiClosePopover(),a.placeType=i},a.hasPopover=!1,a.placeType=void 0!==_.getPath(a,"place.name")?h:i,a.selected=_.clone(a.place),a.$watch("place",function(b,c){b!==c&&(_.isEmpty(b)?a.placeType=i:a.placeType=h)},!0)}}}]),angular.module("App").directive("srMeetEditUrl",function(){return{templateUrl:CONFIG.preparePartialTemplateUrl("meet-edit-url"),restrict:"E",replace:!0,require:"^srMeetEdit",scope:{meetId:"="},link:function(a,b,c,d){a.onClickUrl=function(a){a.preventDefault(),b.find('input[type="text"]').select()},a.meetUrl=[CONFIG.meetShortUrl,"/",a.meetId].join("")}}}),angular.module("App").directive("srMeetButton",["$rootScope","SRDialogService","$timeout","SROnlineStatusService",function(a,b,c,d){return{templateUrl:CONFIG.preparePartialTemplateUrl("meet-button"),restrict:"EA",scope:{},controller:"SRMeetButtonCtrl",controllerAs:"ctrl",link:function(e,f,g,h){var i=null;e.$watch(function(){return a.hasMeetEdit},function(a,b){h.shouldHideMeetButton=a}),e.$watch(function(){return b.hasDialog()},function(a,b){null!==i&&c.cancel(i),i=c(function(){i=null,h.shouldHideMeetButton=a},200)}),e.$watch(function(){return d.isOnline()},function(a,b){h.shouldDisableMeetButton=!a})}}}]),angular.module("App").directive("srMeetEditTitle",["$timeout","SRUserService",function(a,b){return{restrict:"E",replace:!0,require:"^srMeetEdit",scope:{title:"=?",autoTitle:"="},templateUrl:CONFIG.preparePartialTemplateUrl("meet-edit-title"),link:function(a,c,d,e){a.togglePopover=a.srUiClosePopover=function(){a.title=_.isString(a.selected)?a.selected:void 0,a.hasPopover=!a.hasPopover,c.find(".meet-edit__popover-button").blur()},a.setDefaultTitle=function(){a.title=void 0,a.selected=void 0,a.srUiClosePopover()},a.hasPopover=!1,a.userName=b.getUserName(),a.selected=a.title}}}]),angular.module("App").directive("srMeetEditKeyboard",["SRLayerService",function(a){return{restrict:"A",require:"^srMeetEdit",link:function(b,c,d,e){var f={};f._doWhichKey=function(a){a=a||window.event;var b=a.keyCode||a.which;return b},f.onKeydown=function(c){27===f._doWhichKey(c)&&a.get()<=1&&b.$apply(function(){_.hasPath(b,["meet","suggestedTimes",0])?e.submit():e.cancel()})},document.addEventListener("keydown",f.onKeydown,!1),b.$on("$destroy",function(){document.removeEventListener("keydown",f.onKeydown)})}}}]),angular.module("App").directive("srMeetEditCalendar",["$rootScope","$q","$timeout","SRCalendarModel","SRConnectionModel",function(a,b,c,d,e){return{restrict:"E",replace:!0,require:"^srMeetEdit",scope:{calendarId:"=",calendars:"=?",connections:"=?",calendarsHash:"=?"},templateUrl:CONFIG.preparePartialTemplateUrl("meet-edit-calendar"),link:function(a,b,c,d){a.togglePopover=a.srUiClosePopover=function(){a.hasPopover=!a.hasPopover,b.find(".meet-edit__popover-button").blur()},a.hasPopover=!1,a.$watch("calendarId",function(b,c){b!==c&&(a.hasPopover=!1),d.updateFreeBusy()},!0)}}}]),angular.module("App").directive("srMeetEditAddTimeslotButton",function(){return{restrict:"E",replace:!0,require:"^srMeetEdit",scope:{},templateUrl:CONFIG.preparePartialTemplateUrl("meet-edit-add-timeslot-button"),link:function(a,b,c,d){a.onClick=function(a){a.preventDefault(),d.openTimeSlotModal()}}}}),angular.module("App").controller("SRMeetEditAddTimeslotModalCtrl",["$scope","$modalInstance","$filter",function(a,b,c){var d=function(a){var b=[];return b.push(c("SRDateFilter_longDate")(a)),b.push("@"),b.push(c("SRDateFilter_timeFormat")(a,!0)),b.join(" ")};a.value={date:moment().startOf("day").toDate(),time:moment().startOf("hour").toDate(),datetime:moment().startOf("hour").toDate(),formatedDate:d(moment().startOf("hour").toDate())},a.onChange=function(){if(_.isDate(a.value.date)){var b=a.value.date.getFullYear(),c=a.value.date.getMonth(),e=a.value.date.getDate(),f=a.value.time.getHours(),g=a.value.time.getMinutes(),h=new Date(b,c,e,f,g);a.value.datetime=h,a.value.formatedDate=d(h)}},a.addTimeSlot=function(){b.close(a.value.datetime)}}]),angular.module("App").controller("SRMeetEditCtrl",["$scope","$document","$modal","SRSettingsService","SRLayerService","SRCalendarModel","SRConnectionModel","SRUserService","SRCurrentMeetService","$rootScope","$log","$timeout","$q","SRApiService","SROnlineStatusService","SRI18nService","SRMessageService","SRMeetModel","SRNotificationService","SRBrowserService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=this;a.step="loading",a.hasSubmitted=!1,this.openTimeSlotModal=function(){var d=c.open({templateUrl:CONFIG.preparePartialTemplateUrl("meet-add-timeslot-modal"),windowClass:"modal meet-edit__add-timeslot-modal fade scale",controller:"SRMeetEditAddTimeslotModalCtrl",resolve:{}});d.opened.then(function(){l(function(){var a=b.find(".meet-edit__add-timeslot-modal");e.add(a,{focusOnRemove:!0})})}),d.result.then(function(b){b&&_.isDate(b)&&a.meet.addTimeSlot({start:b})}),d.result["finally"](function(a){l(function(){e.remove()})})},this.create=function(){var b=m.defer();return o.isOnline()?(m.all([f.getById(d.get("defaultCalendar")),f.getFilteredByWritable(),g.getAll({useCache:!0})]).then(function(c){var d=c[0],e=_.zipObject(_.pluck(c[2],"id"),c[2]),f=_.filter(c[1],function(a){var b=e[a.connectionId];return r.isValidConnectionType(b.type)}),g=function(){if(d){var a=e[d.connectionId];if(r.isValidConnectionType(a.type))return d}return f[0]}(),h=r.create({calendarId:g.id});a.meet=h,a.step="edit",i.set(h),$(".occurrence").addClass("occurrence--disabled"),b.resolve(),k.debug(h)}),b.promise):(a.step="error",b.reject(),b.promise)},this.onClose=function(){j.hasMeetEdit=!1,i.remove(),j.$emit("reLayout")},this.onApiError=function(){q.add({msg:p.getMessage("API_ISSUE"),cssClass:"message--meet",autoClose:2e3})},this.cancel=function(){u.onClose()},this.submit=function(){var b=function(){return s.hasNotifications?t.isMacApp()?!1:!t.hasClipboardSupport()&&t.isFlashUnusable()?!1:!0:!1}();a.hasSubmitted=!0,a.meet.sync(void 0,function(){this.onApiError()}.bind(this)),a.meet.disable(),j.$emit("reLayout"),b?u.onClose():l(function(){u.onClose()},3e3)},this.updateTimezone=function(){a.meet.changeTimezone(d.get("currentTimezone"))},this.updateFreeBusy=function(){a.meet.updateFreeBusy()},this.getCalendarsGroupedByConnections=function(){var a=m.defer();return m.all([g.getAll({useCache:!0}),f.getFilteredByWritable()]).then(function(b){var c=_.zipObject(_.pluck(b[0],"id"),b[0]),d=b[1];d=_.filter(d,function(a){var b=c[a.connectionId];return r.isValidConnectionType(b.type)});var e=_.groupBy(d,"connectionId");a.resolve(e)},a.reject),a.promise},this.init=function(){m.all([u.getCalendarsGroupedByConnections(),g.getAll({useCache:!0}),f.getAll({useCache:!0})]).then(function(b){a.calendars=b[0],a.connections=b[1],a.calendarsHash=_.zipObject(_.pluck(b[2],"id"),b[2])}),this.create()},this.init()}]),angular.module("App").controller("SRMeetButtonCtrl",["$rootScope","$q","SRCalendarModel","SRI18nService","SRSettingsService","SRConfirmService",function(a,b,c,d,e,f){this.shouldHideMeetButton=!1,this.shouldDisableMeetButton=!1,this.createMeet=function(){return c.getFilteredByWritable().then(function(c){return 0===c.length?(f.add({title:d.getMessage("OOPS"),msg:d.getMessage("CONNECT_ACCOUNTS_ST_MEET"),actions:[{label:d.getMessage("CONNECT_ACCOUNTS_TL"),cssClass:"btn--primary",focus:!0,action:function(){e.openModal({currentSection:"accounts"})}},{label:d.getMessage("CANCEL"),action:function(){}}]}),b.reject()):void(a.hasMeetEdit=!0)})}}]),angular.module("App").directive("srConnect",["$rootScope","SRI18nService","SRLayerService",function(a,b,c){return{restrict:"E",replace:!0,templateUrl:CONFIG.prepareViewTemplateUrl("connect"),controller:"SRConnectCtrl",link:function(a,d,e,f){a.connect=function(a){f.connect(a)},a.$watch("onlineStatus.onLine",function(c,d){c!==d&&(a.onlineStatus.isOnline()&&SROnlineStatusService.isApiReachable()?f.error.reset():f.error.set(b.getMessage("MUST_BE_CONNECTED_TO_INTERNET")))}),c.add(d),a.$on("$destroy",function(){c.remove()})}}}]),angular.module("App").controller("SRConnectCtrl",["$scope","$element","$timeout","$q","$rootScope","SROnlineStatusService","SRUserService","SRBrowserService","SRI18nService","SRLazyLoadService","SRApiService","SRToggleSidebarService",function(a,b,c,d,e,f,g,h,i,j,k,l){this._destroyElement=function(){var d=function(){b.remove(),a.$destroy(),l.toggleSidebar(),e.$$phase||e.$digest()};h.isIE()?c(d):(b.find(".connect__overlay").one(CONFIG.animationEnd,d).addClass("fadeOut"),b.find(".connect__content").addClass("fadeOut"))},this._setAccessToken=function(a){var b=g.setAccessToken(a).then(g.init).then(function(){return this._destroyElement(),e.$emit("didConnect"),d.when()}.bind(this));return b},this.connect=function(a){this.error.reset();var b=k.user.connect(a).then(function(a){return void 0!==_.getPath(a,"accessToken")?this._setAccessToken(a.accessToken):d.reject()}.bind(this),function(a){return a&&"USER_CLOSED_POPUP"===a?d.reject(a):(this.error.set(_.getPath(a,"errorDescription")||i.getMessage("ERROR_TRY_AGAIN")),d.reject(a))}.bind(this));return b},this.error={},this.error.reset=function(){a.error=void 0},this.error.set=function(b){a.error=b},this.init=function(){a.onlineStatus=f,a.isMacApp=h.isMacApp(),a.isBrowserReady=!0,this.error.set(f.isApiReachable()?void 0:i.getMessage("API_ISSUE")),h.isReady().then(function(b){a.isBrowserReady=b}),h.isChromeApp()||j.loadScript("//connect.facebook.net/en_US/all.js#xfbml=1&appId="+CONFIG.facebookAppId,"facebook-jssdk")},this.init()}]),angular.module("App").directive("srCalendarsList",["$rootScope","$q","SRCalendarModel","SRConnectionModel","SROnlineStatusService","SRRefreshStatusService","SRRefreshService","SRBrowserService","SRI18nService","SRSettingsService","$timeout",function(a,b,c,d,e,f,g,h,i,j,k){return{restrict:"E",scope:{type:"@?",isDisabled:"=?",onlyAccounts:"=?",onlyInterestingCalendars:"=?",noHeaders:"=?"},templateUrl:CONFIG.preparePartialTemplateUrl("calendars-list"),link:function(b,c,d,e){var h=a.$on("hasConnections",function(){e.init()}),i=a.$on("hasCalendars",function(){e.init()});b.toggleVisibility=function(b){var c=function(){a.$emit("hasCalendars"),a.$emit("onRsvp"),a.$emit("onUpdate")};b.visible&&_.getPath(f,["calendars",b.id])!==!0&&g.refreshCalendar({calendarId:b.id,connectionId:b.connectionId,forceRefresh:!0}),b.save().then(c,c)},b.toggleReminders=function(a){a.save()},b.addAccount=function(){j.openModal({currentSection:"accounts"})},b.$on("$destroy",function(){i(),h()})},controller:["$scope",function(a){var e=this;this.isVisible=function(b){if("visibility"===a.type)return b&&b.length;if("reminders"===a.type){var c=_.filter(b,function(a){return a.visible===!0});if(c.length)return!0}return!1},this.init=function(){b.all([d.getAll({useCache:!0}),c.getAll({useCache:!0})]).then(function(b){var c=b[0];a.onlyAccounts&&(c=_.filter(c,function(a){return"store"!==a.type})),a.onlyInterestingCalendars&&(c=_.filter(c,function(a){return"store"===a.type}));var d=_.groupBy(b[1],"connectionId"),f={};_.each(c,function(a,b){f[a.id]=e.isVisible(d[a.id])}),a.connectionsVisibility=f,a.connections=c,a.calendars=d,a.isLoading=!1})},a.i18n={ADD_ACCOUNT:i.getMessage("ADD_ACCOUNT"),INTERESTING_CALENDARS:i.getMessage("INTERESTING_CALENDARS")},a.type=a.type||"visibility",a.calendars={},a.connections=[],a.connectionsVisibility={},a.refreshStatus=f,a.isLoading=!0,this.init()}]}}]),angular.module("App").directive("srCalendarDaynames",["SRDateService","$filter","SRCacheService","$rootScope","SRLocaleService",function(a,b,c,d,e){return{template:'<ul class="daynames daynames--{{type}}" data-ng-bind-html="html"></ul>',restrict:"E",replace:!0,scope:{dates:"=?",type:"@"},link:function(a){var b=d.$on("firstDay",function(){a.init()},!0);"week"===a.type&&a.$watch("dates",function(b,c){b!==c&&a.init()}),a.$on("$destroy",function(){b()})},controller:["$scope",function(d){var f=$appTemplates.dayname,g={};g.getCssClass=function(b,c){var d=[];return c=c||null,d.push("daynames__item"),_.isDate(b)&&a.isToday(b)&&d.push("daynames__item--is-today"),(c||_.isDate(b)&&a.isWeekend(b))&&d.push("daynames__item--is-weekend"),d.join(" ")},d.init=function(){var h;if("week"===d.type)h=_.reduce(d.dates,function(a,d,e){var h={cssClass:g.getCssClass(d)},i=d.getTime(),j=c.get("SRDateFilter_calendarHeadDay",i);return j?h.label=j:(h.label=b("SRDateFilter_calendarHeadDay")(d),c.put("SRDateFilter_calendarHeadDay",i,h.label)),a.push(f(h)),a},[]).join("");else if("month"===d.type){var i=a.getDaysOfWeek(),j=e.getDayNames();h=_.reduce(i,function(a,b,c){var d=_.indexOf(j,b),e=0===d||6===d,h={label:b,cssClass:g.getCssClass(b,e)};return a.push(f(h)),a},[]).join("")}d.html=h},d.init()}]}}]),angular.module("App").directive("srConnectionRemove",function(){return{restrict:"A",controller:"SRConnectionRemoveCtrl",link:function(a,b,c,d){b.on("click",function(){a.$apply(function(){d._removeConnection(a.service,a.connections)})}),a.$on("$destroy",function(){b.off("click")})}}}),angular.module("App").directive("srConnectionAdd",function(){return{restrict:"A",controller:"SRConnectionAddCtrl",link:function(a,b,c,d){b.on("click",function(){a.$apply(function(){var e=a.$eval(c.srConnectionAdd);d.addConnection(b,e)})}),a.$on("$destroy",function(){b.off("click")})}}}),angular.module("App").directive("srConnectionWarning",["$rootScope",function(a){return{template:'<i class="icon icon_warning" data-ng-class="{\'hidden\': !hasWarning}"></i>',restrict:"E",replace:!0,controller:"SRConnectionWarningCtrl",link:function(b,c,d,e){var f=a.$on("hasConnections",function(){e.init()});b.$on("$destroy",function(){f()})}}}]),angular.module("App").controller("SRConnectionRemoveCtrl",["$scope","$q","$rootScope","SRConnectionModel","SRCalendarModel","SRApiService","SRSyncTokenModel","SRI18nService","SRConfirmService","SROccurrenceModel",function(a,b,c,d,e,f,g,h,i,j){this._getConnectionTitle=function(a){var b=_.find(CONFIG.services.calendars,function(b){return a===b.id})||_.find(CONFIG.services.apps,function(b){return a===b.id});return b&&b.title?b.title:!1},this._getTitle=function(a){return a?h.getMessage("DISCONNECT_CONCT_X",a):h.getMessage("DISCONNECT_CONCT")},this._getMessage=function(a){return a?h.getMessage("DISCONNECT_CONCT_MSG_X",a):h.getMessage("DISCONNECT_CONCT_MSG")},this._removeConnection=function(a,k){var l=b.defer();if(!a||!k)return l.reject(),l.promise;var m=this._getConnectionTitle(a.type),n=this._getTitle(m),o=this._getMessage(m);return i.add({title:n,msg:o,actions:[{label:h.getMessage("DISCONNECT"),cssClass:"btn--danger--aggressive",focus:!0,action:function(){var h=function(){l.resolve(),c.$emit("onUpdate"),c.$emit("hasConnections"),c.$emit("hasCalendars")};delete k[a.id],j.getFilteredByConnectionId(a.id,{useCache:!0}).then(function(c){b.all([d.removeById(a.id),e.removeFilteredByConnectionId(a.id),f.connections.removeConnection(a),j.removeById(_.pluck(c,"id")),g.removeFilteredByConnectionId(a.id)]).then(h,h)})}},{label:h.getMessage("CANCEL"),cssClass:"btn--gray",action:function(){l.resolve()}}]}),l.promise}}]),angular.module("App").controller("SRConnectionAddCtrl",["$scope","$q","$modal","$timeout","$document","SRLayerService","SRBrowserService","SRRefreshService","SRApiService","SRI18nService","SRMessageService",function(a,b,c,d,e,f,g,h,i,j,k){var l=5e3;this.showiCloudPopup=function(){var a=b.defer(),g=c.open({templateUrl:CONFIG.preparePartialTemplateUrl("modal-connection-form"),windowClass:"modal modal--connection-form fade scale",controller:"SRConnectionFormCtrl",resolve:{type:function(){return"icloud"}}});return g.opened.then(function(){d(function(){var a=e.find(".modal--connection-form");f.add(a,{focusOnRemove:!0})})}),g.result.then(function(){a.resolve(),f.remove()},function(){a.reject(),f.remove()}),a.promise},this.addConnection=function(a,c){if(g.isMacApp()&&"icloud"===c)return this.showiCloudPopup();a.attr("disabled",!0);var d=i.connections.addConnection(c).then(function(a){var c=_.getPath(a,"connectionId");return void 0!==c?h.refreshByConnectionId(c):b.reject()}.bind(this),function(a){return a&&"USER_CLOSED_POPUP"===a?b.reject(a):(k.add({msg:_.getPath(a,"errorDescription")||j.getMessage("ERROR_TRY_AGAIN"),autoClose:l,closeable:!0}),b.reject(a))}.bind(this));return d["finally"](function(){a.attr("disabled",!1)}.bind(this)),d}}]),angular.module("App").controller("SRConnectionWarningCtrl",["$scope","$q","SRConnectionModel",function(a,b,c){this._hasWarning=function(){var a=b.defer();return c.getAll({useCache:!0}).then(function(b){var c=!!_.find(b,function(a){return _.isBoolean(a.disconnected)&&a.disconnected});a.resolve(c)},a.reject),a.promise},this.init=function(){this._hasWarning().then(function(b){a.hasWarning=b})},this.init()}]),angular.module("App").directive("srConfirm",["$rootScope","SRConfirmService","SRPendingEventService","SRI18nService",function(a,b,c,d){return{templateUrl:CONFIG.preparePartialTemplateUrl("confirm"),restrict:"E",replace:!0,scope:{confirm:"="},link:function(a,c,d,e){a.close=function(a){f(),b.remove()};var f=function(){document.removeEventListener("keydown",i),c.off("click","**")},g=function(b){return b.stopPropagation(),b.preventDefault(),a.confirm&&a.confirm.onEscape&&_.isFunction(a.confirm.onEscape)&&a.confirm.onEscape(b),a.close(),!1},h=function(a){a=a||window.event;var b=a.keyCode||a.which;return b},i=function(b){27===h(b)&&a.$apply(function(){g(b)})};document.addEventListener("keydown",i,!1),c.on("click",".btn",function(b){var c=$(this).attr("data-index");a.confirm.actions[c].action(),a.close(),a.$digest()}),a.$on("$destroy",f)}}}]),angular.module("App").directive("srDialog",["$position","$window","SRDialogService","SRLayerService","SRToggleSidebarService","$document","SRDebounceService",function(a,b,c,d,e,f,g){var h=40,i=10,j=380,k=100;return{restrict:"E",replace:!0,scope:{position:"="},templateUrl:CONFIG.prepareViewTemplateUrl("dialog"),link:function(a,b,c,e){var j=Date.now(),k=b.find(".dialog__content"),l={},m=function(){var a={top:k.offset().top,left:k.offset().left};if(a.top+l.height+h>e.windowSize.height){var b=e.windowSize.height-(a.top+l.height);a.top=a.top+b-h}return a.top<0&&(a.top=i),a};a.$watch(function(){return k.height()},g(5,function(b,c){b!==c&&(l={width:k.outerWidth(),height:k.outerHeight()},a.placement=m())}),!0),e.$window.on("resize.resizeDialog",_.debounce(function(){e.windowSize=e.getWindowSize()},100)),f.on("mousedown.closeDialog",function(b){var c=$(b.target);j+300>=Date.now()||c.hasClass("dialog")||c.parents(".dialog").length||c.parents(".ui-datepicker").length||c.hasClass("confirm__wrapper")||c.parents(".confirm__wrapper").length||(!c.hasClass("occurrence")&&!c.parents(".occurrence").length||c.hasClass("occurrence--meet")||c.parents(".occurrence--meet").length)&&(c.hasClass("sr-event")||c.parents(".sr-event").length||a.$apply(function(){a.close()}))}),a.$watch("position",function(a,b){a!==b&&e.init()},!0);var n=function(b){d.get()<=1&&a.$apply(function(){a.close()})},o=function(a){a=a||window.event;var b=a.keyCode||a.which;return b},p=function(a){27===o(a)&&n(a)};document.addEventListener("keydown",p,!1),a.$on("$destroy",function(){f.off("mousedown.closeDialog"),e.$window.off("resize.resizeDialog"),document.removeEventListener("keydown",p)})},controller:["$scope",function(a){var d=this;this.$window=angular.element(b),this.getWindowSize=function(){return{width:d.$window.width(),height:d.$window.height()}},this.getDefaultPlacement=function(){var b=a.position,c={};if(c.left=b.left+b.width+i,b.showmore&&(c.left=b.left-b.width/2,c.left<0&&(c.left=i)),c.left+j>d.windowSize.width&&(b.showmore?c.left=d.windowSize.width-j-i:(c.left=b.left-j-i,c.left<0&&(c.left=b.mouseX+i,c.left+j>d.windowSize.width&&(c.left=b.mouseX-j-i)))),c.top=b.mouseY-k/2,c.top+k+h>d.windowSize.height){var e=d.windowSize.height-(c.top+k);c.top=c.top+e-h}return c.top<0&&(c.top=i),c},this.getRandomSpan=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},this.init=function(){this.windowSize=this.getWindowSize(),a.placement=d.getDefaultPlacement()},a.close=c.close,a.appDialog=c,this.init()}]}}]),angular.module("App").directive("srDialogDetails",["$rootScope","$log","SRCalendarModel","SRLocationService","SRKeyboardManagerService","SRFocusingEventService","SRDialogService","$timeout","$compile","SRUnreadNotificationService","SRCurrentService","SRI18nService","SROccurrenceModel","SROccurrenceEditConfirmService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return{restrict:"E",replace:!0,templateUrl:CONFIG.preparePartialTemplateUrl("dialog-details"),scope:{occurrence:"="},link:function(b,c,h,i){var j=!1;b.remove=i.remove,b.filterAttendees=function(a,b){return _.filter(a,function(a){return a.rsvpStatus===b})},b.changeView=function(a,d){return a?(c.addClass("dialog__wrapper--has-details"),void(b.dialogView={view:a,title:d})):(c.find(".dialog__main").one(CONFIG.transitionEnd,function(){c.removeClass("dialog__wrapper--has-details")}),b.dialogView=null,!1)},b.toggleEditMode=function(){var a={scope:{occurrence:angular.copy(b.occurrence)},edit:!0};j=!0,g.appendDirective(a)},c.on("click",".converted-link",function(a){a.preventDefault();var b=$(this).attr("href");return d.openTo(b),!1}),e.bind("delete",function(){b.occurrence.editable&&i.remove()},{inputDisabled:!0}),e.bind("backspace",function(){b.occurrence.editable&&i.remove()},{inputDisabled:!0});var k=a.$on("eventCreated",function(a,c){if(c&&c.event&&c.id===b.occurrence.id){var d=c.event.id;_.extend(b.occurrence,{id:d,sourceId:d,eventId:d,isNew:!1,iCalUID:void 0}),f.set(b.occurrence)}});b.$on("$destroy",function(){k(),c.off("click","**"),e.unbind("delete"),e.unbind("backspace"),j||"facebook:event"===b.occurrence.type&&"notReplied"===b.occurrence.userRsvpStatus&&a.$emit("onUpdate")})},controller:["$scope",function(e){b.debug(e.occurrence),e.openTo=d.openTo,e.dialogView=null,e.i18n={DONE:l.getMessage("DONE"),PART_RECURRING_EVENT:l.getMessage("PART_RECURRING_EVENT"),EDIT:l.getMessage("EDIT"),DELETE:l.getMessage("DELETE")};var f=this;f.shouldCloseDialog=!0,f.getCalendar=function(){c.getById(e.occurrence.calendarId).then(function(a){e.calendar=a})},f.rsvp=function(b){e.occurrence.userRsvpStatus=b,e.occurrence.userRsvpStatusChanged=!0,e.occurrence.attendees&&e.occurrence.attendees.data&&(e.occurrence.attendees.data=_.map(e.occurrence.attendees.data,function(a){return a.self&&(a.rsvpStatus=b),a})),f.shouldCloseDialog=!1,n.askForUpdateConfirmation(e.occurrence).then(function(b){var c={};b.recurringType&&(c.recurringType=b.recurringType),e.occurrence.save(c).then(function(b){f.shouldCloseDialog=!0,a.$emit("onUpdate"),a.$emit("onRsvp")})})},f.remove=function(){n.askForDeleteConfirmation(e.occurrence).then(function(b){f.shouldCloseDialog&&g.close({force:!0}),e.occurrence.skipNotificationEmail=b.skipNotificationEmail;var c={};b.recurringType&&(c.recurringType=b.recurringType),e.occurrence.cancel(c).then(function(){a.$emit("onUpdate")})})},f.init=function(){f.getCalendar(),j.get({eventId:e.occurrence.id}).then(function(b){b&&(b.read=!0,j.put({eventId:e.occurrence.id},b).then(function(){a.$emit("onRsvp")}))})},f.init()}]}}]),angular.module("App").directive("srDialogDetailsRsvp",["SROnlineStatusService","SRI18nService",function(a,b){[{label:b.getMessage("GOING_2"),value:"attending"},{label:b.getMessage("MAYBE_2"),value:"unsure"
},{label:b.getMessage("DECLINE_2"),value:"declined"}];return{restrict:"E",replace:!0,templateUrl:CONFIG.preparePartialTemplateUrl("dialog-details-rsvp"),scope:{userRsvpStatus:"=",organizer:"=",inviter:"=?"},require:"^srDialogDetails",link:function(c,d,e,f){c.onRsvpChange=function(a){c.hasRsvp=!0,c.userRsvpStatus=a,f.rsvp(a)},c.onlineStatus=a,c.i18n={INVITED_YOU:b.getMessage("INVITED_YOU"),WERE_INVITED:b.getMessage("WERE_INVITED")},c.hasRsvp="notReplied"!==c.userRsvpStatus,c.inviterEmail=_.getPath(c.inviter,["emails",0])||_.getPath(c.organizer,["emails",0]),c.inviterName=_.getPath(c.inviter,"name")||_.getPath(c.organizer,"name")||c.inviterEmail,c.inviterThumbnail=_.getPath(c.inviter,"image.thumbnail.url")||_.getPath(c.organizer,"image.thumbnail.url")}}}]),angular.module("App").directive("srDialogDetailsAttendees",["SRApiService","$q","$timeout","SROnlineStatusService","SRI18nService",function(a,b,c,d,e){return{restrict:"E",replace:!0,scope:{eventId:"@",eventTitle:"@",calendarId:"@",type:"@",attendees:"="},templateUrl:CONFIG.preparePartialTemplateUrl("dialog-details-attendees"),link:function(a,b,c,d){var e=150,f=$(".dialog__details"),g=null;a.attendeesList=angular.copy(a.attendees)||[],a.isLoading=!1,f[0].scrollHeight===f.height()&&d.fetchAttendees(a.eventId,a.calendarId).then(function(b){a.attendeesList=a.attendeesList.concat(b)}),f.on("scroll.getAttendees",function(b){var c=f[0].scrollHeight,h=f.height();c-f.scrollTop()-h<e&&g!==c&&(g=c,d.fetchAttendees(a.eventId,a.calendarId).then(function(b){a.attendeesList=a.attendeesList.concat(b)}))}),a.$watch(function(){return d.isFetchingAttendees},function(b){a.isLoading=b}),a.$on("$destroy",function(){f.off("scroll.getAttendees")})},controller:"SRDialogDetailsAttendeesCtrl"}}]),angular.module("App").directive("srDialogAttendeesList",["SRI18nService",function(a){return{restrict:"E",replace:!0,scope:{attendees:"=",type:"@"},templateUrl:CONFIG.preparePartialTemplateUrl("dialog-attendees-list"),link:function(b,c,d,e){b.viewAllAttendees=function(){var c=e.getInvitedNumber();b.$parent.changeView("details-attendees",a.getMessage("PEOPLE_INVITED",c))},b.$watch("attendees",function(a,b){a!==b&&e.init()},!0)},controller:["$scope",function(b){var c=this;c.getInvitedNumber=function(){return b.attendees&&b.attendees.counts&&_.isNumber(b.attendees.counts.invited)?b.attendees.counts.invited>=100?"100+":b.attendees.counts.invited:0},this.setAttributes=function(a){return _.reduce(a,function(a,c){var d=c.name||void 0,e=c.emails&&c.emails.length?c.emails[0]:!1,f=function(){return c.profiles&&c.profiles.length&&c.profiles[0].url?c.profiles[0].url:void 0}(),g=(function(){var a=[],c=_.find(CONFIG.rsvpStatus,function(a){return a.value===b.rsvpStatus});return d&&a.push(d),e&&a.push(e),c&&a.push(" ("+c.label+")"),a.join(" ")}(),function(){return c.image&&c.image.thumbnail&&c.image.thumbnail.url?c.image.thumbnail.url:void 0}()),h=function(){return c.profiles&&c.profiles.length&&c.profiles[0].url?c.profiles[0].url:void 0}();return a.push({id:c.id,name:d,email:e,url:f,rsvpStatus:c.rsvpStatus,thumbnail:g,profileUrl:h}),a},[])},this.orderAttendees=function(a){return _.sortBy(a,function(a){return"attending"===a.rsvpStatus?0:"unsure"===a.rsvpStatus?1:"declined"===a.rsvpStatus?2:"notReplied"===a.rsvpStatus?3:4})},this.shouldShowViewMoreAction=function(a,b){return _.contains(["office365:event","office365-sdf:event"],a)?_.getPath(b,["counts","invited"])<=5?!1:!0:!1},this.init=function(){var a=angular.copy(b.attendees.data);a=this.setAttributes(a),a=this.orderAttendees(a),b.attendeesList=a,b.showViewMore=this.shouldShowViewMoreAction(b.type,b.attendees)},b.i18n={VIEW_ALL_ATTENDEES:a.getMessage("VIEW_ALL_ATTENDEES",c.getInvitedNumber())},this.init()}]}}]),angular.module("App").directive("srDialogDetailsExtension",["$filter","SRParserService","SRI18nService",function(a,b,c){return{restrict:"E",replace:!0,template:'<div data-ng-bind-html=":: html"></div>',scope:{extension:"="},controller:["$scope",function(d){var e=this,f=$appTemplates["details-extension"];this.addValue=function(d){var e={};return e.name=d.name,e.value=a("SRStringFilter_noHTML")(d.value),"Hangout"===e.name&&b.isURL(d.value)?e.value='<a href="'+d.value+'" class="converted-link converted-link-url" role="link" target="_blank">'+c.getMessage("JOIN_VIDEO_CALL")+"</a>":e.value=a("SRStringFilter_convertLinks")(e.value),e},this.init=function(){var a={};a.values=[],d.extension.values?a.values=_.reduce(d.extension.values,function(a,b,c){return a.push(e.addValue(b)),a},[]):d.extension.value&&d.extension.name&&a.values.push(e.addValue(d.extension)),d.html=f(a)},this.init()}]}}]),angular.module("App").directive("srDialogDetailsPlace",["SRPlaceService","$filter","SROnlineStatusService","SRSanitizeService","SRParserService","SRLocationService",function(a,b,c,d,e,f){return{restrict:"E",replace:!1,templateUrl:CONFIG.preparePartialTemplateUrl("dialog-details-place"),scope:{place:"="},controller:["$scope",function(b){var g=this;this.isURL=function(a){var b=e.isURL(_.getPath(a,["name"]));return b&&_.isEmpty(a.geometry)&&_.isEmpty(a.address)?!0:!1},this.getUrl=function(b){if(g.isURL(b)){var c=b.name;return c&&!/^(f|ht)tps?:\/\//i.test(b.name)&&(c="http://"+b.name),c}return _.hasPath(b,"address.street")?a.getItineraryUrl(b,{startAddress:!0}):a.getMapUrl(b)},this.getDetails=function(a){if(!a)return void 0;var b=[];return a.street&&b.push(a.street),a.city&&b.push(a.city),a.state&&b.push(a.state),a.country&&b.push(a.country),b.join(", ")},this.didMouseUp=function(){var a=window.getSelection?window.getSelection():void 0,c="";_.isUndefined(a)||(c=a.toString()),""===c&&f.openTo(this.getUrl(b.place))},b.placeName=d.removeLineBreaks(b.place.name),b.placeDetails=this.getDetails(_.getPath(b,"place.address")),b.showMap=c.isOnline(),b.didMouseUp=this.didMouseUp.bind(this)}]}}]),angular.module("App").directive("srDialogDetailsDescription",["$filter","SRI18nService",function(a,b){var c=[];return c.push('<div class="form-description" data-ng-class="{\'form-description--action\': hasAction}" data-ng-click="changeView($event)" role="button">'),c.push('<div class="media media--10">'),c.push('<div class="media__object form__media-object"><i class="icon icon_note"></i></div>'),c.push('<div class="media__body">'),c.push('<div class="media media--10">'),c.push('<div class="media__object--rev" data-ng-if=":: hasAction"><i class="icon icon_chevron-right"></i></div>'),c.push('<div class="media__body">'),c.push('<p data-ng-bind-html=":: text"></p>'),c.push("</div>"),c.push("</div>"),c.push("</div>"),c.push("</div>"),c.push("</div>"),{restrict:"E",transclude:!0,replace:!0,scope:{description:"@?"},template:c.join(""),link:function(a){a.changeView=function(c){var d=c.target;a.hasAction&&"A"!==d.tagName&&a.$parent.changeView("details-description",b.getMessage("DESCRIPTION"))}},controller:["$scope",function(b){function c(a){var b=a.split("<br>"),c=0,e=!1,f=[];return b=_.compact(b),b.length>3&&(b=[b[0],b[1],b[2]]),_.each(b,function(a,b){var g=a.length;if(c+=g,d>c)f.push(a);else if(!e){if(a.indexOf(" ")>=0){var h=g-(c-d),i=a.substr(0,h),j=i.lastIndexOf(" ");-1!==j&&(i=i.substr(0,j)),f.push(i+"...")}else f.push(a);e=!0}}),f.join("<br>")}var d=120;b.text=function(){var d=b.description;d=a("SRStringFilter_noHTML")(d),d=a("SRStringFilter_linesbreak")(d);var e=d.length;return d=c(d),e>d.length&&(b.hasAction=!0),d=a("SRStringFilter_convertLinks")(d)}()}]}}]),angular.module("App").directive("srDialogEdit",["$rootScope","SROnlineStatusService","$timeout","SRPlaceService","SRCalendarModel","SRApiService","$log","SRLocationService","$q","SRConnectionModel","SRDateService","SRSanitizeService","$document","$compile","$animate","SRKeyboardManagerService","SRPendingEventService","SRFocusingEventService","SRDialogService","$filter","SRSettingsService","SRSyncingEventService","SRRefreshService","SRCurrentService","SRI18nService","SROccurrenceModel","SROccurrenceEditConfirmService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){return{restrict:"E",replace:!0,templateUrl:CONFIG.preparePartialTemplateUrl("dialog-edit"),scope:{occurrence:"=",isNew:"=?",hasChanged:"=?"},link:function(b,d,e,f){b.cancel=f.cancel,b.save=f.save,b.changeView=function(a,c){return a?(d.addClass("dialog__wrapper--has-details"),void(b.dialogView={view:a,title:c})):(d.find(".dialog__main").one(CONFIG.transitionEnd,function(){d.removeClass("dialog__wrapper--has-details")}),b.dialogView=null,!1)},b.showColorSelector=function(){b.hasColorSelector=!0},b.srUiClosePopover=function(){b.hasColorSelector=!1},b.toglleFullEditing=function(){b.isFullEditing=!b.isFullEditing,b.hideDateTime=!1,c(function(){a.$emit("resizeDialog")})},d.on("click.convertedLink",".converted-link",function(a){a.preventDefault();var b=$(this).attr("href");return h.openTo(b),!1}),p.bind("meta+enter",f.save,{propagate:!0}),p.bind("meta+s",f.save,{propagate:!1}),b.$watch("occurrence.calendarId",function(a,b){a!==b&&f.calendars.getCurrentCalendar()},!0),b.$watch("occurrence.place",function(a,b){a!==b&&f.setTimezone(a,b)},!0),b.$watch("occurrence.allDay",function(a,c){a!==c&&(a?b.occurrence.timezone=null:f.setTimezone(b.occurrence.place))},!0),b.$watch("occurrence",function(a,c){a!==c&&(b.hasChanged=!0)},!0);var g=a.$on("hasUpdatedTimezone",function(){f.hasUpdatedTimezone=!0}),i=a.$on("eventCreated",function(a,c){if(c&&c.event&&c.id===b.occurrence.id){var d=c.event.id;_.extend(b.occurrence,{id:d,sourceId:d,eventId:d,isNew:!1,iCalUID:void 0}),r.set(b.occurrence)}});b.$on("$destroy",function(){g(),i(),d.off("click.convertedLink"),p.unbind("meta+enter"),p.unbind("meta+s"),f.reset()})},controller:["$scope",function(f){var h=this;f.i18n={ALERTS:y.getMessage("ALERTS"),NONE:y.getMessage("NONE"),DONE:y.getMessage("DONE"),TIMEZONE:y.getMessage("TIMEZONE"),ADD_DESCRIPTION:y.getMessage("ADD_DESCRIPTION"),MORE_OPTIONS:y.getMessage("MORE_OPTIONS"),CANCEL:y.getMessage("CANCEL"),SAVE:y.getMessage("SAVE"),DESCRIPTION:y.getMessage("DESCRIPTION"),REPEAT:y.getMessage("REPEAT"),PLACEHOLDER_DESCRIPTION:y.getMessage("PLACEHOLDER_DESCRIPTION"),PLACEHOLDER_TITLE:y.getMessage("PLACEHOLDER_TITLE"),TYPE_A_PLACE:y.getMessage("TYPE_A_PLACE"),LOCATION:y.getMessage("LOCATION"),PEOPLE:y.getMessage("PEOPLE"),CALENDARS:y.getMessage("CALENDARS")},h.hasChanged=!1,h.calendars={},h.calendars.addConnectionInfo=function(a){var b=i.defer();return j.getAll({useCache:!0}).then(function(c){_.each(a,function(a){a.connectionInfo=function(){var b=_.find(c,function(b){return b.id===a.connectionId});return[t("SRStringFilter_titleCase")(b.type)," (",b.info,")"].join("")}()}),b.resolve(a)}),b.promise},h.calendars.getWritableCalendars=function(a){return i.all([e.getFilteredByWritable(),j.getAll({useCache:!0})]).then(function(a){var b=a[0],c=a[1];return e.sortCalendarsByConnection(b,c),h.calendars.addConnectionInfo(b)}).then(function(a){f.calendars=a})},h.calendars.getRelatedCalendars=function(){return i.all([e.getFilteredByConnectionId(f.occurrence.connectionId,{useCache:!0}),j.getAll({useCache:!0})]).then(function(a){var b=_.filter(a[0],function(a){return a.writable}),c=a[1];return e.sortCalendarsByConnection(b,c),h.calendars.addConnectionInfo(b)}).then(function(a){f.calendars=a})},h.calendars.getCurrentCalendar=function(){e.getById(f.occurrence.calendarId).then(function(a){f.calendar=a})},h.setTimezone=function(a,c){var e=i.defer(),g=function(a){f.occurrence.timezone=a||f.occurrence.timezone||u.get("currentTimezone"),e.resolve()};if(h.hasUpdatedTimezone)g(f.occurrence.timezone);else if(_.hasPath(a,["geometry","location","lat"])&&b.isOnline()){var j=f.occurrence.place.geometry.location;d.getTimezone([j.lat,j.lng],f.dates.start).then(function(a){g(a.timeZoneId)})}else g();return e.promise},h.original={},h.setOriginalValues=function(){h.original.occurrence=f.occurrence.copy(),h.original.timezone={},h.original.occurrence.timezone&&(h.original.timezone.name=angular.copy(f.occurrence.timezone),h.original.timezone.diff=k.getDifferrenceBetweenTimezone(f.occurrence.timezone,CONFIG.userTimezone,f.occurrence.startDate))},h.getDates=function(){var a={};if(f.occurrence.allDay)a.start=function(){var a=k.allDayUtcToMidnight(f.occurrence.startDate),b=a.getTime()-f.occurrence.startDate.getTime();return new Date(f.occurrence.startDate.getTime()+b)}(),a.end=function(){var a=moment(f.occurrence.endDate).subtract(1,"day").toDate(),b=k.allDayUtcToMidnight(a),c=b.getTime()-a.getTime();return new Date(a.getTime()+c)}();else{var b=function(){return!h.original.timezone.diff||h.original.timezone.diff&&_.isNaN(h.original.timezone.diff)?0:h.original.timezone.diff}();a.start=new Date(f.occurrence.startDate.getTime()+b),a.end=new Date(f.occurrence.endDate.getTime()+b)}return a},h.getDiff=function(a){if(f.occurrence.allDay)return 60*f.occurrence[a].getTimezoneOffset()*1e3;if(h.original.timezone.name!==f.occurrence.timezone){var b=k.getDifferrenceBetweenTimezone(f.occurrence.timezone,CONFIG.userTimezone,f.occurrence[a]);return _.isNaN(b)?0:b}return!h.original.timezone.diff||_.isNaN(h.original.timezone.diff)?0:h.original.timezone.diff},h.reset=function(){h.hasChanged||(f.occurrence=h.original.occurrence.copy(),f.isNew&&(q.remove(),r.remove(),h.original.occurrence.allDay?c(function(){a.$emit("reLayout")}):$("."+x._location).find('.occurrence[data-id="'+f.occurrence.id+'"]').remove()))},h.hydrateDates=function(){var a=function(){if(f.occurrence.allDay){var a=moment(f.dates.start).startOf("day").toDate();return k.localToUtc(a)}return new Date(f.dates.start.getTime()-h.getDiff("startDate"))}(),b=function(){if(f.occurrence.allDay){var a=moment(f.dates.end).startOf("day").add(1,"day").toDate();return k.localToUtc(a)}return new Date(f.dates.end.getTime()-h.getDiff("endDate"))}();f.occurrence.allDay&&b.getTime()<=a.getTime()?b=moment(a).add(1,"day").toDate():!f.occurrence.allDay&&b.getTime()<a.getTime()&&(b=new Date(a.getTime()+36e5)),f.occurrence.startDate=a,f.occurrence.endDate=b},h.cancel=function(){h.hasChanged=!1,s.close({state:"cancel"})},h.save=function(){return f.occurrence.title?_.contains(v.get(),f.occurrence.id)?!1:(h.hydrateDates(),a.$emit("onDialogSave"),void c(function(){A.askForUpdateConfirmation(f.occurrence).then(function(b){h.hasChanged=!0,r.remove(),f.occurrence.skipNotificationEmail=b.skipNotificationEmail,f.occurrence.durationDays=k.getDaysDuration(f.occurrence.startDate,f.occurrence.endDate);var c={};b.recurringType&&(c.recurringType=b.recurringType),f.occurrence.save(c).then(function(){f.isNew&&q.remove(),a.$emit("onUpdate")}),a.$emit("reLayout"),f.calendar.visible||e.getById(f.calendar.id).then(function(b){b.visible=!b.visible,b.save().then(function(){a.$emit("hasCalendars"),a.$emit("onRsvp"),a.$emit("onUpdate"),w.refreshCalendar({calendarId:f.calendar.id,connectionId:f.calendar.connectionId})})}),f.isNew&&q.update(angular.extend(f.occurrence,{isDrawing:!1})),s.close({force:!0,state:"save"})})})):!1},h.init=function(){f.hideDateTime=f.isNew&&"week"===x._location,f.isFullEditing=!f.isNew,f.dialogView=null,f.hasDialogView=!1,f.hasColorSelector=!1,f.hasTransparency=f.occurrence&&_.isBoolean(f.occurrence.transparent),h.setOriginalValues(),f.isNew?h.calendars.getWritableCalendars():h.calendars.getRelatedCalendars(),h.calendars.getCurrentCalendar(),f.occurrence.timezone||h.setTimezone();var a=u.get("defaultAlert");void 0===_.getPath(f,["occurrence","reminders"])&&_.isNumber(a)&&(f.occurrence.reminders=[{minutes:a}]),f.dates=h.getDates()},g.debug(f.occurrence),h.init()}]}}]),angular.module("App").directive("srDialogEditCalendar",function(){return{restrict:"E",replace:!0,scope:{calendarId:"=",connectionId:"=",calendars:"="},templateUrl:CONFIG.preparePartialTemplateUrl("dialog-edit-calendar"),controller:"SRDialogEditCalendarCtrl",link:function(a,b,c,d){a.onChange=d.onChange,a.$watchCollection("calendars",function(){d.init()})}}}),angular.module("App").directive("srDialogEditTitle",["SRKeyboardManagerService",function(a){return{restrict:"E",replace:!0,scope:{title:"=",shouldFocus:"="},templateUrl:CONFIG.preparePartialTemplateUrl("dialog-edit-title"),require:"^srDialogEdit",link:function(b,c,d,e){a.bind("enter",e.save,{target:c[0],propagate:!1}),b.$on("$destroy",function(){a.unbind("enter")})}}}]),angular.module("App").directive("srDialogEditReminders",["SRI18nService",function(a){return{restrict:"E",replace:!0,templateUrl:CONFIG.preparePartialTemplateUrl("dialog-edit-reminders"),scope:{reminders:"="},link:function(a,b,c,d){a.addReminder=function(){a.newReminder&&(a.reminders||(a.reminders=[]),a.reminders.length<5&&a.reminders.push({minutes:a.newReminder.minutes}),a.newReminder=null)},a.removeReminder=function(b){a.reminders.splice(a.reminders.indexOf(b),1)},a.$watch("reminders",function(b,c){b!==c&&(a.alerts=d.getAlertsList())},!0)},controller:["$scope",function(b){b.i18n={NONE:a.getMessage("NONE"),ALERT_LABEL:a.getMessage("ALERT_LABEL"),ADD_ALERT:a.getMessage("ADD_ALERT")},b.newReminder=null,b.defaultAlerts=[{label:a.getMessage("AT_TIME_OF_EVENT"),minutes:0},{label:a.getMessage("MINUTES_BEFORE",5),minutes:5},{label:a.getMessage("MINUTES_BEFORE",15),minutes:15},{label:a.getMessage("MINUTES_BEFORE",30),minutes:30},{label:a.getMessage("HOUR_BEFORE",1),minutes:60},{label:a.getMessage("HOURS_BEFORE",2),minutes:120},{label:a.getMessage("HOURS_BEFORE",6),minutes:360},{label:a.getMessage("HOURS_BEFORE",12),minutes:720},{label:a.getMessage("DAY_BEFORE",1),minutes:1440},{label:a.getMessage("DAYS_BEFORE",2),minutes:2880},{label:a.getMessage("DAYS_BEFORE",3),minutes:4320},{label:a.getMessage("DAYS_BEFORE",5),minutes:7200},{label:a.getMessage("DAYS_BEFORE",7),minutes:10080}],this.getAlertsList=function(){return _.reduce(b.defaultAlerts,function(a,c,d){var e=_.find(b.reminders,function(a){return a.minutes===c.minutes});return e||a.push(c),a},[])},b.alerts=this.getAlertsList()}]}}]),angular.module("App").directive("srDialogEditAttendees",["$filter","SRPeopleService","$q","$timeout","SRContactModel","SRKeyboardManagerService","$rootScope","SRI18nService","SRParserService","SRDebounceService",function(a,b,c,d,e,f,g,h,i,j){var k=300,l=10;return{restrict:"E",replace:!0,scope:{attendees:"=?"},templateUrl:CONFIG.preparePartialTemplateUrl("dialog-edit-attendees"),link:function(a,b,c,e){a.$input=b.find(".people-picker__input");var f=b.find(".people-picker__clone span");a.$input.on("focus",function(){a.$apply(function(){a.isFocus=!0})}),a.$input.on("blur",function(){a.$apply(function(){a.isFocus=!1})}),b.on("keydown",e.onKeyDown.bind(e)),e.$element=b,a.setFocus=function(){d(function(){a.$input.focus()})};var h=function(){var c=b.width(),d=a.$input.position(),e=Math.ceil(d.left),g=c-e,h=f.innerWidth();a.newAttendee?h>=g?a.inputWidth=c:a.inputWidth=c-e:a.inputWidth=20},i=g.$on("onDialogSave",function(){e.addAttendee(a.newAttendee),a.newAttendee=""});a.$watch("newAttendee",function(){h()}),a.$on("$destroy",function(){i(),a.$input.off("focus"),a.$input.off("blur"),b.off("keydown")})},controller:["$scope",function(f){this.onInputChange=function(a){this.getPeople(f.newAttendee).then(function(a){f.showPopover=a.length>0,f.sections[0]=a})},this.onInputBlur=function(a){f.showPopover=!1},this.onInputFocus=function(a){f.showPopover=f.sections[0].length>0},this.didSelectRowAtIndexPath=function(a){this.addAttendee(f.sections[a.section][a.row]),f.newAttendee=null,f.showPopover=!1,f.sections[0]=[]},this.getPeople=j(k,function(b){var d=c.defer();return _.isEmpty(b)?(d.resolve([]),d.promise):(e.getAll({useCache:!0}).then(function(c){c=a("SRContactFilter_byQueryString")(c,b);for(var e={},g=0;g<_.getPath(f.attendees,"data.length");g++){var h=f.attendees.data[g];e[h.emails[0]]=!0}c=_.reject(c,function(a){return e[a.email]}),c=_.first(c,l),d.resolve(c)}),d.promise)}),this.getImages=function(){return f.attendees&&f.attendees.data?void _.each(f.attendees.data,function(a){f.images[a.emails[0]]||b.getImage(a.emails[0]).then(function(b){f.images[a.emails[0]]=b})}):!1},this.onKeyDown=function(a){var b=a.target,c=!1;if(8===a.keyCode){if(b.className.contains("people-picker__input")&&b.value.length<=0&&this.setFocusOnLastAttendee(),b.className.contains("people-picker__search-choice")){var d=b.getAttribute("data-index");this.removeAttendee(d)}"INPUT"!==b.tagName.toUpperCase()&&(c=!0)}else 188===a.keyCode&&b.className.contains("people-picker__input")&&(_.isEmpty(f.newAttendee)||(this.addAttendee(f.newAttendee),f.newAttendee=null,c=!0));return c?(a.cancelBubble=!0,a.stopPropagation?(a.stopPropagation(),a.preventDefault()):a.returnValue=!1,!1):void 0},this.setFocusOnLastAttendee=function(){if(f.attendees&&f.attendees.data&&!f.newAttendee&&f.attendees.data.length>0){var a=this.$element.find(".people-picker__search-choice").last();d(function(){a.focus()})}},this.addAttendee=function(a){var b=[];if(_.isObject(a))b.push({emails:[a.email],name:a.name,firstName:a.firstName,lastName:a.lastName,rsvpStatus:"notReplied"});else{var c=i.getEmailsFromString(a)||[a];_.each(c,function(a){b.push({emails:[a],rsvpStatus:"notReplied"})})}var d=b.length;_.isEmpty(f.attendees)?f.attendees={counts:{invited:d},data:b}:(f.attendees.counts.invited=f.attendees.counts.invited+d,f.attendees.data=f.attendees.data.concat(b)),this.getImages()},this.removeAttendee=function(a){f.attendees.data.splice(a,1),f.attendees.counts.invited--,f.setFocus()},f.i18n={TYPE_NAME_ADDRESS:h.getMessage("TYPE_NAME_ADDRESS")},f.newAttendee=null,f.images={},f.sections=[[]],f.tableInfo={},f.tableInfo.random=function(){return Math.random()},f.delegate={didSelectRowAtIndexPath:this.didSelectRowAtIndexPath.bind(this)},f.onInputChange=this.onInputChange.bind(this),f.onInputBlur=this.onInputBlur.bind(this),f.onInputFocus=this.onInputFocus.bind(this),f.removeAttendee=this.removeAttendee.bind(this)}]}}]),angular.module("App").directive("srDialogEditPlace",["$rootScope","$timeout",function(a,b){return{restrict:"E",replace:!0,templateUrl:CONFIG.preparePartialTemplateUrl("dialog-edit-place"),scope:{place:"=?",timezone:"=?",placeholder:"@?",favoritesEnabled:"=?",frequentsEnabled:"=?",predictionsEnabled:"=?",autofocus:"=?",tabindex:"=?",onSelectPlace:"&?"},controller:"SRDialogEditPlaceCtrl",link:function(a,c,d,e){a.$input=c.find("input.input--place").first(),a.tabindex=a.tabindex||0,e.$input=a.$input,e.$element=c,a.autofocus&&b(function(){a.$input.focus()},10)}}}]),angular.module("App").directive("srDialogEditRecurrence",["SRSettingsService","SRLocaleService","SRI18nService","SRDateService","$log",function(a,b,c,d,e){var f={0:RRule.SU,1:RRule.MO,2:RRule.TU,3:RRule.WE,4:RRule.TH,5:RRule.FR,6:RRule.SA};return{restrict:"E",replace:!0,scope:{recurrence:"=",start:"=",allDay:"="},templateUrl:CONFIG.preparePartialTemplateUrl("dialog-edit-recurrence"),link:function(a,b,c,d){var e={};e.onChangeFreq=function(){_.isEmpty(a.selected.freq.options)?(a.ruleOptions={},d.init()):(_.extend(a.ruleOptions,a.selected.freq.options),a.ruleOptions.byweekday=[],a.selected.byweekday=d.getWeekDayOption(a.ruleOptions),a.ruleOptions.bymonthday=[],a.selected.bymonthday=d.getMonthDayOption(a.ruleOptions),a.selected.byday=d.getByDayOption(a.ruleOptions)),a.hasRecurrence=!_.isEmpty(a.ruleOptions),d.update()},e.end=function(b,c){b!==c&&(delete a.ruleOptions.count,delete a.ruleOptions.until,"count"===b?a.ruleOptions.count=5:"until"===b&&(a.ruleOptions.until=function(){return a.allDay?moment().startOf("day").add(1,"months").toDate():moment().add(1,"months").toDate()}()),d.update())},e.interval=function(){a.ruleOptions.interval=a.selected.interval,d.update()},e.untilDate=function(){d.update()},e.toggleWeekDay=function(b){var c=a.selected.byweekday.indexOf(b);c>-1?a.selected.byweekday.splice(c,1):a.selected.byweekday.push(b),a.selected.byweekday.length?a.ruleOptions.byweekday=a.selected.byweekday.slice(0):a.ruleOptions.byweekday&&delete a.ruleOptions.byweekday,d.update()},e.byday=function(b,c){if(b!==c){if(1!==a.ruleOptions.freq)return;a.selected.byday.n?a.ruleOptions.byweekday=[f[d.localStart.getDay()].nth(+a.selected.byday.n)]:delete a.ruleOptions.byweekday,d.update()}},e.countChange=function(){d.update()},a.onChangeFreq=e.onChangeFreq,a.toggleWeekDay=e.toggleWeekDay,a.onDatepickerChange=e.untilDate,a.onChangeInterval=e.interval,a.onCountChange=e.countChange,a.$watch("selected.end",e.end,!0),a.$watch("selected.byday",e.byday,!0)},controller:["$scope",function(f){var g=this;this.originalValue=angular.copy(f.recurrence),this.defaultFreqs=[{label:c.getMessage("NO_REPEAT"),options:{}},{label:c.getMessage("DAILY"),options:{freq:RRule.DAILY}},{label:c.getMessage("WEEKLY"),options:{freq:RRule.WEEKLY}},{label:c.getMessage("MONTHLY"),options:{freq:RRule.MONTHLY}},{label:c.getMessage("YEARLY"),options:{freq:RRule.YEARLY}}],this.update=function(){if(f.ruleOptions&&!_.isEmpty(f.ruleOptions)){var a=_.clone(f.ruleOptions);f.ruleOptions.until&&(f.allDay?a.until=d.localToUtc(a.until):a.until=moment(a.until).hours(f.start.getHours()).minutes(f.start.getMinutes()).toDate());var b=g.exDates.slice(0),c=["RRULE:",RRule.optionsToString(a)].join("");b.push(c),_.isEmpty(f.recurrence)&&(f.recurrence={}),f.recurrence.rules=b}else f.recurrence=void 0;f.recurrence&&f.recurrence.rules?e.debug(f.recurrence.rules):e.debug("Empty recurrence field")},this.getFreqOption=function(a){if(_.isEmpty(a))return _.find(f.freqs,function(a){return a.label===c.getMessage("NO_REPEAT")});var b=_.find(f.freqs,function(b){return b.options.freq===a.freq});return b},this.getEndOption=function(a){return a?a.count?"count":a.until?"until":"never":!1},this.getWeekDayOption=function(a){if(!a||!a.byweekday)return[];var b=_.reduce(a.byweekday,function(a,b){return _.isNumber(b.weekday)&&a.push(b.weekday),_.isNumber(b)&&a.push(b),a},[]);return b},this.getMonthDayOption=function(a){if(!a||!a.bymonthday)return[];var b=_.reduce(a.bymonthday,function(a,b){return _.isNumber(b)&&a.push(b),a},[]);return b},this.getByDayOption=function(a){if(!a||!a.byweekday)return{};var b=_.find(a.byweekday,function(a){return a&&_.isNumber(a.n)});return b?b:{}},this.getRuleOptions=function(a){var b={};if(a&&a.rules){var c=_.find(a.rules,function(a){return a.startsWith("RRULE")}),d=c.replace("RRULE:","");b=RRule.parseString(d),b.until&&(b.until=new Date(b.until.getTime()))}return b},this.getExDates=function(a){var b=[];return a&&a.rules&&(b=_.filter(a.rules,function(a){return a.startsWith("EXDATE")})),b},this.getDays=function(){var c=b.getDayNamesMin();return c.push(c.shift()),c=_.reduce(c,function(a,b,c){return a.push({label:b,value:c}),a},[]),0===a.get("firstDay")&&c.unshift(c.pop()),6===a.get("firstDay")&&(c.unshift(c.pop()),c.unshift(c.pop())),c},this.getIntervals=function(){for(var a=[],b=1;31>=b;b++)a.push(b);return a},this.getIntervalOption=function(a){return a&&a.interval?a.interval:1},this.getCurrentWeekOfTheDate=function(a){if(!_.isDate(a))return 1;for(var b=moment(a),c=moment(a).startOf("month");c.day()!==b.day();)c.add(1,"day");return b.diff(c,"week")+1},this.init=function(){f.selected={},f.selected.freq=this.getFreqOption(f.ruleOptions),f.selected.end=this.getEndOption(f.ruleOptions),f.selected.interval=this.getIntervalOption(f.ruleOptions),f.selected.byweekday=this.getWeekDayOption(f.ruleOptions),f.selected.bymonthday=this.getMonthDayOption(f.ruleOptions),f.selected.byday=this.getByDayOption(f.ruleOptions)},f.i18n={ENDS:c.getMessage("ENDS"),NEVER:c.getMessage("NEVER"),AFTER:c.getMessage("AFTER"),ON:c.getMessage("ON"),OCCURRENCES:c.getMessage("OCCURRENCES"),SUMMARY:c.getMessage("SUMMARY"),ON_DAYS:c.getMessage("ON_DAYS"),INTERVAL:c.getMessage("INTERVAL"),REPEATS:c.getMessage("REPEATS"),STARTS_ON:c.getMessage("STARTS_ON"),REPEAT_BY:c.getMessage("REPEAT_BY"),DAY_OF_THE_MONTH:c.getMessage("DAY_OF_THE_MONTH"),DAY_OF_THE_WEEK:c.getMessage("DAY_OF_THE_WEEK"),FREQS_PLURAL:{0:c.getMessage("YEARS"),1:c.getMessage("MONTHS"),2:c.getMessage("WEEKS"),3:c.getMessage("DAYS")},FREQS_SINGULAR:{0:c.getMessage("YEAR"),1:c.getMessage("MONTH"),2:c.getMessage("WEEK"),3:c.getMessage("DAY")}},f.dateOptions={showOtherMonths:!0,selectOtherMonths:!0,showAnim:"",firstDay:a.get("firstDay"),monthNames:b.getMonthNames(),dayNamesMin:b.getDayNamesMin(),dayNames:b.getDayNames(),dateFormat:function(){var b,c=a.get("shortDate");switch(c){case"M/d/yy":b="mm/dd/yy";break;case"d/M/yy":b="dd/mm/yy";break;case"yy-M-d":b="yy-mm-dd";break;default:b="mm/dd/yy"}return b}()},this.exDates=this.getExDates(f.recurrence),this.localStart=function(){return f.allDay?d.allDayUtcToMidnight(f.start):f.start}(),f.days=this.getDays(),f.intervals=this.getIntervals(),f.freqs=this.defaultFreqs.slice(0),f.currentWeekOfTheMonth=g.getCurrentWeekOfTheDate(g.localStart),f.ruleOptions=this.getRuleOptions(f.recurrence),f.hasRecurrence=!_.isEmpty(f.ruleOptions),this.init(),f.selected.byday&&_.isNumber(f.selected.byday.n)&&(f.currentWeekOfTheMonth=f.selected.byday.n)}]}}]),angular.module("App").directive("srDialogDetailsLinks",["SRLocationService","SRI18nService",function(a,b){return{restrict:"E",replace:!0,template:'<div class="form__row form__row--border form-links" data-ng-class="{\'hidden\': !hasUri}" data-ng-bind-html=":: html"></div>',scope:{sourceId:"@?",type:"@?",uris:"=?"},link:function(b,c,d,e){c.on("click","a",function(b){b.preventDefault();var c=this.getAttribute("href");return a.openTo(c),!1}),b.$on("$destroy",function(){c.off("click","**")})},controller:["$scope",function(a){var c=$appTemplates["details-links"];this.init=function(){var d={};d.uri=function(){if(a.uris&&a.uris.length){var b=_.find(a.uris,{platform:"web"})||{};return b.uri}return"facebook:event"===a.type?"http://facebook.com/events/"+a.sourceId:!1}(),d.label=function(){var c=_.find(CONFIG.services.calendars,function(b){return a.type.contains(b.id)})||_.find(CONFIG.services.apps,function(b){return a.type.contains(b.id)});return c&&c.title?b.getMessage("VIEW_ON",c.title):b.getMessage("VIEW_EVENT")}(),a.hasUri=d.uri,a.html=c(d)},this.init()}]}}]),angular.module("App").directive("srDialogEditAllday",["SRDateService",function(a){return{restrict:"E",replace:!0,scope:{allDay:"="},templateUrl:CONFIG.preparePartialTemplateUrl("dialog-edit-allday")}}]),angular.module("App").directive("srDialogEditDate",["SRDateService","SRSettingsService","SRLocaleService","$rootScope",function(a,b,c,d){return{templateUrl:CONFIG.preparePartialTemplateUrl("dialog-edit-date"),restrict:"E",replace:!0,scope:{dates:"=",type:"@?",tabindex:"="},link:function(a,b,c,e){a.$watch("date",function(b,c){b!==c&&d.$emit("dialogOnDateChange",{type:a.type,value:a.date})},!0),"end"===a.type?a.$watch("dates.end",function(b,c){b!==c&&(a.date=new Date(a.dates.end))},!0):"start"===a.type&&a.$watch("dates.start",function(b,c){b!==c&&(a.date=new Date(a.dates.start))},!0),b.on("keydown","input",function(b){var c=b.keyCode||b.which,d=function(){return 37===c?moment(a.date).subtract(1,"day").toDate():38===c?moment(a.date).subtract(1,"week").toDate():39===c?moment(a.date).add(1,"day").toDate():40===c?moment(a.date).add(1,"week").toDate():null}();return d?(b.preventDefault(),a.$apply(function(){a.date=d}),$(this).select(),!1):void 0}),a.$on("$destroy",function(){b.off("keydown","input")})},controller:["$scope",function(d){d.dateFormat=c.getLongDate({year:!1}),d.date=new Date(d.dates[d.type]),d.dateOptions={showOtherMonths:!0,selectOtherMonths:!0,showAnim:"",firstDay:b.get("firstDay"),monthNames:c.getMonthNames(),dayNamesMin:c.getDayNamesMin(),dayNames:c.getDayNames(),beforeShowDay:function(b){var c=a.getStartOfTheDay(d.dates.start),e=a.getStartOfTheDay(d.dates.end);return[!0,b>=c&&e>=b?"ui-state-active":""]}}}]}}]),angular.module("App").directive("srDialogEditDatetime",["$rootScope","SRParserService","$timeout",function(a,b,c){return{templateUrl:CONFIG.preparePartialTemplateUrl("dialog-edit-datetime"),restrict:"E",replace:!0,scope:{dates:"=",type:"@",allDay:"=",tabindex:"="},link:function(d,e,f,g){var h=a.$on("dialogOnTimeChange",function(a,c){c&&c.type&&"start"===c.type&&"end"===d.type?(d.dates.start=b.getTimeFromString(c.value,d.dates.start),d.dates.end=new Date(d.dates.start.getTime()+g.diff)):c&&c.type&&"end"===c.type&&"end"===d.type&&(d.dates.end=b.getTimeFromString(c.value,d.dates.end),
g.diff=g.getDiff(d.dates.start,d.dates.end))}),i=a.$on("dialogOnDateChange",function(a,b){if(b&&b.type&&"start"===b.type&&"end"===d.type){var c=moment(b.value);c.isValid()&&(d.dates.start=moment({year:c.year(),month:c.month(),date:c.date(),hours:d.dates.start.getHours(),minutes:d.dates.start.getMinutes(),seconds:d.dates.start.getSeconds(),milliseconds:d.dates.start.getMilliseconds()}).toDate(),d.dates.end=new Date(d.dates.start.getTime()+g.diff))}else if(b&&b.type&&"end"===b.type&&"end"===d.type){var e=moment(b.value);e.isValid()&&(d.dates.end=moment({year:e.year(),month:e.month(),date:e.date(),hours:d.dates.end.getHours(),minutes:d.dates.end.getMinutes(),seconds:d.dates.end.getSeconds(),milliseconds:d.dates.end.getMilliseconds()}).toDate(),d.dates.start.getTime()>d.dates.end.getTime()&&(d.dates.start=new Date(d.dates.end.getTime())),g.diff=g.getDiff(d.dates.start,d.dates.end))}});if(d.allDay)var j=d.$watch("allDay",function(a,b){if(a!==b&&!a&&"start"===d.type){var e=moment().add(1,"hour").minutes(0).toDate();d.dates.start=moment(d.dates.start).hours(e.getHours()).toDate(),c(function(){e=moment().add(2,"hours").minutes(0).toDate(),d.dates.end=moment(d.dates.end).hours(e.getHours()).toDate(),g.diff=g.getDiff(d.dates.start,d.dates.end)}),j()}},!0);d.$watch("dates",function(a,b){b!==a&&d.allDay&&"start"===d.type},!0),d.$on("$destroy",function(){h(),i()})},controller:["$scope",function(a){this.getMeta=function(){},this.getDiff=function(a,b){return Math.abs(b.getTime()-a.getTime())},this.init=function(){this.originalValues={dates:angular.copy(a.dates),allDay:angular.copy(a.allDay)},this.diff=this.getDiff(a.dates.start,a.dates.end)},this.init()}]}}]),angular.module("App").directive("srDialogTimepicker",["$rootScope","SRSettingsService","$filter","$timeout","$document","SRParserService",function(a,b,c,d,e,f){function g(a){a=a||window.event;var b=a.keyCode||a.which;return b}return{templateUrl:CONFIG.preparePartialTemplateUrl("timepicker"),restrict:"E",replace:!0,scope:{date:"=",dates:"=",type:"@?",tabindex:"=",disabled:"=?"},link:function(c,e,h,i){var j=e.find(".timepicker__input"),k=(b.get("format24HourTime"),function(){var b=f.getTimeFromString(c.value);b?c.value=i.getInputvalue(b):c.value=i.getInputvalue(c.date),a.$emit("dialogOnTimeChange",{type:c.type,value:c.value})}),l=function(){var a=e.parents(".dialog").find('[type="text"]:not([disabled])');if(j.length&&!j.is(":focus")){var b=a.index(j);d(function(){var c=a.eq(b+1);c.length&&c.focus()},5)}};c.onEnter=function(a){j.trigger("blur.onBlur"),c.hasPopover=!1,l()};var m=function(a){c.hasPopover=!0},n=function(a){d(function(){k(a)})},o=function(a){var b=[13,9,27,38,40],d=g(a);_.contains(b,d)||c.$apply(function(){c.hasPopover=!1})};j.on("focus.onFocus",m),j.on("blur.onBlur",n),j.on("keydown.onKeydown",o),c.$watch("date",function(a,b){a!==b&&(c.value=i.getInputvalue(c.date))},!0),c.$on("$destroy",function(){j.off("keydown.onKeydown",o),j.off("blur.onBlur",n),j.off("focus.onFocus",m)})},controller:["$scope",function(a){a.hasPopover=!1,this.getInputvalue=function(a){var b=c("SRDateFilter_timeFormat")(a,!1,!0,!0).toLowerCase();return 1===b.split(":")[0].length&&(b="0"+b),b},this.init=function(){a.value=this.getInputvalue(a.date)},this.init()}]}}]),angular.module("App").directive("srDialogTimepickerPopover",["SRDateService","SRLayerService","$document","SRSettingsService","$rootScope","$timeout","SRI18nService","$position","$filter",function(a,b,c,d,e,f,g,h,i){function j(a){a=a||window.event;var b=a.keyCode||a.which;return b}function k(a,b){a.length&&b.length&&a.scrollTop(b.index()*m)}function l(a,b){var c=a.scrollTop(),d=c+a.height(),e=b.index()*m,f=e+b.height();return d>=f&&e>=c}var m=30,n=6,o=864e5;return{templateUrl:CONFIG.preparePartialTemplateUrl("timepicker-popover"),restrict:"E",replace:!0,scope:{type:"=",dates:"="},link:function(a,b,d,g){var h,i=[],m=function(b){var c=h.find("li.active"),d=h.find("li"),e=d.eq(c.index()+b);if(e.length&&(0!==c.index()||-1!==b)){var f=parseInt(e.attr("data-int")||0,10),g=_.find(a.times,{"int":f});a.$apply(function(){a.onChange(g,!1),l(h,e)||(-1===b?k(h,e):k(h,d.eq(e.index()-n+1)))})}};f(function(){h=b.find(".timepicker__popover__list"),k(h,h.find("li.active")),c.on("mousedown.closeTimepicker",function(b){var c=$(b.target);c.hasClass("timepicker__popover")||c.parents(".timepicker__popover").length||c.hasClass("timepicker__input--"+a.type)||a.$apply(function(){g.close()})}),c.on("keydown.closeTimepicker",function(c){var d=j(c);if(i.push(d),9===d){var e=b.parents(".dialog").find('[type="text"]:not([disabled])'),h=g.getInput(a.type);if(h.length&&!h.is(":focus")){var k=e.index(h),l=_.contains(i,16)?-1:1;f(function(){var a=e.eq(k+l);a.length&&a.focus()})}}if(27===d||9===d||13===d)a.$apply(function(){g.close()});else if(38===d||40===d){c.preventDefault(),c.stopPropagation();var n=38===d?-1:1;return m(n),!1}}),c.on("keyup.closeTimepicker",function(a){var b=j(a);_.remove(i,b)})}),a.onChange=function(b,c){a.selected={"int":b["int"],label:b.label},g.updateInput(a.selected.label),e.$emit("dialogOnTimeChange",{type:a.type,value:a.selected.label}),c&&g.close()},a.$on("$destroy",function(){c.off("mousedown.closeTimepicker"),c.off("keydown.closeTimepicker"),c.off("keyup.closeTimepicker"),g.removeLayer()})},controller:["$scope",function(c){var e=this;this.format24HourTime=d.get("format24HourTime"),this.timeFormat=this.format24HourTime?"HH:mm":"hh:mm a",this.getInput=function(a){return $("#dialog-edit-time-"+a).find(".timepicker__input")},this.updateInput=function(a){var b=e.getInput(c.type);b.val(a)},this.close=function(){c.$parent.$parent.hasPopover=!1},this.removeLayer=function(){b.remove()},this.getTimes=function(a){for(var b=[],d=a.start||0,f=a.end||o-1,g=a.step,h=!1,j="end"===a.type?a.dates.end.getTime():a.dates.start.getTime(),k=d;f>=k;k+=60*g*1e3){var l=k,m=moment(j).startOf("day").add(l,"ms"),n={"int":l,label:m.format(e.timeFormat)};if(a.duration){var p=m.valueOf()-a.dates.start.getTime();n.duration=i("SRDateFilter_duration")(p,"ms",null,!0)}b.push(n),h||l!==c.selected["int"]||(h=!0)}return h||(b.push({"int":c.selected["int"],label:c.selected.label}),b=_.sortBy(b,"int")),b},this.getSelectedValues=function(){var a={},b=60*c.dates[c.type].getHours()*60*1e3+60*c.dates[c.type].getMinutes()*1e3;return a["int"]=b,a.label=moment().startOf("day").add(b,"ms").format(e.timeFormat),a},this.init=function(){var b=a.isSameDay(c.dates.start,c.dates.end);c.selected=this.getSelectedValues(),c.times=this.getTimes({step:30,type:c.type,duration:b&&"end"===c.type,dates:c.dates,start:b&&"end"===c.type?60*c.dates.start.getHours()*60*1e3+60*c.dates.start.getMinutes()*1e3:null})},b.add(),c.i18n={DONE:g.getMessage("DONE")},this.init()}]}}]),angular.module("App").directive("srDialogEditTransparency",["SRI18nService",function(a){return{restrict:"E",replace:!0,scope:{transparent:"="},templateUrl:CONFIG.preparePartialTemplateUrl("dialog-edit-transparency"),link:function(a,b,c,d){a.toggleTransparency=function(){a.transparent=!a.transparent}},controller:["$scope",function(b){b.i18n={BUSY:a.getMessage("EDIT_TRANSPARENT_BUSY"),FREE:a.getMessage("EDIT_TRANSPARENT_FREE")}}]}}]),angular.module("App").directive("srDialogBirthdays",["$q","SRDateService","SRLocationService","SRFocusingEventService","$rootScope","$filter","SRI18nService","SROccurrenceModel",function(a,b,c,d,e,f,g,h){return{restrict:"E",replace:!0,templateUrl:CONFIG.preparePartialTemplateUrl("dialog-birthdays"),scope:{date:"="},controller:["$scope",function(d){var e=this;d.i18n={VIEW_TIMELINE:g.getMessage("VIEW_TIMELINE")},d.dialogDirective=d.$parent.$$prevSibling,d.openTo=c.openTo,e.getAge=function(a){var b=moment(a).toDate();return f("SRDateFilter_age")(b,{from:d.date,limit:5})},e.getBirthdays=function(){var c=a.defer();return h.getFilteredBetweenDates(b.getStartOfTheDay(d.date),b.getEndOfTheDay(d.date),{useCache:!0}).then(function(a){c.resolve(_.filter(a,function(a){return a.type&&a.type.endsWith(":birthday")}))}),c.promise},e.init=function(){e.getBirthdays().then(function(a){a=_.reduce(a,function(a,b){if(!b.attendees||!b.attendees.data||b.attendees&&b.attendees.data&&!b.attendees.data.length)return a;var c=b.attendees.data[0],d={cover:!1};return c.image&&c.image.cover&&(d.cover={},d.cover.url=c.image.cover.url,d.cover.sizes={width:378,height:138,offsetY:c.image.cover.offsetY}),d.email=c.emails&&c.emails.length?c.emails[0]:null,d.name=c.name||null,d.age=b.start&&b.start.date?e.getAge(b.start.date):null,d.thumbnailUrl=function(){return c.image&&c.image.thumbnail&&c.image.thumbnail.url?c.image.thumbnail.url:null}(),d.profileUrl=function(){return c.profiles&&c.profiles.length&&c.profiles[0].url?c.profiles[0].url:!1}(),a.push(d),a},[]),d.birthdays=a})},e.init()}]}}]),angular.module("App").directive("srDialogEditColor",["$timeout",function(a){var b=["3498db","46d6db","1abc9c","2ecc71","f1c40f","e67e22","e74c3c","9b59b6","ecf0f1","95a5a6"];return{scope:{icon:"=?",calendarColor:"=",onChange:"&?"},restrict:"E",templateUrl:CONFIG.preparePartialTemplateUrl("dialog-edit-color"),replace:!0,link:function(b,c,d,e){b.changeColor=function(c){b.selected=c,_.isEmpty(b.icon)&&(b.icon={});var d=function(){return c===b.calendarColor?null:c}();return b.icon=_.extend(b.icon,{baseColor:d}),b.onChange&&_.isFunction(b.onChange)&&a(function(){b.onChange()}),!1},b.$watch("calendarColor",function(a,c){a!==c&&(b.colors=e.getColors())},!0)},controller:["$scope",function(a){var c=this;this.colors=b.slice(0),c.getColors=function(){var b=a.icon&&a.icon.baseColor?a.icon.baseColor:null,d=b||a.calendarColor,e=c.colors.slice(0);return a.selected=d,e},this.init=function(){var b=a.icon&&a.icon.baseColor?a.icon.baseColor:null;b&&(c.colors.push(b),c.colors=_.uniq(c.colors)),a.colors=c.getColors()},this.init()}]}}]),angular.module("App").directive("srDialogDetailsTitle",["$filter",function(a){return{template:'<p data-ng-bind-html=":: html"></p>',restrict:"E",replace:!0,scope:{title:"@?",type:"@?"},controller:["$scope",function(b){var c=$appTemplates["event-title"];this.init=function(){var d={};d.title=function(){var c=a("SRStringFilter_limitTo")(b.title,170,!0);return b.type&&"foursquare:checkin"===b.type&&(c=a("SRStringFilter_foursquareTitle")(c)),c=a("SRStringFilter_noHTML")(c),c=a("SRStringFilter_convertLinks")(c)}(),b.html=c(d)},this.init()}]}}]),angular.module("App").controller("SRDialogEditCalendarCtrl",["$scope",function(a){this.onChange=function(){a.calendarId=a.selected.id,a.connectionId=_.first(a.selected.id.split(":"),2).join(":")},this.getSelected=function(a,b){return _.find(b,function(b){return b.id===a})},this.init=function(){a.selected=this.getSelected(a.calendarId,a.calendars)}}]),angular.module("App").controller("SRDialogEditPlaceCtrl",["$scope","$filter","$q","SRI18nService","SRPlaceService","$timeout","SROccurrenceModel","$modal","SRLayerService","SRFavoritePlaceModel","SRPlaceModel","SRSearchService","SRFavoriteLocationApiService","SRMessageService","SRQCancellableService","SRRefreshService","SROnlineStatusService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=170,s=3,t=13,u=27,v=9,w="frequents",x=0,y=1,z=2;this.didSelectRowAtIndexPath=function(b){var c=a.sections[b.section][b.row];c instanceof j?c.place?this._chooseItem(c):this._openEditModalWithFavorite(c):c instanceof k?this._chooseItem(c):(a.$parent.$parent.isQuerying++,k.placeFromGooglePrediction(c).then(function(b){a.$parent.$parent.isQuerying--,this._chooseItem(b),_.isFunction(a.onSelectPlace)&&a.onSelectPlace()}.bind(this))),this.$input.blur()},this.didHighlightRowAtIndexPath=function(a){this._currentHighlightedIndexPath=a},this.onInputFocus=function(b){(a.favoritesEnabled||a.frequentsEnabled)&&this._loadItemsForQuery(a.inputValue)},this.onInputBlur=function(b){this._cancelPendingPromises(),a.showPopover=!1},this.onInputChange=function(){this._cancelPendingPromises(),f.cancel(this._timeoutPromise);var b=this._currentHighlightedIndexPath;this._timeoutPromise=f(function(){""!==a.inputValue?(this._chooseItem(a.inputValue),this._loadItemsForQuery(a.inputValue).then(function(){f(function(){_.isEqual(b,this._currentHighlightedIndexPath)&&a.tableMethods.highlightRowAtIndexPath&&a.tableMethods.highlightRowAtIndexPath(null)}.bind(this))}.bind(this))):(a.place=null,a.selectedItem=null)}.bind(this),r),""===a.inputValue&&(a.showPopover=!1)},this.onFavoriteRowEditButtonMouseDown=function(b,c){var d=a.sections[c.section][c.row];this._openEditModalWithFavorite(d),b.stopPropagation()},this.onFavoriteRowDeleteButtonMouseDown=function(b,c){var d=a.sections[c.section][c.row];this._removeFavorite(d),b.stopPropagation(),b.preventDefault()},this.onInputImageMouseDown=function(b){var c=a.selectedItem;if(c instanceof j){if(c.required)return;this._removeFavorite(c),a.selectedItem=c.place}else if(c){var d=j.create({title:a.selectedItem.name,place:a.selectedItem});a.selectedItem=d,this._saveFavorite(d)}b.stopPropagation(),b.preventDefault()},this.onInputKeyDown=function(b){if(b.which===t){var c=this.$element.find(".table__row.highlighted");if(0===c.length){if(!_.isEmpty(a.inputValue)){var d=new k({name:a.inputValue});this._chooseItem(d),a.showPopover=!1,this._cancelPendingPromises(),f.cancel(this._timeoutPromise),_.isFunction(a.onSelectPlace)&&a.onSelectPlace()}b.stopPropagation(),b.preventDefault()}}else(b.which===u||b.which===v)&&(a.showPopover=!1)},this._initScope=function(){a.isLoading=!1,a.showPopover=!1,a.selectedItem=null,a.inputValue=_.isEmpty(a.place)?"":a.place.description(),a.sections=[[],[],[]],a.onInputFocus=this.onInputFocus.bind(this),a.onInputBlur=this.onInputBlur.bind(this),a.onInputChange=this.onInputChange.bind(this),a.onInputImageMouseDown=this.onInputImageMouseDown.bind(this),a.onInputKeyDown=this.onInputKeyDown.bind(this),a.tableInfo={methods:{onFavoriteRowEditButtonMouseDown:this.onFavoriteRowEditButtonMouseDown.bind(this),onFavoriteRowDeleteButtonMouseDown:this.onFavoriteRowDeleteButtonMouseDown.bind(this)},showHeaders:!0,random:function(){return Math.random()}},a.tableMethods={},a.delegate=this},this._initListeners=function(){a.$watch("sections",function(b,c){a.tableInfo.showHeaders=""===a.inputValue})},this._init=function(){this._initScope(),this._initListeners(),this._currentHighlightedIndexPath=null,this._pendingPromises=[],this._cache={},e.init(),a.frequentsEnabled&&this._getFrequents(),a.favoritesEnabled&&p.refreshFavoritePlaces(),a.predictionsEnabled=a.predictionsEnabled&&q.isOnline()?!0:!1},this._openEditModalWithFavorite=function(a){var b=h.open({templateUrl:CONFIG.preparePartialTemplateUrl("edit-place"),windowClass:"modal modal--edit-place fade scale",controller:"SREditPlaceCtrl",resolve:{favorite:function(){return a}}});b.opened.then(function(){i.add()}),b.result.then(function(a){i.remove(),this._chooseItem(a),this._saveFavorite(a)}.bind(this),function(){i.remove(),this.$input.focus()}.bind(this))},this._clearItems=function(){a.sections=[[],[],[]]},this._loadItemsForQuery=function(b){a.isLoading=!0;var d=[],e=[];b&&""!==b?(a.favoritesEnabled&&(d.push(this._getFavoritesFromQuery(b)),e.push(x)),a.frequentsEnabled&&(d.push(this._getFrequentsFromQuery(b)),e.push(y)),a.predictionsEnabled&&(d.push(this._getPredictionsFromQuery(b)),e.push(z))):(a.favoritesEnabled&&(d.push(this._getFavoritesFromQuery(b)),e.push(x)),a.frequentsEnabled&&(d.push(this._getFrequentsFromQuery(b)),e.push(y)));var f=c.all(d);return f=o.wrap(f),this._addPendingPromise(f),f.then(function(b){this._clearItems(),a.isLoading=!1,b=this._getMergedResults(b);for(var c=0;c<b.length;c++)a.sections[e[c]]=b[c];a.showPopover=!0}.bind(this),function(b){a.isLoading=!1}),f},this._getPredictionsFromQuery=function(a){var b=c.defer();return""===a?(b.resolve([]),b.promise):(e.searchPlace(a).then(function(a){var c=_.map(a,function(a){var b=a.terms,c=_.reduce(b,function(a,b,c){return 0!==c&&a.push(b.value),a},[]),d={title:a.terms[0].value,description:c.join(", "),reference:a.reference};return d});b.resolve(c)},b.resolve.bind(this,[])),b.promise)},this._getFavoritesFromQuery=function(a){var b=j.getAll({useCache:!0}).then(function(b){return this._filterPlacesByQuery(b,a)}.bind(this));return b},this._getFrequentsFromQuery=function(a){var b=this._getFrequents().then(function(b){return b=this._filterPlacesByQuery(b,a),b.slice(0,5)}.bind(this));return b},this._getFrequents=function(){return this._cache[w]||(this._cache[w]=g.getFilteredByExistingPlace({useCache:!0}).then(function(a){a=_.filter(a,function(a){return a.instance?!1:_.hasPath(a.organizer,"self")&&_.getPath(a.organizer,"self")!==!0?!1:_.hasPath(a.inviter,"self")&&_.getPath(a.inviter,"self")!==!0?!1:"store:event"===a.type?!1:!0});var b={};_.each(a,function(a){var c=JSON.stringify(a.place);b[c]||(b[c]={count:0,place:a.place.copy()}),b[c].count++});var c=_.sortBy(b,function(a,b){return-a.count});return c=_.filter(c,function(a){return a.count>=s}),c=_.map(c,function(a){return a.place})})),this._cache[w]},this._replaceInputTextWithPlace=function(b){var c=b.description();c=c.split(", ").slice(1).join(", "),b.name===c||_.isEmpty(c)?a.inputValue=b.name:a.inputValue=[b.name,c].join(", ")},this._chooseItem=function(b){var c;b instanceof j?(c=b.place,this._replaceInputTextWithPlace(c)):b instanceof k?(c=b,this._replaceInputTextWithPlace(c)):(b=new k({name:a.inputValue}),c=b),a.selectedItem=b,a.place=c},this._removeFavorite=function(b){m.deleteLocation(b.id),b.remove().then(function(){var c=a.sections[x].indexOf(b);-1!==c&&a.sections[x].splice(c,1)}.bind(this),function(a){n.add({msg:d.getMessage("ERROR_TRY_AGAIN"),error:[a],closeable:!0})})},this._saveFavorite=function(b){b.save().then(function(){a.sections[x].splice(0,0,b)}.bind(this),function(a){n.add({msg:d.getMessage("ERROR_TRY_AGAIN"),error:[a],closeable:!0})}),m.createLocation(b)},this._filterPlacesByQuery=function(a,b){return _.isEmpty(b)?a:l.searchForStringInPlaces(b,a)},this._cancelPendingPromises=function(){_.each(this._pendingPromises,function(a){a.cancel()})},this._addPendingPromise=function(a){a["finally"](function(){var b=this._pendingPromises.indexOf(a);-1!==b&&this._pendingPromises.splice(b,1)}.bind(this)),this._pendingPromises.push(a)},this._getMergedResults=function(a){var b={};return a=_.map(a,function(a){return a=_.reject(a,function(a){var c;return c=a instanceof j?_.getPath(a.place,"name"):a instanceof k?a.name:a.title,b[c]?!0:(b[c]=!0,!1)})})},this._init()}]),angular.module("App").controller("SRDialogDetailsAttendeesCtrl",["$scope","SROnlineStatusService","SRApiService","$q",function(a,b,c,d){var e=30;this._shouldFetchMoreAttendees=!0,this._attendeesOffset=_.isArray(a.attendees)?a.attendees.length:0,this.isFetchingAttendees=!1,this.fetchAttendees=function(a,f){if(b.isOnline()===!1||this._shouldFetchMoreAttendees===!1||this.isFetchingAttendees===!0)return d.reject();this.isFetchingAttendees=!0;var g={eventId:a,calendarId:f},h={offset:this._attendeesOffset,limit:e},i=c.events.attendees(g,h).then(function(a){return _.getPath(a,["data",0])?(this._attendeesOffset+=e,this._shouldFetchMoreAttendees=!0,d.when(_.getPath(a,"data"))):(this._shouldFetchMoreAttendees=!1,d.reject())}.bind(this));return i["finally"](function(){this.isFetchingAttendees=!1}.bind(this)),i}}]),angular.module("App").directive("srProfilePicture",function(){return{restrict:"E",replace:!0,templateUrl:CONFIG.preparePartialTemplateUrl("profile-picture"),controller:"SRProfilePictureCtrl",scope:{id:"@",email:"@",name:"@",thumbnailUrl:"@?",rsvpStatus:"@?",showTooltip:"=?",autoUpdate:"=?"},link:function(a,b,c,d){a.autoUpdate&&a.$watch("email + thumbnailUrl",function(a,b){a!==b&&(a?d.init():d.reset())},!0)}}}),angular.module("App").controller("SRProfilePictureCtrl",["$scope","SRPeopleService","SRBrowserService","$q",function(a,b,c,d){this._getTooltipLabel=function(a,b,c){var e=d.defer();if(!b||!a)return e.resolve(null),e.promise;var f=_.find(CONFIG.rsvpStatus,function(b){return b.value===a}),g=function(){var a=[];return c&&a.push(c),f&&f.label&&a.push("("+f.label+")"),a.join(" ")}();return e.resolve(g),e.promise},this._getProfilePicture=function(a,e){var f=d.defer();return e&&!c.isSafari()?b.getImageByUrl(e).then(f.resolve):a?b.getImage(a).then(f.resolve):f.reject(),f.promise},this.reset=function(){a.image=null},this.init=function(){this._getProfilePicture(a.email,a.thumbnailUrl).then(function(b){a.image=b}),this._getTooltipLabel(a.rsvpStatus,a.showTooltip,a.name||a.email).then(function(b){a.tooltipLabel=b})},this.init()}]),angular.module("App").directive("srIconic",["SRDebounceService",function(a){return{templateUrl:CONFIG.preparePartialTemplateUrl("iconic"),restrict:"E",replace:!0,scope:{type:"@",color:"@",overlay:"@",size:"@?",background:"=?"},controller:"SRIconicCtrl",link:function(b,c,d,e){b.$watch("overlay",a(250,function(a,b){a!==b&&e.init()}),!0),b.$watch("type",function(a,b){a!==b&&e.init()},!0),b.$watch("color",function(a,b){a!==b&&e.init()},!0)}}}]),angular.module("App").controller("SRIconicCtrl",["$scope","SRIconicService","$q",function(a,b,c){var d=this;this._getStyle=function(a){var b={};return a=a||{},a.color&&(b["background-color"]="#"+a.color),b},this._getIcon=function(a){var d=c.defer();if(a=a||{},!a.type||!a.color)return d.reject(),d.promise;var e=b.getUrl(a.type,a.color,a.overlay,a.size,a.background);return b.getIcon(e).then(d.resolve,d.reject),d.promise},this.init=function(){this._getIcon({type:a.type,color:a.color,overlay:a.overlay,size:a.size,background:a.background}).then(function(b){b?a.imageUrl=b:(a.style=d._getStyle({color:a.color}),a.imageUrl=null)},function(){a.style=d._getStyle({color:a.color}),a.imageUrl=null})},this.init()}]),angular.module("App").directive("srInvitation",["$rootScope","SRDebounceService",function(a,b){return{templateUrl:CONFIG.preparePartialTemplateUrl("invitation"),restrict:"E",replace:!0,scope:{},controller:"SRInvitationCtrl",link:function(c,d,e,f){var g=1e3;c.togglePopover=f.togglePopover;var h=a.$on("onCalendarRefresh",b(g,function(){f._getLatestInvitations()})),i=a.$on("onRsvp",function(){f._getLatestInvitations()});c.$on("$destroy",function(){h(),i()})}}}]),angular.module("App").directive("srInvitationList",["$rootScope","$window","$timeout","SRKeyboardManagerService","SROnlineStatusService","SRLayerService","SRNavigateToService","SRCurrentService","SRCalendarModel","$q","SRI18nService","SROccurrenceModel",function(a,b,c,d,e,f,g,h,i,j,k,l){return{templateUrl:CONFIG.preparePartialTemplateUrl("invitation-list"),restrict:"E",replace:!0,scope:{unreadNotifications:"=?"},require:"^srInvitation",link:function(b,d,f,m){var n=void 0;b.i18n={INVITATIONS:k.getMessage("INVITATIONS"),PLEASE_WAIT:k.getMessage("PLEASE_WAIT"),NO_INVITATIONS:k.getMessage("NO_INVITATIONS"),HIDE_INVITATION:k.getMessage("HIDE_INVITATION"),GOING_1:k.getMessage("GOING_1"),MAYBE_1:k.getMessage("MAYBE_1"),DECLINE_1:k.getMessage("DECLINE_1")},b.onlineStatus=e,b.invitations=[],b.calendars={},b.isLoading=!0,b.srUiClosePopover=m.togglePopover,b.rsvp=function(c,d){var e=b.invitations.indexOf(c);m.rsvp(c,d).then(function(){b.invitations.splice(e,1),a.$emit("onUpdate"),a.$emit("onRsvp")})},b.navigateTo=function(a){m.togglePopover(),n=a},j.all([l.getFilteredByRsvpNeeded({useCache:!0}),i.getAll({useCache:!0})]).then(function(a){var c=a[0],d=a[1];b.invitations=c,b.isLoading=!1,b.calendars=_.zipObject(_.pluck(d,"id"),d)}),b.$on("$destroy",function(){n&&c(function(){g.occurrence(n,h.getCurrentLocation())})})}}}]),angular.module("App").directive("srInvitationBadge",function(){return{template:'<i aria-disabled class="badge badge--invitations" data-ng-class="{\'hidden\': count <= 0}" data-ng-bind="count"></i>',restrict:"E",replace:!0,scope:{count:"="}}}),angular.module("App").controller("SRInvitationCtrl",["$scope","$q","SRUnreadNotificationService","SRCalendarModel","SRI18nService","SRBrowserService","SROccurrenceModel","SRSettingsService","SRBadgeService",function(a,b,c,d,e,f,g,h,i){var j=this;this.filteredNotifications=null,this._updateBadge=function(b){var c=_.isArray(b)?b.length:0;a.badgeCount=c;var d=function(){return c?c+"":""}();i.setBadgeInvitation(d)},this._updateAriaLabel=function(b){var c=_.isArray(b)?b.length:0,d=e.getMessage("NO_INVITATIONS");1===c?d=e.getMessage("1_INVITATION"):c>1&&(d=e.getMessage("X_INVITATIONS",c)),a.ariaLabel=d},this._removeNotifications=function(){var a=b.defer();return b.all([d.getFilteredByVisible(),c.get()]).then(function(b){var d=_.pluck(b[0],"id"),e=b[1],f=_.reduce(e,function(a,b){return _.contains(d,b.calendarId)&&(b.read=!0,a.push(b)),a},[]);f.length&&c.put(f),j._updateBadge(),j._updateAriaLabel(),a.resolve()}),a.promise},this._getLatestInvitations=function(){var a=b.defer();return c.get().then(c.filterEventsNotifications).then(function(b){j.filteredNotifications=b,j._updateBadge(b),j._updateAriaLabel(b),a.resolve(b)}),a.promise},this.togglePopover=function(){if(a.hasPopover=!a.hasPopover,a.hasPopover){var b=angular.copy(j.filteredNotifications);a.unreadNotifications=_.zipObject(_.pluck(b,"eventId"),b),j._removeNotifications()}},this.rsvp=function(a,b){return a.rsvp(b)},this.init=function(){a.i18n={SHOW_INVITATION:e.getMessage("SHOW_INVITATION")},a.hasPopover=!1,a.badgeCount=0,a.ariaLabel=null,this._getLatestInvitations()},this.init()}]),angular.module("App").directive("srSidebar",["SRSettingsService","SRUserService","$routeParams","SRBrowserService","SRI18nService","$modal","SRLayerService","$timeout",function(a,b,c,d,e,f,g,h){return{templateUrl:CONFIG.prepareViewTemplateUrl("sidebar"),restrict:"E",replace:!0,link:function(b,c,d,e){b.showSettings=a.openModal,b.toggle=function(c){b.settings[c]=!b.settings[c],a.set(c,b.settings[c])}},controller:["$scope",function(d){this.didClickInterestingCalendarButton=function(){var a=f.open({templateUrl:CONFIG.preparePartialTemplateUrl("interesting-calendar"),windowClass:"modal modal--interesting-calendar fade scale",controller:"SRInterestingCalendarCtrl"});a.opened.then(function(){h(function(){g.add($(".modal--interesting-calendar"))})}),a.result.then(function(){g.remove()}.bind(this),function(){g.remove()}.bind(this))},d.i18n={SETTINGS:e.getMessage("SETTINGS"),CALENDAR:e.getMessage("CALENDAR"),ACCOUNTS:e.getMessage("ACCOUNTS"),SUNRISE_FOR:e.getMessage("SUNRISE_FOR"),INTERESTING_CALENDARS:e.getMessage("INTERESTING_CALENDARS")},d.hasSearch=!(c.meetId&&!b.isLogged()),d.searchText=null,d.settings={sidebarCalendars:a.get("sidebarCalendars"),sidebarDatepicker:a.get("sidebarDatepicker"),sidebarInterestingCalendars:a.get("sidebarInterestingCalendars")},d.didClickInterestingCalendarButton=this.didClickInterestingCalendarButton.bind(this)}]}}]),angular.module("App").directive("srSidebarCalendar",["SRDateService","SRCurrentService","SRSettingsService","$timeout","SRToggleSidebarService","SRLocaleService",function(a,b,c,d,e,f){var g=[];return g.push('<div ui-date="options" data-ng-model="date"></div>'),{template:g.join(""),restrict:"E",replace:!0,scope:{},link:function(a,c,d,e){a.$watch("currentDate._date",function(c,d){c!==d&&(a.date=angular.copy(b._date),a.options=e.getCalendarOptions())},!0)},controller:["$scope",function(d){this.getCalendarOptions=function(){return{dateFormat:c.get("shortDate").toLowerCase(),showOtherMonths:!0,selectOtherMonths:!0,showAnim:"",firstDay:c.get("firstDay"),minDate:CONFIG.calendarMinDate,maxDate:a.add("day",CONFIG.calendarMaxDate,-1),monthNames:f.getMonthNames(),dayNamesMin:f.getDayNamesMin(),dayNames:f.getDayNames(),onSelect:function(a){b.setDate(d.date),b.resetPreviousDate()},beforeShowDay:function(a){var c=moment(b._date).startOf(b._location).toDate(),d=moment(b._date).endOf(b._location).toDate();return[!0,a>=c&&d>=a?"ui-state-active":""]}}},d.currentDate=b,d.date=angular.copy(b._date),d.options=this.getCalendarOptions()}]}}]),angular.module("App").directive("srSidebarSupportButton",function(){var a=[];return a.push('<a tabindex="0" data-ng-href="{{:: ctrl.url}}" target="_blank" role="link" class="btn btn--block btn--small">'),a.push("{{ :: 'SUPPORT_AND_FEEDBACK' | SRHelperFilter_translate }}"),a.push("</a>"),{scope:{},template:a.join(""),replace:!0,controller:"SRFeedbackCtrl",controllerAs:"ctrl"}}),angular.module("App").directive("srSidebarSearchResults",["SRSyncTokenModel","SRContactModel","SRLocationService","$q","SRConnectionModel","SRCalendarModel","SROccurrenceModel","$timeout",function(a,b,c,d,e,f,g,h){return{templateUrl:CONFIG.preparePartialTemplateUrl("search-results"),restrict:"E",replace:!0,scope:{searchText:"=?",input:"=?"},controller:"SRSidebarSearchResultsCtrl",link:function(i,j,k,l){var m=150;i.clearDataBases=function(){d.all([g.removeAll(),a.removeAll(),e.removeAll(),b.removeAll(),f.removeAll()]).then(function(){c.reload()})};var n=j.find(".search-results__table-container"),o=null;n.on("scroll",function(a){var b=n[0].scrollHeight,c=n.height();b-n.scrollTop()-c<m&&o!==b&&(o=b,h(function(){l.setLimit(l.limit+20)},1500))}),i.$watch("searchText",function(a,b){a!==b&&(o=null,l.searchForString(),h(function(){var a=j.find(".search-results__table-container");a.scrollTop(0)}))},!0),i.$on("destroy",function(){n.off("scroll")})}}}]),angular.module("App").directive("srSidebarSearchInput",["SRKeyboardManagerService","SRI18nService",function(a,b){return{restrict:"E",templateUrl:CONFIG.preparePartialTemplateUrl("search-input"),replace:!0,scope:{searchText:"=?",input:"=?"},link:function(c,d,e,f){var g=$(".sidebar__settings");c.i18n={PLACEHOLDER:b.getMessage("SEARCH")},c.clearSearch=function(){c.searchText=null};var h=function(a){var b=c.searchText?c.searchText.length:0;b>0?c.searchText=null:c.input.blur(),c.$digest()};c.input=c.input||d.find(".js-search-input"),d.on("focus","input",function(b){a.bind("escape",h)}),d.on("blur","input",function(b){a.unbind("escape",h)}),c.$watch("searchText",function(a,b){a!==b&&(a?g.addClass("sidebar__settings--hidden"):g.removeClass("sidebar__settings--hidden"))},!0),c.$on("$destroy",function(){d.off("focus","input"),d.off("blur","input")})}}}]),angular.module("App").controller("SRSidebarSearchResultsCtrl",["$scope","SRNavigateToService","SRCurrentService","SRBrowserService","SRSearchService","SRI18nService","SRUserLocationService","SRUserTimezoneService","SRCalendarModel",function(a,b,c,d,e,f,g,h,i){this.didSelectRowAtIndexPath=function(d){var e=a.sections[d.section][d.row];b.occurrence(e,c._location)},this.searchForString=function(){this.limit=30,e.searchForString(a.searchText).then(function(b){var c=this._orderOccurrences(b);this._occurrences=c,a.sections=[c.slice(0,this.limit)],a.showMoreContentSpinner=this._occurrences.length>this.limit}.bind(this),function(){a.sections=[[]]})},this._orderOccurrences=function(a){var b={},c=[];_.each(a,function(a){b[a.title]||(b[a.title]=[],c.push(a.title)),b[a.title].push(a)});var d=new Date,e=function(a,b){for(var c=[],e=0,f=0;e<a.length&&f<b.length;){var g=a[e].startDate<d,h=b[f].startDate<d,i=a[e],j=b[f];g!==h?i.startDate>j.startDate?(c.push(i),e++):(c.push(j),f++):i.startDate>j.startDate?(c.push(j),f++):(c.push(i),e++)}return c=c.concat(a.slice(e)).concat(b.slice(f))},f=function(a){if(a.length<2)return a;var b=Math.floor(a.length/2),c=a.slice(0,b),d=a.slice(b);return e(f(c),f(d))};b=_.each(b,function(a,c){b[c]=f(a)});var g=[];return _.each(c,function(a){g=g.concat(b[a])}),g},this.setLimit=function(b){this.limit=b,a.sections=[this._occurrences.slice(0,this.limit)],a.showMoreContentSpinner=this._occurrences.length>this.limit},this._init=function(){this.limit=20,a.i18n={LOADING:f.getMessage("LOADING"),NO_RESULTS:f.getMessage("NO_RESULTS")},a.config={timezone:CONFIG.userTimezone,language:CONFIG.userLang,location:g.get(),locationTz:h.getTimezoneId()},a.isChromeApp=d.isChromeApp(),a.delegate={didSelectRowAtIndexPath:this.didSelectRowAtIndexPath.bind(this)},a.tableInfo={},a.showMoreContentSpinner=!1,i.getAll({useCache:!0}).then(function(b){a.tableInfo.calendars=_.indexBy(b,"id")}),this.searchForString()},this._init()}]),angular.module("App").directive("srNavbar",function(){return{templateUrl:CONFIG.prepareViewTemplateUrl("navbar"),restrict:"E",replace:!0}}),angular.module("App").directive("srNavbarMeet",function(){return{templateUrl:CONFIG.prepareViewTemplateUrl("navbar-meet"),
restrict:"E",replace:!0}}),angular.module("App").directive("srNavbarToggleSidebar",["SRToggleSidebarService","SRI18nService",function(a,b){return{templateUrl:CONFIG.preparePartialTemplateUrl("navbar-toggle-sidebar"),restrict:"E",replace:!0,scope:!0,link:function(b,c,d,e){b.toggleSidebar=a.toggleSidebar},controller:["$scope",function(c){c.i18n={SHOW_SIDEBAR:b.getMessage("SHOW_SIDEBAR"),HIDE_SIDEBAR:b.getMessage("HIDE_SIDEBAR")},c.SRToggleSidebarService=a}]}}]),angular.module("App").directive("srNavbarToday",["SRCurrentService","SRI18nService","$rootScope",function(a,b,c){return{templateUrl:CONFIG.preparePartialTemplateUrl("navbar-today"),restrict:"E",replace:!0,scope:{},link:function(b,d,e,f){var g=function(){b.isToday=f.isToday()};b.onClick=a.navigation.today;var h=c.$on("onClockUpdate",g);b.$watch("appCurrent._date",g,!0),b.$on("$destroy",function(){h()})},controller:["$scope",function(c){this.isToday=function(){return moment().isSame(a._date,a._location)},c.appCurrent=a,c.isToday=this.isToday(),c.i18n={TODAY:b.getMessage("TODAY")}}]}}]),angular.module("App").directive("srNavbarControls",["SRCurrentService","SRI18nService",function(a,b){return{templateUrl:CONFIG.preparePartialTemplateUrl("navbar-controls"),restrict:"E",replace:!0,scope:{},link:function(c,d,e,f){c.SRCurrentService=a,c.i18n={PREVIOUS_MONTH:b.getMessage("PREVIOUS_MONTH"),PREVIOUS_WEEK:b.getMessage("PREVIOUS_WEEK"),NEXT_MONTH:b.getMessage("NEXT_MONTH"),NEXT_WEEK:b.getMessage("NEXT_WEEK")},c.states=a.navigation.states,c.prev=a.navigation.prev,c.next=a.navigation.next}}}]),angular.module("App").directive("srNavbarDate",["SRSettingsService","SRDateService","SRCurrentService","$filter","$rootScope",function(a,b,c,d,e){return{template:'<li class="navbar__item navbar__item--title" data-ng-bind-html="date"></li>',restrict:"E",replace:!0,scope:{},link:function(a,b,c,d){a.$watch("SRCurrentService._date",function(b,c){b!==c&&(a.date=d.getCurrentDate())},!0);var f=e.$on("firstDay",function(){a.date=d.getCurrentDate()},!0);a.$on("$destroy",function(){f()})},controller:["$scope",function(e){e.SRCurrentService=c;var f=0===a.get("shortDate").indexOf("d");this.getCurrentDate=function(){var a=[];if(a.push("<span>"),"month"===c._location)a.push("<strong>"+d("date")(c._date,"MMMM")+"</strong>"),a.push(d("date")(c._date,"yyyy"));else{var e=_.clone(c._date),g=moment(e).add(6,"day").toDate();b.isSameMonth(e,g)?(a.push("<strong>"),f?(a.push(d("date")(e,"d")),a.push("-"),a.push(d("date")(g,"d")),a.push(d("date")(e,"MMM"))):(a.push(d("date")(e,"MMM")),a.push(d("date")(e,"d")),a.push("-"),a.push(d("date")(g,"d"))),a.push("</strong>"),a.push(d("date")(g,"yyyy"))):(a.push("<strong>"),f?(a.push(d("date")(e,"d")),a.push(d("date")(e,"MMM")),a.push("-"),a.push(d("date")(g,"d")),a.push(d("date")(g,"MMM"))):(a.push(d("date")(e,"MMM")),a.push(d("date")(e,"d")),a.push("-"),a.push(d("date")(g,"MMM")),a.push(d("date")(g,"d"))),a.push("</strong>"),a.push(d("date")(g,"yyyy")))}return a.push("</span>"),a.join(" ")},e.date=this.getCurrentDate()}]}}]),angular.module("App").directive("srNavbarLocation",["SRCurrentService","SRI18nService",function(a,b){var c=[];return c.push("<li"),c.push('  class="navbar__item navbar__item--location"'),c.push('  data-ng-class="{'),c.push("    'navbar__item--location--week': SRCurrentService._location === 'week',"),c.push("    'navbar__item--location--month': SRCurrentService._location === 'month'"),c.push('  }"'),c.push(">"),c.push("  <a"),c.push('    class="navbar__item--location__month"'),c.push('    aria-label="{{:: i18n.SWITCH_TO_MONTH}}"'),c.push('    role="button"'),c.push('    tooltip="{{:: i18n.SWITCH_TO_MONTH}}"'),c.push('    tooltip-placement="left"'),c.push('    tooltip-popup-delay="800"'),c.push('    tooltip-append-to-body="true"'),c.push("    data-ng-click=\"changeLocation('month')\""),c.push("  >"),c.push('    <i class="icon icon_month"></i>'),c.push("  </a>"),c.push("  <a"),c.push('    class="navbar__item--location__week"'),c.push('    aria-label="{{:: i18n.SWITCH_TO_WEEK}}"'),c.push('    role="button"'),c.push('    tooltip="{{:: i18n.SWITCH_TO_WEEK}}"'),c.push('    tooltip-placement="left"'),c.push('    tooltip-popup-delay="800"'),c.push('    tooltip-append-to-body="true"'),c.push("    data-ng-click=\"changeLocation('week')\""),c.push("  >"),c.push('    <i class="icon icon_week"></i>'),c.push("  </a>"),c.push("</li>"),{template:c.join(""),restrict:"E",replace:!0,scope:{},link:function(b,c,d,e){b.changeLocation=a.changeLocation},controller:["$scope",function(c){c.SRCurrentService=a,c.i18n={SWITCH_TO_MONTH:b.getMessage("SWITCH_TO_MONTH"),SWITCH_TO_WEEK:b.getMessage("SWITCH_TO_WEEK")}}]}}]),angular.module("App").directive("srNavbarCalendars",["SRI18nService",function(a){return{templateUrl:CONFIG.preparePartialTemplateUrl("navbar-calendars"),restrict:"E",replace:!0,scope:{},link:function(a,b,c,d){a.srUiClosePopover=function(){a.hasPopover=!1},a.togglePopover=function(){a.hasPopover=!0}},controller:["$scope",function(b){b.hasPopover=!1,b.i18n={CALENDARS:a.getMessage("CALENDARS")}}]}}]),angular.module("App").directive("srNavbarNewEvent",["SRCreateEventService",function(a){return{templateUrl:CONFIG.preparePartialTemplateUrl("navbar-new-event"),restrict:"E",replace:!0,scope:{},link:function(b,c,d,e){b.createEvent=a.createNow.bind(a)}}}]),angular.module("App").directive("srMessage",["SRMessageService",function(a){return{restrict:"E",replace:!0,templateUrl:CONFIG.preparePartialTemplateUrl("message"),link:function(b,c,d,e){b.SRMessageService=a,b.close=function(){a.remove()},b.$watch("SRMessageService.message",function(c,d){b.message=a.message},!0)}}}]),angular.module("App").directive("srMessageLoading",["$rootScope",function(a){return{templateUrl:CONFIG.prepareViewTemplateUrl("loading"),restrict:"E",replace:!0,link:function(b){a.$watch("loadingMessage.msg",function(c,d){b.isActive=!!c,b.loadingMessage=a.loadingMessage})},controller:["$scope",function(b){b.loadingMessage=a.loadingMessage}]}}]),angular.module("App").directive("srPopover",["SRLayerService","$document","$timeout",function(a,b,c){function d(a,b){for(var c=b.parentNode;null!=c;){if(c==a)return!0;c=c.parentNode}return!1}function e(a){a=a||window.event;var b=a.keyCode||a.which;return b}return{templateUrl:CONFIG.prepareViewTemplateUrl("popover"),restrict:"E",replace:!0,transclude:!0,scope:{hasPopover:"=",options:"=?"},controller:"SRPopoverCtrl",link:function(c,f,g,h){var i=f[0];a.add(f);var j=a.get(),k=function(a){return 27===e(a)?(a.stopPropagation(),a.preventDefault(),c.$apply(function(){h.closePopover()}),!1):void 0},l=function(e){var f=e.target;if(!i.isEqualNode(f)&&!d(i,f)&&j===a.get()){var g=[f.className.split(" ")];g=_.flatten(g);for(var k=_.getPath(c,"options.excludeDismissOnClasses")||[],l=0;l<k.length;l++){var m=k[l];if(_.contains(g,m))return;var n=b.find("."+m);if(_.hasPath(n,[0])&&d(n[0],f))return}c.$apply(function(){h.closePopover()})}};b.on("mousedown.closePopover",l),b.on("keydown.closePopover",k),c.$on("$destroy",function(){b.off("mousedown.closePopover",l),b.off("keydown.closePopover",k),a.remove()})}}}]),angular.module("App").controller("SRPopoverCtrl",["$scope","SRLayerService",function(a,b){var c=this;this.getClassNames=function(a){var b=[],c="popover--";return a.animation&&b.push(c+"animation--"+a.animation),a.name&&b.push(c+a.name),b.join(" ")},this.closePopover=function(){a.hasPopover=!1},this.init=function(){a.options=a.options||{},a.classNames=c.getClassNames(a.options)},this.init()}]),angular.module("App").directive("srSettingsMenu",["SRI18nService",function(a){return{restrict:"E",transclude:!0,replace:!0,scope:{currentSection:"="},templateUrl:CONFIG.preparePartialTemplateUrl("settings-menu"),link:function(a,b,c,d){a.changeSection=function(b){a.currentSection=b.name}},controller:["$scope",function(b){b.sections=[{label:a.getMessage("PREFERENCES"),name:"general",icon:"gear"},{label:a.getMessage("ACCOUNTS"),name:"accounts",icon:"people"},{label:a.getMessage("NOTIFICATIONS"),name:"notifications",icon:"ding-dong"}]}]}}]),angular.module("App").directive("srSettingsGeneral",["$q","SRSettingsService","SROnlineStatusService","$interval","SRRefreshService","SRKeyboardManagerService",function(a,b,c,d,e,f){return{restrict:"E",replace:!0,templateUrl:CONFIG.preparePartialTemplateUrl("settings-general"),scope:{},controller:"SRSettingsGeneralCtrl",link:function(a,g,h,i){var j=function(){i.getLastUpdateValue().then(function(b){a.lastUpdated=b})},k=d(j,1e3,0,!1);a.appRefresh=e,a.onlineStatus=c,a.deleteAccount=i.deleteAccount,a.updateSetting=function(a,c){b.set(a,c.value)},a.refresh=function(){return e._isRefreshing?!1:void e.refresh().then(function(){j()})},f.bind("r",function(){a.refresh()}),a.$on("$destroy",function(){f.unbind("r"),d.cancel(k)})}}}]),angular.module("App").directive("srSettingsAccounts",["SROnlineStatusService","$rootScope",function(a,b){return{restrict:"E",replace:!0,templateUrl:CONFIG.preparePartialTemplateUrl("settings-accounts"),scope:{},controller:"SRSettingsAccountsCtrl",link:function(c,d,e,f){c.onlineStatus=a;var g=b.$on("hasConnections",function(){f.init()});c.$on("$destroy",function(){g()})}}}]),angular.module("App").directive("srSettingsNotifications",["SRNotificationService",function(a){return{restrict:"E",replace:!0,templateUrl:CONFIG.preparePartialTemplateUrl("settings-notifications"),scope:{},controller:["$scope",function(b){b.appNotifications=a}]}}]),angular.module("App").directive("srSettingsLogout",function(){return{restrict:"E",replace:!0,template:'<button class="btn btn--danger float-left" data-ng-click="onClick()" role="button" data-ng-bind="i18n.LOGOUT"></button>',scope:{},controller:"SRSettingsLogoutCtrl",link:function(a,b,c,d){a.onClick=d.logout}}}),angular.module("App").controller("SRSettingsAccountsCtrl",["$scope","$q","SRI18nService","SRConnectionModel","SRUserService",function(a,b,c,d,e){var f=this;a.i18n={ADD_ACCOUNT:c.getMessage("ADD_ACCOUNT"),CONNECT:c.getMessage("CONNECT"),NOT_AVAILABLE_YET:c.getMessage("NOT_AVAILABLE_YET"),CALENDARS:c.getMessage("CALENDARS"),ACCOUNTS:c.getMessage("ACCOUNTS"),DISCONNECT:c.getMessage("DISCONNECT"),RECONNECT:c.getMessage("RECONNECT")},a.services={},this._isServiceHidden=function(a,b){var c=CONFIG.environment.endsWith("PRODUCTION")?["office365-sdf"]:[];return c.length&&!f.userPrivileges.team&&_.contains(c,a)?!0:"google"===a||"icloud"===a||"office365"===a||"office365-sdf"===a?!1:"sunrise"===a||"store"===a?!0:!!_.find(b,function(b){return b.type===a})},this._getServices=function(a,b){return b=b||{},b.calendars=_.reduce(b.calendars,function(b,c,d){return f._isServiceHidden(c.id,a)||b.push(c),b},[]),b.apps=_.reduce(b.apps,function(b,c,d){return f._isServiceHidden(c.id,a)||b.push(c),b},[]),b},this.init=function(){this.userPrivileges=e.getPrivileges(),d.getAll({useCache:!0}).then(function(b){var c=_.clone(CONFIG.services);a.connections=b,a.services=f._getServices(b,c)})},this.init()}]),angular.module("App").controller("SRSettingsGeneralCtrl",["$scope","$q","$filter","SRI18nService","SRUserService","SRApiService","SRSettingsService","SRConnectionModel","SRCalendarModel","SRConfirmService","SRLocaleService","SRBrowserService",function(a,b,c,d,e,f,g,h,i,j,k,l){var m=this;a.i18n={REFRESH:d.getMessage("REFRESH"),VERSION:d.getMessage("VERSION"),DELETE_ACCOUNT:d.getMessage("DELETE_ACCOUNT")},a.appVersion=function(){return CONFIG.baseUrl.contains(CONFIG.betaUrl)?[CONFIG.version,"Beta"].join(" "):CONFIG.baseUrl.contains(CONFIG.stagingUrl)?[CONFIG.version,"Staging"].join(" "):CONFIG.version}(),a.lastUpdated=null,a.settings=[],this._getSettings=function(){var a=b.defer(),c=[],e=k.getDayNames(),f=(new Date).getFullYear(),h={firstDay:{1:e[1],0:e[0],6:e[6]},format24HourTime:{"true":"13:00","false":"1:00pm"},shortDate:{"M/d/yy":"12/31/"+f,"d/M/yy":"31/12/"+f,"yy-M-d":f+"-12-31"},defaultAlert:{"null":d.getMessage("NONE"),0:d.getMessage("AT_TIME_OF_EVENT"),5:d.getMessage("MINUTES_BEFORE",5),15:d.getMessage("MINUTES_BEFORE",15),30:d.getMessage("MINUTES_BEFORE",30),60:d.getMessage("HOUR_BEFORE",1),120:d.getMessage("HOURS_BEFORE",2),1440:d.getMessage("DAY_BEFORE",1),2880:d.getMessage("DAYS_BEFORE",2)},defaultEventLength:{15:d.getMessage("X_MINUTES",15),30:d.getMessage("X_MINUTES",30),60:d.getMessage("1_HOUR",1),90:d.getMessage("X_HOURS",1.5),120:d.getMessage("X_HOURS",2)},refreshTimer:{120000:d.getMessage("EVERY_X_MINUTES",2),300000:d.getMessage("EVERY_X_MINUTES",5),900000:d.getMessage("EVERY_X_MINUTES",15),3600000:d.getMessage("EVERY_HOUR")},highContrastColors:{"true":d.getMessage("TURN_ON"),"false":d.getMessage("TURN_OFF")},badge:{date:d.getMessage("DATE"),invitation:d.getMessage("INVITATIONS_COUNT")}};return c.push({key:"firstDay",label:d.getMessage("WEEK_START_ON"),selected:null,values:g.getValidSettings("firstDay")}),c.push({key:"format24HourTime",label:d.getMessage("TIME_FORMAT"),selected:null,values:g.getValidSettings("format24HourTime")}),c.push({key:"shortDate",label:d.getMessage("DATE_FORMAT"),selected:null,values:g.getValidSettings("shortDate")}),c.push({key:"defaultAlert",label:d.getMessage("DEFAULT_ALERT"),selected:null,values:g.getValidSettings("defaultAlert")}),c.push({key:"refreshTimer",label:d.getMessage("REFRESH_CALENDARS"),selected:null,values:g.getValidSettings("refreshTimer")}),c.push({key:"defaultEventLength",label:d.getMessage("DEFAULT_EVENT_LENGTH"),selected:null,values:g.getValidSettings("defaultEventLength")}),c.push({key:"highContrastColors",label:d.getMessage("HIGH_CONTRAST_COLORS"),selected:null,values:g.getValidSettings("highContrastColors")}),l.isMacApp()&&c.push({key:"badge",label:d.getMessage("BADGE"),selected:null,values:g.getValidSettings("badge")}),_.each(c,function(a){a.values=_.map(a.values,function(b){return{value:b,label:h[a.key][b]}})}),this._getWritableCalendarsSettings().then(function(b){c.push(b),a.resolve(c)}),a.promise},this._getWritableCalendarsSettings=function(){return b.all([h.getAll({useCache:!0}),i.getFilteredByWritable()]).then(function(a){var b=a[0],e=_.indexBy(b,"id"),f=a[1];return i.sortCalendarsByConnection(f,b),{key:"defaultCalendar",label:d.getMessage("DEFAULT_CALENDAR"),selected:null,values:_.reduce(f,function(a,b){var d=e[b.connectionId];return _.isUndefined(d)?a:(a.push({group:[c("SRStringFilter_titleCase")(d.type)," (",d.info,")"].join(""),value:b.id,label:b.title}),a)}.bind(this),[])}}.bind(this))},this._setSelectedValues=function(a){return _.map(a,function(a){var b=g.get(a.key);return a.selected=_.find(a.values,function(a){return a.value===b}),a})},this.getLastUpdateValue=function(){var a=b.defer(),c=e.getLastUpdate();if(c){var f=moment.duration(Date.now()-parseInt(c,10),"ms").humanize();f.startsWith("second")&&(f=d.getMessage("A_FEW_SECONDS")),a.resolve(d.getMessage("RELATIVE_TIME_PAST",f))}else a.resolve(d.getMessage("NEVER"));return a.promise},this.deleteAccount=function(){var a=b.defer();return j.add({title:d.getMessage("DELETE_MY_ACCOUNT"),msg:d.getMessage("DELETE_ACCOUNT_SENTENCE"),actions:[{label:d.getMessage("DELETE_MY_ACCOUNT"),cssClass:"btn--danger",action:function(){f.user["delete"]().then(function(){a.resolve()})}},{label:d.getMessage("CANCEL"),cssClass:"btn--gray",action:function(){a.reject()}}]}),a.promise},this.init=function(){this._getSettings().then(function(b){a.settings=m._setSelectedValues(b)}),this.getLastUpdateValue().then(function(b){a.lastUpdated=b})},this.init()}]),angular.module("App").controller("SRSettingsLogoutCtrl",["$scope","$q","SRUserService","SRConfirmService","SRI18nService",function(a,b,c,d,e){a.i18n={LOGOUT:e.getMessage("LOGOUT")},this.logout=function(){var a=b.defer();return d.add({title:e.getMessage("LOGOUT"),msg:e.getMessage("LOGOUT_CONFIRM_MSG"),actions:[{label:e.getMessage("LOGOUT"),focus:!0,action:function(){c.logout().then(function(){a.resolve()})}},{label:e.getMessage("CANCEL"),cssClass:"btn--gray",action:function(){a.reject()}}]}),a.promise}}]),angular.module("App").controller("SRSettingsCtrl",["$scope","$modalInstance","options","SRI18nService",function(a,b,c,d){var e="general";a.currentSection=c.currentSection||e,a.i18n={DONE:d.getMessage("DONE")},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("App").controller("SRInterestingCalendarCtrl",["$scope","$modalInstance","SRInterestingCalendarApiService","SRConnectionModel","$q","$rootScope","SRApiService","SROccurrenceModel","SRCalendarModel","SRSyncTokenModel","SRMessageService","SRI18nService","$timeout","SRImageService","SROnlineStatusService","$document","SRQCancellableService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r="calendar",s="catalog",t=8;this.didSelectRowAtIndexPath=function(b){var c=this._itemAtIndexPath(b);switch(a.mode){case"normalMode":c.type===r?(c.checked=!c.checked,this.didClickCheckbox(b)):c.type===s&&(this._loadPage(c.id),a.showBackButton=!0);break;case"editMode":var d=a.sections[0].indexOf(c);-1!==d&&a.sections[0].splice(d,1),this._removedCalendarIdsHash[c.userCalendarId]=!0,this._unsubscribe(c);var e=_.clone(b);this._itemAtIndexPath(e)||(e={row:b.row-1,section:b.section},this._itemAtIndexPath(e)||(e=null)),e&&a.tableMethods.highlightRowAtIndexPath(e,!0)}},this.didClickBackButton=function(){switch(a.mode){case"spinnerMode":a.mode="normalMode",this._cancelPendingRequests();break;case"editMode":a.mode="normalMode",this._updateShowEditButton();default:var b=this._popPage();b||this._loadPage()}a.showBackButton=this._pageStack.length>0},this.didClickEditButton=function(){this._cancelPendingRequests(),a.mode="editMode",a.showBackButton=!0,this._updateShowEditButton(),this._pushPage(),this._loadSubscribedCalendars()},this.didClickDoneButton=function(){b.close()},this.didClickCheckbox=function(a){var b=this._itemAtIndexPath(a);return b.syncing?void(b.checked=!b.checked):void(b.checked?this._subscribe(b):this._unsubscribe(b))},this.didKeyDown=function(b){b.which===t&&a.showBackButton&&this.didClickBackButton()},this._itemAtIndexPath=function(b){var c=null;switch(a.mode){case"editMode":c=_.getPath(a.sections,[b.section,b.row]);break;case"normalMode":c=_.getPath(a.sections,[b.section,"items",b.row])}return c},this._connectionId=function(){var a=e.defer();return this._connectionIdCached?(a.resolve(this._connectionIdCached),a.promise):(d.getAll({useCache:!0}).then(function(a){var b=_.find(a,function(a){return a.id.match(/^store:.*$/)});return _.getPath(b,"id")}.bind(this)).then(function(a){return a?a:c.connect()}.bind(this)).then(function(b){b instanceof d?(this._connectionIdCached=b.id,b.save()):this._connectionIdCached=b,a.resolve(this._connectionIdCached)}.bind(this),a.reject),a.promise)},this._addErrorMessage=function(a){k.add({msg:l.getMessage("ERROR_TRY_AGAIN"),error:[a],closeable:!0})},this._subscribe=function(a){a.syncing=!0;var b=null,d=this._connectionId().then(function(b){return c.subscribe(b,a.id)}).then(function(a){return b=a,b.save()}).then(function(){return f.$emit("hasCalendars"),g.calendars.refreshCalendar(b.id,b.connectionId,!0,!1)}).then(function(){a.userCalendarId=b.id.split(":")[2],this._updateShowEditButton(),delete this._removedCalendarIdsHash[a.userCalendarId]}.bind(this),function(b){m(function(){a.checked=!1}),this._addErrorMessage(b)}.bind(this));return d["finally"](function(){a.syncing=!1}),d},this._unsubscribe=function(a){a.syncing=!0;var b=null,d=null,g=this._connectionId().then(function(e){return d=e,b=[d,a.userCalendarId].join(":"),c.unsubscribe(d,a.userCalendarId)}).then(function(){return h.getFilteredByCalendarId(b,{useCache:!0})}).then(function(a){return e.all([i.removeById(b),h.removeById(_.pluck(a,"id")),j.removeFilteredByCalendarId(b)])}).then(function(){f.$emit("hasCalendars"),f.$emit("onUpdate"),a.userCalendarId=null,this._updateShowEditButton()}.bind(this),function(b){m(function(){a.checked=!0}),this._addErrorMessage(b)}.bind(this));return g["finally"](function(){a.syncing=!1}),g},this._loadPage=function(b){a.mode="spinnerMode";var d=c.getPage(b);return d=q.wrap(d),this._addPendingRequest(d),d.then(function(b){_.each(b,function(a){_.each(a.items,function(a){a.checked=void 0!==a.userCalendarId})}),this._pushPage(),a.sections=b,this._loadImages(b),a.mode="normalMode"}.bind(this),function(b){"CANCELLED"!==b&&(a.mode="normalMode",a.showBackButton=this._pageStack.length>0,this._addErrorMessage())}.bind(this)),d},this._loadImages=function(a){_.each(a,function(a){_.each(a.items,function(a){n.blobUrlFromUrl(a.icon).then(function(b){a.imageUrl=b})})})},this._loadSubscribedCalendars=function(){this._getSubscribedCalendars().then(function(b){var c=_.map(b,function(a){var b={title:a.title,userCalendarId:a.id.split(":")[2]};return b});a.sections=[c],m(function(){a.tableMethods.highlightRowAtIndexPath(null)})},this._addErrorMessage.bind(this))},this._getSubscribedCalendars=function(){var a=i.getAll({useCache:!0}).then(function(a){return a=_.filter(a,function(a){return"store:events"===a.type})});return a},this._cancelPendingRequests=function(){_.each(this._pendingPromises,function(a){a.cancel()})},this._addPendingRequest=function(a){a["finally"](function(){var b=this._pendingPromises.indexOf(a);-1!==b&&this._pendingPromises.splice(b,1)}.bind(this)),this._pendingPromises.push(a)},this._pushPage=function(){a.sections&&this._pageStack.push(a.sections)},this._popPage=function(){var b=this._pageStack.pop();return b&&!_.isEmpty(this._removedCalendarIdsHash)&&_.each(b,function(a){_.each(a.items,function(a){a.checked&&a.userCalendarId&&this._removedCalendarIdsHash[a.userCalendarId]&&(a.checked=!1,a.userCalendarId=null)}.bind(this))}.bind(this)),a.sections=b,b?!0:!1},this._updateShowEditButton=function(){switch(a.mode){case"editMode":a.showEditButton=!1;break;default:this._getSubscribedCalendars().then(function(b){a.showEditButton=b.length>0})}},this._initScope=function(){a.delegate={didSelectRowAtIndexPath:this.didSelectRowAtIndexPath.bind(this)},a.tableMethods={},a.didClickBackButton=this.didClickBackButton.bind(this),a.didClickEditButton=this.didClickEditButton.bind(this),a.didClickCheckbox=this.didClickCheckbox.bind(this),a.didClickDoneButton=this.didClickDoneButton.bind(this),a.showBackButton=!1,a.showEditButton=!1,a.tableInfo={random:Math.random},a.mode="spinnerMode"},this._initListeners=function(){m(function(){this._$rootElement=p.find(".modal--interesting-calendar"),this._$rootElement.on("keydown",this.didKeyDown.bind(this))}.bind(this))},this._initDestroy=function(){a.$on("$destroy",function(){this._$rootElement.off("keypress")})},this._init=function(){this._initScope(),this._initListeners(),this._initDestroy(),o.isOnline()?(this._connectionIdCached=null,this._pendingPromises=[],this._removedCalendarIdsHash={},this._pageStack=[],a.isLoading=!0,this._connectionId().then(function(a){this._loadPage()}.bind(this),this._addErrorMessage.bind(this)),this._updateShowEditButton()):a.mode="offlineMode"},this._init()}]),angular.module("App").directive("srTimezonePicker",["$rootScope","SRKeyboardManagerService","$document","$timeout","SRBrowserService",function(a,b,c,d,e){return{restrict:"E",replace:!0,templateUrl:CONFIG.prepareViewTemplateUrl("timezone-picker"),scope:{timezone:"=?",options:"=?",date:"=?",tabindex:"=?"},controller:"SRTimezonePickerCtrl",link:function(f,g,h,i){var j=[e.events.mousedown,"hideTimepickerPopover"].join("."),k=function(a){var b=$(a.target);b.hasClass("timezone-picker")||b.parents(".timezone-picker").length||b.parent()[0].className.contains("active")||f.$apply(function(){c.off(j),f.close()})},l=function(){return f.togglePopover=!f.togglePopover,b.bind("escape",f.close),d(function(){c.on(j,k)}),!1},m=function(){return f.togglePopover=!1,b.unbind("escape"),c.off(j),!1};f.close=m,f.open=function(){return f.togglePopover?m():l()},f.tabindex=f.tabindex||0;var n=a.$on("onChangeTimezone",function(){f.timezoneAbbr=i.getTimezoneAbbr(),f.timezoneName=i.getTimezoneName()});f.$watch("timezone",function(a,b){a!==b&&(f.timezoneAbbr=i.getTimezoneAbbr(),f.timezoneName=i.getTimezoneName())},!0),f.$on("$destroy",function(){n()})}}}]),angular.module("App").directive("srTimezonePickerDropdown",["$rootScope","$filter","SRSettingsService","$interval","$q","SRPlaceService","$timeout","SRUserTimezoneService","SRDateService","SRI18nService","SRLayerService",function(a,b,c,d,e,f,g,h,i,j,k){return{restrict:"E",replace:!0,templateUrl:CONFIG.preparePartialTemplateUrl("timezone-picker-dropdown"),require:"^srTimezonePicker",scope:!0,link:function(h,i,j,l){k.add(i,{focusOnRemove:!0,arrowSupport:!0});var m=i.find(".timezone-picker__list"),n=i.find(".js-search-input");h.timezones=l._getTimezonesList(h.date,h.options),h.selectedTimezone=l.getSelectedTimezone(h.date,h.timezone||c.get("currentTimezone"),h.timezones),h.removeTimezone=function(a){h.timezones.splice(_.indexOf(h.timezones,a),1),l.storeTimezonesList(h.timezones)},h.toggleEditMode=function(){h.hasEditMode=!h.hasEditMode,g(function(){n.focus()})},h.onSelect=function(){h.isLoading=!0,g(function(){m[0].scrollTop=m[0].scrollHeight});var a=function(a,c){var d=l._getZoneDate(c,h.date),e=b("SRDateFilter_zoneAbbr")(d,c);h.timezones.push({label:a,name:c,abbr:e,ariaLabel:l._getAriaLabel(c,e,a),offset:l._getTimezoneOffset(c,d)}),h.timezones=l._sortTimezones(h.timezones),l.storeTimezonesList(h.timezones),h.place=null,h.isLoading=!1},c=function(){return h.place=null,h.isLoading=!1,!1};h.place.reference||c(),f.getDetails(h.place.reference).then(function(b){return b||b.geometry?void f.getTimezone([b.geometry.location.lat,b.geometry.location.lng],Date.now()).then(function(b){a(h.place.label,b.timeZoneId)},c):void c()},c)},h.changeTimezone=function(b,d){var e=b.target;e.className.contains("timezone-picker__remove")||(h.selectedTimezone=d,h.timezone?h.$parent.$parent.timezone=d.name:c.set("currentTimezone",d.name),h.$parent.$parent.close(),a.$emit("hasUpdatedTimezone"))},h.getPlaces=function(a){var b=e.defer(),c=function(a){var c=_.reduce(a,function(a,b,c){var d=_.first(_.pluck(b.terms,"value"),2).join(", "),e=_.find(h.timezones,function(a){return a.label===d});return e||a.push({label:_.first(_.pluck(b.terms,"value"),2).join(", "),reference:b.reference}),a},[]);b.resolve(c.slice(0,4))};return f.searchPlace(a,{types:["(cities)"],nolocation:!0}).then(c,c),b.promise};var o=d(function(){},1e3);h.$on("$destroy",function(){k.remove(),d.cancel(o)})}}}]),angular.module("App").controller("SRTimezonePickerCtrl",["$scope","$filter","SRSettingsService","SRDateService","SRI18nService","SRUserTimezoneService",function(a,b,c,d,e,f){var g=this,h={summer:moment("2014-07-01").toDate(),winter:moment("2014-01-01").toDate()};a.i18n={PLEASE_WAIT:e.getMessage("PLEASE_WAIT"),ADD_REMOVE_TIMEZONES:e.getMessage("ADD_REMOVE_TIMEZONES"),DONE:e.getMessage("DONE"),SEARCH_CITY:e.getMessage("SEARCH_CITY")},a.options=a.options||{},a.togglePopover=!1,a.timezoneAbbr=void 0,a.timezoneName=void 0,this._getZoneDate=function(a,b){return b&&_.isDate(b)?b:d.isDst("2014-01-01",a)?h.summer:h.winter},this._getAbbr=function(a,c){return b("SRDateFilter_zoneAbbr")(a,c)},this._getTimezoneFromList=function(a,b){return _.find(b,function(b){return b.name===a})},this._sortTimezones=function(a){return a.sort(function(a,b){return a.currentLocation?-1:b.currentLocation?1:a.offset<b.offset?1:a.offset>b.offset?-1:a.label?b.label?a.label.toLowerCase()>b.label.toLowerCase():-1:1}),a},g._getTimezoneOffset=function(a,b){var c=d.getTimezoneJSDate(b,a);return Number(c.getTimezoneOffset())},this._getTimezoneLabelWithListOfTimezones=function(a,b){if(_.isArray(b)){var c=g._getTimezoneFromList(a,b);if(c)return c.label}if(a){var d=a.split("/");if(_.isArray(d))return(d[1]||a).replace("_"," ")}return a},this._getTimezoneObject=function(a,b,c,d,e){var f=g._getZoneDate(a,c);return b=b||g._getAbbr(f,a),d=d||g._getTimezoneLabelWithListOfTimezones(a),e=e||g._getTimezoneOffset(a,f),{name:a,label:d,abbr:b,ariaLabel:g._getAriaLabel(a,b,d),offset:e}},g._getAriaLabel=function(a,c,d){var f=[];return f.push(c),f.push(d),f.push(b("SRDateFilter_localTime")(a)),e.getMessage("SWITCH_TO_X",f.join(" - "))},g._getTimezonesList=function(a,d){d=d||{};var h=c.get("timezones"),i=h.slice(0);i=_.reduce(i,function(a,c,d){var e=g._getZoneDate(c.name,e),f=b("SRDateFilter_zoneAbbr")(e,c.name);return a.push({name:c.name,label:c.label,abbr:f,ariaLabel:g._getAriaLabel(c.name,f,c.label),offset:g._getTimezoneOffset(c.name,e)}),a},[]);var j=function(){var b=g._getTimezoneObject(CONFIG.userTimezone,void 0,a,e.getMessage("CURRENT_LOC"));return b.currentLocation=!0,b}();i.push(j);var k=f.getTimezoneId();if(k&&!g._getTimezoneFromList(k,i)&&i.push(g._getTimezoneObject(k,void 0,a)),d.timezones&&_.isArray(d.timezones)){var l=_.reduce(d.timezones,function(b,c){return g._getTimezoneFromList(c,i)||b.push(g._getTimezoneObject(c,void 0,a)),b},[]);i=i.concat(l)}return i=g._sortTimezones(i)},this.storeTimezonesList=function(a){var b=angular.copy(a);b=_.reduce(b,function(a,b){return b=_.omit(b,"ariaLabel"),b=_.omit(b,"offset"),b.currentLocation?a:(a.push(b),a)},[]),c.set("timezones",b)},this.getSelectedTimezone=function(a,c,d){var f;if(c===CONFIG.userTimezone&&(f=_.find(d,function(a){return a.label===e.getMessage("CURRENT_LOC")})))return f;var h=b("SRDateFilter_zoneAbbr")(g._getZoneDate(c,a),c);if(f=_.find(d,function(a){return a.name===c})||_.find(d,function(a){return a.abbr===h}),!f){var i=g._getTimezoneObject(c,h,a);d.push(i),f=d[d.length-1]}return f},this.getTimezoneAbbr=function(){var b=a.timezone||c.get("currentTimezone"),d=g._getZoneDate(b,a.date),e=g._getAbbr(d,b);return e},this.getTimezoneName=function(){var b=a.timezone||c.get("currentTimezone"),d=(g._getZoneDate(b,a.date),g._getTimezoneLabelWithListOfTimezones(b,c.get("timezones")));return d},this.init=function(){a.timezoneAbbr=g.getTimezoneAbbr(),a.timezoneName=g.getTimezoneName()},this.init()}]),angular.module("App").directive("srTable",[function(){return{restrict:"E",scope:{focusElement:"=?",alwaysShowHeaders:"=?",neverUnhighlightFirstRowOnUpArrow:"=?",delegate:"=?",sections:"=?",info:"=?",selectionKeys:"=?",autofocus:"=?",methods:"=?",resetOnReload:"=?",scrollTopOnReload:"=?"},templateUrl:null,controller:"SRTableCtrl",link:function(a,b,c,d){d.$element=b,a.selectionKeys=a.selectionKeys||[13],a.resetOnReload=a.resetOnReload===!1?!1:!0,a.scrollTopOnReload=a.scrollTopOnReload===!1?!1:!0;var e=a.focusElement?a.focusElement:b;if(e===b){var f=b.attr("tabindex");void 0===f&&b.attr("tabindex",0)}a.autofocus&&(e.focus(),a.$watch("sections",function(){e.focus()})),e.on("keydown.srTable",d.onKeyDown.bind(d)),b.on("mousemove.srTable",d.onMouseMove.bind(d));for(var g=null,h=b.parents().add(b),i=h.length-1;i>=0;i--){var j=$(h[i]),k=j.css("overflow-y");if("auto"===k||"scroll"===k){g=j;break}}d.scrollEnabled=null!==g,d.scrollEnabled&&(d.$overflowElement=g),a.$on("$destroy",function(){e.off("keydown.srTable"),b.off("mousemove.srTable")})}}}]),angular.module("App").directive("srTableSection",[function(){return{restrict:"E",scope:!0,require:"^srTable",link:{pre:function(a,b,c,d){a.sectionIndex=void 0!==a.$index?a.$index:parseInt(b.attr("data-index"))}}}}]),angular.module("App").directive("srTableSectionHeader",[function(){return{restrict:"E",scope:!0,template:'<div ng-if="showHeader" ng-transclude></div>',transclude:!0,require:"^srTable",link:function(a,b,c,d){a.alwaysShowHeaders?a.showHeader=!0:a.$watchCollection("indexPaths",function(b,c){var d=_.filter(a.indexPaths,function(b){return b.section===a.sectionIndex}).length;a.showHeader=d>0})}}}]),angular.module("App").directive("srTableSectionRow",[function(){return{restrict:"E",scope:!0,require:"^srTable",link:function(a,b,c,d){var e=void 0!==a.$index?a.$index:parseInt(b.attr("data-index")),f={section:a.sectionIndex,row:e};d.addIndexPath(f);var g=b.children().first(),h=function(a){d.onRowMouseMoveAtIndexPath(f)},i=function(a){1===a.which?(d.onRowMouseDownAtIndexPath(f),a.stopPropagation()):3===a.which&&a.preventDefault()},j=function(a){32===a.which&&d.onRowMouseDownAtIndexPath(f)};g.on("mousemove.srTableSectionRow",h),g.on("mousedown.srTableSectionRow",i),g.on("keydown.srTableSectionRow",j),a.$watch("highlightedIndexPath",function(a,b){_.isEqual(f,a)?g.addClass("highlighted"):(!a||_.isEqual(f,b))&&g.removeClass("highlighted");
}),a.$watch("selectedIndexPath",function(a,b){_.isEqual(f,a)?g.addClass("selected"):(!a||_.isEqual(f,b))&&g.removeClass("selected")}),a.$on("$destroy",function(){g.off("mousemove.srTableSectionRow"),g.off("mousedown.srTableSectionRow"),g.off("keydown.srTableSectionRow"),d.removeIndexPath(f)})}}}]),angular.module("App").controller("SRTableCtrl",["$scope","$timeout",function(a,b){this.highlightRowAtIndexPath=function(a,b){var c=this._rowAtIndexPath(a);c?this._highlightRowAtIndexPath(a,b):this._highlightRowAtIndexPath(null)},this.onRowMouseMoveAtIndexPath=function(a){this._mouseMoved&&this._highlightRowAtIndexPath(a),this._mouseMoved=!1},this.onRowMouseDownAtIndexPath=function(a){this._selectRowAtIndexPath(a)},this.onKeyDown=function(b){if(40===b.keyCode){var c=this._nextIndexPathFromIndexPath(a.highlightedIndexPath);c&&this._highlightRowAtIndexPath(c,!0),b.preventDefault(),b.stopImmediatePropagation()}else if(38===b.keyCode){var d=this._previousIndexPathFromIndexPath(a.highlightedIndexPath);(d||!a.neverUnhighlightFirstRowOnUpArrow)&&(this._highlightRowAtIndexPath(d,!0),!d&&this.scrollEnabled&&this._scrollTop()),b.preventDefault(),b.stopImmediatePropagation()}else _.contains(a.selectionKeys,b.keyCode)&&(this._selectRowAtIndexPath(a.highlightedIndexPath),b.preventDefault(),b.stopImmediatePropagation())},this.onMouseMove=function(a){this._mouseMoved=!0},this.addIndexPath=function(b){a.indexPaths.push(b),a.indexPaths.sort(function(a,b){return a.section<b.section?-1:a.section>b.section?1:a.row-b.row}),a.neverUnhighlightFirstRowOnUpArrow&&(a.resetOnReload||this._firstLoad)&&!a.highlightedIndexPath&&(a.highlightedIndexPath=b)},this.removeIndexPath=function(b){var c=a.indexPaths.indexOf(b);a.indexPaths.splice(c,1)},this._initScope=function(){a.indexPaths=[],a.$watchCollection("sections",function(b,c){_.isEqual(b,c)||(a.resetOnReload&&this._reset(),this._firstLoad=!1)}.bind(this))},this._initPublicMethods=function(){a.methods&&(a.methods.highlightRowAtIndexPath=this.highlightRowAtIndexPath.bind(this))},this._init=function(){this._initScope(),this._initPublicMethods(),this._firstLoad=!0,this.$element=null,this.scrollEnabled=!1,this._reset()},this._reset=function(){this._mouseMoved=!0,a.highlightedIndexPath=null,a.selectedIndexPath=null,a.scrollTopOnReload&&this._scrollTop()},this._highlightRowAtIndexPath=function(b,c){b||(a.highlightedIndexPath=void 0),a.highlightedIndexPath=b,this.scrollEnabled&&c&&this._scrollToRowAtIndexPath(b),_.hasPath(a,"delegate.didHighlightRowAtIndexPath")&&a.delegate.didHighlightRowAtIndexPath(b),a.$apply()},this._selectRowAtIndexPath=function(b){b&&(a.selectedIndexPath=b,_.hasPath(a,"delegate.didSelectRowAtIndexPath")&&a.delegate.didSelectRowAtIndexPath(b),a.$apply())},this._previousIndexPathFromIndexPath=function(b){if(!b)return null;var c=this._indexOfIndexPath(b);return 0===c?null:a.indexPaths[c-1]},this._nextIndexPathFromIndexPath=function(b){if(!b)return _.first(a.indexPaths);var c=this._indexOfIndexPath(b);return c===a.indexPaths.length-1?null:c+1<a.indexPaths.length?a.indexPaths[c+1]:void 0},this._scrollToRowAtIndexPath=function(a){if(this.scrollEnabled){var b=this._rowAtIndexPath(a);b&&b.offset()&&(this.$overflowElement.offset().top>b.offset().top?this.$overflowElement.scrollTop(this.$overflowElement.scrollTop()-(this.$overflowElement.offset().top-b.offset().top)):b.offset().top+b.innerHeight()>this.$overflowElement.offset().top+this.$overflowElement.innerHeight()&&this.$overflowElement.scrollTop(this.$overflowElement.scrollTop()+b.position().top+b.innerHeight()-this.$overflowElement.innerHeight()),this._mouseMoved=!1)}},this._scrollTop=function(){this.scrollEnabled&&(this.$overflowElement.scrollTop(0),this._mouseMoved=!1)},this._indexOfIndexPath=function(b){var c=_.find(a.indexPaths,function(a){return _.isEqual(b,a)}),d=a.indexPaths.indexOf(c);return d},this._rowAtIndexPath=function(a){var b=this._indexOfIndexPath(a);return-1===b?null:$(this.$element.find("sr-table-section-row")[b]).children().first()},this._init()}]),angular.module("App").directive("srShakeShack",["$interval","SRLocationService",function(a,b){var c=[];return c.push('<div class="shake-shack">'),c.push('<img data-ng-src="{{imageUrl}}{{ts}}" draggable="false" width="100%" class="shake-shack__thumb" alt="Shake Cam" role="button" data-ng-click="openShakeCam()" />'),c.push("</div>"),{template:c.join(""),restrict:"E",replace:!0,scope:{},link:function(c,d,e,f){var g=a(f.updateTimestamp,1500,0,!1);c.openShakeCam=function(){var a="http://www.shakeshack.com/location/madison-square-park/#shack-cam";b.openPopupTo(a)},c.$on("$destroy",function(){a.cancel(g)})},controller:["$scope",function(a){this.updateTimestamp=function(){a.ts=Date.now()},a.imageUrl="http://www.shakeshack.com/camera.jpg?",a.ts=Date.now()}]}}]),angular.module("App").directive("srCalendarPicker",["SRParserService",function(a){return{templateUrl:CONFIG.preparePartialTemplateUrl("calendar-picker"),restrict:"E",replace:!0,scope:{calendarId:"=",calendars:"=?",connections:"=?",calendarsHash:"=",options:"=?"},link:function(a,b,c,d){a.options=_.extend(a.options||{},{size:20}),a.togglePopover=a.srUiClosePopover=function(){a.hasPopover=!a.hasPopover}}}}]),angular.module("App").directive("srCalendarPickerList",[function(){return{templateUrl:CONFIG.preparePartialTemplateUrl("calendar-picker-list"),restrict:"E",replace:!0,scope:{calendarId:"=",calendars:"=?",connections:"=?",hasPopover:"=?"},link:function(a,b,c,d){a.onSelect=function(b){a.calendarId=b.id,a.hasPopover=!1}}}}]),angular.module("App").controller("SRAnchormanModalCtrl",["$scope","$modalInstance","contents","$sce","SRSocialShareService","SRSanitizeService","SRBrowserService",function(a,b,c,d,e,f,g){this.onFooterButtonClick=function(){this._executeAction()},this.onCloseButtonClick=function(){this._executeCloseAction()},this.onShareCancelButtonClick=function(){a.mode="normal"},this.onShareButtonClick=function(a,b){var c=this._getCurrentContent();e.share(_.getPath(c,["action","text"]),_.getPath(c,["action","url"]),b),a.stopPropagation()},this.onShareBackgroundClick=function(b){a.mode="normal",b.stopPropagation()},this._initScope=function(){a.onFooterButtonClick=this.onFooterButtonClick.bind(this),a.onCloseButtonClick=this.onCloseButtonClick.bind(this),a.onShareCancelButtonClick=this.onShareCancelButtonClick.bind(this),a.onShareButtonClick=this.onShareButtonClick.bind(this),a.onShareBackgroundClick=this.onShareBackgroundClick.bind(this),a.content=null,a.mode="normal",a.isChromeApp=g.isChromeApp()},this._init=function(){this._initScope(),this._actionsMap={next:this._executeNextAction.bind(this),open:this._executeOpenAction.bind(this),share:this._executeShareAction.bind(this),close:this._executeCloseAction.bind(this)},this._currentContentIndex=-1,this._executeNextAction()},this._executeAction=function(){var a=this._getCurrentContent(),b=_.getPath(a,["action","type"]);b&&this._actionsMap[b]&&this._actionsMap[b]()},this._executeNextAction=function(){var b=this._getNextContent();if(b){var c=_.clone(b);c.contentURL?c.contentURL=d.trustAsResourceUrl(c.contentURL):c.contentHTML&&(c.contentHTML=d.trustAsResourceUrl("data:text/html;charset=utf-8,"+f.urlEncode(c.contentHTML))),a.content=c}else this._executeCloseAction()},this._executeOpenAction=function(){},this._executeShareAction=function(){a.mode="share"},this._executeCloseAction=function(){b.dismiss()},this._getCurrentContent=function(){return c[this._currentContentIndex]},this._getNextContent=function(){return this._currentContentIndex++,c[this._currentContentIndex]},this._init()}]),angular.module("App").directive("srAnchormanBanner",["SRAnchormanBannerService","SRAnchormanApiService",function(a,b){return{scope:{},restrict:"E",templateUrl:CONFIG.preparePartialTemplateUrl("anchorman-banner"),replace:!1,link:function(b,c,d,e){b.banner=null,b.closeBannerAndShow=function(b,c){c.stopPropagation();var d=a.getCallback();_.isFunction(d)&&d(b),a.hideBanner()},b.$watch(function(){return a.getBanner()},function(a,c){b.banner=a})}}}]),angular.module("App").directive("srFeedbackBanner",function(){return{restrict:"E",templateUrl:CONFIG.preparePartialTemplateUrl("feedback-banner"),scope:{},controller:"SRFeedbackCtrl",controllerAs:"ctrl"}}),angular.module("App").controller("SRFeedbackCtrl",["SRBrowserService","SRSanitizeService",function(a,b){var c="web.beta@sunrise.am";this._getSubject=function(){var c=[];return c.push("Feedback"),c.push(function(){return a.isChromeApp()?"Chrome App":a.isMacApp()?"Mac App":"Web App"}()),c.push("(v"+CONFIG.version+")"),b.urlEncode(c.join(" "))},this._getBody=function(){var a=[];return a.push("\r\n\r\n\r\n"),a.push("=============================="),a.push("Please do not remove the following lines, it helps us diagnose potential issues. \r\n"),a.push("User Agent: "+_.getPath(navigator,"userAgent")),a.push("Environment: "+CONFIG.environment),a.push("=============================="),b.urlEncode(a.join("\r\n"))},this._getMailtoUrl=function(){var a=[];return a.push("mailto:"+c),a.push("?subject="+this._getSubject()),a.push("&body="+this._getBody()),a.join("")},this._getSupportUrl=function(){var b=[];return b.push(function(){return a.isChromeApp()?CONFIG.supportUrl+"/category/65-chrome":a.isMacApp()?CONFIG.supportUrl+"/category/64-mac":CONFIG.supportUrl+"/category/66-web"}()),b.push("?subject="+this._getSubject()),b.push("&body="+this._getBody()),b.join("")},this.mailto=this._getMailtoUrl(),this.url=this._getSupportUrl()}]),angular.module("App").directive("srUiCheckbox",["$timeout",function(a){return{templateUrl:CONFIG.preparePartialTemplateUrl("checkbox"),restrict:"E",replace:!0,scope:{value:"=",id:"=?",onChange:"&?",tabindex:"=?"},link:function(b){b.tabindex=b.tabindex||0,b.onValueChange=function(){_.isFunction(b.onChange)&&a(function(){b.onChange()})}}}}]),angular.module("App").constant("uiDateConfig",{}).directive("uiDate",["uiDateConfig","$timeout","$filter","SRI18nService",function(a,b,c,d){var e;return e={},angular.extend(e,a),{require:"?ngModel",link:function(e,f,g,h){var i=function(a){b(function(){var b=a.dpDiv;if(b.length){var e=b.find("table"),f=e.find("thead"),g=f.find("th"),h=e.find("td");b.find(".ui-datepicker-next").attr("href","#").attr("role","button").attr("aria-label",d.getMessage("NEXT_MONTH")).attr("tabindex",0),b.find(".ui-datepicker-prev").attr("href","#").attr("role","button").attr("aria-label",d.getMessage("PREVIOUS_MONTH")).attr("tabindex",0),g.each(function(){var a=$(this),b=a.find("span").attr("title");a.attr("role","columnheader").attr("abbr",b).attr("aria-label",b)}),h.each(function(){var a=$(this),b=a.find("a"),d={day:_.parseInt(b.html()),month:_.parseInt(a.attr("data-month")),year:_.parseInt(a.attr("data-year"))},e=c("date")(new Date(d.year,d.month,d.day),"fullDate");b.attr("tabindex",0).attr("role","button").attr("aria-label",e).attr("aria-selected",a.hasClass("ui-state-active"))})}},10)},j=function(){return angular.extend({},a,e.$eval(g.uiDate))},k=function(){var a=j();if(a.nextText="",a.prevText="",h){var c=h.$setViewValue,d=!1;h.$setViewValue=function(){d||(d=!0,f.datepicker("setDate",f.datepicker("getDate")),c.call(h,f.datepicker("getDate")),b(function(){d=!1}))};var g=a.onSelect||angular.noop;a.onSelect=function(a,b){e.$apply(function(){h.$setViewValue(a),g(a,b),f.datepicker("hide")})};var k=a.onChangeMonthYear||angular.noop;a.onChangeMonthYear=function(a,b,c){return i(c),k(a,b,c)},a.onClose=function(a,b){f.removeClass("active")};var l=a.beforeShow||angular.noop;a.beforeShow=function(a,b){return f.addClass("active"),i(b),!d&&l(a,b)},h.$render=function(){var a=h.$modelValue;if(angular.isDefined(a)&&null!==a&&!angular.isDate(a))throw new Error("ng-Model value must be a Date object - currently it is a "+typeof a+" - use ui-date-format to convert it from a string");f.datepicker("setDate",a)}}f.datepicker("destroy"),f.datepicker(a),h&&h.$render()};e.$watchCollection(j,k,!0),e.$on("$destroy",function(){f.data("datepicker")&&f.datepicker("destroy")})}}}]).constant("uiDateFormatConfig","").directive("uiDateFormat",["uiDateFormatConfig",function(a){var b={require:"ngModel",link:function(b,c,d,e){var f=d.uiDateFormat||a;f?(e.$formatters.push(function(a){return angular.isString(a)?jQuery.datepicker.parseDate(f,a):null}),e.SRParserServices.push(function(a){return a?jQuery.datepicker.formatDate(f,a):null})):(e.$formatters.push(function(a){return angular.isString(a)?new Date(a):null}),e.SRParserServices.push(function(a){return a?a.toISOString():null}))}};return b}]),angular.module("App").directive("srUiFocus",["$timeout","SRBrowserService",function(a,b){return{scope:!1,link:function(c,d,e){var f=c.$eval(e.srUiFocus),g=c.$eval(e.srUiFocusDelay)||0;f&&b.isMobile.iOS()?d[0].focus():f&&a(function(){d[0].focus()},g)}}}]),angular.module("App").directive("srUiImage",function(){return{template:'<img data-ng-src="{{imageUrl}}" draggable="false" alt="" />',restrict:"E",replace:!0,scope:{imageUrl:"=?"}}}),angular.module("App").directive("srUiResizable",["$rootScope","SRApiService","$timeout","SRSyncingEventService","$filter","SRDialogService","SRFreezeViewService","SROccurrenceEditConfirmService",function(a,b,c,d,e,f,g,h){var i=function(a,b){return(a-b)*CONFIG.weekViewRatio()*60};return{link:function(b,c,j){function k(a){var b=[];return b.push(" - "),b.push(e("SRDateFilter_timeFormat")(a,!0)),b.push(" ("),b.push(e("SRDateFilter_duration")(a.getTime()-q.getTime(),"ms",null,!0)),b.push(")"),b.join("")}var l,m,n,o,p,q,r=function(a){return new Date(l+1e3*i(a.size.height,a.originalSize.height))},s=function(){m.resizable({grid:CONFIG.weekViewCellHeight()/2,start:function(a,c){q=b.occurrences.column[n].startDate,o=!0,l=angular.copy(b.occurrences.column[n].endDate).getTime(),m.addClass("occurrence--is-drawing"),p=m.find(".occurrence__time-end");var d=r(c);p.text(k(d)),g.enable()},resize:function(a,b){b.element.height(b.size.height);var c=r(b);p.text(k(c))},stop:function(c,d){var e=b.occurrences.column[n],f=e.endDate;o=!1,m.removeClass("occurrence--is-drawing"),e.endDate=r(d);var i=function(){e.endDate=f,a.$emit("reLayout")};h.askForUpdateConfirmation(e).then(function(b){e.skipNotificationEmail=b.skipNotificationEmail;var c={};b.recurringType&&(c.recurringType=b.recurringType),e.save(c).then(function(){a.$emit("onUpdate")},i)},i),g.disable(),a.$emit("reLayout"),t()}})},t=function(){m&&m.length&&m.find(".ui-resizable-handle").length&&m.resizable("destroy")};c.on("mouseenter",".occurrence",function(a){if(!o){if(f.hasDialog())return void t();m=$(this);var c=m.attr("data-id");n=_.findIndex(b.occurrences.column,function(a){return a.id===c}),0>n||_.contains(d.get(),b.occurrences.column[n].id)||b.occurrences.column[n].editable&&!b.occurrences.column[n].isDrawing&&b.occurrences.column[n].startDate.getTime()!==b.occurrences.column[n].endDate.getTime()&&s()}}),c.on("mouseleave",".occurrence",function(){o||t()}),b.$on("$destroy",function(){t(),c.off("mouseenter",".occurrence"),c.off("mouseleave",".occurrence")})}}}]),angular.module("App").directive("srUiFloatLabel",["$timeout",function(a){var b=[];return b.push('<label class="float-label" data-ng-class="{\'float-label--autohide\': autoHide}">'),b.push('<span class="float-label__label">{{label}}</span>'),b.push("<div data-ng-transclude></div>"),b.push("</label>"),{restrict:"E",transclude:!0,replace:!0,template:b.join(""),scope:{label:"@",autoHide:"=?"},link:function(b,c,d,e){var f=function(){return c.find("select").length?c.find("select"):c.find('[type="text"]').length?c.find('[type="text"]'):c.find('[type="email"]').length?c.find('[type="email"]'):c.find('[type="password"]').length?c.find('[type="password"]'):c.find("textarea").length?c.find("textarea"):c.find('[type="checkbox"]').length?c.find('[type="checkbox"]'):c.find(".js-float-label-input").length?c.find(".js-float-label-input"):!1},g=(c.find(".float-label__label"),{}),h="float-label--on",i="float-label--show",j=!1;g.initTimeout=null,g.checkVal=function(){""!==j.val()?c.addClass(i):c.removeClass(i)},g.initEvents=function(){j.on("keyup",function(){g.checkVal()}).on("focus",function(){c.addClass(h)}).on("blur",function(){c.removeClass(h)})},g.init=function(){g.initTimeout=a(function(){j=f(),j&&(g.initEvents(),j.is(":focus")&&(g.checkVal(),c.addClass(h)))},100)},g.init(),b.$on("$destroy",function(){a.cancel(g.initTimeout),j&&(j.off("keyup"),j.off("focus"),j.off("blur"))})}}}]),angular.module("App").directive("srUiFacebookCover",["SRPeopleService",function(a){var b=[];return b.push('<div class="cover" data-ng-show="style" data-ng-style="style">'),b.push("</div>"),{template:b.join(""),restrict:"E",replace:!0,scope:{imageToDownload:"=?",imageSizes:"=?"},controller:["$scope",function(b){b.style=null,a.getImageByUrl(b.imageToDownload).then(function(a){b.style={},a&&(b.style["background-image"]="url("+a+")"),b.imageSizes.height&&(b.style.height=b.imageSizes.height),b.imageSizes.width&&(b.style.width=b.imageSizes.width),b.imageSizes.offsetY&&(b.style["background-position"]="50% "+b.imageSizes.offsetY+"%")})}]}}]),angular.module("App").directive("srUiMailto",["SRLocationService",function(a){return{scope:!1,link:function(b,c,d){b.$eval(d.srUiMailto)&&!b.$eval(d.srUiMailto).disabled&&(c.on("click",function(c){c.preventDefault();var e=b.$eval(d.srUiMailto),f=[];return f.push("mailto:"+e.to+"?"),e.subject&&f.push("&subject="+e.subject),e.body?f.push("&body="+e.body):f.push("&body=(via Sunrise)"),CONFIG.isChromeApp?a.openTo(f.join("")):a.gotoURL(f.join("")),!1}),b.$on("$destroy",function(){c.off()}))}}}]),angular.module("App").directive("srUiOpenUrl",["SRLocationService",function(a){return{scope:!1,link:function(b,c,d){b.$eval(d.srUiOpenUrl)&&(c.on("click",function(c){return c.preventDefault(),a.openTo(b.$eval(d.srUiOpenUrl)),!1}),b.$on("$destroy",function(){c.off()}))}}}]),angular.module("App").directive("srUiDraggable",["$document",function(a){return{scope:!1,link:function(b,c,d){function e(a){g=a.pageY-i,f=a.pageX-h,c.css({top:g+"px",left:f+"px"})}var f,g,h=0,i=0;c.on("mousedown",".js-draggable-handler",function(b){if("A"!==b.target.tagName&&"BUTTON"!==b.target.tagName){b.preventDefault();var d=$(this);d.addClass("js-draggable-handler--moving"),f=c.offset().left||0,g=c.offset().top||0,h=b.pageX-f,i=b.pageY-g,a.on("mousemove",e),a.one("mouseup",function(){a.off("mousemove",e),d.removeClass("js-draggable-handler--moving")})}}),b.$on("$destroy",function(){c.off("mousedown","**")})}}}]),angular.module("App").directive("srUiRuleToText",["SRI18nService",function(a){return{template:"<span>{{ ruleText | SRStringFilter_titleCase }}</span>",replace:!0,restrict:"E",scope:{recurrence:"="},link:function(a,b,c,d){a.$watch("recurrence",function(b,c){b!==c&&(d.ruleOptions=d.getRuleOptions(b),a.ruleText=d.getRuleToText())},!0)},controller:["$scope",function(b){var c=this;this.getRuleToText=function(){var b=a.getMessage("NO_REPEAT");if(c.ruleOptions){var d=new RRule(c.ruleOptions);b=d.toText()}return b},this.getRuleOptions=function(a){var b=null;if(a&&a.rules){var c=_.find(a.rules,function(a){return a.contains("RRULE")}),d=c.replace("RRULE:","");b=RRule.parseString(d)}return b},this.ruleOptions=this.getRuleOptions(b.recurrence),b.ruleText=this.getRuleToText()}]}}]),angular.module("App").directive("srUiSlideToggle",function(){return{link:function(a,b,c){a.$eval(c.srUiSlideToggle)||b.hide(),a.$watch(c.srUiSlideToggle,function(a,c){a!==c&&b.slideToggle({duration:200,easing:"easeInOutCubic"})},!0)}}}),angular.module("App").directive("srUiClosePopover",["SRLayerService","$document","$timeout",function(a,b,c){function d(a,b){for(var c=b.parentNode;null!=c;){if(c==a)return!0;c=c.parentNode}return!1}function e(a){a=a||window.event;var b=a.keyCode||a.which;return b}return{restrict:"A",link:function(f,g,h,i){var j=g[0],k=function(a){return 27===e(a)?(a.stopPropagation(),a.preventDefault(),f.$apply(function(){f.srUiClosePopover()}),!1):void 0},l=function(a){var b=a.target;b.classList.contains("js-close-popover-disabled")||j.isEqualNode(b)||d(j,b)||!_.isFunction(f.srUiClosePopover)||f.$apply(function(){f.srUiClosePopover()})};a.add(g,{focusOnRemove:!0}),b.on("mousedown.srUiClosePopover",l),b.on("keydown.srUiClosePopover",k),f.$on("$destroy",function(){b.off("mousedown.srUiClosePopover",l),b.off("keydown.srUiClosePopover",k),c(function(){a.remove()})})}}}]),angular.module("App").directive("srUiEnter",function(){function a(a){a=a||window.event;var b=a.keyCode||a.which;return b}return{restrict:"A",link:function(b,c,d){var e=function(c){return 13===a(c)?(c.stopPropagation(),c.preventDefault(),b.$apply(function(){b.$eval(d.srUiEnter)}),!1):void 0};c.on("keydown",e),b.$on("$destroy",function(){c.off("keydown",e)})}}}),angular.module("App").directive("srUiDateDuration",["SRSettingsService","SRDateService","$filter",function(a,b,c){return{template:'<div class="media date-duration" data-ng-bind-html="html"></div>',restrict:"E",replace:!0,scope:{hasIcon:"=?",timezone:"=?",allDay:"=",start:"=",end:"=",durationDays:"=?",liveUpdate:"=?",dateFormat:"=?",stickTimeToDate:"=?"},link:function(a,b,c,d){a.liveUpdate&&a.$watch("start + end + allDay + timezone",function(a,b){a!==b&&d.init()},!0)},controller:["$scope",function(a){var d=$appTemplates["date-duration"];this.init=function(){var e={},f={},g=a.dateFormat||"fullDate";if(f.duration=a.end.getTime()-a.start.getTime(),f.isSame=0===f.duration,f.start=function(){return a.allDay?b.allDayUtcToMidnight(a.start):a.start}(),f.end=function(){if(!a.allDay)return a.end;var c=b.add("day",a.end,-1);return b.allDayUtcToMidnight(c)}(),e.hasIcon=a.hasIcon,e.allDay=a.allDay,e.durationDays=a.durationDays,e.stickTimeToDate=a.stickTimeToDate,a.allDay)e.start=c("date")(f.start,g),e.end=c("date")(f.end,g);else{var h=b.dateToCurrentTimezone(f.start),i=b.dateToCurrentTimezone(f.end);e.start=c("date")(h,g),e.end=c("date")(i,g),e.isSameDay=b.isSameDay(h,i),e.startTime=c("SRDateFilter_timeFormat")(f.start),e.endTime=c("SRDateFilter_timeFormat")(f.end)}a.html=d(e)},this.init()}]}}]),angular.module("App").directive("srUiTimeDuration",["SRSettingsService","SRDateService","$filter","SRI18nService",function(a,b,c,d){return{template:'<div class="media media--10 time-duration" data-ng-bind-html="html"></div>',restrict:"E",replace:!0,scope:{hasIcon:"=?",timezone:"=?",allDay:"=",start:"=",end:"=",hideDuration:"=?",isRecurring:"=?",durationDays:"=?",showLocalTimezone:"=?",liveUpdate:"=?",hideEnd:"=?"},link:function(a,b,c,d){a.liveUpdate&&a.$watch("start + end + allDay + timezone",function(a,b){a!==b&&d.init()},!0)},controller:["$scope",function(e){var f=$appTemplates["time-duration"];this.init=function(){var g,h={start:e.start,end:e.allDay?b.add("day",e.end,-1):e.end,duration:e.end.getTime()-e.start.getTime(),isSame:e.start.getTime()===e.end.getTime(),hasTimezone:!1};if(!e.allDay){var i=b.dateToCurrentTimezone(e.start),j=b.dateToCurrentTimezone(e.end);if(h.isSameDay=b.isSameDay(i,j),e.timezone&&e.timezone!==a.get("currentTimezone")){var k=b.getDifferrenceBetweenTimezone(e.timezone,a.get("currentTimezone"),h.start);k&&(h.hasTimezone=!0,g={start:new Date(i.getTime()+k),end:new Date(j.getTime()+k)})}}var l={};l.hasIcon=e.hasIcon,l.iconCssClass=function(){var a=["icon"];return e.isRecurring?a.push("icon_clock-recurring"):a.push("icon_clock"),a.join(" ")}(),l.allDay=e.allDay,l.allDayEventLabel=d.getMessage("ALL_DAY_EVENT"),l.durationDays=e.durationDays,e.allDay||(l.isSameDay=h.isSameDay,l.startTime=c("SRDateFilter_timeFormat")(h.start),l.endTime=c("SRDateFilter_timeFormat")(h.end),l.isSame=h.isSame,l.hasTimezone=h.hasTimezone,l.hasTimezone&&(l.startTimeDiff=c("SRDateFilter_timeFormat")(g.start,!1,!0),l.endTimeDiff=c("SRDateFilter_timeFormat")(g.end,!1,!0),l.timezone=c("SRDateFilter_zoneAbbr")(g.start,e.timezone)),e.showLocalTimezone&&e.timezone&&h.isSameDay&&(l.localTimezone=c("SRDateFilter_zoneAbbr")(h.start,a.get("currentTimezone")))),e.hideDuration||(l.duration=c("SRDateFilter_duration")(h.duration)),e.hideEnd&&(l.hideEnd=!0),e.html=f(l)},this.init()}]}}]),angular.module("App").directive("srUiSelect",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){var e=function(b){a(function(){this.select()}.bind(this))};c.on("focus",e),b.$on("$destroy",function(){c.off("focus",e)})}}}]),angular.module("App").directive("srUiMap",function(){return{template:'<iframe tabindex="-1" data-ng-src="{{url | SRHelperFilter_trustAsResourceUrl}}" data-ng-style="{\'width\': width, \'height\': height}"></iframe>',restrict:"E",replace:!0,controller:"SRUiMapCtrl",scope:{url:"=?",width:"=?",height:"=?",geometry:"=?",address:"=?"},link:function(a,b,c,d){a.$watch("geometry",function(b,c){b!==c&&(a.url=d.getUrlFromGeometry(a.geometry,a.address))},!0)}}}),angular.module("App").directive("srUiSpinner",function(){return{templateUrl:CONFIG.preparePartialTemplateUrl("spinner"),restrict:"E",scope:{customOptions:"=?"},controller:["$scope",function(a){var b=180,c=100,d=26,e={circle:{strokeColor:"#616161",strokeWidth:"6px",strokeDasharray:b,strokeDashoffset:1.5*b,radius:c/2-3-d/2},width:"18px",height:"18px"};a.options=function(){var b=_.merge(e,a.customOptions||{});return b.circle.radius=c/2-parseInt(b.circle.strokeWidth,10)/2-d/2,b}()}]}}),angular.module("App").directive("srUiFormCollapsedInputs",function(){return{restrict:"A",link:function(a,b){var c=function(a){var b=$(a.target).parents("li");b.length&&b.addClass("active")},d=function(a){var b=$(a.target).parents("li");b.length&&b.removeClass("active")};b.on("focus","input",c),b.on("blur","input",d),a.$on("$destroy",function(){b.off("focus","input"),b.off("blur","input")})}}}),angular.module("App").directive("srUiScrollbox",["$timeout",function(a){return{restrict:"E",templateUrl:CONFIG.preparePartialTemplateUrl("scrollbox"),transclude:!0,link:function(b,c,d,e){function f(){h?(l=i[0].scrollLeft,m=i[0].scrollWidth,n=i[0].clientWidth):(p=i[0].scrollTop,q=i[0].scrollHeight,r=i[0].clientHeight),j[0].style.opacity=function(){if(h){if(o>=l)return l/o}else if(s>=p)return p/s;return 1}(),k[0].style.opacity=function(){var a=0;return h&&l+n+o>=m?a=(m-(l+n+o))/o:!h&&p+r+s>=q&&(a=(q-(p+r+s))/s),1-Math.abs(a)}(),g=!1}var g=!1,h=d.srUiScrollboxHorizontal,i=c.find("> .scrollbox-wrapper"),j=c.find("> .scrollbox-layer--top"),k=c.find("> .scrollbox-layer--bottom");if(h)var l=i[0].scrollLeft,m=i[0].scrollWidth,n=i[0].clientWidth,o=function(){var a=c.find(".scrollbox-layer");return a.length?a[0].clientWidth:40}();else var p=i[0].scrollTop,q=i[0].scrollHeight,r=i[0].clientHeight,s=function(){var a=c.find(".scrollbox-layer");return a.length?a[0].clientHeight:40}();a(f),i.on("scroll",function(){g||(requestAnimationFrame(f),g=!0)}),b.$on("$destroy",function(){i.off("scroll")})}}}]),angular.module("App").directive("srUiDownloadButton",["SRBrowserService","SRLocationService","SRI18nService",function(a,b,c){return{restrict:"E",templateUrl:CONFIG.preparePartialTemplateUrl("ui-download-button"),scope:{},link:function(d,e,f,g){d.onClick=function(){var c=function(){return a.isMobile.any()?a.isMobile.Android()?CONFIG.mobileUrls.googlePlay:CONFIG.mobileUrls.appStore:CONFIG.prodUrl}();b.gotoURL(c)},d.text=function(){return a.isMobile.Android()?c.getMessage("DOWNLOAD_SUNRISE_FOR","Android"):a.isMobile.iOS()?c.getMessage("DOWNLOAD_SUNRISE_FOR","iOS"):c.getMessage("TRY_SUNRISE_NOW")}()}}}]),angular.module("App").controller("SRUiMapCtrl",["$scope","SROnlineStatusService",function(a,b){this.getUrlFromGeometry=function(a,c){if(a&&a.location&&a.location.lat&&a.location.lng&&b.isOnline()){var d={lat:a.location.lat,lng:a.location.lng};return _.isEmpty(c)||(_.isUndefined(c.state)&&_.isUndefined(c.city)&&_.isUndefined(c.street)?d.zoom=3:_.isUndefined(c.city)&&_.isUndefined(c.street)?d.zoom=6:_.isUndefined(c.street)?d.zoom=10:d.zoom=14),"/map-view.html?lat="+d.lat+"&lng="+d.lng+"&zoom="+d.zoom}},this.init=function(){a.url=this.getUrlFromGeometry(a.geometry,a.address)},this.init()}]),angular.module("App").directive("month",["SRLayoutBuilderService","SRDateService","$rootScope","$timeout","$q","$window","SRCurrentService","SRPendingEventService","SRFreezeViewService","SRUserService","SRCalendarModel","SROccurrenceModel",function(a,b,c,d,e,f,g,h,i,j,k,l){return{templateUrl:CONFIG.preparePartialTemplateUrl("month"),restrict:"E",replace:!0,scope:!1,link:function(a,b,d){var e=angular.element(f),g=$(".daynames"),h=g.height();a.setAvailableRows=function(){var c=b.height()-h,d=_.size(a.dates),e=c/d;a.availableRows=Math.floor((e-(CONFIG.eventRowMinHeight+CONFIG.eventRowMinHeight/2))/CONFIG.eventRowMinHeight)},a.setAvailableRows(),a.$watch("currentDate._date",function(b,c){b!==c&&(a.start=b,a.occurrences=[],a.updated=Date.now(),a.init(),a.setAvailableRows())},!0);var i=c.$on("firstDay",function(b,c){b!==c&&a.init()},!0),j=c.$on("onUpdate",function(b){a.init()}),k=c.$on("reLayout",function(b){a.init({noFetch:!0})});e.on("resize.getAvailableRows",_.debounce(function(){a.setAvailableRows(),a.$digest()},300)),a.$on("$destroy",function(){i(),j(),k(),e.off("resize.getAvailableRows")})},controller:["$scope",function(d){var f=this,m=[];d.calendars={},d.currentDate=g,d.start=d.currentDate._date,this.loadOccurrences=function(c,e){var f=d.dates;if(c&&_.isNumber(c)){var g=moment(f[0][0]).add(c,"month").toDate();f=a.getMonth(g)}var h=_.size(f),i=function(){var a=b.add("day",b.getStartOfTheDay(f[0][0]),-1);return a=b.dateToCurrentTimezone(a,{inverse:!0})}(),j=function(){var a=b.add("day",b.getEndOfTheDay(f[h-1][6]),1);return a=b.dateToCurrentTimezone(a,{inverse:!0})}();if(e){var k=[];_.each(m,function(a){a.timeMin.getTime()!==i.getTime()&&a.timeMax.getTime()!==j.getTime()?a.promise.cancel():k.push(a)}),m=k}var n=l.getFilteredBetweenDates(i,j,{useCache:!0});return m.push({promise:n,timeMin:i,timeMax:j}),n},this.sortOccurrences=function(){var a=[];a=_.filter(d.notSortedOccurrences,function(a){return"cancelled"!==a.status||!a.hidden}),h.get()&&a.push(h.get()),d.occurrences=a,d.updated=Date.now()},d.init=function(b){if(!i.isEnabled())if(b=b||{},b.noFetch)f.sortOccurrences();else{if(d.dates=a.getMonth(d.start),d.rowsLength=_.size(d.dates),d.notSortedOccurrences=[],!j.isLogged())return;e.all([f.loadOccurrences(null,!0),k.getAll({useCache:!0})]).then(function(a){d.notSortedOccurrences=a[0],d.calendars=_.zipObject(_.pluck(a[1],"id"),a[1]),f.sortOccurrences(),c.$emit("didLoadMonth"),_.each([-1,1],function(a){f.loadOccurrences(a,!1)})})}},d.init()}]}}]),angular.module("App").directive("monthRow",["$sce","SRDateService","$filter","SRCacheService",function(a,b,c,d){return{template:'<div class="month__row__days" data-ng-bind-html="html"></div>',restrict:"E",replace:!0,scope:{days:"=",start:"="},link:function(a,b,c,d){a.$watchCollection("days",function(b,c){b!==c&&a.init()})},controller:["$scope",function(e){var f={},g=$appTemplates["month-row"];f.getCssClass=function(a){var c=[];return c.push("month__day"),b.isSameMonth(a,e.start)||c.push("month__day--reverse"),b.isToday(a)&&c.push("month__day--today"),c.join(" ")},e.init=function(){var b=_.reduce(e.days,function(a,b,e){var h={cssClass:f.getCssClass(b)},i=b.getTime(),j=d.get("attrDate",i),k=d.get("SRDateFilter_calendarMonthDay",i);return j?h.attrDate=j:(h.attrDate=c("date")(b,"MM/dd/yyyy"),d.put("attrDate",i,h.attrDate)),k?h.label=k:(h.label=c("SRDateFilter_calendarMonthDay")(b),d.put("SRDateFilter_calendarMonthDay",i,h.label)),a.push(g(h)),a},[]).join("");e.html=a.trustAsHtml(b)},e.init()}]}}]),angular.module("App").directive("rowEvents",["$rootScope","SRDialogService","SRLayoutBuilderService","SRDateService","$filter","SRShowMoreService","$q","SRCacheService","SRFocusingEventService","SRIconicService","SRBrowserService","$timeout","SROnlineStatusService","SRCurrentMeetService","SRSyncingEventService","SRFreezeViewService","SROccurrenceColorService","SRI18nService","SROccurrenceModel",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return{template:"<div></div>",restrict:"E",replace:!0,scope:{occurrences:"=",dates:"=",isWeekView:"@?",isClone:"@?",availableRows:"=?",calendars:"=?",updated:"="},link:function(a,c,d,e){var h=function(a,c,d){if(!d)return!1;b.open({event:a,scope:{date:d,birthdays:!0
},element:c})},i=function(a,b){if(!b)return!1;f.open({event:a,date:b})};c.on("click",".js-badge-showmore",_.throttle(function(a){var b=$(this);i(a,moment(b.attr("data-date"),"MM/DD/YYYY").toDate())},300)),c.on("click",".js-badge-birthdays",_.throttle(function(a){var b=$(this);h(a,b,moment(b.attr("data-date"),"MM/DD/YYYY").toDate())},300)),a.$watch("availableRows",function(b,c){b!==c&&a.init()}),a.$watch("updated",function(b,c){b!==c&&a.init()}),a.getIcons=function(){function a(a,b){var c=g.defer();return j.getIcon(b).then(function(b){b&&(a.attr("src",b).removeClass("iconic__img--nocache"),c.resolve(!0))}),c.promise}var b=c.find(".iconic");b.each(function(b,c){var d=$(c),e=$(c).find(".iconic__img--nocache"),f=[];e.length&&(e.each(function(){f.push(a($(this),this.getAttribute("data-url")))}),g.all(f).then(function(){d.find(".iconic__circle").remove()}))})},a.$on("$destroy",function(){c.off("click",".occurrence"),c.off("click",".js-badge-showmore"),c.off("click",".js-badge-birthdays")})},controller:["$scope","$element",function(b,f){var k={};k.init=function(){k.occurrencesByKeys=_.zipObject(_.pluck(b.occurrences,"id"),[]),k.periods=k.getPeriods(),k.periodsOccurrences=k.getPeriodsOccurrences(),k.periodsBirthdays=k.getPeriodsBirthdays(),k.occurrencesPositions=k.getPositions()},k.getPositions=function(){function a(a){s.sortOccurrencesByStartDate(k.periodsOccurrences[a]),b[a]=c.getRowSizes(k.periodsOccurrences[a],{period:t.dates[a]})}for(var b={},d=_.size(k.periods),e=d-1;e>=0;e--)k.periodsOccurrences[e]&&k.periodsOccurrences[e].length>0&&a(e);return b},k.getPeriodsBirthdays=function(){var a={},c=_.filter(b.occurrences,function(a){return a.type&&a.type.endsWith(":birthday")});return _(t.dates).each(function(b,d){d=parseInt(d,10),a[d]={},_(b).each(function(b,e){a[d][e]=[],a[d][e]=_.filter(c,function(a){return b.getTime()-60*b.getTimezoneOffset()*1e3===a.startDate.getTime()})})}),a},k.getPeriodsOccurrences=function(){var a={};return _(b.occurrences).each(function(b){"cancelled"!==b.status&&(b.type&&b.type.endsWith(":birthday")||_(k.periods).each(function(c,e){function f(){a[e]||(a[e]=[]),k.occurrencesByKeys[b.id]||(k.occurrencesByKeys[b.id]=[]),k.occurrencesByKeys[b.id].push(parseInt(e,10)),a[e].push(b)}var g=function(){return b.allDay?d.allDayUtcToMidnight(b.startDate):d.dateToCurrentTimezone(b.startDate)}(),h=function(){return b.allDay?d.allDayUtcToMidnight(b.endDate):d.dateToCurrentTimezone(b.endDate)}();return d.isRangeContains(g,h,c.start,c.end)?1===b.durationDays?(d.isBefore(g,c.start)||f(),!1):void f():void 0}))}),a},k.getPeriods=function(){var a=b.dates;return b.isWeekView&&(a={0:b.dates}),_.reduce(a,function(a,b,c){var e=d.getStartOfTheDay(b[0]),f=d.getEndOfTheDay(b[6]);return a[c]={start:e,end:f},a},{})};var t={};t.html=[],t.dates=null,t.isRendering=!1,t.now=null,t.done=function(a){f[0].innerHTML=t.html.join(""),t.isRendering=!1,l(function(){b.getIcons()})},t.setDates=function(){var a=angular.copy(b.dates);return b.isWeekView&&(a={0:angular.copy(b.dates)}),a},t.getNumbmerOfRowsPerCells=function(){var d={};return _(t.dates).each(function(a,b){d[b]=_.transform(a,function(a,d,e){return a[e]=c.getRowsPerCell(k.occurrencesPositions[b],e),a})}),b.isWeekView&&(a.allDayRows=_.max(d[0])),d},t.appendBadges=function(){var a=$appTemplates["badge-month"],c=[];c.push('<div class="row-events__layer row-events__layer--badges">');var d=_.reduce(t.dates,function(c,d,f){var g=[];return f=parseInt(f,10),g.push('<div class="row-events__row--'+(f+1)+'">'),g.push('<ul class="badges-month">'),_(d).each(function(c,d){d=parseInt(d,10);var i={day:d};if(k.periodsBirthdays[f][d].length>0||b.allDayRowsPerCells[f][d]>b.availableRows){var j=function(){var a=c.getTime(),b=h.get("attrDate",a);if(b)return b;var d=e("date")(c,"MM/dd/yyyy");return h.put("attrDate",a,d),d}();if(b.allDayRowsPerCells[f][d]>b.availableRows){i.more={},i.more.attrDate=j,i.more.cssClass="badge-showmore js-badge-showmore";var l=(b.availableRows+1)*CONFIG.eventRowMinHeight;i.more.attrStyle="top: "+l+"px;",i.more.count=r.getMessage("SHOW_MORE",b.allDayRowsPerCells[f][d]-b.availableRows)}k.periodsBirthdays[f][d].length>0&&(i.birthdays={},i.birthdays.cssClass="badge-month badge-month--birthdays js-badge-birthdays",i.birthdays.attrDate=j,i.birthdays.count=k.periodsBirthdays[f][d].length)}g.push(a(i))}),g.push(" </ul>"),g.push("</div>"),c.push(g.join("")),c},[]).join("");return c=c.concat(d),c.push("</div>"),c.join("")},t.getInvisibleEventsCssClass=function(a,b){var c=[];return c.push("occurrence"),c.push("occurrence--invisible"),c.push("col-start"+(b.left+1)),c.push("col-length"+b.width),c.push("col-top1"),c.join(" ")},t.getCssClass=function(a,b){var c=[];return c.push("occurrence"),c.push("occurrence--row"),c.push("col-start"+(b.left+1)),c.push("col-length"+b.width),c.push("col-top"+(b.start+1)),a.userRsvpStatus&&c.push("occurrence--"+a.userRsvpStatus),a.allDay||1!==a.durationDays||c.push("occurrence--row--timed"),"foursquare:checkin"===a.type&&c.push("occurrence--foursquare"),"facebook:event"===a.type&&c.push("occurrence--facebook"),d.dateToCurrentTimezone(a.endDate)<t.now&&i.get()!==a.id&&c.push("occurrence--passed"),i.get()===a.id&&c.push("occurrence--focus"),"sunrise:meet"===a.type&&c.push("occurrence--meet"),n.get()&&n.get().id!==a.meetId&&c.push("occurrence--disabled"),c.join(" ")},t.getStyles=function(a,b,c){var d=[],e=i.get()===a.id,f=(!(a.allDay||a.durationDays>1||i.get()===a.id),e?b.background.focus:b.background["default"]),g=e?b.border.focus:b.border["default"],h=e?b.text.focus:b.text["default"];return d.push("background-color: "+f+";"),d.push("border-left-color: "+g+";"),d.push("color: "+h+';"'),d.join(" ")},t.buildElement=function(a){var c=g.defer(),f=$appTemplates["row-events"],l=[],p=function(){return b.calendars[a.calendarId]&&b.calendars[a.calendarId].color?b.calendars[a.calendarId]:{color:"fa565a"}}();p=p&&!_.isEmpty(p)&&p.color?p:{color:"fa565a"};var s=function(){var b={},c=function(){return a.allDay?d.allDayUtcToMidnight(a.startDate):a.startDate}(),f=function(){return a.allDay?d.allDayUtcToMidnight(a.endDate):a.endDate}();return b.editable=function(){return _.contains(o.get(),a.id)?!1:a.editable}(),b.editable?(b.start=function(){var a=c.getTime(),b=h.get("attrDate",a);if(b)return b;var d=e("date")(c,"MM/dd/yyyy");return h.put("attrDate",a,d),d}(),b.duration=function(){var b=[c.getTime(),f.getTime()].join(":"),e=h.get("attrDuration",b);if(e)return e;var g=d.daysBetween(c,f)+1;return a.allDay?g-=1:f.getTime()-c.getTime()<=86e6&&(g=1),h.put("attrDuration",b,g),g}(),b):b}();return l.push('<div class="row-events__layer js-draggable-handler" data-id="'+a.id+'" data-editable="'+s.editable+'" data-duration="'+s.duration+'" data-start="'+s.start+'">'),_(k.occurrencesByKeys[a.id]).each(function(c){var g=k.occurrencesPositions[c][a.id],h={},o=function(){return b.isWeekView?!0:b.isClone?!0:g&&g.start<b.availableRows?!0:!1}();h.occurrence=a,o?(h.color=function(){return a.icon&&a.icon.baseColor?a.icon.baseColor:p.color}(),h.colors=q.getOccurrenceColors({isPast:d.dateToCurrentTimezone(a.enDate)<t.now,baseColor:h.color,calendarColor:p.color,noBackground:!(a.allDay||a.durationDays>1||i.get()===a.id)}),h.attrColors=JSON.stringify(h.colors),h.rowCssClass="row-events__row--"+(c+1),h.cssClass=t.getCssClass(a,g),h.cssStyle=t.getStyles(a,h.colors,p.color),h.isFoursquare="foursquare:checkin"===a.type,h.notReplied="notReplied"===a.userRsvpStatus,h.title=h.isFoursquare&&a.title?e("SRStringFilter_foursquareTitle")(a.title):a.title,h.start=function(){return a.allDay||1!==a.durationDays?!1:e("SRDateFilter_timeFormat")(a.startDate,!0)}(),h.end=function(){if(!a.allDay&&a.durationDays>1){var b=function(){var a=_.last(t.dates[c])||t.dates[t.dates.length-1];return d.getEndOfTheDay(a)}();if(b>=d.dateToCurrentTimezone(a.endDate))return e("SRDateFilter_timeFormat")(a.endDate)}return!1}(),h.hasIconic=function(){return a.allDay||h.isFoursquare||!a.durationDays||h.notReplied?!1:!0}(),h.iconic=function(){if(!h.hasIconic)return!1;var b={},c=angular.copy(h.colors.iconic);return b.colors={"default":c["default"].replace("#",""),focus:c.focus.replace("#","")},b.color=function(){var c=b.colors["default"];return i.get()===a.id&&(c=b.colors.focus),c}(),b.url=function(){var c=a.place&&a.place.name?a.place.name:"",d=a.type,e=function(){return a.icon&&a.icon.overlay?a.icon.overlay:[a.title,c].join(":")}();"facebook:event"===a.type&&(d="foo",e="");var f=j.getUrl(d,b.colors["default"],e,32,!1),g=j.getUrl(d,b.colors.focus,e,32,!1);return{"default":f,focus:g}}(),b.cache=function(){return{"default":j.getCachedVersion(b.url["default"]),focus:j.getCachedVersion(b.url.focus)}}(),b.offline=function(){return!m.isOnline()}(),b}(),h.isDisabled=n.get()&&n.get().id!==a.meetId,h.ariaLabel=function(){var b=[],c=function(){return a.allDay?d.allDayUtcToMidnight(a.startDate):d.dateToCurrentTimezone(a.startDate)}(),f=function(){return a.allDay?d.allDayUtcToMidnight(a.endDate):d.dateToCurrentTimezone(a.endDate)}();if(a.allDay&&1===a.durationDays)b.push(e("date")(c,"mediumDate"));else{var g={start:a.allDay?e("date")(c,"mediumDate"):e("date")(c,"medium"),end:a.allDay?e("date")(f,"mediumDate"):e("date")(f,"medium")};b.push(r.getMessage("X_TO_X",[g.start,g.end]))}return b.push(h.title),_.getPath(a,"place.name")&&b.push(_.getPath(a,"place.name")),b.join(", ")}()):(h.invisible=!0,h.rowCssClass="row-events__row--"+(c+1),h.cssClass=t.getInvisibleEventsCssClass(a,g)),l.push(f(h))}),l.push("</div>"),c.resolve(l.join("")),c.promise},b.init=function(){if(!p.isEnabled()){if(t.isRendering)return!1;if(t.isRendering=!0,t.dates=t.setDates(),t.html=[],b.occurrences&&b.occurrences.length<=0)return a.allDayRows=0,b.allDayRowsPerCells={},t.done(),!1;t.now=d.dateToCurrentTimezone(),b.isClone||(a.allDayRows=0,b.allDayRowsPerCells={}),k.init(),k.occurrencesPositions&&!b.isClone&&(b.allDayRowsPerCells=t.getNumbmerOfRowsPerCells()),k.occurrencesPositions&&b.occurrences&&b.occurrences.length>0&&!b.isClone&&(b.isWeekView||t.html.push(t.appendBadges()));var c=[];_(b.occurrences).each(function(a){k.occurrencesByKeys[a.id]&&c.push(t.buildElement(a))}),g.all(c).then(function(a){t.html.push(a.join("")),t.done()})}},b.init()}]}}]),angular.module("App").directive("showMore",["$rootScope","$document","SRDateService","$q","SRCalendarModel","SRDialogService","$window","$timeout","SRKeyboardManagerService","SRColorService","SRFocusingEventService","SRLayerService","SROccurrenceColorService","SROccurrenceModel",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return{restrict:"E",replace:!0,scope:{positions:"=",date:"="},templateUrl:CONFIG.preparePartialTemplateUrl("show-more"),link:function(a,b,c){l.add(b);var d=angular.element(g),e=!0;a.onClickOcccurrence=function(c,d){l.remove(),e=!1;$(c.target),f.open({event:c,scope:{occurrence:d},element:b,showmore:!0});a.close()},h(function(){d.on("click.closeShowMore",function(b){var c=$(b.target);c.hasClass("show-more")||c.parents(".show-more").length>=1||(d.off("click.closeShowMore"),a.close())}),d.on("resize.closeShowMore",function(){d.off("resize.closeShowMore"),a.close()})}),i.bind("escape",function(){a.close()}),a.close=function(){b.remove(),a.$destroy()},a.$on("$destroy",function(){e&&l.remove(),i.unbind("escape"),d.off("click.closeShowMore"),d.off("resize.closeShowMore")})},controller:["$scope",function(a){var b=this;a.calendars={},this.getOccurrences=function(){var b=d.defer(),e=function(){var b=c.getStartOfTheDay(a.date);return b=c.dateToCurrentTimezone(b,{inverse:!0})}(),f=function(){var b=c.getEndOfTheDay(a.date);return b=c.dateToCurrentTimezone(b,{inverse:!0})}();return n.getFilteredBetweenDates(e,f,{useCache:!0}).then(function(a){var d=_.filter(a,function(a){if("cancelled"===a.status)return!1;if(a.type&&a.type.endsWith(":birthday"))return!1;if(!a.allDay&&1===a.durationDays){var b=function(){return a.allDay?c.allDayUtcToMidnight(a.startDate):c.dateToCurrentTimezone(a.startDate)}();if(c.isBefore(b,e))return!1}return!0});n.sortOccurrencesByStartDate(d),b.resolve(d)}),b.promise},this.getCalendars=function(){var a=d.defer();return e.getAll({useCache:!0}).then(function(b){b=_.zipObject(_.pluck(b,"id"),b),a.resolve(b)}),a.promise},this.getColors=function(a,b){var d={},e=Date.now();return _.each(a,function(a){var f=a.id,g=a.calendarId,h=function(){return a.icon&&a.icon.baseColor?a.icon.baseColor:b[g].color}();d[f]=m.getOccurrenceColors({isPast:c.dateToCurrentTimezone(a.endDate)<e,baseColor:h,calendarColor:b[g].color,noBackground:!(a.allDay||a.durationDays>1)})}),d},b.getCalendars().then(function(c){a.calendars=c,b.getOccurrences().then(function(c){a.occurrences=c,a.colors=b.getColors(a.occurrences,a.calendars)})})}]}}]),angular.module("App").directive("srScrollable",["SRCurrentService","SRFreezeViewService","SRDialogService","$rootScope","SRBrowserService","SRLayerService","SRWeekStore",function(a,b,c,d,e,f,g){var h=800,i=function(a){var b=Math.abs(a.deltaY)>Math.abs(a.deltaX)?a.deltaY:a.deltaX;return b>=0?"up":"down"},j=function(a){return{deltaX:a.deltaX?a.deltaX:0,deltaY:a.deltaY?a.deltaY:0}},k=function(a){return Math.abs(Math.abs(a.deltaY)>Math.abs(a.deltaX)?a.deltaY:a.deltaX)};return{restrict:"A",link:function(c,d,l,m){var n,o=e.getMouseWheelEvent(),p=function(d){if(!(0!==f.get()||b.isEnabled()||"week"===a.getCurrentLocation()&&g.isInteracting())&&d.originalEvent){var e=j(d.originalEvent),l=i(e),m=k(e),o=d.timeStamp;"week"===a.getCurrentLocation()&&Math.abs(e.deltaY)>=Math.abs(e.deltaX)||(d.preventDefault(),(!n||o-n>h)&&m>10&&(d.stopPropagation(),n=o,c.$apply(function(){"down"===l?a.navigation.prev():a.navigation.next()})))}};e.isIE()||(d.on(o,p),c.$on("$destroy",function(){d.off(o,p)}))}}}]),angular.module("App").directive("onMouseEvents",["$rootScope","$document","SRFocusingEventService","SRDialogService","SRCurrentMeetService","SRFreezeViewService","SRCurrentService","$q","$filter","SRDateService","SRLocationService","SROccurrenceModel","SROccurrenceEditConfirmService","$position",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=400;return{restrict:"A",link:function(h,k,l,m){var p={};p.row={},p.row.$target=null,p.row.mousemove=function(b){a.isDragging||(p.row.$target.addClass("js-draggable-handler--moving"),a.isDragging=!0,p.row.cellSizes=p.row.getCellSizes(),p.row.startDate=p.row.getCurrentTarget(b),f.enable()),p.row.y=b.pageY-p.row.startY,p.row.x=b.pageX-p.row.startX,p.row.highlightCells(b),p.row.$target.css({top:p.row.y,left:p.row.x})},p.row.highlightCells=function(a){var b=p.row.getCurrentTarget(a);if(p.row.previousEnd!==b.getTime()){p.row.previousEnd=b.getTime();for(var c=j.daysBetween(p.row.startDate,b),d=moment(p.row.eventStart).add(c,"days").toDate(),e=(moment(d).add(p.row.duration-1,"days").toDate(),[]),f=0;f<p.row.duration;f++)e.push(i("date")(moment(d).add(f,"day").toDate(),"MM/dd/yyyy"));p.row.$droppables.each(function(){_.contains(e,this.getAttribute("data-date"))?this.classList.add("active"):this.classList.remove("active")})}},p.row.mouseup=function(c){if(b.off("mousemove.draggableRow",p.row.mousemove),b.off("mouseup.draggableRow",p.row.mouseup),b.off("mouseup.openEvent",q.onMouseup),b.off("mouseup.openMeet",q.onMeetMouseup),a.isDragging){f.disable(),c.stopPropagation(),c.preventDefault(),a.isDragging=!1,q.setBlur();var d=p.row.getCurrentTarget(c);m.update(p.row.occurrenceId,p.row.startDate,d).then(function(){p.row.$droppables.removeClass("active"),a.$emit("onUpdate")},function(){p.row.$droppables.removeClass("active"),p.row.$target.removeClass("js-draggable-handler--moving").css({top:0,left:0})})}},p.row.getCurrentTarget=function(a){var b=k.find(".draggable-wrapper").offset(),c={y:a.clientY-b.top,x:a.clientX-b.left},d={x:Math.floor(c.x/p.row.cellSizes.width),y:Math.floor(c.y/p.row.cellSizes.height)};return"month"===g._location?(d.y=Math.max(0,Math.min(_.size(h.dates)-1,d.y)),d.x=Math.max(0,Math.min(6,d.x)),h.dates[d.y][d.x]):(d.x=Math.max(0,Math.min(6,d.x)),h.dates[d.x])},p.row.getCellSizes=function(){var a=$(".month__day").length?$(".month__day").eq(0):$(".week__allday__day").eq(0);return{width:a.width(),height:a.height()}},p.row.init=function(c){p.row.$target=$(c.currentTarget).parents(".js-draggable-handler"),p.row.$target.length&&"false"!==p.row.$target[0].getAttribute("data-editable")&&1===c.which&&!a.isDragging&&(p.row.$droppables=$(".js-droppable"),p.row.occurrenceId=p.row.$target[0].getAttribute("data-id"),p.row.duration=parseInt(p.row.$target[0].getAttribute("data-duration"),10),p.row.eventStart=moment(p.row.$target[0].getAttribute("data-start"),"MM/DD/YYYY").toDate(),p.row.previousEnd=null,p.row.startX=c.pageX,p.row.startY=c.pageY,b.on("mousemove.draggableRow",p.row.mousemove),b.on("mouseup.draggableRow",p.row.mouseup))};var q={};q.onMousedownId=null,q.lastClick=null,q.onDestroy=function(){k.off("mousedown","**"),k.off("keydown","**")},q.openDialog=function(a,b,c){var e=d.open({event:a,scope:b,element:$(c)});e.$on("$destroy",function(){q.setBlur()})},q.onDblClick=function(a,b){var c=b.getAttribute("data-id")||!1;!c||c.contains("birthday")||b.className.contains("meet")||m.getOccurrenceById(c).then(function(a){var b={scope:{occurrence:angular.copy(a)},edit:!0};a&&a.editable&&("sunrise:meet"===a.type||a.type&&a.type.endsWith(":birthday")||d.appendDirective(b))})},q.onMouseup=function(b){function c(){m.getOccurrenceById(f).then(function(a){q.openDialog(b,{occurrence:angular.copy(a)},e)})}function d(){q.openDialog(b,{date:moment(e.getAttribute("data-date"),"MM/DD/YYYY").toDate(),birthdays:!0},e)}var e=function(){var a=$(b.target);return a.hasClass("occurrence")?a[0]:a.parents(".occurrence").length?a.parents(".occurrence")[0]:!1}(),f=function(){return e?e.getAttribute("data-id"):!1}();return!e||a.isDragging||f!==q.onMousedownId?void q.setBlur():void(e.className.contains("birthday")?d():c())},q.onMeetMouseup=function(b){var c=function(){var a=$(b.target);return a.hasClass("occurrence")?a[0]:a.parents(".occurrence").length?a.parents(".occurrence")[0]:!1}();if(c){var d=c.getAttribute("data-id"),f=c.getAttribute("data-timeslot-id"),g=e.get();return a.hasMeetEdit&&g&&d.startsWith(g.id)?(f=new Date(Number(f)),g.removeTimeSlot(f),void a.$digest()):void 0}},q.onMousedown=function(a){var e=a.currentTarget,f=e.getAttribute("data-id");if(!(d.hasDialog()&&d.hasChanged()||1!==a.which)){if(c.get()&&f===c.get()&&!a.forceEvent){var g=function(){var a=Date.now();return a-q.lastClick<=o}();return void(g&&q.onDblClick(a,e))}a.target.className.contains("ui-resizable-handle")||e.className.contains("occurrence--show-more")||(q.setBlur(),a.skipDragAndDrop||p.row.init(a),q.onMousedownId=f,q.lastClick=a.timeStamp,e.className.contains("meet")?b.one("mouseup.openMeet",q.onMeetMouseup):(q.setFocus(f),b.one("mouseup.openEvent",q.onMouseup)),a.preventDefault())}},q.setBlur=function(){var a=document.querySelectorAll(".occurrence--focus");a&&[].forEach.call(a,function(a,b){var c=JSON.parse(a.getAttribute("data-colors"));a.classList.remove("occurrence--focus"),a.style.backgroundColor=c.background["default"],a.style.color=c.text["default"],a.style.borderColor=c.border["default"],[].forEach.call(a.querySelectorAll(".occurrence__mask"),function(a){a.style.backgroundColor=c.background["default"]}),0===b&&a.focus()}),c.remove()},q.setFocus=function(a){c.set(a);var b=document.querySelectorAll('.occurrence[data-id="'+a+'"]');[].forEach.call(b,function(a,b){var c=a.getAttribute("data-colors");if(c){var d=JSON.parse(c);0===b&&a.focus(),a.classList.add("occurrence--focus"),a.style.backgroundColor=d.background.focus,a.style.color=d.text.focus,a.style.borderColor=d.border.focus,[].forEach.call(a.querySelectorAll(".occurrence__mask"),function(a){a.style.backgroundColor=d.background.focus})}})},q.onKeydown=function(a){if(32===a.keyCode||13===a.keyCode){a.stopPropagation(),a.preventDefault();var b=$(this),c=n.offset(b),d=new jQuery.Event("mousedown");d.clientX=Math.floor(c.left),d.clientY=Math.floor(c.top),d.forceEvent=!0,d.skipDragAndDrop=!0,d.which=1,b.trigger(d);var e=new jQuery.Event("mouseup");return e.clientX=Math.floor(c.left),e.clientY=Math.floor(c.top),b.trigger(e),!1}},k.on("mousedown",".occurrence",q.onMousedown),k.on("keydown",".occurrence",q.onKeydown),h.$on("$destroy",q.onDestroy)},controller:["$scope",function(b){var c=this;this.getOccurrenceById=function(a){var c=h.defer(),d=function(){return"month"===g._location?_.find(b.occurrences,{id:a}):_.find(b.notSortedOccurrences,{id:a})}();return d?c.resolve(d):l.getById(a).then(function(a){c.resolve(a)}),c.promise},this.update=function(b,d,e){var f=h.defer(),g=j.daysBetween(d,e);return g?c.getOccurrenceById(b).then(function(b){var c=b.startDate,d=b.endDate;b.startDate=moment(b.startDate).add(g,"days").toDate(),b.endDate=moment(b.endDate).add(g,"days").toDate(),a.$emit("reLayout");var e=function(){b.startDate=c,b.endDate=d,a.$emit("reLayout"),f.reject()};m.askForUpdateConfirmation(b).then(function(a){b.skipNotificationEmail=a.skipNotificationEmail;var c={};a.recurringType&&(c.recurringType=a.recurringType),b.save(c).then(f.resolve,e)},e)}):f.reject(),f.promise}}]}}]),angular.module("App").directive("drawable",["$document","SRDateService","SRLayerService","SRDialogService","SRCurrentService","$filter","SRPendingEventService","SRFocusingEventService","$rootScope",function(a,b,c,d,e,f,g,h,i){return{restrict:"A",link:function(j,k,l,m){var n=null,o=function(){var a="month"===q.scope?$(".month__day").eq(0):$(".week__allday__day").eq(0);return{width:a.width(),height:a.height()}},p=function(a){var b={y:a.clientY-q.values.wrappereOffset.top,x:a.clientX-q.values.wrappereOffset.left},c={x:Math.floor(b.x/q.values.cellSizes.width),y:Math.floor(b.y/q.values.cellSizes.height)};return"month"===e._location?(c.y=Math.max(0,Math.min(_.size(j.dates)-1,c.y)),c.x=Math.max(0,Math.min(6,c.x)),j.dates[c.y][c.x]):(c.x=Math.max(0,Math.min(6,c.x)),j.dates[c.x])},q={};q.values={},q.scope=k[0].className.contains("month")?"month":"week",q.eventTarget="month"===q.scope?".month__day":".week__allday__day",q.onDestroy=function(){k.off("mousedown.drawable",q.eventTarget),a.off("mousemove.drawable")},q.highlightCells=function(a){q.values.dates.end=p(a);var c=function(){var a=q.values.dates.start,c=q.values.dates.end;return a.getTime()>c.getTime()?[c].concat(b.getRange(c,a)):[a].concat(b.getRange(a,c))}();if(!_.isEqual(q.values.dates.range,c)){q.values.dates.range=c;var d=_.reduce(c,function(a,b){var c=f("date")(b,"MM/dd/yyyy");return a.push(c),a},[]);n.each(function(){_.contains(d,this.getAttribute("data-date"))?this.classList.add("active"):this.classList.remove("active")})}},q.createEvent=function(a,c,e){c=function(){var a=b.getStartOfTheDay(c),d=b.localToUtc(a);return d}(),e=function(){var a=b.getStartOfTheDay(e);a=b.add("day",a,1);var c=b.localToUtc(a);return c}();var f={allDay:!0,start:c,end:e};g.create(f).then(function(){h.set(g.get().id);d.open({event:a,scope:{occurrence:angular.copy(g.get()),isNew:!0},element:$(q.values.originalElement)});i.$emit("reLayout"),n.removeClass("active")})},q.onMousemove=function(a){q.values.y=a.pageY-q.values.startY,q.values.x=a.pageX-q.values.startX,q.highlightCells(a)},q.onMouseup=function(b){a.off("mousemove.drawable");var c=q.values.dates.start,d=q.values.dates.end;c.getTime()>d.getTime()?q.createEvent(b,d,c):q.createEvent(b,c,d)},q.onMousedown=function(b){if(1===b.which&&0===c.get()&&!d.hasDialog()){var e=b.currentTarget;q.values.originalElement=e,q.values.startAttr=e.getAttribute("data-date"),q.values.dates={},q.values.dates.start=moment(q.values.startAttr,"MM/DD/YYYY").toDate(),q.values.dates.end=new Date(q.values.dates.start),q.values.dates.range=[],q.values.startX=b.pageX,q.values.startY=b.pageY,q.values.x=null,q.values.y=null,q.values.cellSizes=o(),q.values.wrappereOffset=k.find(".draggable-wrapper").offset(),n=$(".js-droppable"),a.on("mousemove.drawable",q.onMousemove),a.one("mouseup.drawable",q.onMouseup)}},k.on("mousedown.drawable",q.eventTarget,q.onMousedown),j.$on("$destroy",q.onDestroy)}}}]),angular.module("App").directive("srWeekContainer",["$injector","$rootScope",function(a,b){return{restrict:"A",templateUrl:CONFIG.preparePartialTemplateUrl("week-container"),scope:{animated:"=?"},link:function(c,d,e,f){var g=a.get("SRWeek"),h=function(){React.render(React.createElement(g,null),d.find(".container")[0])},i=function(){React.unmountComponentAtNode(d.find(".container")[0])};c.hasMeetReply=b.hasMeetReply,c.$on("$destroy",function(){c.animated===!0?d.one(CONFIG.transitionEnd,function(){i()}):i()}),h()}}}]),angular.module("App").controller("SRShortcutsModalCtrl",["$scope","$modalInstance","SRI18nService","SRBrowserService",function(a,b,c,d){a.i18n={KEYBOARD_SHORTCUTS:c.getMessage("KEYBOARD_SHORTCUTS"),PREVIOUS_PERIOD:c.getMessage("PREVIOUS_PERIOD"),NEXT_PERIOD:c.getMessage("NEXT_PERIOD"),WEEK_VIEW:c.getMessage("WEEK_VIEW"),MONTH_VIEW:c.getMessage("MONTH_VIEW"),TODAY:c.getMessage("TODAY"),DEL_EVENT:c.getMessage("DEL_EVENT"),TOGGLE_SIDEBAR:c.getMessage("TOGGLE_SIDEBAR"),REFRESH:c.getMessage("REFRESH"),BACK_TO_CAL:c.getMessage("BACK_TO_CAL"),SETTINGS:c.getMessage("SETTINGS"),SEARCH:c.getMessage("SEARCH"),NEW_EVENT:c.getMessage("NEW_EVENT")},a.isMacApp=d.isMacApp(),a.cancel=function(){b.dismiss("cancel")};var e=function(a){a=a||window.event;var b=a.keyCode||a.which;return b},f=function(b){63===e(b)&&a.cancel()};document.addEventListener("keypress",f,!1),a.$on("$destroy",function(){document.removeEventListener("keypress",f)})}]),angular.module("App").controller("SRConnectionFormCtrl",["$scope","$modalInstance","type","SRI18nService",function(a,b,c,d){a.i18n={ICLOUD_MAC_MSG:d.getMessage("ICLOUD_MAC_MSG"),ICLOUD_MAC_MSG_2:d.getMessage("ICLOUD_MAC_MSG_2"),ICLOUD_MAC_CONNECT_TITLE:d.getMessage("ICLOUD_MAC_CONNECT_TITLE")},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("App").controller("SREditPlaceCtrl",["$scope","$modalInstance","$document","favorite","SRPlaceModel","SRI18nService",function(a,b,c,d,e,f){this.onCancelClick=function(){b.dismiss("cancel")},this.onSaveClick=function(){d.place=a.model.newPlace,b.close(d)},a.onCancelClick=this.onCancelClick.bind(this),a.onSaveClick=this.onSaveClick.bind(this),this._init=function(){switch(a.model={newPlace:d.place?d.place.copy():null,favorite:d},d.id){case"home":a.model.floatLabel=f.getMessage("YOUR_HOME_ADDRESS");break;case"work":a.model.floatLabel=f.getMessage("YOUR_WORK_ADDRESS")}},this._init()}]),angular.module("App").factory("SRLayoutBuilderService",["$q","SRDateService","SRSettingsService","SRWeekConstants",function(a,b,c,d){var e={getWeek:function(a){return b.getPeriod(a,7)},getMonth:function(a){var c=b.startOf(a,"week"),d=b.endOf(b.endOf(a,"month"),"week"),e=b.getDaysDuration(c,d);e-=e%7;var f=b.getPeriod(c,e);return _.chunk(f,7)},hexToRgb:function(a){var b=parseInt(a.substring(1),16),c=(16711680&b)>>16,d=(65280&b)>>8,e=255&b;return[c,d,e]},getRowsPerCell:function(a,c){var d=_.filter(a,function(a){return b.isBetween(c,a.left,a.end)}),e=_.max(d,function(a){return a.start});return e.start+1||0},getRows:function(a){var b=_.max(a,function(a){return"row"===a.type?a.start:null});return b&&"row"===b.type?b.start+1:0},getRowSizes:function(a,c){var f={},g=(c.ratio||d.layout.timed.RATIO(),_.reduce(c.period,function(a,c,d){return a[d]={start:b.getStartOfTheDay(c),end:b.getEndOfTheDay(c)},a},{}));return f=_.reduce(a,function(a,c,d){for(var e=0,f=0,h=0;6>=h;h++){var i=function(){return c.allDay?b.allDayUtcToMidnight(c.startDate):b.dateToCurrentTimezone(c.startDate)}(),j=function(){return c.allDay?b.allDayUtcToMidnight(c.endDate):b.dateToCurrentTimezone(c.endDate)}();b.isRangeContains(i,j,g[h].start,g[h].end)&&f++,i>=g[h].start&&i<g[h].end&&(e=h)}1===c.durationDays&&(f=1);var k=f+e,l=e+f;return a[c.id]={start:0,width:f,left:e,end:l,duration:k,type:"row"},a},{}),f=e.getStarts(a,{sizes:f})},getStarts:function(a,b){var c=_.clone(b.sizes)||{},d=function(a,b){return _.find(a,function(a){var d=c[a.id];return d.start===b})};return _.each(a,function(e,f){var g=0,h=b.sizes[e.id],i=[];if(_.filter(a,function(a,b){if(!(f>b))return!0;var d=c[a.id];(h.left>d.left&&h.left<d.duration||d.left>=h.left&&d.left<h.duration)&&(0===h.left?g++:i.push(a))}),0!==h.left){g--;do g++;while(d(i,g))}c[e.id].start=g}),c},getColumnPositions:function(a,c){var e=d.layout.timed.HOUR_HEIGHT()/2,f=24*d.layout.timed.HOUR_HEIGHT();return _.reduce(a,function(a,g){var h=g.startDate.getTime()===g.endDate.getTime(),i=function(){return b.dateToCurrentTimezone(g.startDate)}(),j=function(){var a=b.dateToCurrentTimezone(g.endDate);return"facebook:event"===g.type&&h&&(a=moment(i).add(3,"hours").toDate()),a}(),k=!b.isSameDay(i,c),l=!b.isSameDay(j,c),m=function(){if(k)return 0;var a=Math.round(i.getHours()*d.layout.timed.HOUR_HEIGHT()+i.getMinutes()/d.layout.timed.RATIO());return h&&"facebook:event"!==g.type&&(a-=e/2),a}(),n=function(){if(l)return 24*d.layout.timed.HOUR_HEIGHT();var a=j.getHours()*d.layout.timed.HOUR_HEIGHT()+j.getMinutes()/d.layout.timed.RATIO();return e>=a-m&&(a=m+e),a}(),o=function(){var a=Math.floor(n-m);return e>=a?e:a}();return a[g.id]={top:m/f*100,bottom:n/f*100,duration:o/f*100,isBefore:k,isAfter:l,isDrawing:g.isDrawing,isSame:g.startDate.getTime()===j.getTime()},a},{})},getColumnsLeft:function(a){function b(a,b){return a.title?b.title?a.title.toLowerCase()<b.title.toLowerCase()?-a.top:b.top:-1:1}function c(a,c){var d=a.bottom-a.top-(c.bottom-c.top);return 0===d?0-b(a,c):d}function d(a,b){var d=a.top-b.top;return 0===d?0-c(a,b):d}function e(a,b){return a.top>=b.top&&a.top<b.bottom||b.top>=a.top&&b.top<a.top}function f(a,b){var c=[];return b.length?(_.each(b,function(b){b.id===a.id||-1===a.layoutWidthFraction||b.id.contains("foursquare")||b.isDrawing||e(a,b)&&c.push(b)}),c):c}var g=_.reduce(a,function(a,b,c){return b.id=c,a.push(b),a},[]);return g.sort(d),_.each(g,function(a){if(a.id.contains("foursquare")||a.isDrawing)return a.layoutWidthFraction=1,void(a.priority=1);var b=f(a,g),c=1;b.length&&(c=b.length+1,_.each(b,function(a){a.layoutWidthFraction<c&&(a.layoutWidthFraction=c)})),a.layoutWidthFraction=c;for(var d=[],e=1;c>=e;e++)d.push(e);b.length&&_.each(b,function(a){for(var b=0,c=d.length;c>b;b++)d[b]===a.priority&&d.splice(b,1)}),a.priority=c;for(var h=0,i=d.length;i>h;h++)d[h]<a.priority&&(a.priority=d[h])}),_.reduce(g,function(a,b){var c=b.layoutWidthFraction,d=b.priority-1,e=1,f=function(){var a=100/c,f=100*d/c;return!b.isSame&&100>a&&(e=0!==f&&a+f===100?1.15:1.5,a=Math.min(a*e,100)),a}(),g=function(){var a=100/c,b=100*d/c;if(0!==b){var f=a-a*e;b+=f}return b}();return a[b.id]=_.extend(b,{width:f,left:g}),a},{})}};return e}]),angular.module("App").factory("SRDateService",["SRSettingsService","SRLocaleService","SRCacheService",function(a,b,c){var d=function(a){0!==a.hours()&&(a.hours()<12?a.hours(0):(a.add(1,"days"),a.hours(24-a.hours())))},e={dateToUnix:function(a){if(a){var b=_.isNumber(a)?a:_.isDate(a)?a.getTime():0;return Math.floor(b/1e3)}return null},add:function(a,b,c){var d;switch(a){case"day":d=new Date(b),d.setDate(b.getDate()+c);break;case"week":d=new Date(b),d.setDate(b.getDate()+7*c);break;case"month":d=new Date(b.getFullYear(),b.getMonth(),b.getDate()),d.setMonth(d.getMonth()+c)}return d},getWeekOfMonth:function(a,b){var c=a.getMonth(),d=a.getFullYear(),e=new Date(d,c,1).getDay(),f=new Date(d,c+1,0).getDate(),g=a.getDate()+e-1,h=1,i=h+Math.ceil((f+e-7)/7),j=h+Math.floor(g/7);return b||2+h>j?j:j===i?h+5:j},isToday:function(a){var b=e.dateToCurrentTimezone();return e.isSameDay(a,b)},isTodayInRange:function(a,b){var c=e.getStartOfTheDay(new Date);return e.isBetween(c,a,b)},isWeekend:function(a){return 0===a.getDay()||6===a.getDay()},isSameMonth:function(a,b){return b.getFullYear()===a.getFullYear()&&b.getMonth()===a.getMonth()},isSameDay:function(a,b){return b.getFullYear()===a.getFullYear()&&b.getMonth()===a.getMonth()&&b.getDate()===a.getDate()},isBetween:function(a,b,c){return a>=b&&c>a},isBefore:function(a,b){return b>a},isRangeContains:function(a,b,c,d){return c>=a&&b>c||a>=c&&d>=a},getRoundTime:function(a){_.isNumber(a)&&(a=new Date(a));var b=a.getMinutes()>=0&&a.getMinutes()<=29?0:30;return a.setMinutes(b),a},daysBetween:function(a,b){
var c=864e5;return Math.ceil((b.getTime()-a.getTime())/c)},getDaysOfWeek:function(){var c=b.getDayNames();return 1===a.get("firstDay")&&c.push(c.shift()),6===a.get("firstDay")&&c.unshift(c.pop()),c},getStartOfTheDay:function(a){var b=new Date(a);return b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0),b},getEndOfTheDay:function(a){var b=new Date(a);return b.setHours(23),b.setMinutes(59),b.setSeconds(59),b.setMilliseconds(999),b},getDaysDuration:function(a,b){return a&&b?Math.max(Math.ceil((b.getTime()-a.getTime())/864e5),1):1},getRange:function(a,b){for(var c=new Date(a),d=new Date(b),e=[];d>c;)e.push(c),c=new Date(c.setDate(c.getDate()+1));return e},getPeriod:function(a,b){var c=0,e=[],f=new Date(a);for(f.setHours(12);b>c;){var g=moment(f).add(c,"days").hours(0);g.hours();d(g),e[c]=g.toDate(),c++}return e},startOf:function(a,b){var c=moment(a).startOf(b);return d(c),c.toDate()},endOf:function(a,b){var c=moment(a).endOf(b);return d(c),c.toDate()},getTimezoneJSDate:function(a,b){return a=_.isNumber(a)?a:_.isDate(a)?a:Date.now(),b=(b||"").replace(/\s+/g,""),new timezoneJS.Date(a,b)},getTimezoneAbbreviation:function(a,b){try{var c=e.getTimezoneJSDate(a,b);return c.getTimezoneAbbreviation()||""}catch(d){return""}},allDayUtcToMidnight:function(a){return a=moment(e.utcToLocal(a)),d(a),a.toDate()},utcToLocal:function(a){return new Date(a.getTime()+60*a.getTimezoneOffset()*1e3)},localToUtc:function(a){return new Date(a.getTime()-60*a.getTimezoneOffset()*1e3)},dateToCurrentTimezone:function(b,c){c=c||{},b=new Date(b||Date.now());var d=a.get("currentTimezone")||CONFIG.userTimezone;if(d===CONFIG.userTimezone)return b;var f=e.getDifferrenceBetweenTimezone(CONFIG.userTimezone,a.get("currentTimezone"),b);return f?(c.inverse||(f=-1*f),new Date(b.getTime()+f)):b},getDifferrenceBetweenTimezone:function(a,b,d){d=_.isDate(d)?d:new Date,b=b||CONFIG.userTimezone;var f=[a,b,d.getTime()].join(":"),g=c.get("differrenceBetweenTimezone",f);if(_.isNumber(g))return g;try{var h=e.getTimezoneJSDate(d,a),i=e.getTimezoneJSDate(d,b),j=60*(h.getTimezoneOffset()-i.getTimezoneOffset())*1e3*-1;return c.put("differrenceBetweenTimezone",f,j),j}catch(k){return c.put("differrenceBetweenTimezone",f,0),0}},isDst:function(a,b){b=b||CONFIG.userTimezone,a=e.getTimezoneJSDate(a||Date.now(),b);var c=e.getTimezoneJSDate(new Date(a.getFullYear(),0,1),b),d=e.getTimezoneJSDate(new Date(a.getFullYear(),6,1),b),f=Math.max(c.getTimezoneOffset(),d.getTimezoneOffset());return a.getTimezoneOffset()<f}};return e}]),angular.module("App").factory("SRSettingsService",["$q","SRStorageService","$rootScope","SRLocaleService","SRCacheService","SRLayerService","$injector","$document","$timeout",function(a,b,c,d,e,f,g,h,i){var j,k={},l={};return c.$watch(function(){return l},function(a,b){if(a!==b&&!_.isEmpty(b)){if(a.shortDate!==b.shortDate&&(k.set("mediumDate",d.getDateFormat(a.shortDate).mediumDate),e.removeAll("SRDateFilter_calendarHeadDay"),c.$emit("firstDay")),a.firstDay!==b.firstDay&&(moment.locale("en",{week:{dow:l.firstDay}}),c.$emit("firstDay")),a.currentTimezone!==b.currentTimezone){var f=Date.now(),g=new timezoneJS.Date(f,a.currentTimezone).getTimezoneOffset(),h=new timezoneJS.Date(f,b.currentTimezone).getTimezoneOffset();g!==h&&(e.removeAll("SRDateFilter_timeFormat"),e.removeAll("attrDuration"),c.$emit("onUpdate"),c.$emit("onChangeTimezone"))}a.format24HourTime!==b.format24HourTime&&(e.removeAll("SRDateFilter_timeFormat"),e.removeAll("SRDateFilter_toHour"),c.$emit("reLayout",{emiter:"format24HourTime"})),a.highContrastColors!==b.highContrastColors&&($("body").attr("data-high-contrast-colors",a.highContrastColors),e.removeAll("SROccurrenceColorService_colors"),c.$emit("reLayout"))}},!0),k.cache=l,k._initialSettings=[{id:"firstDay",value:d.getFirstDaytOfTheWeek()},{id:"defaultView",value:"week"},{id:"sidebarCalendars",value:!0},{id:"sidebarDatepicker",value:!0},{id:"sidebarInterestingCalendars",value:!0},{id:"hideSidebar",value:!0},{id:"defaultCalendar",value:null},{id:"refreshTimer",value:3e5},{id:"format24HourTime",value:d.getFormat24HourTime()},{id:"defaultAlert",value:15},{id:"defaultEventLength",value:60},{id:"currentTimezone",value:CONFIG.userTimezone},{id:"userTimezone",value:CONFIG.userTimezone},{id:"timezones",value:CONFIG.defaultTimezones},{id:"mediumDate",value:d.getMediumDate()},{id:"shortDate",value:d.getShortDate()},{id:"dbVersion",value:CONFIG.dbVersion},{id:"highContrastColors",value:!1},{id:"lastCalendarMaxDateTimestamp",value:CONFIG.calendarMaxDate.getTime()},{id:"badge",value:"invitation"}],k.getValidSettings=function(a){var b=[];switch(a){case"firstDay":b=[1,0,6];break;case"format24HourTime":b=[!0,!1];break;case"shortDate":b=["M/d/yy","d/M/yy","yy-M-d"];break;case"defaultAlert":b=[null,0,5,15,30,60,120,1440,2880];break;case"refreshTimer":b=[12e4,3e5,9e5,36e5];break;case"defaultEventLength":b=[15,30,60,90,120];break;case"highContrastColors":b=[!0,!1];break;case"badge":b=["invitation","date"]}return b},k.init=function(){var c=a.defer(),d=[];return _.each(k._initialSettings,function(a){d.push(b.get(a.id).then(function(b){_.isUndefined(b)?k.set(a.id,a.value):k.set(a.id,b)}))}),a.all(d).then(c.resolve),c.promise["finally"](function(){$("body").attr("data-high-contrast-colors",k.get("highContrastColors"))}),c.promise},k.get=function(a){return l[a]},k.set=function(a,c){l[a]=c,b.set(a,c)},k.openModal=function(a){if(j)return!1;var b=g.get("$modal");a=a||{};var c=b.open({templateUrl:CONFIG.preparePartialTemplateUrl("settings"),windowClass:"modal modal--settings fade scale",controller:"SRSettingsCtrl",resolve:{options:function(){return a}}});return c.opened.then(function(){i(function(){var a=h.find(".modal--settings");f.add(a,{focusOnRemove:!0})})}),c.result.then(function(){f.remove(),j=null},function(){f.remove(),j=null}),j=c,!1},k}]),angular.module("App").factory("SRUserService",["SROccurrenceModel","SRSyncTokenModel","SRStorageService","$rootScope","$q","SRLocationService","SRContactModel","SRCacheService","SRCalendarModel","SRConnectionModel","SRSettingsService","SRPostalService","$injector",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={};return n._user={accessToken:void 0,id:void 0,name:void 0,lastUpdate:void 0,loginEmail:void 0,privileges:{team:!1,beta:!1}},n.init=function(){var a=e.defer();return e.all([c.get("accessToken",{noVersion:!0}),c.get("userId"),c.get("userName"),c.get("userPrivileges"),c.get("lastUpdate"),c.get("userLoginEmail")]).then(function(b){n._user.accessToken=b[0],n._user.id=b[1],n._user.name=b[2],n._user.privileges=_.extend(n._user.privileges,b[3]||{}),n._user.lastUpdate=b[4],n._user.loginEmail=b[5],a.resolve(n._user.accessToken)},a.reject),a.promise},n.isLogged=function(){return!!n._user.accessToken},n.logout=function(){var d=e.defer(),k=m.get("SRApiService");return k.user.logout(),e.all([h.flush(),c.flush(),a.removeAll(),b.removeAll(),g.removeAll(),l.logout(),j.removeAll(),i.removeAll()]).then(d.resolve,d.reject),d.promise.then(function(){f.reload()}),d.promise},n.setAccessToken=function(a){var b=e.defer();return n._user.accessToken=a,c.set("accessToken",n._user.accessToken,{noVersion:!0}).then(b.resolve,b.reject),b.promise},n.setUserName=function(a){var b=e.defer();return n._user.name=a,c.set("userName",a).then(b.resolve,b.reject),b.promise},n.setUserId=function(a){var b=e.defer();return n._user.id=a,c.set("userId",a).then(b.resolve,b.reject),b.promise},n.setUserLoginEmail=function(a){var b=e.defer();return n._user.loginEmail=a,c.set("userLoginEmail",a).then(b.resolve,b.reject),b.promise},n.setPrivileges=function(a){var b=e.defer();return _.isEmpty(a)?(b.reject(),b.promise):(_.each(n._user.privileges,function(b,c){c in a&&(n._user.privileges[c]=a[c])}),c.set("userPrivileges",n._user.privileges).then(b.resolve,b.reject),b.promise)},n.setLastUpdate=function(){var a=e.defer();return n._user.lastUpdate=Date.now(),c.set("lastUpdate",n._user.lastUpdate).then(a.resolve,a.reject),a.promise},n.getAccessToken=function(){return n._user.accessToken},n.getPrivileges=function(){return n._user.privileges},n.getUserName=function(){return n._user.name},n.getUserLoginEmail=function(){return n._user.loginEmail},n.getUserId=function(){return n._user.id},n.getLastUpdate=function(){return n._user.lastUpdate},n}]),angular.module("App").factory("SRLocationService",["$window","$document","$q","$location","$timeout","SRDateService","$rootScope","SRBrowserService","$routeParams","SRLoadingService","SRI18nService",function(a,b,c,d,e,f,g,h,i,j,k){var l=100,m={gotoURL:function(b){a.location.href=b||"/"},openTo:function(b){a.open(b||"/")},getParamValue:function(a,b){var c=document.createElement("a");c.href=b;var d=decodeURIComponent((new RegExp("[?|&]"+a+"=(.+?)(&|$)").exec(c.search)||[null,null])[1]);return"null"===d?null:d},openPopupTo:function(b,d,f){var i=c.defer(),j=[],k=0,m=0;b=b||"/",d=d||"Page title",f=f||{},f.width=f.width||900,f.height=f.height||600;try{k=a.outerWidth/2+a.screenX-f.width/2,m=a.outerHeight/2+a.screenY-f.height/2}catch(n){}j.push("menubar=no"),j.push("location=no"),j.push("resizable=yes"),j.push("scrollbars=yes"),j.push("status=yes"),h.isMacApp()||(j.push("width="+f.width),j.push("height="+f.height),j.push("left="+k),j.push("top="+m));var o=a.open(b,d,j.join(",")),p=!1,q=!1,r=g.$on("onPopupError",function(a,b){p=!0,i.reject(b)}),s=g.$on("onPopupSuccess",function(a,b){q=!0,i.resolve(b)}),t=function(){r(),s(),e(function(){p||q||i.reject("USER_CLOSED_POPUP")})};if(h.isMacApp())var u=g.$on("onPopupClose",function(){u(),t()});else var v=window.setInterval(function(){o.closed!==!1&&(window.clearInterval(v),t())},l);return i.promise},openAuthentificationPopup:function(b,d,e){return h.isMacApp()&&h.isMacAppVersionBelow(CONFIG.macPopupVersion)?(a.location.href=b,c.defer().promise):m.openPopupTo(b,d,e)},reload:function(){a.location.reload()},redirectTo:function(a){d.path(a||"/")},openInApp:function(a,d){var f=c.defer();d=d||{},d.delay=_.isNumber(d.delay)?d.delay:500;var g=((new Date).valueOf(),document.createElement("iframe"));return g.setAttribute("width","1px"),g.setAttribute("height","1px"),g.setAttribute("position","absolute"),g.setAttribute("top","0"),g.setAttribute("left","0"),g.setAttribute("src",a),b[0].body.appendChild(g),e(function(){b[0].body.removeChild(g),f.resolve()},d.delay),f.promise}};return h.isChromeApp()?_.extend(m,{reload:function(){chrome.runtime.reload()},openAuthentificationPopup:function(a){var b=c.defer();return j.message.add(k.getMessage("PLEASE_WAIT"),!0),chrome.identity.launchWebAuthFlow({interactive:!0,url:a},function(a){j.message.remove();var c=m.getParamValue("errorDescription",a);chrome.runtime.lastError?b.reject("USER_CLOSED_POPUP"):c?b.reject({errorDescription:c}):b.resolve({connectionId:m.getParamValue("connectionId",a),accessToken:m.getParamValue("accessToken",a)}),g.$apply()}),b.promise}}):h.isMacApp()&&_.extend(m,{openTo:function(a){window.SunriseMacBridge.app.open(a||"/")}}),m}]),angular.module("App").factory("SRMessageService",["$timeout","SRErrorService",function(a,b){var c={};return c._timeout=null,c.message={},c.add=function(d){if(a.cancel(c._timeout),d.error){d.error=[].concat(d.error);var e=_.map(d.error,function(a){return b.getCode(a)});d.error=["Code:"].concat(e).join(" ")}c.message=d,_.isNumber(d.autoClose)&&a(function(){c.remove()},d.autoClose)},c.remove=function(){a.cancel(c._timeout),c.message={}},c}]),angular.module("App").factory("SROnlineStatusService",["$window","$timeout","SRBrowserService",function(a,b,c){var d={};return d._timeout=null,d.isApiReachable=function(){if(c.isIE()&&c.getIEVersion()<=9)return!1;if(b.cancel(d._timeout),c.isChromeApp())return a.navigator.onLine;var e=new XMLHttpRequest;e.open("HEAD",CONFIG.apiBaseUrl+"/pingup",!1);try{return e.send(),e.status>=200&&e.status<300||304===e.status}catch(f){return!1}},d.isOnline=function(){return c.isChromeApp()||c.isMacApp()?a.navigator.onLine:!0},d.onLine=d.isOnline(),a.addEventListener("online",function(){d._timeout=b(function(){d.onLine=d.isOnline()},1e3)},!0),a.addEventListener("offline",function(){d._timeout=b(function(){d.onLine=d.isOnline()},1e3)},!0),d}]),angular.module("App").factory("SRConfirmService",["$compile","$document","$rootScope","SRLayerService",function(a,b,c,d){var e={};return e.remove=function(a){d.remove(),b.find(".confirm__wrapper").remove()},e.add=function(e){d.add();var f=c.$new();f.confirm=e;var g='<sr-confirm data-confirm="confirm"></sr-confirm>',h=a(g)(f);b.find("body").append(h)},e}]),angular.module("App").factory("SRLoadingService",["$rootScope","$timeout",function(a,b){a.loading=0,a.loadingMessage=!1;var c=null,d={message:{add:function(e,f,g){a.loadingMessage={msg:e,spinner:f},g&&(c=b(d.message.remove,g))},remove:function(){a.loadingMessage=!1,c&&(b.cancel(c),c=null)}}};return d}]),angular.module("App").factory("SRDialogService",["$position","$compile","$rootScope","SRUserService","SRDateService","$document","$timeout","SRLayerService","SRFocusingEventService","SRConfirmService","SRI18nService","SRPendingEventService",function(a,b,c,d,e,f,g,h,i,j,k,l){var m={},n=f.find("body"),o=null;return m.parent={},m.parent._scope=null,m.parent._dialogElm=null,m.child={},m.child._scope=null,m.child._dialogElm=null,m.isLoading=!0,m.closeCallback=null,m._getPositions=function(b){var c=a.offset(b.element);return angular.extend(c,{mouseX:b.event.clientX,mouseY:b.event.clientY}),b.showmore&&(c.showmore=!0),c},m._getView=function(a){return a.edit?"edit":a.scope.occurrence&&!a.scope.isNew?"details":a.scope.occurrence&&a.scope.isNew?"edit":a.scope.birthdays?"birthdays":void 0},m._getViewElement=function(a){return a.edit?angular.element('<sr-dialog-edit occurrence="occurrence" has-changed="hasChanged"></sr-dialog-edit>'):a.scope.occurrence&&!a.scope.isNew?angular.element('<sr-dialog-details occurrence="occurrence"></sr-dialog-details>'):a.scope.occurrence&&a.scope.isNew?angular.element('<sr-dialog-edit occurrence="occurrence" is-new="isNew" has-changed="hasChanged"></sr-dialog-edit>'):a.scope.birthdays?angular.element('<sr-dialog-birthdays date="date"></sr-dialog-birthdays>'):void 0},m.close=function(a){a=a||{},(a.force||h.get()===o&&!m.hasChanged())&&(m.closeChild(),h.remove(),m.parent._dialogElm.remove(),m.parent._dialogElm=null,m.parent._scope.$destroy(),m.parent._scope=null,_.isFunction(m.closeCallback)&&(m.closeCallback({state:a.state}),m.closeCallback=null))},m.closeChild=function(){m.hasDialogChild()&&(m.child._dialogElm.remove(),m.child._dialogElm=null,m.child._scope.$destroy(),m.child._scope=null)},m.changeView=function(a){a=a||{},m.parent._scope.view=a.view,a.resize&&g(function(){c.$emit("resizeDialog")})},m.hasDialog=function(){return m.parent._dialogElm&&m.parent._dialogElm.length>0},m.hasChanged=function(){if(m.child._dialogElm&&m.child._dialogElm.length&&m.child._dialogElm.find(".dialog__body__edit").length){var a=m.child._scope.hasChanged;return a&&j.add({title:k.getMessage("TITLE_WANT_TO_LEAVE"),msg:k.getMessage("EVENT_NOT_BEEN_SAVED"),dialog:!0,actions:[{label:k.getMessage("STAY_EDIT"),cssClass:"btn--primary",focus:!0,action:function(){}},{label:k.getMessage("LEAVE_EDIT_MODE"),cssClass:"btn--gray",action:function(){m.close({force:!0}),l.remove(),c.$emit("reLayout")}}]}),a}return!1},m.hasDialogChild=function(){return m.child._dialogElm&&m.child._dialogElm.length>0},m.appendDirective=function(a){var d=function(){return m.hasDialog()?m.parent._dialogElm.find("#dialog-transclude"):[]}();if(!d.length)return void g(function(){m.appendDirective(a)},1);m.closeChild();var e=m._getViewElement(a);m.child._scope=c.$new(),_.each(a.scope,function(a,b){m.child._scope[b]=a}),(a.edit||a.scope.occurrence&&a.scope.isNew)&&(m.child._scope.hasChanged=!1),m.child._dialogElm=b(e)(m.child._scope),d.html(m.child._dialogElm),m.isLoading=!1},m.open=function(a){a=a||{},m.isLoading=!0,m.hasDialog()||(m.parent._scope=c.$new());var d=m.closeCallback;if(m.closeCallback=a.closeCallback||null,m.parent._scope.position=m._getPositions(a),!m.hasDialog()){var e=angular.element("<sr-dialog></sr-dialog>");e.attr("position","position"),m.parent._dialogElm=b(e)(m.parent._scope),n.append(m.parent._dialogElm),h.add(m.parent._dialogElm,{focusOnRemove:!0}),o=h.get()}return m.appendDirective(a),_.isFunction(d)&&d({state:a.state,reused:!0}),m.parent._scope},m}]),angular.module("App").service("SRPeopleService",["SRUserService","SRRequestService","SROnlineStatusService","$q","$rootScope","SRCacheService","SRBlobService","SRSanitizeService","SRImageService","SRContactModel",function(a,b,c,d,e,f,g,h,i,j){var k={getPeople:function(e){if(e=e||{},c.isOnline()===!1)return d.reject();var f=b.get(CONFIG.apiUrl+"/people/search/",{params:e,headers:{Authorization:"Bearer "+a.getAccessToken()}}).then(function(a){return a&&a.data?d.when(j.create(a.data)):d.when([])},function(a){var b=_.getPath(a,["meta","error_message"])||_.getPath(a,["meta","message"])||_.getPath(a,["meta","errorMessage"]);return d.reject(b)});return f},getDetailedProfile:function(e){var f=d.defer();return c.isOnline()&&e?(b.get(CONFIG.apiUrl+"/people/email/"+h.urlEncode(e),{headers:{Authorization:"Bearer "+a.getAccessToken()}}).then(function(a){a&&a.data?f.resolve(a):f.reject()},function(a){f.reject(a)}),f.promise):(f.reject(),f.promise)},getImage:function(e){var h=d.defer();if(!e)return h.reject(),h.promise;var i=f.get("images",e);if(void 0!==i)h.resolve(i);else if(c.isOnline()){var j=function(){var b={headers:{},params:{redirect:!1},cache:!0,bypass:!0,responseType:g.getResponseType()};return a.isLogged()&&(b.headers.Authorization="Bearer "+a.getAccessToken()),b}(),k=function(){return a.isLogged()?CONFIG.apiUrl+"/people/email/"+e+"/image":CONFIG.meetV1Url+"/people/"+e+"/image"}();b.get(k,j).then(function(a){var b=g.get(a,j.responseType);f.put("images",e,b),h.resolve(b)},function(a){f.put("images",e,null),h.reject(a)})}else h.reject();return h.promise},getImageByUrl:function(a){return i.blobUrlFromUrl(a)},getProfile:function(e){var f=d.defer();return c.isOnline()&&e?(b.get(CONFIG.apiUrl+"/people/email/"+e,{headers:{Authorization:"Bearer "+a.getAccessToken()},cache:!0}).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise):(f.resolve({}),f.promise)},getPersonName:function(e){var f=d.defer();if(c.isOnline()&&e){var g=CONFIG.meetV1Url+"/people/"+e+"/name",h=function(){var b={headers:{},cache:!0};return a.isLogged()&&(b.headers.Authorization="Bearer "+a.getAccessToken()),b}();b.get(g,h).then(function(a){a&&a.data?f.resolve(a.data):f.reject()},f.reject)}else f.reject();return f.promise}};return k}]),angular.module("App").factory("SRSanitizeService",function(){for(var a=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],b={},c=0;c<a.length;c++)for(var d=a[c].letters.split(""),e=0;e<d.length;e++)b[d[e]]=a[c].base;return{trim:function(a){return a.replace(/^\s+|\s+$/g,"")},urlEncode:function(a){return encodeURIComponent(a)},toDashedCase:function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},removeLineBreaks:function(a){return a.replace(/(\r\n|\n|\r)/gm," ")},removeDiacritics:function(a){return a.replace(/[^\u0000-\u007E]/g,function(a){return b[a]||a})},prepareForUrl:function(a){return a=this.trim(a),a=this.urlEncode(a)}}}),angular.module("App").factory("SRPlaceService",["$q","SROnlineStatusService","SRRequestService","$timeout","$rootScope","$cacheFactory","$log","SRUserLocationService","SRBlobService","SRSanitizeService",function(a,b,c,d,e,f,g,h,i,j){var k=36e5,l=!1,m=function(){if(p)return p;var a=document.getElementById("map-sandbox");if(!a){var b=document.createElement("iframe");b.id="map-sandbox",b.src="/map-sandbox.html",b.width="0",b.height="0",b.className="hidden",document.getElementsByTagName("body")[0].appendChild(b),l=!0,setTimeout(function(){document.getElementsByTagName("body")[0].removeChild(b),p=null},k)}return a},n={},o=f("staticMapPictures"),p=null,q=250,r={searchPlace:function(c,d){d=d||{};var e=a.defer(),f="searchPlace:"+Date.now();return p=m(),b.isOnline()&&p?(n[f]=e,p.contentWindow.postMessage({method:"searchPlace",query:angular.copy(c),timestamp:angular.copy(f),position:h.get(),options:d},"*"),e.promise):(e.resolve({}),e.promise)},getDetails:function(c,d){d=d||{};var e=a.defer(),f="getDetails:"+Date.now();return p=m(),b.isOnline()&&p?(n[f]=e,p||(p=r.getSandbox()),p.contentWindow.postMessage({method:"getDetails",query:angular.copy(c),timestamp:angular.copy(f),position:h.get(),options:d},"*"),e.promise):(e.resolve({}),e.promise)},getStaticMap:function(d){var e=a.defer();if(o.get(d.name))return e.resolve(o.get(d.name)),e.promise;if(!b.isOnline()||!d.name)return e.resolve(),e.promise;var f={params:{center:d.location.lat+","+d.location.lng,zoom:13,size:"366x100",maptype:"roadmap",sensor:!1},responseType:i.getResponseType(),cache:!0,bypass:!0};return c.get(CONFIG.staticMapUrl,f).then(function(a){var b=i.get(a,f.responseType);o.put(d.name,b),e.resolve(b)},function(a){e.reject(a)}),e.promise},getTimezone:function(b,d,e){var f=a.defer();return c.get(CONFIG.timezoneUrl,{params:{location:b.join(","),timestamp:d/1e3,sensor:e||!1}}).then(function(a){f.resolve(a)},function(a){f.reject(a)}),f.promise},getMapUrl:function(a){var b=j.removeLineBreaks(a.name),c=[b];if(a.address&&!_.isEmpty(a.address)){var d=[];d.push(a.address.street),d.push(a.address.city),d.push(a.address.state),d.push(a.address.country),c.push(", "),c.push(_.compact(d).join(", "))}a.geometry&&!_.isEmpty(a.geometry)&&(c.push("/@"),c.push(a.geometry.location.lat),c.push(","),c.push(a.geometry.location.lng),c.push(",13z"));var e=c.join("").split(" ").join("+");return"https://www.google.com/maps/preview/place/"+j.removeDiacritics(e)},getItineraryUrl:function(a,b){b=b||{};var c=j.removeLineBreaks(a.name),d=[],e=[];if(a.geometry)d.push(a.geometry.location.lat),d.push(","),d.push(a.geometry.location.lng);else if(a.address&&!_.isEmpty(a.address)){var f=[];f.push(a.address.street),f.push(a.address.city),f.push(a.address.state),f.push(a.address.country),d.push(f.join(", "))}else d.push(c);if(b.startAddress){var g=h.get();g&&g.accuracy<=q&&(e.push(g.latitude),e.push(","),e.push(g.longitude))}var i=j.removeDiacritics(d.join("").split(" ").join("+")),k=j.removeDiacritics(e.join(""));return"http://maps.google.com/maps?daddr="+i+"&saddr="+k},init:function(){l||m()}};return window.addEventListener("message",function(a){try{var b=JSON.parse(a.data);b.timestamp&&(n[b.timestamp].resolve(b.result),delete n[b.timestamp],e.$digest())}catch(c){}}),r}]),angular.module("App").factory("SRShowMoreService",["$position","$compile","$rootScope","$document","$filter","$window","SRToggleSidebarService",function(a,b,c,d,e,f,g){var h=function(b){var c=e("date")(b,"MM/dd/yyyy"),h=d.find('.month__day[data-date="'+c+'"]'),i=a.offset(h),j=angular.element(f),k=$(".month"),l={height:j.height(),width:j.width()},m=(k.offset(),30),n=15;i.left=i.left,l.width=l.width;var o={top:i.top-m,left:i.left-m,height:i.height+2*m,width:i.width+2*m};return o.top+o.height>=l.height&&(o.top=l.height-o.height-n),o.left+o.width>=l.width&&(o.left=l.width-o.width-n),o.left<0&&(o.left=n),!g.hideSidebar&&o.left<240&&(o.left=240+n),o},i={open:function(a){var e=c.$new();e.date=a.date,e.positions=h(a.date);var f=[];f.push('<show-more positions="positions" date="date"></show-more>');var g=b(f.join(""))(e);return d.find(".month").append(g),e}};return i}]),angular.module("App").factory("SRRefreshService",["$rootScope","$q","$log","$timeout","$window","SRUserService","SRApiService","SRSettingsService","SRContactModel","SRPeopleService","SROnlineStatusService","SRStorageService","SRCalendarModel","SRRefreshStatusService","SROccurrenceModel","SRConnectionModel",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=3e5,r=function(){this._occurrencesCount=void 0,this._isRefreshing=!1,this._refreshTimeout=void 0,this._previousCalendars=[]};r.prototype._refreshContacts=function(){var a=l.get("lastContactsUpdate").then(function(a){return c.debug("## Last Contacts refresh: %c"+moment(a).format(),"color: green"),!a||a+216e5<=Date.now()?b.all([this.contacts._getPeople(),this.contacts._getScores()]).then(function(a){for(var b=a[0],c=a[1],d=0;d<b.length;d++){var e=b[d];e.score=e.email&&c[e.email]?c[e.email]:0}var f=i.save(b);return f.then(function(){l.set("lastContactsUpdate",Date.now())}),f}.bind(this)):b.when()}.bind(this));return a},r.prototype._refreshNewCalendarsAdded=function(){var a=m.getAll({useCache:!0}).then(function(a){var b=_.difference(_.pluck(a,"id"),this._previousCalendars);return this._occurrencesCount>0&&b.length>0||0===this._previousCalendars.length&&b.length?(c.debug("## Refresh recently added calendars"),g.refresh()):void 0}.bind(this));return a},r.prototype._apiRefresh=function(a){var c=this._occurrencesCount<=0,d=[];return d.push(g.user.get()),d.push(g.refresh({flushAll:c,forceRequest:a})),c||d.push(g.syncAll()),b.all(d)},r.prototype._countOccurrences=function(){var a=o.count().then(function(a){return this._occurrencesCount=a,b.when()}.bind(this),function(){return this._occurrencesCount=0,b.when()}.bind(this));return a["finally"](function(){c.debug("## Occurrences: %c"+this._occurrencesCount,"color: red;")}.bind(this)),a},r.prototype._getRefreshTimer=function(){var a=h.get("refreshTimer"),b=h.getValidSettings("refreshTimer"),c=!!_.find(b,function(b){return b===a});return c?a:q},r.prototype._scheduleNextRefresh=function(){var a=this._getRefreshTimer();d.cancel(this._refreshTimeout),this._refreshTimeout=d(function(){this.refresh({backgroundRefresh:!0})}.bind(this),a)},r.prototype.contacts={},r.prototype.contacts._getScores=function(){return o.getAttendeesScores().then(function(a){return b.when(a)}.bind(this),function(){return b.when({})}.bind(this))},r.prototype.contacts._getPeople=function(){return j.getPeople({limit:5e3}).then(function(a){return b.when(a)}.bind(this),function(a){return c.debug("## Error while getting contacts - "+a),b.when([])}.bind(this))},r.prototype.isRefreshing=function(){return this._isRefreshing},r.prototype.refresh=function(d){b.defer();if(d=d||{},this._scheduleNextRefresh(),this.isRefreshing()===!0||k.isOnline()===!1)return b.reject();c.debug("## Starting refresh (Last Refresh: "+moment(f.getLastUpdate()).format()+")"),a.$emit("didStartRefresh"),this._isRefreshing=!0;var e=this._countOccurrences().then(function(){return m.getAll({useCache:!0}).then(function(a){this._previousCalendars=_.pluck(a,"id")}.bind(this))}.bind(this)).then(function(){var a=!d.backgroundRefresh;return this._apiRefresh(a)}.bind(this)).then(function(){return this._refreshNewCalendarsAdded()}.bind(this)).then(function(){return this._refreshContacts()}.bind(this));return e["finally"](function(){c.debug("## Refresh done"),a.$emit("didEndRefresh"),this._isRefreshing=!1,n.clear()}.bind(this)),e},r.prototype.refreshByConnectionId=function(a){return k.isOnline()===!1?b.reject():p.getById(a).then(function(a){return _.isEmpty(a)?g.user.get():void 0}).then(function(){return m.getFilteredByConnectionId(a,{useCache:!0})}).then(function(a){var c=[];return _.each(a,function(a){c.push(g.calendars.refreshCalendar(a.id,a.connectionId,!0,!1))}),b.all(c)})},r.prototype.refreshCalendar=function(d){if(d=d||{},k.isOnline()===!1)return b.reject();if(void 0===_.getPath(d,"calendarId")||void 0===_.getPath(d,"connectionId"))return b.reject();c.debug("## "+d.calendarId+": Refresh");var e=g.calendars.refreshCalendar(d.calendarId,d.connectionId,d.forceRefresh,!1);return e.then(function(){c.debug("## "+d.calendarId+": Refresh success"),a.$emit("onRsvp")},function(){c.warn("## "+d.calendarId+": Refresh error")}),e},r.prototype.refreshFavoritePlaces=function(){return b.when()};var s=new r;return s}]),angular.module("App").factory("SRColorService",["SRCacheService","SRSettingsService",function(a,b){var c=net.brehaut.Color,d=(new c("#000"),new c("#FFF")),e=function(){};e.prototype.prependPoundKey=function(a){return a&&"#"!==a.charAt(0)?"#"+a:a},e.prototype.getBaseColor=function(a,d){d=d||{},a=a||"#000",a=this.prependPoundKey(a);var e=new c(a);return d.isPast?e=this._lightenColor(e):d.isFocus&&b.get("highContrastColors")&&(e=this._darkenColorForContrastOnWhite(e)),e.toCSS()},e.prototype.getBackgroundColor=function(a,b){b=b||{},a=a||"#000",a=this.prependPoundKey(a);var d=new c(a);return b.isFocus||(d=this._lightenColor(d)),d.toCSS()},e.prototype.getTextColorWithBackgroundColor=function(a,b){if(b=b||{},a=a||"#000",b.isFocus)return d.toCSS();a=this.prependPoundKey(a);var e=new c(a);return e=this._adjustColorForContrast(e),e.toCSS()},e.prototype._lightenColor=function(a){var b=a.toHSL(),d=Math.min(Math.max(b.getLightness()+.05,.85),1);return new c({hue:b.getHue(),saturation:b.getSaturation(),lightness:d,alpha:b.getAlpha()})},e.prototype._getRelativeLuminance=function(a){var b=a.getRed(),c=a.getGreen(),d=a.getBlue(),e=.03928>b?b/12.92:Math.pow((b+.055)/1.055,2.4),f=.03928>c?c/12.92:Math.pow((c+.055)/1.055,2.4),g=.03928>d?d/12.92:Math.pow((d+.055)/1.055,2.4);return.2126*e+.7152*f+.0722*g},e.prototype._getContrastRatioBetweenColors=function(a,b){var c=this._getRelativeLuminance(a)+.05,d=this._getRelativeLuminance(b)+.05;return c>d?c/d:d/c},e.prototype._adjustColorForContrast=function(a){var d=a.toHSL(),e=d.getHue(),f=(d.getSaturation(),d.getLightness()),g=(d.getAlpha(),4.5);!b.get("highContrastColors")&&e>220&&260>e&&f>.5&&(g=3);for(var h=.5>f?.05:-.05,i=new c(a.toCSS());this._getContrastRatioBetweenColors(i,a)<g;){
var j=i.toHSL(),k=j.getHue(),l=j.getSaturation(),m=j.getLightness(),n=j.getAlpha();if(m=Math.min(Math.max(m+h,0),1),i=new c({hue:k,saturation:l,lightness:m,alpha:n}),0===m||1===m){if(!(.5>f&&1===m||f>=.5&&0===m))break;h=-1*h,m=f}}return i},e.prototype._darkenColorForContrastOnWhite=function(a){for(var b=-.05,e=new c(a.toCSS());this._getContrastRatioBetweenColors(e,d)<4.5;){var f=e.toHSL(),g=f.getHue(),h=f.getSaturation(),i=f.getLightness(),j=f.getAlpha();if(i=Math.min(Math.max(i+b,0),1),e=new c({hue:g,saturation:h,lightness:i,alpha:j}),0===i)break}return e};var f=new e;return f}]),angular.module("App").factory("SRCurrentService",["SRDateService","$rootScope","SRSettingsService","SRCurrentMeetService",function(a,b,c,d){var e={};return e._location=null,e._date=null,e._previousDate=null,e._getLimits=function(){if(b.hasMeetReply&&d.get()){var a=d.get();return a.getLimits()}return{min:CONFIG.calendarMinDate,max:CONFIG.calendarMaxDate}},e._updateDisabledStates=function(){var a=e._getLimits(),b=moment(e._date).subtract(1,e._location).startOf(e._location).toDate();e.navigation.states.prevDisabled=b<a.min;var c=moment(e._date).add(1,e._location).startOf(e._location).toDate();e.navigation.states.nextDisabled=c>=a.max},e.navigation={},e.navigation.states={prevDisabled:!0,nextDisabled:!0},e.init=function(){var a=c.get("defaultView");e._location=a,e._date=moment().startOf(a).toDate(),e._updateDisabledStates()},e.resetPreviousDate=function(){e._previousDate=null},e.setDate=function(a){e._date=moment(a).startOf(e._location).toDate(),e._updateDisabledStates()},e.getDate=function(){return e._date},e.getCurrentLocation=function(){return e._location||e.init(),e._location},e.changeLocation=function(b){if(b!==e._location){if(e._location=b,c.set("defaultView",b),e._previousDate)e._date=e._previousDate,e.resetPreviousDate();else if(e._previousDate=angular.copy(e._date),"month"===b){for(var d=moment(e._date).startOf("week").toDate(),f=0,g=1;7>g;g++){var h=a.add("day",d,g);a.isSameMonth(d,h)||f++}f>=4?e._date=moment(moment(e._date).add(1,"month").toDate()).startOf("month").toDate():e._date=moment(e._date).startOf("month").toDate()}else"week"===b&&moment(e._date).isSame(moment(),"month")?e._date=moment().startOf("week").toDate():e._date=moment(e._date).startOf("week").toDate();e._updateDisabledStates()}},e.navigation.prev=function(){if(!e.navigation.states.prevDisabled){var a=moment(e._date).subtract(1,e._location).startOf(e._location).toDate();e._date=a,e.resetPreviousDate()}e._updateDisabledStates()},e.navigation.next=function(){if(!e.navigation.states.nextDisabled){var a=moment(e._date).add(1,e._location).startOf(e._location).toDate();e._date=a,e.resetPreviousDate()}e._updateDisabledStates()},e.navigation.today=function(){var a=moment().startOf(e._location).toDate();e._date.getTime()!==a.getTime()&&(e._date=a,e.resetPreviousDate(),e._updateDisabledStates())},b.$on("firstDay",function(){"week"===e._location&&(e._date=moment().startOf("week").toDate(),e._updateDisabledStates())},!0),e}]),angular.module("App").factory("SRKeyboardManagerService",["$window","$timeout",function(a,b){var c={},d={type:"keydown",propagate:!1,inputDisabled:!1,target:a.document,keyCode:!1};return c.keyboardEvent={},c.bind=function(e,f,g){var h,i,j,k;g=angular.extend({},d,g),e=e.toLowerCase(),i=g.target,"string"==typeof g.target&&(i=document.getElementById(g.target)),h=function(c){if(c=c||a.event,g.inputDisabled){var d;if(c.target?d=c.target:c.srcElement&&(d=c.srcElement),3===d.nodeType&&(d=d.parentNode),"INPUT"===d.tagName||"TEXTAREA"===d.tagName)return}c.keyCode?j=c.keyCode:c.which&&(j=c.which);var h=String.fromCharCode(j).toLowerCase();188===j&&(h=","),190===j&&(h=".");for(var i=e.split("+"),l=0,m={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":"\\",",":"<",".":">","/":"?","\\":"|"},n={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},o={shift:{wanted:!1,pressed:c.shiftKey?!0:!1},ctrl:{wanted:!1,pressed:c.ctrlKey?!0:!1},alt:{wanted:!1,pressed:c.altKey?!0:!1},meta:{wanted:!1,pressed:c.metaKey?!0:!1}},p=0,q=i.length;k=i[p],q>p;p++){switch(k){case"ctrl":case"control":l++,o.ctrl.wanted=!0;break;case"shift":case"alt":case"meta":l++,o[k].wanted=!0}k.length>1?n[k]===j&&l++:g.keyCode?g.keyCode===j&&l++:h===k?l++:m[h]&&c.shiftKey&&(h=m[h],h===k&&l++)}return l!==i.length||o.ctrl.pressed!==o.ctrl.wanted||o.shift.pressed!==o.shift.wanted||o.alt.pressed!==o.alt.wanted||o.meta.pressed!==o.meta.wanted||(b(function(){f(c)},1),g.propagate)?void 0:(c.cancelBubble=!0,c.stopPropagation?(c.stopPropagation(),c.preventDefault()):c.returnValue=!1,!1)},c.keyboardEvent[e]={callback:h,target:i,event:g.type},i.addEventListener?i.addEventListener(g.type,h,!1):i.attachEvent?i.attachEvent("on"+g.type,h):i["on"+g.type]=h},c.unbind=function(a){a=a.toLowerCase();var b=c.keyboardEvent[a];if(delete c.keyboardEvent[a],b){var d=b.event,e=b.target,f=b.callback;e.detachEvent?e.detachEvent("on"+d,f):e.removeEventListener?e.removeEventListener(d,f,!1):e["on"+d]=!1}},c}]),angular.module("App").factory("SRExdateParserService",["SRDateService",function(a){var b={};return b._parseEXDATEs=function(a,b){return b?"DATE"===a.VALUE?_.reduce(b,function(a,b){var c=moment(b+"T000000Z","YYYYMMDDTHHmmssZ").toDate();return a.push(c),a},[]):a.TZID?_.reduce(b,function(b,c){var d=moment(c,"YYYYMMDDTHHmmss"),e=new timezoneJS.Date(d.year(),d.month(),d.date(),d.hours(),d.minutes(),d.seconds(),a.TZID),f=new Date(e.getTime());return b.push(f),b},[]):_.reduce(b,function(a,b){var c=moment(b,"YYYYMMDDTHHmmssZ").toDate();return a.push(c),a},[]):[]},b.parse=function(a){if(!a)return[];a=a.replace("EXDATE","");var c=_.reduce(a.split(":")[0].split(";"),function(a,b){if(b){var c=b.split("=")[0].toUpperCase(),d=b.split("=")[1];a[c]=d}return a},{}),d=a.split(":")[1].split(",");return b._parseEXDATEs(c,d)},b}]),angular.module("App").factory("SRCacheService",["$cacheFactory","$q",function(a,b){var c={},d={put:function(b,d,e){return c[b]?c[b].put(d,e):(c[b]=a(b),c[b].put(d,e)),c[b].get(d)},get:function(a,b){return c[a]?c[a].get(b):void 0},removeAll:function(a){c[a]&&c[a].removeAll()},destroy:function(a){c[a]&&c[a].destroy()},flush:function(){var a=b.defer();return _.each(c,function(a,b){d.destroy(b)}),a.resolve(),a.promise}};return d}]),angular.module("App").factory("SRLocaleService",["$locale","$filter","SRI18nService","$q","SRStorageService",function(a,b,c,d,e){var f={},g={"M/d/yy":{shortDate:"M/d/yy",mediumDate:"EEE M/d"},"d/M/yy":{shortDate:"d/M/yy",mediumDate:"EEE d/M"},"yy-M-d":{shortDate:"yy-M-d",mediumDate:"EEE M-d"}},h={"default":{firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],format24HourTime:!1,dateFormat:g["M/d/yy"],AMPMS:["AM","PM"]},fr:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},ca:{firstDay:1,format24HourTime:!1,dateFormat:g["d/M/yy"]},br:{firstDay:1,format24HourTime:!1,dateFormat:g["d/M/yy"]},cs:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},cv:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},da:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},de:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},el:{firstDay:1,format24HourTime:!1,dateFormat:g["d/M/yy"]},"en-gb":{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},es:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},et:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},eu:{firstDay:1,format24HourTime:!0,dateFormat:g["yy-M-d"]},fi:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},gl:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},hr:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},hu:{firstDay:1,format24HourTime:!0,dateFormat:g["yy-M-d"]},id:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},is:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},it:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},ka:{firstDay:1,format24HourTime:!1,dateFormat:g["d/M/yy"]},lv:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},"ms-MY":{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},nb:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},ne:{firstDay:1,format24HourTime:!1,dateFormat:g["d/M/yy"]},nl:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},nn:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},pl:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},pt:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},ro:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},ru:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},sk:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},sl:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},sq:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},sv:{firstDay:1,format24HourTime:!0,dateFormat:g["yy-M-d"]},uk:{firstDay:1,format24HourTime:!0,dateFormat:g["d/M/yy"]},us:{firstDay:0,format24HourTime:!1,dateFormat:g["M/d/yy"]},"en-ca":{firstDay:0,format24HourTime:!1,dateFormat:g["yy-M-d"]},"fr-ca":{firstDay:0,format24HourTime:!0,dateFormat:g["yy-M-d"]}};return h["fr-ca"]=_.extend(_.clone(h.fr),{firstDay:0}),h["fr-fr"]=h.fr,h["ca-ca"]=h.ca,h["br-br"]=h.br,h["cs-cs"]=h.cs,h["cv-cv"]=h.cv,h["da-da"]=h.da,h["de-de"]=h.de,h["el-el"]=h.el,h["es-es"]=h.es,h["et-et"]=h.et,h["eu-eu"]=h.eu,h["fi-fi"]=h.fi,h["gl-gl"]=h.gl,h["hr-hr"]=h.hr,h["hu-hu"]=h.hu,h["id-id"]=h.id,h["is-is"]=h.is,h["it-it"]=h.it,h["ka-ka"]=h.ka,h["lv-lv"]=h.lv,h["nb-nb"]=h.nb,h["ne-ne"]=h.ne,h["nl-nl"]=h.nl,h["nn-nn"]=h.nn,h["pl-pl"]=h.pl,h["pt-pt"]=h.pt,h["ro-ro"]=h.ro,h["ru-ru"]=h.ru,h["sk-sk"]=h.sk,h["sl-sl"]=h.sl,h["sq-sq"]=h.sq,h["sv-sv"]=h.sv,h["uk-uk"]=h.uk,h["en-us"]=h.us,f.helpers={},f.helpers.removeYearFromString=function(a){return a=a||"",a=a.replace(/, y/gi,""),a=a.replace(/y/gi,"")},f.helpers.transformToShortDay=function(a){return a=a||"",a=a.replace(/MMMM/gi,"MMM")},f.helpers.transformToShortMonth=function(a){return a=a||"",a=a.replace(/EEEE/gi,"EEE")},f.getDateFormat=function(a){return a?g[a]:g},f._getLocale=function(){return h[CONFIG.userLang.toLowerCase()]||h["default"]},f.getFirstDaytOfTheWeek=function(){var a=f._getLocale();return a.firstDay},f.getShortDate=function(){var a=f._getLocale();return a.dateFormat.shortDate},f.getMediumDate=function(){var a=f._getLocale();return a.dateFormat.mediumDate},f.getFormat24HourTime=function(){var a=f._getLocale();return a.format24HourTime},f.getAMPMS=function(){return a&&a.DATETIME_FORMATS&&a.DATETIME_FORMATS.AMPMS?a.DATETIME_FORMATS.AMPMS.slice(0):h["default"].AMPMS},f.getMonthNames=function(){return a&&a.DATETIME_FORMATS&&a.DATETIME_FORMATS.MONTH?_.reduce(a.DATETIME_FORMATS.MONTH,function(a,c){return a.push(b("SRStringFilter_titleCase")(c)),a},[]):h["default"].monthNames},f.getMonthNamesShort=function(){return a&&a.DATETIME_FORMATS&&a.DATETIME_FORMATS.SHORTMONTH?a.DATETIME_FORMATS.SHORTMONTH.slice(0):h["default"].monthNamesShort},f.getDayNames=function(){return a&&a.DATETIME_FORMATS&&a.DATETIME_FORMATS.DAY?a.DATETIME_FORMATS.DAY.slice(0):h["default"].dayNames},f.getDayNamesShort=function(){return a&&a.DATETIME_FORMATS&&a.DATETIME_FORMATS.SHORTDAY?a.DATETIME_FORMATS.SHORTDAY.slice(0):h["default"].dayNamesShort},f.getDayNamesMin=function(){return a&&a.DATETIME_FORMATS&&a.DATETIME_FORMATS.VERYSHORTDAY?a.DATETIME_FORMATS.VERYSHORTDAY.slice(0):["S","M","T","W","T","F","S"]},f.getLongDate=function(b){b=b||{};var c="longDate";return b.year===!1&&a&&a.DATETIME_FORMATS&&a.DATETIME_FORMATS.fullDate&&(c=a.DATETIME_FORMATS.fullDate,c=f.helpers.removeYearFromString(c),c=f.helpers.transformToShortDay(c),c=f.helpers.transformToShortMonth(c)),c},f.getMinDate=function(){var b="mediumDate";return a&&a.DATETIME_FORMATS&&a.DATETIME_FORMATS.mediumDate&&(b=f.helpers.removeYearFromString(a.DATETIME_FORMATS.mediumDate)),b},f.getUserLanguage=function(){var a=CONFIG.userLang;return a?_.first(a.split("-")).toLowerCase():"en"},f.init=function(){var a=d.defer(),b=f.getUserLanguage();return $("html").attr("lang",b),e.get("firstDay").then(function(b){moment.locale("en",{week:{dow:_.isNumber(b)?b:f.getFirstDaytOfTheWeek()},relativeTime:{future:c.getMessage("RELATIVE_TIME_FUTURE"),past:c.getMessage("RELATIVE_TIME_PAST"),s:c.getMessage("RELATIVE_TIME_S"),m:c.getMessage("RELATIVE_TIME_M"),mm:c.getMessage("RELATIVE_TIME_MM"),h:c.getMessage("RELATIVE_TIME_H"),hh:c.getMessage("RELATIVE_TIME_HH"),d:c.getMessage("RELATIVE_TIME_D"),dd:c.getMessage("RELATIVE_TIME_DD"),M:c.getMessage("RELATIVE_TIME_M_MONTH"),MM:c.getMessage("RELATIVE_TIME_MM_MONTH"),y:c.getMessage("RELATIVE_TIME_Y"),yy:c.getMessage("RELATIVE_TIME_YY")}}),a.resolve()},a.reject),a.promise},f}]),angular.module("App").factory("SRPendingEventService",["SRCalendarModel","SRSettingsService","$q","SRConfirmService","SRI18nService","SROccurrenceModel",function(a,b,c,d,e,f){var g={};return g._event=null,g.create=function(h){var i=c.defer();return h=h||{},a.getFilteredByWritable().then(function(a){if(a&&a.length){var c=_.find(a,{id:b.get("defaultCalendar")});h.calendar=c?c:_.min(a,function(a){return a.defaults.priority}),g._event=f.create(h),i.resolve()}else d.add({title:e.getMessage("OOPS"),msg:e.getMessage("CONNECT_ACCOUNTS_ST"),actions:[{label:e.getMessage("CONNECT_ACCOUNTS_TL"),cssClass:"btn--primary",focus:!0,action:function(){b.openModal({currentSection:"accounts"})}},{label:e.getMessage("CANCEL"),action:function(){}}]}),i.reject()},i.reject),i.promise},g.update=function(a){g._event=_.extend(g._event,a)},g.remove=function(){g._event=null},g.get=function(){return g._event},g}]),angular.module("App").factory("SRFocusingEventService",function(){var a={};return a._event=null,a.set=function(b){_.isObject(b)&&(b=b.id),a._event=b},a.remove=function(){a._event=null},a.get=function(){return a._event},a}),angular.module("App").factory("SRBrowserService",["$window","$rootScope","SRMessageService","$q",function(a,b,c,d){var e,f={};return f.isFlashUnusable=function(){return _.hasPath(a,["ZeroClipboard","isFlashUnusable"])?ZeroClipboard.isFlashUnusable():!0},f.hasWebSocket=function(){return"WebSocket"in window&&2===window.WebSocket.CLOSING},f.hasClipboardSupport=function(){return f.isChromeApp()?!0:f.isMacApp()?!0:!1},f.copyURLToClipboard=function(a){if(f.hasClipboardSupport()&&_.isString(a)&&0!==a.length)if(f.isMacApp())window.SunriseMacBridge.clipboard.copy(a);else{var b=document.createElement("div");b.contentEditable=!0,document.body.appendChild(b),b.innerHTML=a,b.unselectable="off",b.focus(),document.execCommand("SelectAll"),document.execCommand("Copy",!1,null),document.body.removeChild(b)}},f.hasNotification=function(){return"Notification"in window},f.hasLocalStorage=function(){var a="object"==typeof chrome&&chrome.storage,b=function(){if(a)return!0;var b,c="foo";try{return localStorage.setItem(c,c),b=localStorage.getItem(c),localStorage.removeItem(c),b===c&&localStorage}catch(d){}}();return b||a},f.hasWebSQL=function(){return!!window.openDatabase},f.isMacApp=function(){return!!window.SunriseMacBridge},f.isMacAppVersionBelow=function(a){return f.isMacApp()?!_.isFunction(window.SunriseMacBridge.app.version)||window.SunriseMacBridge.app.version()<a:!1},f.hasTouch=function(){return"ontouchstart"in document.documentElement},f.isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/BB10; Touch/)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return navigator.userAgent.match(/Android|BlackBerry|BB10; Touch|iPhone|iPad|iPod|Opera Mini|IEMobile/i)}},f.events={mousedown:f.isMobile.any()?"touchstart":"mousedown",mouseup:f.isMobile.any()?"touchend":"mouseup"},f.hasIndexedDB=function(){return!!(a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB)&&!f.isSafari()},f.isIndexedDBAvailable=function(){var c=d.defer(),e=a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,f=e.open("sr-Test");return f.onerror=function(a){c.reject(),b.$apply()},f.onsuccess=function(a){c.resolve(),b.$apply()},c.promise},f.isChromeApp=function(){return!("object"!=typeof chrome||!chrome.storage)},f.isIE=function(a){var b=a||navigator.userAgent||"";return/MSIE (\d+\.\d+);/.test(b)?!0:/Trident.*rv\:11\./.test(b)?!0:b.contains("Chrome")&&!b.contains("IE")&&/\bEdge\/([\d.]+)/.test(b)?!0:!1},f.getIEVersion=function(){return f.isIE()?(e||(e=function(){var a=navigator.userAgent||"";if(/Trident.*rv\:11\./.test(a))return 11;if(a.contains("Chrome")&&!a.contains("IE")&&/\bEdge\/([\d.]+)/.test(a))return 12;for(var b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return b>4?b:void 0}()),e):null},f.isSafari=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)||/MacGap/.test(navigator.userAgent)},f.hasGeoLocation=function(){return window.navigator&&window.navigator.geolocation},f.getMouseWheelEvent=function(){return"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},f.retina={},f.retina.value=null,f.retina.init=function(){function a(a){var c=f.retina.value;f.retina.value=a.matches,_.isNull(c)||b.$emit("reLayout")}if(window.matchMedia){var c=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)");c.addListener(a),a(c)}},f.isRetina=function(){return _.isBoolean(f.retina.value)?f.retina.value:(f.retina.value=window.devicePixelRatio>1||window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)").matches,f.retina.value)},f.isReady=function(){var a=d.defer(),b=!0,c=function(){a.resolve(b)};return f.hasLocalStorage()||(b=!1),f.hasIndexedDB()||f.hasWebSQL()||(b=!1),f.hasIndexedDB()?f.isIndexedDBAvailable().then(function(){c()},function(){b=!1,c()}):c(),a.promise},f.retina.init(),f}]),angular.module("App").factory("SRLayerService",["$document",function(a){var b=0,c=[],d=function(a){var b=!1,d=[],e={};if((9===a.which||38===a.which||40===a.which)&&(d=c[c.length-1],e=$.data(d,"options"),b=function(){return 9===a.which?!0:!e.arrowSupport||38!==a.which&&40!==a.which?void 0:"true"===a.target.getAttribute("aria-expanded")?!1:!0}()),b){a.preventDefault();var f=d.find("[tabindex][tabindex!=-1]");if(f=f.filter(function(){var a=$(this);return!("none"===a.css("display")||"hidden"===a.css("visibility"))}),f=f.filter(":not(:disabled)"),0===f.length)return;f=_.map(f,function(a){return $(a)});var g=[],h=[];_.each(f,function(a){"0"===a.attr("tabindex")?h.push(a):g.push(a)}),g=_.sortBy(g,function(a){return parseInt(a.attr("tabindex"))});var i=g.concat(h),j=_.find(i,function(a){return a.is(":focus")});if(!j)return void i[0].focus();var k=i.indexOf(j),l=function(){switch(a.which){case 9:return a.shiftKey?-1:1;case 38:return-1;case 40:return 1;default:return 1}}();-1===l?0===k?i[i.length-1].focus():i[k-1].focus():k===i.length-1?i[0].focus():i[k+1].focus()}},e=function(b,e){return c.length>0&&a.off("keydown",d),b?(b instanceof jQuery||(b=$(b)),e=e||{},e.focusOnRemove&&(e.$focusedElement=a.find(":focus")),$.data(b,"options",e),c.push(b),void a.on("keydown",d)):void c.push(void 0)},f=function(){if(c.length>0){a.off("keydown",d);var b=_.last(c);if(b){var e=$.data(b,"options");e.focusOnRemove&&e.$focusedElement&&e.$focusedElement.length&&e.$focusedElement.focus()}c.pop()}c.length>0&&a.on("keydown",d)};return{get:function(){return b},add:function(a,c){e(a,c),b++},remove:function(){f(),b--}}}]),angular.module("App").factory("SRNavigateToService",["$log","$position","$filter","$q","$rootScope","$timeout","SRMeetModel","SRDateService","SRCurrentService","SRMutationObserverService","SRFocusingEventService","SRWeekActionCreator",function(a,b,c,d,e,f,g,h,i,j,k,l){var m=function(){},n=".app-wrapper",o=".sr-week-timed",p=".sr-week-all-day-content",q=60,r="facebook:event";m.prototype.meet=function(a){var b=$(o),c='[data-timeslot-id="'+a.id+'"]',d=g.getTimeSlotDate(a),e=moment(d).startOf("week").toDate();return i.changeLocation("week"),e.getTime()!==i.getDate().getTime()&&i.setDate(e),j.waitUntilExists(b,c).then(function(){var a=b.find(c).first();this._scrollToElement($(o),a)}.bind(this))},m.prototype.occurrence=function(b,g){if(g=g||"week",_.isEmpty(b))return a.warn("SRNavigateToService.prototype.occurrence(): Missing occurrence"),d.reject();var m=$(n),q=function(){if(b.type&&b.type.endsWith(":birthday")){if("month"===g){var a=h.allDayUtcToMidnight(b.startDate);return'.js-badge-birthdays[data-date="'+c("date")(a,"MM/dd/yyyy")+'"]'}return'[data-ids*="'+b.id+'"][role="button"]'}return'[data-id="'+b.id+'"][role="button"]'}();if(i.changeLocation(g),0===m.find(q).length){var s=this._getPeriodDate(b.allDay,b.startDate,g);i.setDate(s)}return b.type===r&&"notReplied"===b.userRsvpStatus&&("week"===g?f(function(){l.addEvent(b)},1e3):(k.set(b.id),e.$emit("onUpdate"))),j.waitUntilExists(m,q).then(function(){var a=m.find(q).first();if(!("week"!==g||b.type&&b.type.endsWith(":birthday"))){var c=a.parents(o).length?$(o):$(p);this._scrollToElement(c,a)}return this._handleClick(a)}.bind(this))},m.prototype._handleClick=function(a){var c=b.offset(a),d=function(a,b){var d=Math.floor(c.left+c.width/2),e=Math.floor(c.top+c.height/2);if(document.createEvent){var f=document.createEvent("MouseEvent");f.initMouseEvent(a,!0,!0,window,0,d,e,d,e,!1,!1,!1,!1,0,null),b.dispatchEvent(f)}};d("mousedown",a[0]),d("mouseup",a[0])},m.prototype._scrollToElement=function(a,c){var d=b.position(c);a.scrollTop(d.top-q)},m.prototype._getPeriodDate=function(a,b,c){if(a){var d=h.allDayUtcToMidnight(b);return moment(d).startOf(c).toDate()}return moment(b).startOf(c).toDate()};var s=new m;return s}]),angular.module("App").factory("SRCurrentMeetService",[function(){var a={};return a._meet=null,a.set=function(b){a._meet=b},a.get=function(){return a._meet},a.remove=function(){a._meet=null},a}]),angular.module("App").service("SRIconicService",["SRRequestService","SROnlineStatusService","$q","SRCacheService","SRSanitizeService","SRBrowserService","SRBlobService",function(a,b,c,d,e,f,g){var h={};return h.getUrl=function(a,b,c,d,g,h){if(!a||!b)return null;d=d||50,f.isRetina()||(d/=2);var i=[];return i.push(CONFIG.iconicUrl),i.push("/icon"),i.push("/"+e.urlEncode(a)),i.push("/"+b+".png"),i.push("?overlay="+e.urlEncode(c)),i.push("&size="+d),_.isBoolean(g)&&i.push("&background="+g),_.isBoolean(h)&&i.push("&placeholder="+h),i.join("")},h.getIcon=function(e){var f=c.defer();if(!e)return f.resolve(null),f.promise;if(d.get("iconic",e))return f.resolve(d.get("iconic",e)),f.promise;if(!b.isOnline())return f.reject(),f.promise;var h={responseType:g.getResponseType(),cache:!0,bypass:!0};return a.get(e,h).then(function(a){var b=g.get(a,h.responseType);d.put("iconic",e,b),f.resolve(b)},function(a){d.put("iconic",e,null),f.reject(a)}),f.promise},h.getCachedVersion=function(a){return angular.isDefined(d.get("iconic",a))?d.get("iconic",a):!1},h}]),angular.module("App").factory("SRUnreadNotificationService",["$q","SRStorageService","$rootScope","SRCalendarModel","SROccurrenceModel",function(a,b,c,d,e){var f={get:function(b){b=b||{};var c=a.defer();return b.eventId?f._getByEventId(b.eventId,c):b.calendarId?f._filterByCalendarId(b.calendarId,c):f._notifications(c),c.promise},put:function(b,c){c=c||{};var d=a.defer();return!b||_.isArray(b)&&!b.length?d.resolve():c.eventId?f._updateNotification(c.eventId,b,d):f._importNotifications(b,d),d.promise},remove:function(b){b=b||{};var c=a.defer();return b.eventId?f._removeNotificationByEventId(b.eventId,c):f._flushAllNotifications(c),c.promise},removeRespondedForCalendar:function(b){var c=a.defer(),d=a.defer();f._notifications(d);var g,h=[];return d.promise.then(function(c){g=_.toArray(c),g=_.filter(g,{calendarId:b});var d=_.pluck(g,"eventId"),f=_.map(d,function(a){return e.getById(a)});return a.all(f)},c.reject).then(function(a){if(a&&a.length){for(var b=0;b<a.length;b++){var d=a[b];if(!_.isEmpty(d)&&"notReplied"!==_.getPath(d,"userRsvpStatus")){var e=g[b];h.push(e.eventId)}}f._removeNotificationByEventId(h,c)}else c.resolve()},c.reject),c.promise},_notificationsCache:{},_notifications:function(a){_.isEmpty(f._notificationsCache)?b.get("unread-notifications").then(function(b){f._notificationsCache=b||{},a.resolve(f._notificationsCache)}):a.resolve(f._notificationsCache)},_getByEventId:function(a,b){f.get().then(function(c){var d=_.find(c,function(b){return b.eventId===a});b.resolve(d)})},_filterByCalendarId:function(a,b){f.get().then(function(c){var d=_.filter(c,function(b){return b.calendarId===a});b.resolve(d)})},_updateNotification:function(a,d,e){f.get().then(function(g){g[a]=_.extend(g[a],d),f._notificationsCache=g,b.set("unread-notifications",g).then(function(){c.$emit("onUpdateUnreadNotification"),e.resolve()})})},_importNotifications:function(a,d){a=_.reduce(a,function(a,b){return a[b.eventId]=b,a},{}),f.get().then(function(e){var g=_.merge(e,a);f._notificationsCache=g,b.set("unread-notifications",g).then(function(){c.$emit("onUpdateUnreadNotification"),d.resolve()})})},_removeNotificationByEventId:function(a,d){a=[].concat(a),f.get().then(function(e){e=_.omit(e,function(b){return _.contains(a,b.eventId)}),f._notificationsCache=e,b.set("unread-notifications",e).then(function(){c.$emit("onUpdateUnreadNotification"),d.resolve()})})},_flushAllNotifications:function(a){f._notificationsCache={},b.remove("unread-notifications").then(function(){c.$emit("onUpdateUnreadNotification"),a.resolve()})},filterEventsNotifications:function(b){var c=a.defer(),f=[],g=Date.now(),h=[];return _.each(b,function(a){var b=["sunrise-hidden",a.eventId].join(":");h.push(e.getById(b))}),a.all(h).then(function(a){a=_.reduce(a,function(a,b){return b&&a.push(b.eventId),a},[]),d.getFilteredByVisible().then(function(d){var e=_.pluck(d,"id");f=_.filter(b,function(b){return _.contains(e,b.calendarId)?_.contains(a,b.eventId)?!1:b.startAt<g?!1:b.read?!1:!0:!1}),c.resolve(f)})}),c.promise},removeCancelled:function(b){var c=a.defer(),d=[];return _.each(b,function(a){"cancelled"===a.status&&d.push(a.id)}),d.length?f.remove({eventId:d}).then(function(){c.resolve()}):c.resolve(),c.promise}};return f}]),angular.module("App").factory("SRToggleSidebarService",["SRSettingsService","SRStorageService","$q",function(a,b,c){var d={};return d.hideSidebar=null,d.toggleSidebar=function(){d.hideSidebar=!d.hideSidebar,a.set("hideSidebar",d.hideSidebar)},d.init=function(){var b=c.defer();return d.hideSidebar=_.isBoolean(a.get("hideSidebar"))?a.get("hideSidebar"):!0,b.resolve(),b.promise},d}]),angular.module("App").factory("SRShortcutService",["$modal","SRLayerService","$rootScope","$timeout","SRKeyboardManagerService","SRUserService","SRCurrentService","SRRefreshService","SRToggleSidebarService","SRBrowserService","SRSettingsService","$document","SRWeekConstants","SRDateService","SRCreateEventService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q={};return q._isEnabled=!0,q._isInitialized=!1,q._wrapHandler=function(a){return function(){q._isEnabled&&_.isFunction(a)&&a()}},q.init=function(){if(!q._isInitialized){var a=function(a){a=a||1;var b=$("."+g.getCurrentLocation()).find(".week__timed"),c=b.scrollTop()+m.layout.timed.HOUR_HEIGHT()*a;b.scrollTop(c)},c=function(){return b.get()<=0},l=function(a){a=a||window.event;var b=a.keyCode||a.which;return b},n={inputDisabled:!0},p=function(){c()&&i.toggleSidebar()},r=function(){c()&&g.navigation.today()},s=function(){"week"!==g.getCurrentLocation()&&c()&&g.changeLocation("week")},t=function(){"month"!==g.getCurrentLocation()&&c()&&g.changeLocation("month")},u=function(){c()&&g.navigation.next()},v=function(){c()&&g.navigation.prev()},w=function(){c()&&"month"===g.getCurrentLocation()?g.navigation.next():c()&&"week"===g.getCurrentLocation()&&a(1)},x=function(){c()&&"month"===g.getCurrentLocation()?g.navigation.prev():c()&&"week"===g.getCurrentLocation()&&a(-1)},y=function(){c()&&k.openModal()},z=function(){c()&&f.getAccessToken()&&h.refresh()},A=function(){c()&&q.openModal()},B=function(){c()&&o.createNow()};j.isMacApp()?(e.bind("h",q._wrapHandler(p),n),e.bind("meta+t",q._wrapHandler(r),n),e.bind("meta+r",q._wrapHandler(z),n),e.bind("meta+1",q._wrapHandler(s),n),e.bind("meta+2",q._wrapHandler(t),n),e.bind("meta+right",q._wrapHandler(u),n),e.bind("meta+left",q._wrapHandler(v),n),e.bind("meta+,",q._wrapHandler(y),n),e.bind("meta+n",q._wrapHandler(B),n)):(e.bind("?",q._wrapHandler(A),n),e.bind("h",q._wrapHandler(p),n),e.bind("t",q._wrapHandler(r),n),e.bind("1",q._wrapHandler(s),n),e.bind("w",q._wrapHandler(s),n),e.bind("2",q._wrapHandler(t),n),e.bind("m",q._wrapHandler(t),n),e.bind("right",q._wrapHandler(u),n),e.bind("n",q._wrapHandler(u),n),e.bind("left",q._wrapHandler(v),n),e.bind("p",q._wrapHandler(v),n),e.bind("down",q._wrapHandler(w),n),e.bind("up",q._wrapHandler(x),n),e.bind("s",q._wrapHandler(y),n),e.bind("r",q._wrapHandler(z),n),e.bind("c",q._wrapHandler(B),n)),e.bind("backspace",function(){},n),document.addEventListener("keypress",function(a){var b=a.target;"INPUT"!==b.tagName.toUpperCase()&&"TEXTAREA"!==b.tagName.toUpperCase()&&(63===l(a)&&c()?q.openModal():47===l(a)&&c()&&(i.hideSidebar&&i.toggleSidebar(),d(function(){var a=$(".js-search-input");a.length&&a[0].focus()},10)))},!1),"object"==typeof chrome&&chrome.storage&&e.bind("meta+r",function(){c()&&h.refresh()},n),j.isMacApp()&&e.bind("meta+f",function(){c()&&(i.hideSidebar&&i.toggleSidebar(),d(function(){var a=$(".js-search-input");a.length&&a[0].focus()},10))},n),q._isInitialized=!0}},q.openModal=function(){if(p)return!1;var c=a.open({templateUrl:CONFIG.preparePartialTemplateUrl("modal-shortcuts"),windowClass:"modal modal--shortcuts fade scale",controller:"SRShortcutsModalCtrl"});return c.opened.then(function(){d(function(){var a=l.find(".modal--shortcuts");b.add(a,{focusOnRemove:!0})})}),c.result.then(function(){b.remove(),p=null},function(){b.remove(),p=null}),p=c,!1},q.enable=function(){q._isEnabled=!0},q.disable=function(){q._isEnabled=!1},q}]),angular.module("App").factory("SRFreezeViewService",function(){var a={},b=!1;return a.enable=function(){b=!0},a.disable=function(){b=!1},a.isEnabled=function(){return!!b},a.isDisabled=function(){return!!b},a}),angular.module("App").factory("SRRefreshStatusService",function(){var a={};return a.calendars={},a.clear=function(){a.calendars={}},a}),angular.module("App").factory("SRMetricsService",["$q","$injector","SRUserService","SRBrowserService","SROnlineStatusService","$log",function(a,b,c,d,e,f){var g={_helpers:{},_caches:{},events:{on:{}}};return g._helpers.isEnabled=function(){return e.isOnline()?CONFIG.environment.endsWith("DEV")?!1:!0:!1},g._helpers.getUserDevice=function(){return d.isChromeApp()?"desktop/chrome":d.isMacApp()?"desktop/mac":"desktop/web"},g._helpers.getUserLanguage=function(){var a=CONFIG.userLang;return a?a.split("-")[0].toLowerCase():null},g._helpers.getUserOS=function(a,b){return a=a||navigator.appVersion,b=b||navigator.userAgent,a.contains("Win")?"windows":a.contains("Mac")?"mac":a.contains("Linux")?"linux":b.contains("CrOS")?"chromeos":"unknown"},g._helpers.getBrowser=function(a){return a=a||navigator.userAgent,a=a.toLowerCase(),d.isChromeApp()?"chrome":d.isSafari()?"safari":d.isIE()?"msie":!a.contains("chrome")&&!a.contains("chromium")||a.contains("opr")?a.contains("firefox")&&!a.contains("seamonkey")?"firefox":a.contains("opera")||a.contains("opr")?"opera":a.contains("seamonkey")?"seamonkey":"unknown":"chrome";
},g._helpers.getAppVersion=function(){var a=CONFIG.version||"",b=a.split("."),c=_.map(b,function(a){return a=["0","0","0"].concat(a.split("")),_.last(a,3).join("")}),d=parseInt(c.join(""),10);return d},g._helpers.getAppEnvironment=function(){var a=CONFIG.environment;return a.endsWith("PRODUCTION")?"production":a.endsWith("BETA")?"beta":"development"},g._helpers.getDefaultUserProperties=function(){var a={};return a["user:ip"]="use request",a["user:platform"]="desktop",a["user:os"]=g._helpers.getUserOS(),a["user:device"]=g._helpers.getUserDevice(),a["user:model"]=g._helpers.getBrowser(),a["user:app:version"]=g._helpers.getAppVersion(),a["user:app:environment"]=g._helpers.getAppEnvironment(),a["user:app:language"]="en",a["user:os:language"]=g._helpers.getUserLanguage(),a},g.getUserInfoHeader=function(){if(g._caches.userInfoHeader)return g._caches.userInfoHeader;var a=JSON.stringify(g._helpers.getDefaultUserProperties());return g._caches.userInfoHeader=a,a},g.events.trackEvent=function(d,e){var f=a.defer();if(!g._helpers.isEnabled())return f.reject("Metrics is not enabled in SRMetricsService.events.trackEvent!"),f.promise;if(!d)return f.reject("Missing required eventName parameter in SRMetricsService.events.trackEvent!"),f.promise;var h=c.getUserId();if(!h)return f.reject("Missing required userId parameter in SRMetricsService.events.trackEvent!"),f.promise;var i=g._helpers.getDefaultUserProperties();_.extend(i,e),i["user:id"]=h,i["event:timestamp"]=Math.floor(Date.now()/1e3);var j=CONFIG.metricsUrl+"/track",k={name:d,properties:i},l=b.get("SRRequestService");return l.post(j,k).then(function(a){a&&a.success?f.resolve():f.reject("Invalid response data in SRMetricsService.events.trackEvent: "+JSON.stringify(a))},function(a){f.reject("Error while posting data in SRMetricsService.events.trackEvent: "+a)}),f.promise},g.events.on.appOpened=function(){var b=a.defer(),c={};return c["user:local:hour"]=(new Date).getHours(),g.events.trackEvent("user:app:opened",c).then(function(){b.resolve()},function(a){b.reject("Error while tracking event in SRMetricsService.event.on.appOpened: "+a)}),b.promise},g}]),angular.module("App").factory("SRNotificationService",["SRBrowserService","$q","$document","$timeout","SROccurrenceModel","$filter","$log","SRSettingsService","SRCalendarModel","SRI18nService","SRNavigateToService","SRCurrentService","$rootScope","SRApiService","SRDateService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p={};return p.meets={},p.meets._getMessageForNotification=function(a){if(_.isEmpty(a))return void 0;var b=function(){if(_.hasPath(a,["attendees","data",0])){var b=_.getPath(a,["attendees","data",0]);return _.getPath(b,"name")||_.getPath(b,["emails",0])||""}return""}(),c={time:f("SRDateFilter_timeFormat")(a.startDate,!0),date:f("SRDateFilter_longDate")(a.startDate),timezone:f("SRDateFilter_zoneAbbr")(o.dateToCurrentTimezone(a.startDate),h.get("currentTimezone"))},d=function(){var a=[j.getMessage("ALL_GOOD"),j.getMessage("YOU_SET")];return a[_.random(0,1)]}();return j.getMessage("MEET_CONFIRMATION",[b,c.time,c.date,c.timezone,d])},p.meets.notifyForConfirmation=function(a,c,d){var e=b.defer();return n.meets.getConfirmedEvent(c,d).then(function(a){var b=p.meets._getMessageForNotification(a);p.notify({title:a.title,message:b,events:{onClick:function(){k.occurrence(a,l.getCurrentLocation())}}}),e.resolve()},e.reject),e.promise},p.reminders={},p.reminders.filterOccurrences=function(a){var c=b.defer();return b.all([i.getFilteredByReminders(),e.filterOccurrencesForRendering(a)]).then(function(a){var b=a[0].length?_.zipObject(_.pluck(a[0],"id"),a[0]):{},d=a[1];d=_.filter(d,function(a){return a.allDay?!1:a.userRsvpStatus&&"attending"!==a.userRsvpStatus?!1:b[a.calendarId]?!0:!1}),c.resolve(d)}),c.promise},p.reminders.getOccurrences=function(a){var b=new Date(a.getTime()),c=new Date(b.getTime()+6048e5);return e.getFilteredBetweenDates(b,c,{useCache:!0})},p.reminders.createNotifications=function(a,b){for(var c=h.get("defaultAlert"),d=a.length-1;d>=0;d--){var e,f=a[d],g=f.startDate.getTime();if(_.isArray(f.reminders)&&f.reminders.length>0)for(var i=f.reminders.length-1;i>=0;i--)e=g-60*f.reminders[i].minutes*1e3,e===b&&p.reminders.notify(f,b);else void 0===f.reminders&&_.isNumber(c)&&(e=g-60*c*1e3,e===b&&p.reminders.notify(f,b))}},p.reminders.notify=function(a,b){var c=function(){var c=a.startDate.getTime()-b;return 0===c?j.getMessage("NOW"):f("SRDateFilter_fromNow")(c,"long",!0)}(),d={title:a.title||j.getMessage("UNTILTED"),message:c,events:{onClick:function(){k.occurrence(a,l.getCurrentLocation()),m.$apply()}},occurrenceId:a.id};p.notify(d)},p.timeout=null,p._web={},p._chrome={},p._mac={},p.hasNotifications=!1,p._windowFocus=function(b){var c=a.isChromeApp()?chrome.app.window.get("sunriseWindow"):window;c.focus()},p.getNotificationIcon=function(){return a.isRetina()?CONFIG.baseUrl+"/images/static/notification-icon@2x.png":CONFIG.baseUrl+"/images/static/notification-icon.png"},p.checkForNotifications=function(){if(p.hasNotifications){var a=new Date;a.setMilliseconds(0),a.setSeconds(0);var b=a.getTime();p.reminders.getOccurrences(a).then(p.reminders.filterOccurrences).then(function(a){d(function(){p.reminders.createNotifications(a,b)})})}},p._web.notify=function(b){if(b=b||{},!a.hasNotification()||"granted"!==Notification.permission)return!1;if(!b.title)return g.warn("SRNotificationService._web.notify(): %cMissing title","color:red"),!1;var c=b.title,d={icon:b.icon||p.getNotificationIcon()};b.message&&(d.body=b.message);var e=new Notification(c,d);e.onclick=function(){p._windowFocus(),_.hasPath(b,"events.onClick")&&_.isFunction(b.events.onClick)&&b.events.onClick()}},p._mac.onClick={},p._mac.notify=function(a){if(a=a||{},!a.title)return g.warn("SRNotificationService._mac.notify(): %cMissing title","color:red"),!1;var b={title:a.title,content:a.message||" ",sound:!1,bridgeFn:"navigateToOccurrence",info:{eventId:a.occurrenceId}};window.SunriseMacBridge.notice.notify(b)},p._chrome.onClick={},p._chrome.notify=function(a){if(a=a||{},!a.title)return g.warn("SRNotificationService._chrome.notify(): %cMissing title","color:red"),!1;var b={type:"basic",title:a.title,iconUrl:a.icon||p.getNotificationIcon()};a.message&&(b.message=a.message);var c=uuid.v4();chrome.notifications.create(c,b,function(){}),p._chrome.onClick[c]=function(){p._windowFocus(),_.hasPath(a,"events.onClick")&&_.isFunction(a.events.onClick)&&a.events.onClick()}},p.init=function(){var d=b.defer();if(a.isChromeApp()||a.isMacApp()||!a.hasNotification()||"default"!==Notification.permission)(a.isChromeApp()||a.isMacApp()||a.hasNotification()&&"granted"===Notification.permission)&&(p.hasNotifications=!0);else{var e=0;c.on("mousedown.requestNotification",function(){2>e?e++:(Notification.requestPermission(function(a){"permission"in Notification||(Notification.permission=a),"granted"===a&&(p.hasNotifications=!0)}),c.off("mousedown.requestNotification"))})}return d.resolve(),d.promise},a.isChromeApp()?(_.extend(p,p._chrome),chrome.notifications.onClicked.addListener(function(a){p._chrome.onClick[a]&&(p._chrome.onClick[a](),delete p._chrome.onClick[a])})):a.isMacApp()?_.extend(p,p._mac):_.extend(p,p._web),p}]),angular.module("App").factory("SRTrackExceptionService",["$q","SRBrowserService","$log",function(a,b,c){var d=CONFIG.version.startsWith("SUNRISE"),e={};return e.raven={},e.raven.isSetup=!1,e.raven.init=function(){var c=a.defer(),f={logger:"javascript",ignoreErrors:["top.GLOBALS","originalCreateNotification","canvas.contentDocument","MyApp_RemoveAllHighlights","http://tt.epicplay.com","Can't find variable: ZiteReader","jigsaw is not defined","ComboSearch is not defined","http://loading.retry.widdit.com/","atomicFindClose","fb_xd_fragment","bmi_SafeAddOnload","EBCallBackMessageReceived","conduitPage"],ignoreUrls:[/graph\.facebook\.com/i,/connect\.facebook\.net\/en_US\/all\.js/i,/eatdifferent\.com\.woopra-ns\.com/i,/static\.woopra\.com\/js\/woopra\.js/i,/extensions\//i,/^chrome:\/\//i,/127\.0\.0\.1:4001\/isrunning/i,/webappstoolbarba\.texthelp\.com\//i,/metrics\.itunes\.apple\.com\.edgesuite\.net\//i],shouldSendCallback:function(a){if(b.isIE()&&b.getIEVersion()<=9)return!1;if(d)return!1;if(a&&a.message){var c=a.message;if(c.contains("0x805e0006"))return!1;if(c.contains("0x80520015")||c.contains("0x80520013")||c.contains("0x80520010"))return!1;if("InvalidStateError"===c)return!1}return a&&a.level&&("debug"===a.level||"warn"===a.level||"info"===a.level)?!1:!0}};return Raven.config(CONFIG.sentryAppId,f).install(),e.raven.isSetup=!0,c.resolve(),c.promise},e.captureException=function(a){e.raven.isSetup?Raven.captureException(a):c.debug(a)},e.init=function(){var c=a.defer();return b.isChromeApp()?(c.resolve(),c.promise):(e.raven.init().then(function(){c.resolve()}),c.promise)},e}]),angular.module("App").factory("SRBlobService",function(){var a={};return a.arrayBufferToBase64=function(a){for(var b="",c=new Uint8Array(a),d=c.byteLength,e=0;d>e;e++)b+=String.fromCharCode(c[e]);return window.btoa(b)},a.getResponseType=function(){return window.URL?"blob":"arraybuffer"},a.get=function(b,c){return b?"blob"===c&&window.URL?window.URL.createObjectURL(b):"arraybuffer"===c?"data:image/png;base64,"+a.arrayBufferToBase64(b):null:null},a}),angular.module("App").factory("SRClockService",["$q","$log","SRDateService","$rootScope","SRNotificationService","SRUserService","$timeout","SRFaviconService","SRWeekConstants","SRBadgeService",function(a,b,c,d,e,f,g,h,i,j){var k={},l=null;return k.exectute=function(){var a=new Date;0===a.getSeconds()&&(b.debug("SRClockService: Execute actions",a,l),f.isLogged()&&e.checkForNotifications(),c.isSameDay(c.dateToCurrentTimezone(a),c.dateToCurrentTimezone(l))||d.$emit("onUpdate"),d.$emit("onClockUpdate"),h.setTodayIcon(),j.setBadgeDate(),l=a)},k.run=function(){var a=new Date,b=1e3*(60-a.getSeconds())-a.getMilliseconds();g(function(){k.exectute(),k.run()},b)},k.init=function(){var b=a.defer();return l=new Date,l.setSeconds(0),l.setMilliseconds(0),k.run(),b.resolve(),b.promise},k}]),angular.module("App").service("SRI18nService",["$q","$window","SRBrowserService","SRCacheService",function(a,b,c,d){var e={};return e._chrome={},b.i18n=b.i18n||{},e.replaceValue=function(a,b){if(b)if(_.isArray(b))for(var c=0;c<b.length;c++){var d=new RegExp("%@\\{"+(c+1)+"\\}","g");a=a.replace(d,b[c])}else(_.isString(b)||_.isNumber(b))&&(a=a.replace(/%@/g,b));return a},e.getMessage=function(a,c){var d,f=b.i18n.messages||{},g=b.i18n.defaultMessages||{};return f[a]&&f[a].message?(d=f[a].message,e.replaceValue(d,c)):g[a]&&g[a].message?(d=g[a].message,e.replaceValue(d,c)):void 0},e._chrome.getMessage=function(a,b){var c=chrome.i18n.getMessage(a);return e.replaceValue(c,b)},c.isChromeApp()&&_.extend(e,e._chrome),e}]),angular.module("App").factory("SRPostalService",["SRSocketService","SRStorageService","$q","$log","SRBrowserService","$injector","$rootScope","SRQQueuingService","SROccurrenceModel","$filter","SRCurrentService",function(a,b,c,d,e,f,g,h,i,j,k){g.$on("socket.reconnect",function(a,b){n.authenticate()});var l=function(a,b,c,d){var e=[],f=[],g=[],h=_.zipObject(_.pluck(a,"id"),a),i=_.zipObject(_.pluck(b,"id"),b),j=_.zipObject(_.pluck(c,"id"),c),k=_.zipObject(_.pluck(d,"id"),d);return _.each(c,function(a){_.hasPath(a,["recurrence","rules",0])||(k[a.id]&&!h[a.id]?g.push(a):!k[a.id]||i[a.id]||_.isEqual(a.startDate,h[a.id].startDate)||e.push({newOccurrence:a,oldOccurrence:h[a.id]}))}),_.each(a,function(a){if(!(_.hasPath(a,["recurrence","rules",0]||a.exception===!0)||i[a.id]||j[a.id]||_.isUndefined(a.userRsvpStatus))){if(_.getPath(a,"organizer.self")||_.getPath(a,"inviter.self"))return;f.push(a)}}),{created:g,changed:e,cancelled:f}},m=function(a,b,c,d){var e=l(a,b,c,d),g=f.get("SRI18nService"),h=[];_.each(e.created,function(a){var b=null,c=[],d=null;a.inviter&&a.inviter.name?d=a.inviter.name:a.organizer&&a.organizer.name&&(d=a.organizer.name),c.push(j("SRStringFilter_limitTo")(a.title,30,!0)),c.push(j("SRDateFilter_longDate")(a.startDate)),a.startDate&&!a.allDay?(c.push(j("SRDateFilter_timeFormat")(a.startDate,!0,!1,!1)),d?(c.push(d),b="INVITATION_DATE_ORGANIZER"):b="INVITATION_DATE"):d?(c.push(d),b="INVITATION_DAY_ORGANIZER"):b="INVITATION_DAY",h.push({messageId:b,values:c,occurrence:a,handleClick:!0})}),_.each(e.changed,function(a){var b=null,c=[],d=a.oldOccurrence,e=a.newOccurrence;if(c.push(j("SRStringFilter_limitTo")(e.title,30,!0)),e.allDay)b="INVITATION_CHANGE_DAY",c.push(j("SRDateFilter_longDate")(e.startDate));else{var f=moment(d.startDate).startOf("day").valueOf(),g=moment(e.startDate).startOf("day").valueOf(),i=60*moment(d.startDate).hours()+moment(d.startDate).minutes(),k=60*moment(e.startDate).hours()+moment(e.startDate).minutes();f!==g&&i!==k?(b="INVITATION_CHANGE_DATE",c.push(j("SRDateFilter_longDate")(e.startDate)),c.push(j("SRDateFilter_timeFormat")(e.startDate,!0,!1,!1))):f!==g?(b="INVITATION_CHANGE_DAY",c.push(j("SRDateFilter_longDate")(e.startDate))):(b="INVITATION_CHANGE_TIME",c.push(j("SRDateFilter_timeFormat")(e.startDate,!0,!1,!1)))}var l=!_.isEqual(e.place,d.place)&&!_.isEmpty(e.place);l&&(b+="_PLACE",c.push(e.place.description())),b&&h.push({messageId:b,values:c,occurrence:e,handleClick:!0})}),_.each(e.cancelled,function(a){h.push({messageId:"IS_CANCELLED",values:j("SRStringFilter_limitTo")(a.title,60,!0),occurrence:a,handleClick:!1})}),_.each(h,function(a){var b=f.get("SRNavigateToService"),c=f.get("SRNotificationService"),d={title:g.getMessage(a.messageId,a.values)};a.handleClick&&(d.events={onClick:function(){b.occurrence(a.occurrence,k.getCurrentLocation())}}),c.notify(d)})},n={};return n.isAuthenticated=!1,n.authenticate=function(){var f=c.defer();return e.hasWebSocket()&&a.isInitalized()?(b.get("accessToken",{noVersion:!0}).then(function(b){b?a.emit("authenticate",{accessToken:b},function(a){a?(d.debug("SRPostalService.authenticate(): %c"+a+".","color:red"),f.reject()):(d.debug("SRPostalService.authenticate(): %cSuccess!","color:green"),n.isAuthenticated=!0,f.resolve())}):(d.debug("SRPostalService.authenticate(): %caccessToken is missing","color:red"),f.reject())}),f.promise):(d.debug("SRPostalService.authenticate(): %cerror","color:red"),f.reject(),f.promise)},n.logout=function(){var b=c.defer();return n.isAuthenticated&&e.hasWebSocket()&&a.isInitalized()?(a.emit("logout",{},function(){d.debug("SRPostalService.logout(): %cSuccess!","color:green"),n.isAuthenticated=!1,b.resolve()}),b.promise):(b.resolve(),b.promise)},n.ping=function(){if(!e.hasWebSocket()||!a.isInitalized())return!1;var b=c.defer();return a.emit("echo","ping",function(a,c){a||!c?(d.debug("SRPostalService.ping(): %cError!","color:red"),b.reject()):"ping"===c&&(d.debug("SRPostalService.ping(): %cPong!","color:green"),b.resolve())}),b.promise},n.listen=function(){if(!n.isAuthenticated||!e.hasWebSocket()||!a.isInitalized())return d.debug("SRPostalService.listen(): %cuser is not authenticated || chrome app || !hasWebSocket","color:red"),!1;var b={};b.sync=function(a){d.debug("SRPostalService.Listen(): Updating %c"+a,"color:green");var b=f.get("SRCalendarModel"),c=f.get("SROccurrenceModel"),e=f.get("SRApiService");b.getById(a).then(function(b){if(b&&_.hasPath(b,"connectionId")&&_.getPath(b,"visible")===!0)if(b.reminders===!0){var d=h.createQueue();d.push([{task:c.getFilteredByMaxTimeWindow,context:c,arguments:[{useCache:!0}]},{task:c.getFilteredByRsvpNeeded,context:c,arguments:[{useCache:!0,calendarId:a}]},{task:e.calendars.refreshCalendar,context:e.calendars,arguments:[b.id,b.connectionId,!1,!1]},{task:c.getFilteredByMaxTimeWindow,context:c,arguments:[{useCache:!1}]},{task:c.getFilteredByRsvpNeeded,context:c,arguments:[{useCache:!0,calendarId:a}]}]),d.execute().then(function(a){m(a[0],a[1],a[3],a[4])})}else e.calendars.refreshCalendar(b.id,b.connectionId,!1,!1)})},b.meetConfirmation=function(a,b,c){d.debug("SRPostalService.Listen(): Confirming %c"+a,"color:green");var e=f.get("SRNotificationService");e.meets.notifyForConfirmation(a,b,c)},d.debug("SRPostalService.Listen(): %cListening","color:green"),a.on("message",function(a){a&&a.action&&("sync"===a.action&&a.calendarId?b.sync(a.calendarId):"meet:confirmed"===a.action&&a.meetId&&a.eventId&&a.calendarId&&b.meetConfirmation(a.meetId,a.eventId,a.calendarId))})},n.init=function(){var a=c.defer();return a.resolve(),a.promise},n}]),angular.module("App").factory("SRParserService",["$log",function(a){var b={},c=/^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/,d=/^(1[012]|\d):*([0-5]\d)*\s*(?:am|pm|a|p)?$/i,e=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,f=/(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/gm,g=new RegExp("^(?:(?:https?|ftp)://)?(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$","i");return b.isURL=function(a){return a&&_.isString(a)?g.test(a):!1},b.isTime=function(a,b){return a&&_.isString(a)?(a=a.toLowerCase(),b?c.test(a):d.test(a)):!1},b.isEmail=function(a){return a&&_.isString(a)?e.test(a):!1},b.getEmailsFromString=function(a){return a&&_.isString(a)?(a=a.toLowerCase(),a.match(f)):[]},b.getTimeFromString=function(a,b){var c=["h:ma","H:m"];a&&a.match(/^\d{3}(p|pm|a|am)?$/)&&(a=0+a);var d=moment(a,c);return b&&d.isValid()?moment(b).hours(d.hours()).minutes(d.minutes()).seconds(d.seconds()).toDate():d.isValid()?d.toDate():null},b}]),angular.module("App").factory("SRMigrateService",["$q","SRStorageService","SRDBService","SRCalendarModel","SRConnectionModel","SRSyncTokenModel","SRBrowserService",function(a,b,c,d,e,f,g){var h={};return h._tasks=[],h._keys=["migrated-to-8","migrated-to-5min-def-refreshtimer"],h._tasks.push(function(){var g=a.defer(),h="migrated-to-8";return a.all([b.get(h),b.get("accessToken",{noVersion:!0})]).then(function(i){var j=i[0],k=i[1];k?k&&!j?(c.openDatabase(),a.all([c.dropTables(["Contacts"]),b.get("calendars"),b.get("connections"),b.get("synctokens")]).then(function(b){var c=b[1]||{},g=b[2]||{},h=b[3]||{},i=_.reduce(c,function(a,b){return a.push(d.create(b)),a},[]),j=_.reduce(g,function(a,b){return a.push(e.create(b)),a},[]),k=_.reduce(h,function(a,b,c){var d=c.split(":");if(d.length>=2){var e={calendarId:c,connectionId:d.splice(0,2).join(":"),syncToken:b};a.push(f.create(e))}return a},[]);return a.all([d.save(i),e.save(j),f.save(k)])},g.reject).then(function(){return a.all([b.remove("calendars"),b.remove("connections"),b.remove("synctokens")])},g.reject).then(function(){return b.set(h,!0)}).then(g.resolve,g.reject)):g.resolve():b.set(h,!0).then(g.resolve,g.reject)}),g.promise}),h._tasks.push(function(){var c=a.defer(),d="migrated-to-5min-def-refreshtimer";return a.all([b.get(d),b.get("accessToken",{noVersion:!0})]).then(function(a){var e=a[0],f=a[1];f?f&&!e?b.set("refreshTimer",3e5).then(function(){return b.set(d,!0)},c.reject).then(c.resolve,c.reject):c.resolve():b.set(d,!0).then(c.resolve,c.reject)}),c.promise}),h.init=function(){var c=a.defer(),d=function(){var d=_.map(h._keys,function(a){return b.set(a,!0)});a.all(d).then(c.resolve,c.reject)};return g.isReady().then(function(a){return a?void b.get("accessToken",{noVersion:!0}).then(function(a){if(!a)return void d();var b=function(a,d){return a>=d.length?void c.resolve():void d[a]().then(function(){a+1>=d.length?c.resolve():b(a+1,d)},function(){c.reject("migration")})};b(0,h._tasks)}.bind(this),c.reject):void c.resolve()}.bind(this),c.reject),c.promise},h}]),angular.module("App").factory("SRSearchService",["$q","$window","SROccurrenceModel",function(a,b,c){var d={},e=16;return d.searchForString=function(d){var f=a.defer();return d&&""!==d?(c.getFilteredBetweenDates(CONFIG.calendarMinDate,CONFIG.calendarMaxDate,{useCache:!0}).then(function(a){var c=new b.Fuse(a,{keys:["title"],caseSensitive:!1,includeScore:!1,shouldSort:!0,threshold:.2,location:0,distance:500,maxPatternLength:e}),g=c.search(d.slice(0,e));f.resolve(g)},f.reject),f.promise):(f.resolve([]),f.promise)},d.searchForStringInPlaces=function(a,c){if(!a||""===a)return[];_.each(c,function(a){a.__description=a.description()});var d=new b.Fuse(c,{keys:["name","title","__description"],caseSensitive:!1,includeScore:!1,shouldSort:!0,threshold:.3,location:0,distance:30,maxPatternLength:e}),f=d.search(a.slice(0,e));return f=_.each(f,function(a){return _.omit(a,"__description")})},d}]),angular.module("App").factory("SRDebounceService",["$timeout","$q",function(a,b){return function(c,d){function e(){return j=d.apply(i,h),i=h=null,j}function f(b){k&&(a.cancel(k),k=null,b&&l.reject())}function g(){i=this,h=arguments,f(!0),l=b.defer();var d=l.promise.then(e);return k=a(l.resolve,c),d}var h,i,j,k,l;return g.flush=function(){i&&(f(!1),l.resolve())},g}}]),angular.module("App").factory("SROccurrenceEditConfirmService",["SRConfirmService","SRI18nService","$q","SROccurrenceModel","$timeout",function(a,b,c,d,e){var f=function(){};f.prototype._askForUpdateAttendeesConfirmation=function(d){var f=c.defer();if(_.hasPath(d,["attendees","data",0])&&d.editable){var g={title:b.getMessage("SEND_UPDATE"),msg:b.getMessage("SEND_NOTIF_TO_GUESTS"),onEscape:f.reject,actions:[{label:b.getMessage("SEND"),focus:!0,action:function(){f.resolve({skipNotificationEmail:!1})}},{label:b.getMessage("DONT_SEND"),cssClass:"btn--gray",action:function(){f.resolve({skipNotificationEmail:!0})}}]};e(function(){a.add(g)})}else f.resolve({skipNotificationEmail:!0});return f.promise},f.prototype.askForUpdateConfirmation=function(e){if(!e.instance)return this._askForUpdateAttendeesConfirmation(e);var f=c.defer(),g={title:b.getMessage("UPDATE_REC_EVT"),msg:b.getMessage("UPDATE_REC_EVT_MSG"),onEscape:f.reject,actions:[{label:b.getMessage("ONLY_THIS_EVENT"),focus:!0,action:function(){this._askForUpdateAttendeesConfirmation(e).then(function(a){a.recurringType=d.RECURRING_OPTION_ONLY,f.resolve(a)},f.reject)}.bind(this)},{label:b.getMessage("ALL_EVENTS"),action:function(){this._askForUpdateAttendeesConfirmation(e).then(function(a){a.recurringType=d.RECURRING_OPTION_ALL,f.resolve(a)},f.reject)}.bind(this)},{label:b.getMessage("CANCEL"),cssClass:"btn--gray",action:f.reject}]};return e.editable&&g.actions.splice(1,0,{label:b.getMessage("FOLLOWING_EVENTS"),action:function(){this._askForUpdateAttendeesConfirmation(e).then(function(a){a.recurringType=d.RECURRING_OPTION_FOLLOWINGS,f.resolve(a)},f.reject)}.bind(this)}),a.add(g),f.promise},f.prototype._askForDeleteAttendeesConfirmation=function(d){var f=c.defer(),g=_.hasPath(d,["attendees","data",0])&&d.editable;if(d.instance&&!g)return f.resolve({skipNotificationEmail:!0}),f.promise;var h={title:b.getMessage("DELETE_EVENT"),msg:b.getMessage("DELETE_EVENT_MSG",d.title||b.getMessage("UNTILTED")),onEscape:f.reject,actions:[{label:b.getMessage("DELETE"),focus:!0,action:function(){f.resolve({skipNotificationEmail:!0})}},{label:b.getMessage("CANCEL"),cssClass:"btn--gray",action:f.reject}]};return g&&(h=_.extend(h,{msg:b.getMessage("DELETE_EVET_MSG_ATTENDEES",d.title||b.getMessage("UNTILTED")),actions:[{label:b.getMessage("DELETE_AND_NOTIFY"),focus:!0,action:function(){f.resolve({skipNotificationEmail:!1})}},{label:b.getMessage("DELETE_WITHOUT_NOTIFY"),action:function(){f.resolve({skipNotificationEmail:!0})}},{label:b.getMessage("DONT_DELETE"),cssClass:"btn--gray",action:f.reject}]})),e(function(){a.add(h)}),f.promise},f.prototype.askForDeleteConfirmation=function(e){if(!e.instance)return this._askForDeleteAttendeesConfirmation(e);var f=c.defer();return a.add({title:b.getMessage("DELETE_RECURRING"),msg:b.getMessage("DELETE_RECURRING_MSG"),onEscape:f.reject,actions:[{label:b.getMessage("ONLY_THIS_EVENT"),focus:!0,action:function(){this._askForDeleteAttendeesConfirmation(e).then(function(a){a.recurringType=d.RECURRING_OPTION_ONLY,f.resolve(a)},f.reject)}.bind(this)},{label:b.getMessage("FOLLOWING_EVENTS"),action:function(){this._askForDeleteAttendeesConfirmation(e).then(function(a){a.recurringType=d.RECURRING_OPTION_FOLLOWINGS,f.resolve(a)},f.reject)}.bind(this)},{label:b.getMessage("ALL_EVENTS"),action:function(){this._askForDeleteAttendeesConfirmation(e).then(function(a){a.recurringType=d.RECURRING_OPTION_ALL,f.resolve(a)},f.reject)}.bind(this)},{label:b.getMessage("CANCEL"),cssClass:"btn--gray",action:f.reject}]}),f.promise};var g=new f;return g}]),angular.module("App").factory("SRErrorService",function(){var a={};return a._lastError=null,a._codes={ERROR_CANNOT_WRITE_LOCALSTORAGE:{code:100,description:"Could not write to local storage"},ERROR_DROP_DB:{code:101,description:"Error dropping database"},ERROR_CONNECT_INTERESTING_CALENDAR:{code:102,description:"Error connecting to interesting calendar"},ERROR_GET_PAGE_INTERESTING_CALENDAR:{code:103,description:"Error getting page of interesting calendar catalog"},ERROR_SUBSCRIBE_INTERESTING_CALENDAR:{code:104,description:"Error subscribing to interesting calendar"},ERROR_UNSUBSCRIBE_INTERESTING_CALENDAR:{code:105,description:"Error unsubscribing to interesting calendar"},ERROR_GET_FAVORITE_LOCATIONS:{code:106,description:"Error getting favorite locations"},ERROR_PUT_FAVORITE_LOCATION:{code:107,description:"Error creating favorite location"},ERROR_DELETE_FAVORITE_LOCATION:{code:108,description:"Error deleting favorite location"},ERROR_CREATE_DB:{code:109,description:"Error creating the database"}},a.setLastError=function(b){a._lastError=b},a.getLastError=function(){return a._lastError},a.getCode=function(b){return _.getPath(a._codes,[b,"code"])||"Unknown error"},a}),angular.module("App").factory("SRLazyLoadService",function(){var a={};return a.loadScript=function(a,b,c,d){b=b||null;var e=!1,f=document.createElement("script");f.type="text/javascript",b&&(f.id=b),f.async=!0,f.src=a,"function"==typeof c&&(f.onload=f.onreadystatechange=function(){e||this.readyState&&"complete"!==this.readyState||(e=!0,c.apply(d))});var g=document.getElementsByTagName("script")[0];g.parentNode.insertBefore(f,g)},a}),angular.module("App").factory("SRSocialShareService",["SRSanitizeService","SRLocationService","SRBrowserService","SRI18nService",function(a,b,c,d){var e="https://plus.google.com/share?",f="http://twitter.com/share?",g="https://www.facebook.com/dialog/feed?app_id="+CONFIG.facebookAppId+"&display=popup&redirect_uri="+a.prepareForUrl(CONFIG.prodUrl)+"&",h=function(){};h.prototype.share=function(a,b,c,d){switch(c){case"google":this.openGoogleShareWindow(a,b,d);break;case"twitter":this.openTwitterShareWindow(a,b,d);break;case"facebook":this.openFacebookShareWindow(a,b,d)}},h.prototype.openGoogleShareWindow=function(b,c,f){b=a.prepareForUrl(b||""),c=a.prepareForUrl(c||"");var g=e+"url="+c;this._openUrlWithOptions(g,d.getMessage("SHARE_ON_X","Google"),{width:600,height:600},f)},h.prototype.openTwitterShareWindow=function(b,c,e){b=a.prepareForUrl(b||""),c=a.prepareForUrl(c||"");var g=f+"url="+c+"&text="+b;this._openUrlWithOptions(g,d.getMessage("SHARE_ON_X","Twitter"),{width:640,height:258},e)},h.prototype.openFacebookShareWindow=function(b,c,e){b=a.prepareForUrl(b||""),c=a.prepareForUrl(c||"");var f=g+"link="+c+"&description="+b;this._openUrlWithOptions(f,d.getMessage("SHARE_ON_X","Facebook"),{width:640,height:400},e)},h.prototype._openUrlWithOptions=function(a,d,e,f){e=e||{},c.isMacApp()&&c.isMacAppVersionBelow(CONFIG.macPopupVersion)||c.isChromeApp()?b.openTo(a):b.openPopupTo(a,d,e)["finally"](function(){f()})};var i=new h;return i}]),angular.module("App").factory("SRCreateEventService",["SRCurrentService","SRDateService","$document","$timeout",function(a,b,c,d){var e=function(){};e.prototype.createNow=function(){a.navigation.today(),d(function(){var d,e,f,g=b.dateToCurrentTimezone(new Date),h=moment(g).startOf("day").valueOf();if("week"===a.getCurrentLocation()){var i=c.find('.sr-week-timed-interaction > .day[data-date = "'+h+'"]');if(0===i.length)return;d=i[0];var j=g.getTime(),k=j+36e5,l=864e5,m=(k-h)/l,n=$(d).height(),o=$(d).offset(),p=n*m+o.top;e=document.createEvent("MouseEvents"),e.initMouseEvent("mousedown",!0,!0,window,1,0,0,0,p,!1,!1,!1,!1,0,null),d.dispatchEvent(e),f=document.createEvent("MouseEvents"),f.initMouseEvent("mouseup",!0,!0,window,1,0,0,0,p,!1,!1,!1,!1,0,null),d.dispatchEvent(f)}else{var q=moment(g).format("MM/DD/YYYY");d=c.find('.month__day[data-date = "'+q+'"]')[0],e=document.createEvent("MouseEvents"),e.initMouseEvent("mousedown",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),d.dispatchEvent(e),f=document.createEvent("MouseEvents"),f.initMouseEvent("mouseup",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),c[0].dispatchEvent(f)}})};var f=new e;return f}]),angular.module("App").factory("SRBadgeService",["$q","$rootScope","SRBrowserService","SRSettingsService","SRUnreadNotificationService",function(a,b,c,d,e){var f=function(){};f.prototype.init=function(){return c.isMacApp()?(b.$watch(function(){return d.get("badge")},function(a,b){"date"===a?this.setBadgeDate():e.get().then(e.filterEventsNotifications).then(function(a){var b=_.isArray(a)?a.length:0,c=function(){return b?b+"":""}();this.setBadgeInvitation(c)}.bind(this))}.bind(this)),a.when()):a.when()},f.prototype.setBadgeDate=function(){if("date"===d.get("badge")){var a=(new Date).getDate();this._setBadgeValue(a)}},f.prototype.setBadgeInvitation=function(a){"invitation"===d.get("badge")&&this._setBadgeValue(a)},f.prototype._setBadgeValue=function(a){c.isMacApp()&&window.SunriseMacBridge.dock.setBadge(a)};var g=new f;return g}]),angular.module("App").factory("SRImageService",["$q","SRCacheService","SROnlineStatusService","SRBlobService","SRRequestService",function(a,b,c,d,e){var f=function(){};f.prototype.blobUrlFromUrl=function(f){var g=a.defer();if(!f)return g.resolve(),g.promise;if(b.get("images",f))return g.resolve(b.get("images",f)),g.promise;if(!c.isOnline())return g.resolve(),g.promise;var h={cache:!0,bypass:!0,responseType:d.getResponseType()};return e.get(f,h).then(function(a){var c=d.get(a,h.responseType);b.put("images",f,c),g.resolve(c)},function(a){b.put("images",f,null),g.reject(a)}),g.promise};var g=new f;return g}]),angular.module("App").factory("SRFaviconService",function(){var a="/images/favicons/",b=function(){this._currentDayNumber=-1,this._$element=[]};b.prototype.setTodayIcon=function(){var b=(new Date).getDate();if(this._currentDayNumber!==b){this._$element.length||(this._$element=$('[rel="shortcut icon"]'));var c="favicon_"+b+".png";this._$element.attr("href",a+c),this._currentDayNumber=b}};var c=new b;return c}),angular.module("App").factory("SRUUIDService",function(){var a=function(){};a.prototype.generate=function(a){for(var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c="",d=a-1;d>=0;d--){var e=Math.floor(Math.random()*b.length);c+=b.substring(e,e+1)}return c};var b=new a;return b}),angular.module("App").factory("SRUpgradeMessageService",["$q","$rootScope","SRI18nService","SRDBUpgradeService","SRLoadingService",function(a,b,c,d,e){var f=5e3,g=c.getMessage("UPGRADING"),h=function(){};h.prototype.init=function(){return d.hasPerformedSignificantUpgrade()&&this._startListening(),a.when()},h.prototype._onDidStartRefresh=function(){this._offDidStartRefresh(),this._offDidEndRefresh=b.$on("didEndRefresh",this._onDidEndRefresh.bind(this)),e.message.add(g,!0,f)},h.prototype._onDidEndRefresh=function(){this._offDidEndRefresh(),e.message.remove()},h.prototype._startListening=function(a){this._offDidStartRefresh=b.$on("didStartRefresh",this._onDidStartRefresh.bind(this));
};var i=new h;return i}]),angular.module("App").factory("SRBootstrapService",["$rootScope","$timeout","SRMainBootTaskService","SRAuxiliaryBootTaskService",function(a,b,c,d){var e=function(){};e.prototype.bootstrap=function(){var a=this._bootMainTask();return this._bindListeners(["didConnect","didLoadWeek","didLoadMonth"],function(){b(function(){this._bootAuxiliaryTask()}.bind(this),300)}.bind(this)),a},e.prototype._bootMainTask=function(){return c.boot()},e.prototype._bootAuxiliaryTask=function(){return d.boot()},e.prototype._bindListeners=function(b,c){var d=[];_.each(b,function(b){var e=a.$on(b,function(){_.each(d,function(a){a()}),c()});d.push(e)})};var f=new e;return f}]),angular.module("App").factory("SRMainBootTaskService",["$q","SRMigrateService","SRSettingsService","SRUserService","SRLocaleService","SRBridgeService","SRToggleSidebarService","SRTrackExceptionService","SRUserTimezoneService","SRCurrentService","SRDBUpgradeService","$rootScope","SRFaviconService","SRBadgeService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=function(){};o.prototype.boot=function(){var l=b.init().then(function(){return a.all([c.init(),d.init(),e.init()])}).then(function(){var b=[m.setTodayIcon(),n.init(),f.init(),g.init(),h.init(),i.init(),j.init()];return d.getAccessToken()&&b.push(k.upgrade()),a.all(b)});return l};var p=new o;return p}]),angular.module("App").factory("SRAuxiliaryBootTaskService",["$rootScope","$q","SRNotificationService","SRUserLocationService","SRUserPresenceService","SRClockService","SRShortcutService","SRMetricsService","SRRefreshService","SRBrowserService","SRSocketService","SRPostalService","SRUserService","SRDBUpgradeService","SRAnchormanService","SRManifestService","SRUpgradeMessageService","SROccurrenceLoaderService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=function(){};s.prototype.boot=function(){var a=n.upgrade().then(function(){return r.loadForNextMonthIfNeeded()}).then(function(){return b.all([this._loadPostal(),q.init(),c.init(),d.init(),e.init(),f.init(),g.init(),i.refresh(),h.events.on.appOpened(),o.show(),p.init()])}.bind(this));return a},s.prototype._loadPostal=function(){return k.init({url:CONFIG.postalUrl}).then(l.init).then(l.authenticate).then(l.listen)};var t=new s;return t}]),angular.module("App").factory("SROccurrenceColorService",["$rootScope","SRColorService","SRCacheService",function(a,b,c){var d=function(){};d.prototype.getOccurrenceColors=function(d){d=d||{},a.hasMeetReply&&(d.baseColor="DDD",d.calendarColor="DDD");var e=JSON.stringify(d);if(c.get("SROccurrenceColorService_colors",e))return c.get("SROccurrenceColorService_colors",e);var f=b.getBaseColor(d.baseColor),g=b.getBaseColor(d.baseColor,{isFocus:!0}),h=b.getBaseColor(d.baseColor,{isPast:!0}),i=b.getBackgroundColor(f),j=b.getBackgroundColor(g,{isFocus:!0}),k=b.getBackgroundColor(h,{isPast:!0}),l=b.getTextColorWithBackgroundColor(i),m=b.getTextColorWithBackgroundColor(i,{isFocus:!0}),n=b.getTextColorWithBackgroundColor(i,{isPast:!0}),o={background:{},border:{},text:{},iconic:{}};return o.background["default"]=function(){return d.noBackground?"transparent":d.isPast?k:i}(),o.background.focus=j,o.border["default"]=function(){return d.noBackground?"transparent":d.baseColor!==d.calendarColor?b.getBaseColor(d.calendarColor,{isPast:d.isPast}):f}(),o.border.focus=function(){return d.baseColor!==d.calendarColor?b.getBaseColor(d.calendarColor,{isFocus:!0}):j}(),o.text["default"]=d.isPast?l:n,o.text.focus=m,o.iconic["default"]=function(){return d.noBackground?b.prependPoundKey(d.baseColor):d.isPast?l:n}(),o.iconic.focus=m,c.put("SROccurrenceColorService_colors",e,o),o};var e=new d;return e}]),angular.module("App").factory("SROccurrenceLoaderService",["SRSettingsService","SROccurrenceModel","$q","$log",function(a,b,c,d){var e=function(){};e.prototype.loadForNextMonthIfNeeded=function(){var e="lastCalendarMaxDateTimestamp",f=a.get(e),g=new Date(f),h=CONFIG.calendarMaxDate;return h>g?b.regenerateInstancesBetweenDates(g,h).then(function(){a.set(e,h.getTime())},function(a){return d.error("Could not regenerate all Instances: ",a),c.reject(a)}):c.when()};var f=new e;return f}]),angular.module("App").factory("SRRequestService",["$http","$q","SRMessageService","$rootScope",function(a,b,c,d){function e(d){var e=b.defer(),f=function(a,b,c,d){e.resolve(a)},g=function(b,d,g,h){var i=0,j=[],k=function(){j.length>0&&c.add({msg:j.join(" "),closeable:!0}),e.reject(b)},l=function(){a(h).success(f).error(function(){i>2?k():(i++,l())})};return h.bypass?k():b&&b.meta?k():l(),e.promise};return d.success(function(a,b,c,d){a&&a.meta&&200!==a.meta.code?g(a,b,c,d):f(a,b,c,d)}).error(g),e.promise}var f={};return f.get=function(b,c){return e(a.get(b,c))},f.jsonp=function(b,c){return e(a.jsonp(b,c))},f.post=function(b,c,d){return e(a.post(b,c,d))},f.put=function(b,c,d){return e(a.put(b,c,d))},f.del=function(b,c){return e(a["delete"](b,c))},f}]),angular.module("App").factory("SRApiService",["$q","$log","SRMessageService","SROnlineStatusService","SRLocationService","SRRequestService","SRConnectionModel","SRUserService","$rootScope","SRDateService","SRSanitizeService","$queueFactory","$modal","SRLayerService","SRUnreadNotificationService","SRSyncingEventService","SRRefreshStatusService","SRBrowserService","SRSyncTokenModel","SRCalendarModel","SRSettingsService","SROccurrenceModel",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){i.$watch(function(){return d.onLine},function(a,b){a!==b&&d.onLine&&w.syncAll()});var w={_online:function(b){var c=a.defer();return d.isOnline()?b(c):c.resolve(),c.promise},_error:function(a){a=a||{};var c={code:a.code||500,message:a.errorMessage||a.error_message||a.message||"Server Error"};return b.warn("SRApiService._error()",c),b.debug("SRApiService._error()",a),c},user:{_getConnectUrl:function(a,b){var c=[];return c.push(CONFIG.apiUrl),c.push("/users/authenticate"),"email"!==a&&c.push("/"+a+"/authorize"),c.push("?redirectURI="),c.push(k.urlEncode(b)),c.join("")},connect:function(a){var b=r.isChromeApp()?"https://"+chrome.runtime.id+".chromiumapp.org/provider_cb":CONFIG.baseUrl+"/close",c=w.user._getConnectUrl(a,b);return f.get(c,{bypass:!0,withCredentials:!0,params:{preflight:!0}}),e.openAuthentificationPopup(c,a)},get:function(){return w._online(function(b){var c=CONFIG.apiUrl+"/users/me",d={headers:{Authorization:"Bearer "+h.getAccessToken()},timeout:3e4};f.get(c,d).then(function(c){if(c&&c.data){for(var d=_.map(c.data.connections,function(a){var b=_.cloneDeep(a);return delete b.calendars,b}),e={},f=0;f<c.data.connections.length;f++){var j=c.data.connections[f];if(_.isArray(j.calendars))for(var k=0;k<j.calendars.length;k++){var l=j.calendars[k];e[l.id]=!0}}t.getAll({useCache:!0}).then(function(b){for(var c={},f=0;f<b.length;f++){var h=b[f];c[h.connectionId]||(c[h.connectionId]=[]),c[h.connectionId].push(h.id)}return g.getAll({useCache:!0}).then(function(b){for(var f=[],g=[],h=[],i=[],j=0;j<b.length;j++){var k=b[j],l=_.find(d,function(a){return a.id===k.id});if(l)if(l&&!k.disconnected&&l.disconnected)h.push(k.id),f.push(v.getFilteredByConnectionId(k.id,{useCache:!0}));else{var m=c[k.id];if(m)for(var n=0;n<m.length;n++){var o=m[n];e[o]||i.push(o)}}else g.push(k.id),f.push(v.getFilteredByConnectionId(k.id,{useCache:!0}))}var p=a.defer();return p.resolve({toDeleteConnectionIds:g,newConnections:d,disconnectedConnectionIds:h,toRemoveCalendarIds:i,tasks:f}),p.promise})}).then(function(d){a.all(d.tasks).then(function(e){for(var f=[v.removeById(_.pluck(_.flatten(e),"id")),h.setUserId(c.data.id||null),h.setUserName(c.data.name||null),h.setUserLoginEmail(c.data.email||null),h.setPrivileges(c.data),g.save(g.create(d.newConnections)),g.removeById(d.toDeleteConnectionIds),w.calendars.hydrateCalendars(c.data.connections)],j=d.toDeleteConnectionIds.concat(d.disconnectedConnectionIds),k=0;k<j.length;k++){var l=j[k];f.push(s.removeFilteredByConnectionId(l)),f.push(t.removeFilteredByConnectionId(l))}for(var k=0;k<d.toRemoveCalendarIds.length;k++){var m=d.toRemoveCalendarIds[k];f.push(t.removeById(m))}a.all(f).then(function(){i.$emit("hasConnections"),b.resolve()})})})}else w._error(c),b.resolve()},function(a){w._error(a),b.resolve()})})},"delete":function(){return w._online(function(a){var b=CONFIG.apiUrl+"/users/me",c={headers:{Authorization:"Bearer "+h.getAccessToken()},timeout:3e4};f.del(b,c).then(function(b){b&&b.data?h.logout().then(a.resolve):(w._error(b),a.reject())},function(b){w._error(b),a.reject()})})},logout:function(){return w._online(function(a){var b=CONFIG.apiUrl+"/users/me/logout",c={headers:{Authorization:"Bearer "+h.getAccessToken()},timeout:3e4};f.post(b,{},c).then(function(b){b&&b.data?a.resolve():(w._error(b),a.reject())},function(b){w._error(b),a.reject()})})}},_syncQueue:l(),syncAll:function(){var c=a.defer();return w._syncQueue.enqueue(function(){return w._online(function(d){v.getFilteredBySyncNeeded({useCache:!0}).then(function(e){if(!(e&&e.length>0))return c.resolve(),d.resolve();var f=function(c,d,e){var f=a.defer(),g=function(){f.resolve()},h=[];return _.each(c,function(a){a.instance||(a.isNew&&"cancelled"!==a.status?h.push(w.events.create(a)):"cancelled"!==a.status||a.isNew?a.userRsvpStatusChanged?h.push(w.events.rsvp(a)):a.isNew?b.warn("SRApiService.syncAll(): %cUnable to sync event due to unknown operation","color:red",a):h.push(w.events.update(a)):h.push(w.events.remove(a)))}),b.debug("SRApiService.syncAll(): %cSyncing the following events: %c"+_.pluck(c,"title"),"color:green;","color:red"),a.all(h).then(function(a){v.removeById(_.pluck(c,"id")).then(function(){a=_.compact(_.flatten(a));var b=v.createFromJSON(a,{connectionId:e,calendarId:d});v["import"](b,{}).then(function(){i.$emit("onUpdate",{responses:a}),g()},g)},g)}),f.promise},g=_.groupBy(e,"calendarId"),h=[];p.set(_.pluck(e,"id")),_.each(g,function(a){a.length&&!_.isEmpty(a[0])&&h.push(f(a,a[0].calendarId,a[0].connectionId))}),a.all(h).then(function(){b.debug("SRApiService.syncAll(): %csync done","color:green;"),p.clear(),d.resolve(),c.resolve()})})})}),c.promise},refresh:function(a){return a=a||{},w._online(function(b){a.flushAll===!0?s.removeAll().then(function(){w.calendars.refreshVisibleCalendars(a).then(function(){h.setLastUpdate(),b.resolve()})},b.reject):w.calendars.refreshVisibleCalendars(a).then(function(){h.setLastUpdate(),b.resolve()},b.reject)})},connections:{addConnection:function(a,b){var c=w.connections._getAddConnectionUrl(a,{redirectURI:r.isChromeApp()?"https://"+w.chrome.runtime.id+".chromiumapp.org/provider_cb":CONFIG.baseUrl+"/close",accessToken:h.getAccessToken(),prefill:b});return f.get(c,{bypass:!0,withCredentials:!0,params:{preflight:!0}}),e.openAuthentificationPopup(c,a)},_getAddConnectionUrl:function(a,b){b=b||{};var c=[];return c.push(CONFIG.apiUrl+"/connections/"+k.urlEncode(a)+"/authorize"),_.isEmpty(b)||(c.push("?"),_.each(b,function(a,b){a&&(c.push(b+"="+k.urlEncode(a)),c.push("&"))}),c.splice(-1,1)),c.join("")},addConnectionWithToken:function(b,c){var d=a.defer(),e=CONFIG.apiUrl+"/connections/"+k.urlEncode(b)+"/token",g={connectionAccessToken:JSON.stringify(c)},i={headers:{Authorization:"Bearer "+h.getAccessToken()}};return f.put(e,g,i).then(function(a){d.resolve()},function(a){w._error(a),d.reject()}),d.promise},removeConnection:function(b){var c=a.defer(),d=CONFIG.apiUrl+"/connections/"+k.urlEncode(b.id),e={headers:{Authorization:"Bearer "+h.getAccessToken()}};return f.del(d,e).then(function(a){c.resolve()},function(a){w._error(a),c.reject()}),c.promise}},calendars:{refreshVisibleCalendars:function(b){b=b||{};var c=r.isIE(),d=t.getFilteredByVisible().then(function(d){var e=[];return _.each(d,function(a){e.push(w.calendars.refreshCalendar(a.id,a.connectionId,b.forceRequest,c))}),a.all(e)});return d.then(function(){c&&i.$emit("onUpdate")}.bind(this)),d},refreshCalendar:function(b,c,d,e){var j=a.defer(),k=function(){s.getByCalendarId(b).then(function(g){var l=CONFIG.apiUrl+"/calendars/"+encodeURIComponent(b)+"/events",m={headers:{Authorization:"Bearer "+h.getAccessToken(),"Cache-Control":"max-age=86400"},params:{syncToken:g&&g.syncToken?g.syncToken:void 0},timeout:3e4};d===!0&&(m.headers["Cache-Control"]="no-cache"),f.get(l,m).then(function(d){if(d&&d.data&&d.syncToken){var f=v.createFromJSON(d.data,{calendarId:b,connectionId:c});v["import"](f,{skipDelete:!g}).then(function(){var h=function(){return d.data.length&&g?v.notificationsForOccurrences(f):null}(),l=[];l.push(o.put(h)),!b.contains("meet")&&d.data.length&&g&&l.push(o.removeCancelled(d.data)),g?g.syncToken=d.syncToken:g=s.create({syncToken:d.syncToken,calendarId:b,connectionId:c}),l.push(g.save()),a.all(l).then(function(){return o.removeRespondedForCalendar(b)}).then(function(){d.data.length>0&&e===!1&&i.$emit("onUpdate"),d.data.length>0&&d.nextPage?k():(i.$emit("onCalendarRefresh",{calendarId:b,connectionId:c}),j.resolve())},j.resolve)},function(){j.resolve()})}else w._error(d),j.resolve()},function(a){w._error(a),j.resolve()})},function(){j.resolve()})};return g.getById(c).then(function(a){!a||a.disconnected||a.unavailable?j.resolve():k()}),q.calendars[b]=!0,j.promise["finally"](function(){q.calendars[b]=!1}),j.promise},hydrateCalendars:function(b){var c=a.defer(),d=_.cloneDeep(b),e=_.reduce(d,function(a,b){return(b.disconnected||b.unavailable)&&a.push(b.id),a},[]),f=_.reduce(d,function(a,b){return _.each(b.calendars,function(c){c.connectionId=b.id,a.push(c)}),a},[]);return t.getAll({useCache:!0}).then(function(a){if(a=_.zipObject(_.pluck(a,"id"),a),f=_.reduce(f,function(b,c,d){return void 0===c.visible&&(!a[c.id]||a[c.id].visible!==!0&&a[c.id].visible!==!1?c.visible=c.defaults&&_.isBoolean(c.defaults.visible)?c.defaults.visible:!1:c.visible=a[c.id].visible),void 0===c.reminders&&(!a[c.id]||a[c.id].reminders!==!0&&a[c.id].reminders!==!1?c.reminders=!_.isEmpty(c.defaults)&&_.isBoolean(c.defaults.reminders)?c.defaults.reminders:!1:c.reminders=a[c.id].reminders),b.push(c),b},[]),e.length){var b=_.reduce(a,function(a,b){return _.contains(e,b.connectionId)&&a.push(b),a},[]);f=_.extend(f,b)}var d=t.create(f);t.save(d).then(function(){u.get("defaultCalendar")||t.electDefaultCalendar(),i.$emit("hasCalendars"),c.resolve()})}),c.promise}},events:{create:function(b){var c=a.defer(),d=CONFIG.apiUrl+"/calendars/"+encodeURIComponent(b.calendarId)+"/events",e=b.json(),g={headers:{Authorization:"Bearer "+h.getAccessToken()}};return f.post(d,e,g).then(function(a){a&&a.data?(i.$emit("eventCreated",{event:a.data,id:e.id}),c.resolve(a.data)):(w._error(a),c.resolve(b))},function(a){a&&a.meta&&a.meta.code?a.meta.code>=500?(w._error(a),c.resolve(b)):409===a.meta.code?c.resolve():(w._error(a),c.resolve()):(w._error(a),c.resolve(b))}),c.promise},remove:function(b){var c=a.defer(),d=CONFIG.apiUrl+"/calendars/"+encodeURIComponent(b.calendarId)+"/events/"+encodeURIComponent(b.eventId),e={headers:{Authorization:"Bearer "+h.getAccessToken()}};return b.skipNotificationEmail&&(e.params=e.params||{},e.params.skipNotificationEmail=b.skipNotificationEmail),b.exceptionToDelete&&(e.params=e.params||{},e.params.parentId=b.sourceId,e.params.originalStart=function(){return b.allDay?moment.utc(b.originalStart).format("YYYY-MM-DD"):moment(b.originalStart).format()}()),f.del(d,e).then(function(a){a&&a.data?c.resolve(a.data):(w._error(a),c.resolve(b))},function(a){a&&a.meta&&a.meta.code?a.meta.code>=500?(w._error(a),c.resolve(b)):410===a.meta.code?c.resolve():(w._error(a),c.resolve()):(w._error(a),c.resolve(b))}),c.promise},update:function(b){var c=a.defer(),d=CONFIG.apiUrl+"/calendars/"+encodeURIComponent(b.calendarId)+"/events/"+encodeURIComponent(b.eventId),e=b.json(),g={headers:{Authorization:"Bearer "+h.getAccessToken()}};return f.put(d,e,g).then(function(a){a&&a.data?c.resolve(a.data):(w._error(a),c.resolve(b))},function(a){a&&a.meta&&a.meta.code?a.meta.code>=500?(w._error(a),c.resolve(b)):409===a.meta.code?(w.calendars.refreshCalendar(b.calendarId,b.connectionId,!0,!1),c.resolve(b)):(w._error(a),c.resolve()):(w._error(a),c.resolve(b))}),c.promise},rsvp:function(b){var c=a.defer(),d=CONFIG.apiUrl+"/calendars/"+encodeURIComponent(b.calendarId)+"/events/"+encodeURIComponent(b.eventId)+"/rsvp",e={status:b.userRsvpStatus};b.exception&&_.extend(e,{recurrence:b.recurrence});var g={headers:{Authorization:"Bearer "+h.getAccessToken()}};return f.put(d,e,g).then(function(a){a&&a.data?(b.exception?b=a.data:(b.updated=null,b.userRsvpStatusChanged=!1),c.resolve(b)):(w._error(a),c.resolve(b))},function(a){a&&a.meta&&a.meta.code?a.meta.code>=500?(w._error(a),c.resolve(b)):(w._error(a),c.resolve()):(w._error(a),c.resolve(b))}),c.promise},attendees:function(b,c){var d=a.defer(),e=CONFIG.apiUrl+"/calendars/"+encodeURIComponent(b.calendarId)+"/events/"+encodeURIComponent(b.eventId)+"/attendees";c=c||{};var g={headers:{Authorization:"Bearer "+h.getAccessToken()},params:c,cache:!0};return f.get(e,g).then(function(a){a&&a.data?d.resolve(a):(w._error(a),d.resolve())},function(a){w._error(a),d.resolve()}),d.promise}},meets:{create:function(b){var c=a.defer(),d=CONFIG.meetV1Url+"/meetings",e={headers:{Authorization:"Bearer "+h.getAccessToken(),Accept:"application/json"}};return f.post(d,b,e).then(function(a){a&&a.data?c.resolve(a.data):(w._error(a),c.reject())},function(a){w._error(a),c.reject()}),c.promise},update:function(b){var c=a.defer(),d=CONFIG.meetV1Url+"/meetings/"+k.urlEncode(b.id),e={headers:{Authorization:"Bearer "+h.getAccessToken(),Accept:"application/json"}};return f.put(d,b,e).then(function(a){a&&a.data?c.resolve(a.data):(w._error(a),c.reject())},function(a){w._error(a),c.reject()}),c.promise},confirm:function(b,c){var d=a.defer(),e=CONFIG.meetV1Url+"/meetings/"+k.urlEncode(b)+"/confirm",g={headers:{}};return h.isLogged()&&(g.headers.Authorization="Bearer "+h.getAccessToken()),f.post(e,c,g).then(function(a){a&&a.data?d.resolve(a.data):(w._error(a),d.reject())},function(a){a&&a.meta&&a.meta.code?a.meta.code>=500?(w._error(a),d.reject(a)):409===a.meta.code||410===a.meta.code?(w._error(a),d.reject(a)):(w._error(a),d.reject(a)):(w._error(a),d.reject())}),d.promise},get:function(b){var c=a.defer();b=b||{};var d=CONFIG.meetV1Url+"/meetings",e={headers:{Authorization:"Bearer "+h.getAccessToken()}};return _.isEmpty(b)||(e.params=b),f.get(d,e).then(function(a){a&&a.data?c.resolve(a.data):(w._error(a),c.reject())},function(a){w._error(a),c.reject()}),c.promise},getMeeting:function(b){var c=a.defer(),d=CONFIG.meetV1Url+"/meetings/"+k.urlEncode(b),e={headers:{}};return h.isLogged()&&(e.headers.Authorization="Bearer "+h.getAccessToken()),f.get(d,e).then(function(a){a&&a.data?c.resolve(a.data):(w._error(a),c.reject())},function(a){w._error(a),c.reject(a)}),c.promise},getSuggestedTimes:function(b){var c=a.defer(),d=CONFIG.meetV1Url+"/meetings/"+k.urlEncode(b)+"/suggestedTimes",e={headers:{}};return h.isLogged()&&(e.headers.Authorization="Bearer "+h.getAccessToken()),f.get(d,e).then(function(a){a&&a.data?c.resolve(a.data):(w._error(a),c.reject())},function(a){w._error(a),c.reject(a)}),c.promise},getConfirmedEvent:function(b,c){var d=a.defer(),e=null,f=function(){d.reject()},g=function(a){d.resolve(a)},h=function(b){var c=a.defer();return v.getById(b).then(function(a){a&&"confirmed"===a.status?c.resolve(a):c.reject()},c.reject),c.promise};return t.getById(c).then(function(b){var c=a.defer();return b?(e=b.connectionId,c.resolve(b)):c.reject(),c.promise},f).then(function(b){var c=a.defer();return b.visible?(c.resolve(),c.promise):(b.visible=!0,b.save().then(function(){i.$emit("hasCalendars"),i.$emit("onRsvp"),i.$emit("onUpdate"),c.resolve()},c.reject),c.promise)},f).then(function(){return h(b)},f).then(g,function(){w.calendars.refreshCalendar(c,e,!0,!1).then(function(){h(b).then(g,f)},f)}),d.promise}}};return"object"==typeof chrome&&chrome.storage?w.chrome=chrome:r.isMacApp()&&(w.mac=!0),i.$on("didCreateEvent",w.syncAll),i.$on("didUpdateEvent",w.syncAll),i.$on("didCancelEvent",w.syncAll),w}]),angular.module("App").factory("SRHttpRequestInterceptorService",["$q","SRUserService","SRMetricsService",function(a,b,c){return{request:function(a){a.headers=a.headers||{};var b=function(){return _.isString(_.getPath(a,"url"))&&a.url.startsWith(CONFIG.apiUrl)?!0:_.isString(_.getPath(a,"url"))&&a.url.startsWith(CONFIG.meetV1Url)?!0:_.isString(_.getPath(a,"url"))&&a.url.startsWith(CONFIG.anchormanUrl)?!0:!1}();return b&&(a.headers["User-TimeZone"]=CONFIG.userTimezone||"unknown",a.headers["User-Info"]=c.getUserInfoHeader()),a},response:function(a){if(a){var b=a.config||{};204!==a.status||"blob"!==b.responseType&&"arraybuffer"!==b.responseType||(a.data=null)}return a},responseError:function(c){return c.status&&401===c.status&&c.config&&c.config.url&&c.config.url.contains("/users/me")&&b.logout(),a.reject(c)}}}]),angular.module("App").factory("SRSyncingEventService",function(){var a={};return a._events=[],a.set=function(b){a._events=b},a.get=function(b){return a._events},a.clear=function(){a._events=[]},a}),angular.module("App").factory("SRSocketService",["$rootScope","$q","SRBrowserService","$log",function(a,b,c,d){var e={};return e._socket=null,e.on=function(b,c){e._socket.on(b,function(){var b=arguments;a.$apply(function(){c.apply(e._socket,b)})})},e.off=function(b,c){e._socket.removeListener(b,function(){var b=arguments;a.$apply(function(){c.apply(e._socket,b)})})},e.emit=function(b,c,d){e._socket.emit(b,c,function(){var b=arguments;a.$apply(function(){d&&d.apply(e._socket,b)})})},e.isInitalized=function(){return!!e._socket},e.init=function(f){var g=b.defer();return f=f||{},c.hasWebSocket()?(e._socket=io.connect(f.url,{transports:["websocket"]}),e._socket.on("connect",function(){d.debug("SRSocketService.init(): %cConnection success!","color:green"),g.resolve()}),e._socket.on("connect_error",function(a){d.debug("SRSocketService.init(): %cConnection error","color:red"),g.reject()}),e._socket.on("reconnect",function(b){a.$emit("socket.reconnect")})):g.reject(),g.promise},e}]),angular.module("App").factory("SRInterestingCalendarApiService",["SRRequestService","SRUserService","$q","SRSanitizeService","SRCalendarModel","SRConnectionModel",function(a,b,c,d,e,f){var g=function(){},h=3e4,i=CONFIG.apiUrl+"/connections/store/token",j=CONFIG.apiUrl+"/catalog",k=CONFIG.apiUrl+"/calendars",l=CONFIG.apiUrl+"/calendars";g.prototype.connect=function(){var d=c.defer(),e="ERROR_CONNECT_INTERESTING_CALENDAR",g={token:""},j={headers:{Authorization:"Bearer "+b.getAccessToken()},timeout:h};return a.put(i,g,j).then(function(a){var b=_.getPath(a,"data");if(_.hasPath(b,"id")&&!_.isUndefined(b.id)){var c=f.create(b);d.resolve(c)}else d.reject(e)},function(){d.reject(e)}),d.promise},g.prototype.getPage=function(e){var f=c.defer(),g="ERROR_GET_PAGE_INTERESTING_CALENDAR",i=j;e&&(i=[i,d.urlEncode(e)].join("/"));var k=CONFIG.userLang.toLowerCase();-1===k.indexOf("-")&&(k=[k,k].join("-"));var l={headers:{Authorization:"Bearer "+b.getAccessToken(),"Accept-Language":k},timeout:h};return a.get(i,l).then(function(a){f.resolve(_.getPath(a,"data"))},function(){f.reject(g)}),f.promise},g.prototype.subscribe=function(d,f){var g=c.defer(),i="ERROR_SUBSCRIBE_INTERESTING_CALENDAR";if(!d||!f)return g.reject(i),g.promise;var j={connectionId:d,catalogId:f},l={headers:{Authorization:"Bearer "+b.getAccessToken()},timeout:h};return a.post(k,j,l).then(function(a){var b=_.getPath(a,"data");_.extend(b,_.getPath(b,"defaults")),b.connectionId=b.id.split(":").slice(0,2).join(":");var c=e.create(b);g.resolve(c)},function(){g.reject(i)}),g.promise},g.prototype.unsubscribe=function(d,e){var f=c.defer(),g="ERROR_UNSUBSCRIBE_INTERESTING_CALENDAR";if(!d||!e)return f.reject(g),f.promise;var i=l,j=[d,e].join(":");i=[i,j].join("/");var k={headers:{Authorization:"Bearer "+b.getAccessToken()},timeout:h};return a.del(i,k).then(function(a){f.resolve()},function(){f.reject(g)}),f.promise};var m=new g;return m}]),angular.module("App").factory("SRFavoriteLocationApiService",["$q","SRUserService","SRRequestService","SRFavoritePlaceModel","SRSanitizeService",function(a,b,c,d,e){var f=3e4,g=CONFIG.favoriteLocationUrl+"/users/me/locations",h=CONFIG.favoriteLocationUrl+"/users/me/locations/",i=CONFIG.favoriteLocationUrl+"/users/me/locations/",j="eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJ1c2VySWQiOiI1NGMxNTQ4YWYzYjNjMjAzMDBkNTlmYTEiLCJzZXNzaW9uSWQiOiJwaXdkNG8iLCJpYXQiOjE0MjE5NTYyMzQsImV4cCI6MTQ1MzQ5MjIzNH0.MEQCIEMBfJSomy5LoaUpBIDrS3mflb4Z68xi_EdBnZzJsgSNAiBlW3aYKPtGlA2yRcW9C3JGIv20Zzdu0toQ3TNxTTSW6A",k=function(){};k.prototype.getLocations=function(){var b=a.defer(),e={headers:{Authorization:"Bearer "+j},timeout:f};return c.get(g,e).then(function(a){var c=d.createFromJSON(_.getPath(a,"data"));b.resolve(c)},function(){b.reject("ERROR_GET_FAVORITE_LOCATIONS")}),b.promise},k.prototype.createLocation=function(b){var g="ERROR_PUT_FAVORITE_LOCATION",i=a.defer();if(!b)return i.reject(g),i.promise;var k={headers:{Authorization:"Bearer "+j},timeout:f},l=b.json(),m=h+e.urlEncode(b.id);return c.put(m,l,k).then(function(a){var b=d.createFromJSON(_.getPath(a,"data"));i.resolve(b)},function(){i.reject(g)}),i.promise},k.prototype.deleteLocation=function(b){var g="ERROR_DELETE_FAVORITE_LOCATION",h=a.defer();if(!b)return h.reject(g),h.promise;var k={headers:{Authorization:"Bearer "+j},timeout:f},l=i+e.urlEncode(b);return c.del(l,k).then(function(a){var b=d.createFromJSON(_.getPath(a,"data"));h.resolve(b)},function(){h.reject(g)}),h.promise};var l=new k;return l}]),angular.module("App").factory("SRAnchormanApiService",["$q","SRRequestService","SRUserService","SRSanitizeService","SRStorageService","SRConnectionModel",function(a,b,c,d,e,f){var g="anchormanNews",h=3e4,i=function(){};i.prototype.getLatestNews=function(){var d=a.all([this._getStoredNews(),this._getConnectionsTypes()]).then(function(a){var d=a[0],e=a[1],f=CONFIG.anchormanUrl+"/news",g={headers:{Authorization:"Bearer "+c.getAccessToken()},params:{since:_.last(d),saw:_.isEmpty(d)?void 0:d.join(","),connections:e},timeout:h};return b.get(f,g)}.bind(this)).then(function(b){return b&&_.hasPath(b,"data.id")?_.getPath(b,"data"):a.reject()});return d},i.prototype.markNewsAsSeen=function(a){var e=CONFIG.anchormanUrl+"/news/"+d.urlEncode(a)+"/seen",f={headers:{Authorization:"Bearer "+c.getAccessToken()},params:{newsId:a},timeout:h};return this._storeNewsId(a),b.post(e,{},f)},i.prototype.markNewsAsUnseen=function(a){var e=CONFIG.anchormanUrl+"/news/"+d.urlEncode(a)+"/seen",f={headers:{Authorization:"Bearer "+c.getAccessToken()},params:{newsId:a},timeout:h};return this._removeNewsId(a),b.del(e,f)},i.prototype._getStoredNews=function(){return e.get(g).then(function(a){return _.isArray(a)?a:[]})},i.prototype._storeNewsId=function(a){return this._getStoredNews().then(function(b){return b.push(a),e.set(g,b)})},i.prototype._removeNewsId=function(a){return this._getStoredNews().then(function(b){return b=_.without(b,a),e.set(g,b)})},i.prototype._getConnectionsTypes=function(){return f.getAll({useCache:!0}).then(function(a){return _.pluck(_.uniq(a,"type"),"type").join(",")})};var j=new i;return j}]),angular.module("App").factory("SRAnchormanService",["SRAnchormanApiService","SRAnchormanBannerService","$q","SRUserService","$timeout","SRLayerService","$modal","$document",function(a,b,c,d,e,f,g,h){var i=function(){this._news=null};i.prototype.show=function(){var e=c.defer();return!d.getAccessToken()||this._news?(e.resolve(!1),e.promise):(this._news=!0,a.getLatestNews().then(function(c){if(this._news=c,_.hasPath(this._news,"banner")){var d=this._news.banner;b.showBanner(d,function(b){a.markNewsAsSeen(this._news.id),b?this._showModal():this._news=null}.bind(this))}e.resolve(!0)}.bind(this),function(){this._news=null,e.reject()}.bind(this)),e.promise)},i.prototype._showModal=function(){if(!_.hasPath(this._news,["modals",0]))return void(this._news=null);var a=g.open({templateUrl:CONFIG.preparePartialTemplateUrl("anchorman-modal"),windowClass:"modal modal--anchorman fade scale",controller:"SRAnchormanModalCtrl",resolve:{contents:function(){return this._news.modals}.bind(this)}});a.opened.then(function(){e(function(){var a=h.find(".modal--anchorman");f.add(a,{focusOnRemove:!0})})}),a.result.then(this._onDismiss.bind(this),this._onDismiss.bind(this))},i.prototype._onDismiss=function(){f.remove(),this._news=null};var j=new i;return j}]),angular.module("App").factory("SRAnchormanBannerService",function(){var a=function(){this._currentBanner=null,this._currentCallback=null};a.prototype.showBanner=function(a,b){this._currentBanner=a,this._currentCallback=b},a.prototype.hideBanner=function(a){this._currentBanner=null,this._currentCallback=null},a.prototype.getBanner=function(){return this._currentBanner},a.prototype.getCallback=function(){return this._currentCallback};var b=new a;return b}),angular.module("App").factory("SRStorageService",["$rootScope","$q","$injector","SRTrackExceptionService",function(a,b,c,d){var e="sunrise-",f={_prefixKey:function(a,b){return e+(b?"":CONFIG.storageVersion+"-")+a}};return f._chromeStorage={get:function(c,d){var e=b.defer();return d=d||{},c=f._prefixKey(c,d.noVersion),f._chromeStorage._chrome.storage.local.get(c,function(b){var d=f._chromeStorage._chrome.runtime.lastError;if(d)e.resolve(void 0);else{var g=b[c];e.resolve(g)}a.$digest()}),e.promise},set:function(c,d,e){var g=b.defer();e=e||{},c=f._prefixKey(c,e.noVersion);var h={};return h[c]=d,f._chromeStorage._chrome.storage.local.set(h,function(){var b=f._chromeStorage._chrome.runtime.lastError;b?g.reject(b):g.resolve(d),a.$digest()}),g.promise},remove:function(c,d){var e=b.defer();return d=d||{},c=f._prefixKey(c,d.noVersion),f._chromeStorage._chrome.storage.local.remove(c,function(){var b=f._chromeStorage._chrome.runtime.lastError;b?e.reject(b):e.resolve(),a.$digest()}),e.promise},flush:function(){var c=b.defer();return f._chromeStorage._chrome.storage.local.clear(function(){var b=f._chromeStorage._chrome.runtime.lastError;b?c.reject(b):c.resolve(),a.$digest()}),c.promise}},f._localStorage={get:function(a,c){var d=b.defer();c=c||{},a=f._prefixKey(a,c.noVersion);var e=f._localStorage._storage.getItem(a);if(e)try{d.resolve(JSON.parse(e))}catch(g){d.resolve(void 0)}else d.resolve(void 0);return d.promise},set:function(a,c,d){var e=b.defer();d=d||{};try{a=f._prefixKey(a,d.noVersion),f._localStorage._storage.setItem(a,JSON.stringify(c)),e.resolve(c)}catch(g){e.reject()}return e.promise},remove:function(a,c){var d=b.defer();c=c||{};try{a=f._prefixKey(a,c.noVersion),f._localStorage._storage.removeItem(a),d.resolve()}catch(e){d.reject()}return d.promise},flush:function(){var a=b.defer(),c=_.keys(f._localStorage._storage);return _.each(c,function(a){0===a.indexOf(e)&&f._localStorage._storage.removeItem(a)}),a.resolve(),a.promise}},"object"==typeof chrome&&chrome.storage?(f._chromeStorage._chrome=chrome,_.extend(f,f._chromeStorage)):(f._localStorage._storage=localStorage,_.extend(f,f._localStorage)),f}]),angular.module("App").factory("SRDBService",["$window","$rootScope","SRBrowserService","SRIndexedDBStore","SRWebSQLStore","$q","$log",function(a,b,c,d,e,f,g){var h=function(){this._isDBOpen=!1,this.version=null,this.oldVersion=null};h.prototype.WEB_SQL=1,h.prototype.INDEXED_DB=2,h.prototype.NO_DATABASE=3,h._storesCache={},h.prototype.getServiceType=function(){return void 0===this._serviceType&&(c.hasIndexedDB()?this._serviceType=this.INDEXED_DB:c.hasWebSQL()?this._serviceType=this.WEB_SQL:this._serviceType=this.NO_DATABASE),this._serviceType},h.prototype.openDatabase=function(){if(this.getServiceType()===this.WEB_SQL&&!a.webSQLDB){if(window.openDatabase){var c=window.openDatabase;window.openDatabase=function(){var a=c.apply(window,arguments),b=a.transaction,d=a.readTransaction;return a.transaction=function(a,c,d){var e=this,f=arguments,g=!1;b.call(e,function(b){g=!0,a(b)},function(a){a&&a.code&&4===a.code,void 0!==c&&c(null,a)},function(a){return g?void(void 0!==d&&d(a)):void b.apply(e,f)})},a.readTransaction=function(a,b,c){var e=this,f=arguments,g=!1;d.call(e,function(b){g=!0,a(b)},function(a){void 0!==b&&b(null,a)},function(a){return g?void(void 0!==c&&c(a)):void d.apply(e,f)})},a}}a.webSQLDB=a.openDatabase&&a.openDatabase("SR","","SR  DB",20971520)||!1;
}return this._isDBOpen||(b.$emit("DBIsOpen"),this._isDBOpen=!0),a.webSQLDB},h.prototype.dropDatabase=function(){this.dropTables(["Calendar","Connection","Contact","Occurrences","Synctoken","Occurrence"])},h.prototype.dropTables=function(c){var d=f.defer();if(this.getServiceType()===this.WEB_SQL)if(a.webSQLDB){var e,h=_.map(c,function(a){return"DROP TABLE IF EXISTS "+a+";"}),i=_.after(c.length,function(){e?(g.debug("DB drop:",e),SRMessageService.add({msg:""+e,closeable:!0}),d.reject(e)):d.resolve(),b.$digest()}),j=function(a,b){e=b,i()},k=function(a){g.debug("WebSQL DB drop:",a),d.reject(a),b.$apply()},l=a.webSQLDB;l.transaction(function(a){for(var b=0;b<h.length;b++)a.executeSql(h[b],[],i,j)},k)}else d.reject();else if(this.getServiceType()===this.INDEXED_DB){for(var m=0;m<c.length;m++)indexedDB.deleteDatabase("sr-"+c[m]);d.resolve()}else d.reject();return d.promise},h.prototype.getStore=function(a){if(!h._storesCache[a.name]){var b=this.getServiceType();if(b===this.INDEXED_DB)var c=new d(a);else if(b===this.WEB_SQL)var c=new e(a);h._storesCache[a.name]=c}return h._storesCache[a.name]};var i=new h;return i}]),angular.module("App").factory("SRDBStore",["$q","$rootScope",function(a,b){var c=function(){};return c._CONFIG_CONSTRAINTS={prefix:{},version:{numericality:{onlyInteger:!0,greaterThanOrEqual:0,noStrings:!1}},skeleton:{presence:!0},id:{presence:!0},indexes:{indexes:void 0}},c._GETALL_OPTIONS_CONSTRAINTS={fields:{presence:!0,fields:void 0},limit:{numericality:{onlyInteger:!0,greaterThan:0,noStrings:!1}},order:{order:void 0},filters:{filters:void 0},iterateChecks:{}},c._COUNT_OPTIONS_CONSTRAINTS={fields:{presence:!0,fields:void 0},filters:{filters:void 0}},c.prototype.init=function(b){var d=validate(b,c._CONFIG_CONSTRAINTS);if(d){var e=a.defer();return e.reject(d),e.promise}},c.prototype.get=function(a){},c.prototype.getOnIndex=function(a){},c.prototype.getAll=function(b){if(b){var d=validate(b,c._GETALL_OPTIONS_CONSTRAINTS);if(d){var e=a.defer();return e.reject(d),e.promise}}},c.prototype.save=function(a){},c.prototype.remove=function(a){},c.prototype.removeAll=function(){},c.prototype.count=function(b){if(b){var d=validate(b,c._COUNT_OPTIONS_CONSTRAINTS);if(d){var e=a.defer();return e.reject(d),e.promise}}},c._initializeValidator=function(){validate.validators.order=function(a,b,c,d){return _.isString(a)?void 0:"Not an array"},validate.validators.filters=function(a,b,c,d){if(_.isObject(a)){var e=_.keys(a);e=_sortBy(e,function(a){return a});var f=["lower","excludeLower","excludeUpper","upper"],a=["value"];if(_.isEqual(e,f)){if(_.isArray(a.lower)&&_.isArray(a.upper)&&_.isBoolean(a.excludeLower)&&_.isBoolean(a.excludeUpper))return;return"invalid values for keyRange"}if(_.isEqual(e,a)){if(_.isArray(a.value))return;return"value should be an array"}return"should contain all keys"}return"Not an object"},validate.validators.indexes=function(a,b,c,d){if(!_.isArray(a))return"Not an array";for(var e=0;e<a.length;e++){var f=_.keys(a[e]);if(_.isEqual(f),["fields"])return;return"No fields"}},validate.validators.fields=function(a,b,c,d){if(!_.isArray(a))return"Not an array";for(var e=0;e<a.length;e++)if(!_.isString(a[e]))return"field is not a String"}},c._initializeValidator(),c}]),angular.module("App").factory("SRIndexedDBStore",["SRDBStore","$q","$log","SRMessageService","SRBrowserService","$rootScope","SRI18nService","SRQCancellableService",function(a,b,c,d,e,f,g,h){var i=function(b){a.call(this),this._config=b,this._IDBStore=null,this._ready=!1,this._initializing=!1,this._readyCBs=[],this._currentQueryFilter=null,this.dbVersion=null,this.dbOldVersion=null};return i._ORDERS_MAP={Increasing:"ASC",Decreasing:"DESC"},i._OPERATORS_MAP={"=":function(a,b){return _.isEqual(a,b)},"!=":function(a,b){return!_.isEqual(a,b)},">":function(a,b){return a>b},">=":function(a,b){return a>=b},"<":function(a,b){return b>a},"<=":function(a,b){return b>=a},IN:function(a,b){var c=_.find(b,function(b){return _.isEqual(a,b)});return c?!0:!1},"NOT IN":function(a,b){var c=_.find(b,function(b){return _.isEqual(a,b)});return c?!1:!0},NULL:function(a,b){return void 0===a||null===a||_.isEqual(a,{})},"NOT NULL":function(a,b){return void 0!==a&&null!==a&&!_.isEqual(a,{})}},i._INDEX_JOINT="@",i.prototype=new a,i.prototype._compiledConfig=function(a){for(var b=a.prefix?a.prefix:"sr-",c=a.version?a.version:CONFIG.dbVersion,d={storeName:a.name,storePrefix:b,dbVersion:c,keyPath:a.id,autoIncrement:!1,indexes:[]},e=0;e<a.indexes.length;e++){var f=a.indexes[e],g={name:f.fields.join(i._INDEX_JOINT),keyPath:f.fields.length>1?f.fields:f.fields[0],unique:!1,multiEntry:!1};d.indexes.push(g)}return d},i.prototype._onceStoreReady=function(a,b){var c;c=void 0===b?a:function(){_.getPath(b,"cancelled")!==!0&&a()},this._ready?c():this._readyCBs.push(c)},i.prototype._keyRanges=function(a){return void 0!=a.only?this._IDBStore.makeKeyRange({only:a.only.length>1?a.only:a.only[0]}):(a.lower&&(a.lower=a.lower.length>1?a.lower:a.lower[0]),a.upper&&(a.upper=a.upper.length>1?a.upper:a.upper[0]),this._IDBStore.makeKeyRange(a))},i.prototype._isFiltersSupported=function(a,b){if(e.isIE()){if((_.getPath(a,["only","length"])||0)>1||(_.getPath(a,["lower","length"])||0)>1||(_.getPath(a,["upper","length"])||0)>1)return!1;if((_.getPath(b,"length")||0)>0&&0===(_.getPath(a,["only","length"])||0)&&0===(_.getPath(a,["lower","length"])||0)&&0===(_.getPath(a,["upper","length"])||0))return!1}return!0},i.prototype._filterObjectsWithOnlyFilters=function(a,b,c){if(!b)return a;var d=b.length;return a=_.filter(a,function(a){for(var e=0;d>e;e++){var f=c[e].split("."),g=_.getPath(a,f);if(!_.isEqual(g,b[e]))return!1}return!0})},i.prototype._filterObjectsWithBoundFilters=function(a,b,c){var d=_.hasPath(b,["lower",0]),e=_.hasPath(b,["upper",0]);if(!d&&!e)return a;var f=Math.max(_.getPath(b,["lower","length"])||0,_.getPath(b,["upper","length"])||0),g=_.map(c,function(a){return a.split(".")});return a=_.filter(a,function(a){if(d){if(b.excludeLower&&!(_.getPath(a,g[0])>b.lower[0]))return!1;for(var c=0;f>c;c++){var h=_.getPath(a,g[c]),i=b.lower[c];if(h>i)break;if(i>h)return!1}}if(e){if(b.excludeUpper&&!(_.getPath(a,g[0])<b.upper[0]))return!1;for(var c=0;f>c;c++){var h=_.getPath(a,g[c]),i=b.upper[c];if(i>h)break;if(h>i)return!1}}return!0})},i.prototype._filterObjectsWithoutFilter=function(a,b){return 0===(_.getPath(b,"length")||0)?a:a=_.reject(a,function(a){for(var c=0;c<b.length;c++){var d=b[c].split("."),e=_.getPath(a,d);if(_.isUndefined(e)||_.isNull(e))return!0}return!1})},i.prototype._filterObjectsWithFilters=function(a,b,c){return a=[].concat(a),(_.getPath(c,"length")||0)>0&&0===(_.getPath(b,["only","length"])||0)&&0===(_.getPath(b,["lower","length"])||0)&&0===(_.getPath(b,["upper","length"])||0)?a=this._filterObjectsWithoutFilter(a,c):(a=this._filterObjectsWithOnlyFilters(a,_.getPath(b,"only"),c),a=this._filterObjectsWithBoundFilters(a,b,c)),a},i.prototype._checkIterate=function(a,b){if(_.isArray(b)){for(var c=!0,d=0;d<b.length;d++){var e=b[d],f=i._OPERATORS_MAP[e.operator];if(!f(_.getPath(a,e.field),e.value)){c=!1;break}}return c?!0:!1}return!0},i.prototype._getCancellablePromise=function(a,b){var d=h.wrap(a,function(){if(void 0!==b&&(b.cancelled=!0),_.hasPath(b,"transaction")&&_.getPath(b,"failed")!==!0&&_.getPath(b,"completed")!==!0)try{b.transaction.abort()}catch(a){c.debug("SRIndexedDBStore > Exception: abort transaction:",a)}});return d},i.prototype._getErrorCallback=function(a,b){return function(c){_.getPath(a,"cancelled")!==!0&&(void 0!==a&&(a.failed=!0),b.reject(c),f.$apply())}.bind(this)},i.prototype._getSuccessCallback=function(a,b){return function(c){_.getPath(a,"cancelled")!==!0&&(void 0!==a&&(a.completed=!0),b.resolve(c),f.$apply())}.bind(this)},i.prototype._getOne=function(a){var c=b.defer(),d={},e=this._getCancellablePromise(c.promise,d);return this._onceStoreReady(function(){d.transaction=this._IDBStore.get(a,this._getSuccessCallback(d,c),this._getErrorCallback(d,c))}.bind(this),d),e},i.prototype._getBatch=function(a){var c=b.defer(),d={},e=this._getCancellablePromise(c.promise,d);return a&&0===a.length?(c.resolve([]),e):(this._onceStoreReady(function(){d.transaction=this._IDBStore.getBatch(a,this._getSuccessCallback(d,c),this._getErrorCallback(d,c),"skip")}.bind(this),d),e)},i.prototype._getAll=function(){var a=b.defer(),c={},d=this._getCancellablePromise(a.promise,c);return this._onceStoreReady(function(){c.transaction=this._IDBStore.getAll(this._getSuccessCallback(c,a),this._getErrorCallback(c,a))}.bind(this),c),d},i.prototype._getAllFiltered=function(a){var c=b.defer(),d={},e=this._getCancellablePromise(c.promise,d);return this._onceStoreReady(function(){var b={filterDuplicates:!1};if(b.index=a.fields.join(i._INDEX_JOINT),a.order&&(b.order=i._ORDERS_MAP[a.order]),a.filters){var e=this._keyRanges(a.filters);b.keyRange=e}var f=[];if(a.iterateChecks||a.limit){var g=0,h=function(b,c,d){a.limit&&g>=a.limit||(this._checkIterate(b,a.iterateChecks)&&(f.push(b),g++),c["continue"]())}.bind(this);b.writeAccess=!1,b.autoContinue=!1,b.onError=this._getErrorCallback(d,c),b.onEnd=this._getSuccessCallback(d,c).bind(this,f),d.transaction=this._IDBStore.iterate(h,b)}else b.onError=this._getErrorCallback(d,c),d.transaction=this._IDBStore.query(this._getSuccessCallback(d,c),b)}.bind(this),d),e},i.prototype._getAllFilteredLegacy=function(a){a=a||{};var b=this._getAll().then(function(b){if(0===_.getPath(a,["fields","length"]||0))return b;if(b=this._filterObjectsWithFilters(b,a.filters,a.fields),a.order){var c=a.fields.length,d=_.map(a.fields,function(a){return a.split(".")});b.sort(function(a,b){for(var e=0;c>e;e++){var f=_.getPath(a,d[e]),g=_.getPath(b,d[e]);if(!_.isEqual(f,g))return f>g?1:-1}return 0}),"Decreasing"===a.order&&b.reverse()}return a.iterateChecks&&(b=_.filter(b,function(b){return this._checkIterate(b,a.iterateChecks)}.bind(this))),a.limit&&(b=b.splice(0,a.limit)),b}.bind(this));return b},i.prototype._saveOne=function(a){var c=b.defer(),d={},e=this._getCancellablePromise(c.promise,d);return this._onceStoreReady(function(){d.transaction=this._IDBStore.put(a,this._getSuccessCallback(d,c).bind(this,!0),this._getErrorCallback(d,c))}.bind(this),d),e},i.prototype._saveBatch=function(a){var c=b.defer(),d={},e=this._getCancellablePromise(c.promise,d);return a&&0===a.length?(c.resolve(!0),c.promise):(this._onceStoreReady(function(){d.transaction=this._IDBStore.putBatch(a,this._getSuccessCallback(d,c).bind(this,!0),this._getErrorCallback(d,c))}.bind(this),d),e)},i.prototype._removeOne=function(a){var c=b.defer(),d={},e=this._getCancellablePromise(c.promise,d);return this._onceStoreReady(function(){d.transaction=this._IDBStore.remove(a,this._getSuccessCallback(d,c).bind(this,!0),this._getErrorCallback(d,c))}.bind(this),d),e},i.prototype._removeBatch=function(a){var c=b.defer(),d={},e=this._getCancellablePromise(c.promise,d);return a&&0===a.length?(c.resolve(!1),c.promise):(this._onceStoreReady(function(){function b(a){a===!1?c.resolve():_.getPath(d,"cancelled")!==!0&&c.reject(a),f.$apply()}d.transaction=this._IDBStore.removeBatch(a,this._getSuccessCallback(d,c),b)}.bind(this),d),e)},i.prototype._countAll=function(a){var c=b.defer(),d={},f=this._getCancellablePromise(c.promise,d);return this._onceStoreReady(function(){var a=this._getSuccessCallback(d,c);e.isIE()?d.transaction=this._IDBStore.getAll(function(b){a(b.length)},this._getErrorCallback(d,c)):d.transaction=this._IDBStore.count(a,null)}.bind(this),d),f},i.prototype._countFiltered=function(a){var c=b.defer(),d={},f=this._getCancellablePromise(c.promise,d);return this._onceStoreReady(function(){var b={};if(b.index=a.fields.join(i._INDEX_JOINT),a.filters){var f=this._keyRanges(a.filters);b.keyRange=f}var g=this._getSuccessCallback(d,c);e.isIE()?(b.onError=this._getErrorCallback(d,c),d.transaction=this._IDBStore.query(function(a){g(a.length)},b)):d.transaction=this._IDBStore.count(g,b)}.bind(this),d),f},i.prototype._countFilteredLegacy=function(a){a=a||{};var b=this.getAll(a).then(function(a){return a.length});return b},i.prototype._callReadyCallbacks=function(){_.invoke(this._readyCBs,"apply",this)},i.prototype.init=function(){var e=b.defer();if(this._initializing&&!this._ready)return e.resolve(),e.promise;this._ready=!1,this._initializing=!0;var h=a.prototype.init.call(this,this._config);if(h)return h;var i=this._compiledConfig(this._config);return i.onStoreReady=function(){this._ready=!0,this._initializing=!1,this.dbVersion=this._IDBStore.dbVersion,this.dbOldVersion=this._IDBStore.dbOldVersion,this._callReadyCallbacks(),e.resolve(),f.$apply()}.bind(this),i.onError=function(a){c.debug("IndexedDB error",a),d.add({msg:g.getMessage("ERROR_TRY_AGAIN"),error:"ERROR_CREATE_DB",closeable:!0}),e.reject(a),f.$apply()},this._IDBStore=new IDBStore(i),e.promise},i.prototype.get=function(a){return _.isArray(a)?this._getBatch(a):this._getOne(a)},i.prototype.getOnIndex=function(a,d){var e=b.defer(),f={},g=this._getCancellablePromise(e.promise,f);return _.isArray(d)?(c.error("getOnIndex: no support for multiple fields"),e.reject(),g):(a=[].concat(a),0===a.length?(e.resolve([]),g):(this._onceStoreReady(function(){f.transaction=this._IDBStore.getBatchOnIndex(d,a,this._getSuccessCallback(f,e),this._getErrorCallback(f,e))}.bind(this),f),g))},i.prototype.getAll=function(b){var c=a.prototype.getAll.call(this,b);return c?c:b?this._isFiltersSupported(b.filters,b.fields)?this._getAllFiltered(b):this._getAllFilteredLegacy(b):this._getAll()},i.prototype.save=function(a){return _.isArray(a)?this._saveBatch(a):this._saveOne(a)},i.prototype.remove=function(a){return _.isArray(a)?this._removeBatch(a):this._removeOne(a)},i.prototype.removeAll=function(){var a=b.defer(),c={},d=this._getCancellablePromise(a.promise,c);return this._onceStoreReady(function(){c.transaction=this._IDBStore.clear(this._getSuccessCallback(c,a).bind(this,!0),this._getErrorCallback(c,a))}.bind(this),c),d},i.prototype.count=function(b){var c=a.prototype.count.call(this,b);return c?c:b?this._isFiltersSupported(b.filters,b.fields)?this._countFiltered(b):this._countFilteredLegacy(b):this._countAll()},i}]),angular.module("App").factory("SRWebSQLStore",["SRDBStore","$q","$log","SRMessageService","$rootScope","$window","SRDateService","SRQCancellableService","SRQCascaderService",function(a,b,c,d,e,f,g,h,i){var j=function(b){a.call(this),this._config=b,this._webSQLStore=null,this._ready=!1,this._initializing=!1,this._readyCBs=[],this._currentQueryFilter=null,this._skeletonHash=null};return j._RESERVED="#",j._INDEX_JOINT="@",j._TYPES_MAP={String:"TEXT",Integer:"INTEGER",Float:"REAL",Array:"TEXT",Date:"INTEGER",Boolean:"INTEGER"},j._ORDERS_MAP={Increasing:"ASC",Decreasing:"DESC"},j.prototype=new a,j.prototype._onlyFilters=function(a,b){var c=[],d=[],e={query:c,values:d};if(!_.hasPath(a,[0]))return e;for(var f=0;f<a.length;f++){var g=a[f],h=b[f].replace(/\./g,j._RESERVED);c.push("(["+h+"] = ?)"),d.push(this._convertTypeToDB(g))}return e},j.prototype._boundFilters=function(a,b,c,d){var e=[],f=[],g={query:e,values:f};if(!_.hasPath(a,[0]))return g;var h="lower"===c?">":"<",i="lower"===c?">=":"<=";if(d)e.push("(["+b[0].replace(/\./g,j._RESERVED)+"] "+h+" ?)"),f.push(this._convertTypeToDB(a[0]));else{for(var k=0;k<a.length;k++){for(var l,m=[],n=k===a.length-1?i:h,o=0;k>o;o++)l=b[o].replace(/\./g,j._RESERVED),m.push("["+l+"] = ?"),f.push(this._convertTypeToDB(a[o]));l=b[k].replace(/\./g,j._RESERVED),f.push(this._convertTypeToDB(a[o])),m.push("["+l+"] "+n+" ?"),m="("+m.join(" AND ")+")",e.push(m)}var p="("+e.join(" OR ")+")";e.splice(0,e.length),e.push(p)}return g},j.prototype._filters=function(a,b){var c=this._boundFilters(_.getPath(a,"lower"),b,"lower",_.getPath(a,"excludeLower")),d=this._boundFilters(_.getPath(a,"upper"),b,"upper",_.getPath(a,"excludeUpper")),e=this._onlyFilters(_.getPath(a,"only"),b),f={query:c.query.concat(d.query).concat(e.query),values:c.values.concat(d.values).concat(e.values)};if(_.isEmpty(f.query)&&!_.isEmpty(b)){for(var g=0;g<b.length;g++)f.query.push("(["+b[g].replace(/\./g,j._RESERVED)+"] NOT NULL)");f.values=[]}return f},j.prototype._iterateChecks=function(a){var b=[],c=[];if(!a)return{query:b,values:c};for(var d=0;d<a.length;d++){var e=a[d],f=e.field.replace(/\./g,j._RESERVED);switch(e.operator){case"IN":case"NOT IN":for(var g=[],h=0;h<e.value.length;h++)g.push("?");_.map(e.value,function(a){return this._convertTypeToDB(a)}.bind(this)),b.push("(["+f+"] "+e.operator+" ("+g.join(",")+"))"),c=_.union(c,e.value);break;case"NULL":case"NOT NULL":var i=this._flattenChildrenFields(e.field);if(i){var k=[];for(var l in i)k.push("(["+[f,l].join("#")+"] "+e.operator+")");k="NULL"===e.operator?"("+k.join(" AND ")+")":"("+k.join(" OR ")+")",b.push(k)}else b.push("(["+f+"] "+e.operator+")");break;default:b.push("(["+f+"] "+e.operator+" ?)"),c.push(this._convertTypeToDB(e.value))}}return{query:b,values:c}},j.prototype._conditions=function(a,b){b=b||{};var c=this._filters(b.filters,a),d=this._iterateChecks(b.iterateChecks),e=[];e=e.concat(c.query),e=e.concat(d.query);var f=[];return f=f.concat(c.values),f=f.concat(d.values),{query:"WHERE "+e.join(" AND "),values:f}},j.prototype._convertTypeToDB=function(a){return _.isArray(a)?JSON.stringify(a):_.isDate(a)?g.dateToUnix(a):_.isBoolean(a)?a?1:0:a},j.prototype._convertTypeFromDB=function(a,b){if(_.isString(a)&&"Array"===this._typeOfField(this._config.skeleton,b))try{return JSON.parse(a)}catch(c){return null}else if(_.isNumber(a)){if("Date"===this._typeOfField(this._config.skeleton,b))return new Date(1e3*a);if("Boolean"===this._typeOfField(this._config.skeleton,b))return 1===a?!0:!1}return a},j.prototype._flattenChildrenFields=function(a){var b=this._flattenObject(this._config.skeleton),c=a.replace(/\./g,j._RESERVED);if(b[c])return null;for(var d=a.split(","),e=this._config.skeleton,f=0;f<d.length;f++)e=this._config.skeleton[d[f]];var g=this._flattenObject(e);return g},j.prototype._flattenObject=function(a,b){var c={};for(var d in a)if(a.hasOwnProperty(d)){var e=this._convertTypeToDB(a[d]);if(_.isObject(e)){var f=this._flattenObject(e);for(var g in f)c[d+j._RESERVED+g]=f[g]}else c[d]=e}if(b)for(var d in c)this._skeletonHash[d]||delete c[d];return c},j.prototype._typeOfField=function(a,b){for(var c=a,d=0;d<b.length;d++){var e=b[d];if(!c[e])return null;c=c[e]}return c},j.prototype._unflattenObject=function(a){return this._unflattenObjectRecursive(a,[])},j.prototype._unflattenObjectRecursive=function(a,b){var c={},d=new RegExp("^([^"+j._RESERVED+"]+)(?:"+j._RESERVED+"(.*))?$"),e={};for(var f in a)if(a.hasOwnProperty(f)&&null!==a[f]){var g=f.match(d),h=g[1];if(h===f){var i=a[f];i=this._convertTypeFromDB(i,b.concat(f)),c[f]=i}else{var k=g[2];e[h]||(e[h]={}),e[h][k]=a[f]}}for(var f in e){var l=b.concat([f]),i=this._unflattenObjectRecursive(e[f],l);c[f]=i}return c},j.prototype._compiledConfig=function(a){var b=this._flattenObject(a.skeleton);this._skeletonHash=_.clone(b);for(var c in this._skeletonHash)this._skeletonHash[c]=!0;var d=(a.indexes,[]);for(var c in b){var e=_.keys(j._TYPES_MAP).join("|"),f=new RegExp("("+e+")"),g=b[c].match(f);if(!g)return null;var h=j._TYPES_MAP[g[1]];c===a.id?d.push("["+c+"] "+h+" PRIMARY KEY"):d.push("["+c+"] "+h)}var i=d.join(","),k=[];if(k.push("CREATE TABLE IF NOT EXISTS "+a.name+" ("+i+");"),a.indexes)for(var l=0;l<a.indexes.length;l++){var m=a.indexes[l],n=_.map(m.fields,function(a){return a.replace(/\./g,j._RESERVED)}),o="CREATE INDEX IF NOT EXISTS ["+n.join(j._INDEX_JOINT)+"] ON "+a.name+" (["+n.join("],[")+"]);";k.push(o)}return k},j.prototype._saveOneQuery=function(a){var b=[],c=[],d=[];for(var e in this._skeletonHash)b.push(e),c.push(void 0!==a[e]?this._convertTypeToDB(a[e]):null),d.push("?");var f=b.join("],["),g=d.join(","),h="INSERT OR IGNORE INTO "+this._config.name+" (["+f+"]) VALUES ("+g+");";return{query:h,values:c}},j.prototype._updateOneQuery=function(a){var b,c=[],d=[];for(var e in a)e===this._config.id?b=a[e]:(c.push(e),d.push(this._convertTypeToDB(a[e])));d.push(this._convertTypeToDB(b));var f=c.join("] = ?,["),g="UPDATE "+this._config.name+" SET ["+f+"] = ? WHERE ["+this._config.id+"] = ?;";return{query:g,values:d}},j.prototype._onceStoreReady=function(a,b){var c;c=void 0===b?a:function(){_.getPath(b,"cancelled")!==!0&&a()},this._ready?c():this._readyCBs.push(c)},j.prototype._transaction=function(a,b,c){this._onceStoreReady(function(){this._webSQLStore.transaction(a,b)}.bind(this),c)},j.prototype._readTransaction=function(a,b,c){this._onceStoreReady(function(){this._webSQLStore.readTransaction(a,b)}.bind(this),c)},j.prototype._getCancellablePromise=function(a,b){var c=h.wrap(a,function(){void 0!==b&&(b.cancelled=!0)});return c},j.prototype.init=function(){var g=b.defer();if(this._initializing&&!this._ready)return g.resolve(),g.promise;this._initializing=!0;var h=a.prototype.init.call(this,this._config);if(h)return h;var i,j=this._compiledConfig(this._config),k=_.after(j.length,function(){i?(c.debug("WebSQL DB init:",i),d.add({msg:""+i,closeable:!0}),g.reject(i)):(this._initializing=!1,g.resolve()),e.$apply()}.bind(this)),l=function(a,b){i=b,k()},m=function(a){c.debug("WebSQL DB init:",a),g.reject(a),e.$apply()};return this._webSQLStore=f.webSQLDB,this._webSQLStore.transaction(function(a){for(var b=0;b<j.length;b++)a.executeSql(j[b],[],k,l)}.bind(this),m),g.promise},j.prototype.get=function(a){var c,d,e=!_.isArray(a);if(null===a||void 0===a)return h.wrap(b.reject({message:"cannot get objects for null"}));if(c="SELECT * FROM "+this._config.name+" WHERE ["+this._config.id+"]",_.isArray(a)){if(0===a.length){var f=b.defer();return f.resolve([]),h.wrap(f.promise)}for(var g=[],j=0;j<a.length;j++)g.push("?");d=_.map(a,function(a){return this._convertTypeToDB(a)}.bind(this)),c+=" IN ("+g.join(",")+");"}else c+=" = ?;",d=[this._convertTypeToDB(a)];var k=i.createCascader([this.executeTransaction.bind(this,c,d,!0),function(a){return e?a[0]:a}]);return k.execute()},j.prototype.getOnIndex=function(a,c){var d=b.defer();if(_.isArray(c))throw"getOnIndex: no support for multiple fields";if(a=[].concat(a),0===a.length)return d.resolve([]),h.wrap(d.promise);var e=[];_.map(a,function(a){return e.push("?"),this._convertTypeToDB(a)},this);var f="SELECT * FROM "+this._config.name+" WHERE ["+c.replace(/\./g,j._RESERVED)+"] IN ("+e.join(",")+");";return this.executeTransaction(f,a,!0)},j.prototype.getAll=function(b){var c=a.prototype.getAll.call(this,b);if(c)return c;var d,e=[],f=["SELECT * FROM "+this._config.name];if(b){var g=this._conditions(b.fields,b);if(g.query&&(f.push(g.query),e=g.values),b.order){for(var h=[],i=0;i<b.fields.length;i++){var k=b.fields[i].replace(/\./g,j._RESERVED),l=b.order;l=j._ORDERS_MAP[l],h.push("["+k+"] "+l)}f.push("ORDER BY "+h.join(","))}b.limit&&(f.push("LIMIT ?"),e.push(b.limit))}return d=f.join(" ")+";",this.executeTransaction(d,e,!0)},j.prototype.save=function(a){var d=b.defer(),f={};if(null===a||void 0===a)return d.reject({message:"cannot save null"}),h.wrap(d.promise);if(_.isArray(a)||(a=[a]),0===a.length)return d.resolve(!0),h.wrap(d.promise);var g,i=[],j=0,k=function(b){return f.cancelled===!0?void b.executeSql("ABORT"):(j++,void(j===a.length&&(f.completed=!0,g?d.reject(g):d.resolve(!0),e.$apply())))},l=function(a,b){f.cancelled!==!0&&(g=b,c.debug("WebSQL DB save:",g),k(a))},m=function(a){f.cancelled!==!0&&(f.failed=!0,c.debug("WebSQL DB save:",a),d.reject(a),e.$apply())};return this._transaction(function(b){f.transaction=b;for(var c=0;c<a.length;c++){var d=a[c],e=this._flattenObject(d,!0),g=this._saveOneQuery(e);(function(a,c){b.executeSql(g.query,g.values,function(b,d){d.rowsAffected?(i.push(d.insertId),k(b)):(g=this._updateOneQuery(a),i.push(c[this._config.id]),b.executeSql(g.query,g.values,k,l))}.bind(this),l)}).bind(this)(e,d)}}.bind(this),m,f),this._getCancellablePromise(d.promise,f)},j.prototype.remove=function(a){var d,f,g=b.defer(),i={};if(null===a||void 0===a)return g.reject({message:"cannot remove objects for null ids"}),h.wrap(g.promise);if(d="DELETE FROM "+this._config.name+" WHERE ["+this._config.id+"]",_.isArray(a)){if(0===a.length)return g.resolve(!1),h.wrap(g.promise);for(var j=[],k=0;k<a.length;k++)j.push("?");f=_.map(a,function(a){return this._convertTypeToDB(a)}.bind(this)),d+=" IN ("+j.join(",")+");"}else d+=" = ?;",f=[this._convertTypeToDB(a)];var l=function(a,b){i.cancelled!==!0?(i.completed=!0,g.resolve(b.rowsAffected&&b.rowsAffected===f.length),e.$apply()):a.executeSql("ABORT")},m=function(a,b){i.cancelled!==!0&&(i.failed=!0,b=b||a,c.debug("WebSQL DB remove:",b),g.reject(b),e.$apply())};return this._transaction(function(a){i.transaction=a,a.executeSql(d,f,l,m)},m,i),this._getCancellablePromise(g.promise,i)},j.prototype.removeAll=function(){var a="DELETE FROM "+this._config.name+";",b=i.createCascader([this.executeTransaction.bind(this,a,[],!1),function(){return!0}]);return b.execute()},j.prototype.count=function(b){var c=a.prototype.count.call(this,b);if(c)return c;var d=["SELECT COUNT(*) AS count FROM "+this._config.name],e=[];if(b){var f=this._conditions(b.fields,b);f.query&&(d.push(f.query),e=f.values)}var g=d.join(" ")+";",h=i.createCascader([this.executeTransaction.bind(this,g,e,!0),function(a){return _.isNumber(_.getPath(a,[0,"count"]))?a[0].count:0}]);return h.execute()},j.prototype.upgradeFromConfigToConfig=function(a,d,f){var g=b.defer(),h=this._flattenObject(a.skeleton),i=this._flattenObject(d.skeleton),j=[];a.name===d.name&&(j.push("ALTER TABLE "+a.name+" RENAME TO "+a.name+"_tmp;"),a.name+="_tmp"),j=j.concat(this._compiledConfig(d));var k="INSERT INTO "+d.name+" (",l=[];for(var m in h)i[m]&&l.push("["+m+"]");k+=l.join(", ")+") SELECT "+l.join(", ")+" FROM "+a.name+";",j.push(k),j.push("DROP TABLE IF EXISTS "+a.name+";");for(var n,o=_.after(j.length,function(){n?(c.debug("WebSQL DB upgrade:",n),g.reject(n)):(this._config=d,g.resolve()),e.$apply()}.bind(this)),p=function(a,b){n=b,o()},q=0;q<j.length;q++)f.executeSql(j[q],[],o,p);return g.promise},j.prototype.executeTransaction=function(a,d,f){_.isArray(a)||(a=[a],d=[d]);var g={},h=b.defer(),i=f?this._readTransaction.bind(this):this._transaction.bind(this),j=[],k=a.length,l=null,m=null,n=function(b,c){if(k--,m)return void(g.failed=!0);if(g.cancelled===!0)return void b.executeSql("ABORT");if(!l){for(var d=[],f=0;f<c.rows.length;f++){var i=c.rows.item(f);d.push(this._unflattenObject(i))}1===a.length?j=d:j.push(d)}0===k&&(g.completed=!0,l?(h.reject(l),e.$apply()):(h.resolve(j),e.$apply()))}.bind(this),o=function(a,b){g.cancelled!==!0&&(g.failed=!0,l=b,c.error("WebSQL sql error:",l),n())},p=function(a){g.cancelled!==!0&&(c.error("WebSQL transaction error:",a),g.failed=!0,m=!0,h.reject(a),e.$apply())};return i(function(b){g.transaction=b;for(var c=0;c<a.length;c++)b.executeSql(a[c],d[c],n,o)},p,g),this._getCancellablePromise(h.promise,g)},j.prototype.setReady=function(){this._ready=!0,_.invoke(this._readyCBs,"apply",this)},j}]),angular.module("App").factory("SRDBUpgradeService",["$log","$q","$timeout","$window","SRDBConfigService","SRDBService",function(a,b,c,d,e,f){var g=function(a){this._upgraded=!1,this._upgrading=!1,this._upgradesWebSQL=[],this._upgradesIndexedDB=[],this._hasPerformedSignificantUpgrade=!1,this._parseMethods()};g.prototype._parseMethods=function(){for(var a in g.prototype)if(g.prototype.hasOwnProperty(a)){var b=a.match(/^_upgradeTo_(\d+)_webSQL$/);if(b)this._upgradesWebSQL.push({key:a,version:parseInt(b[1])});else if(b=a.match(/^_upgradeTo_(\d+)_indexedDB$/))this._upgradesIndexedDB.push({key:a,version:parseInt(b[1])});else if(b=a.match(/^_upgradeTo_(\d+)_both$/)){var c={key:a,version:parseInt(b[1])};this._upgradesWebSQL.push(c),this._upgradesIndexedDB.push(c)}}var d=function(a,b){return a.version-b.version};this._upgradesWebSQL.sort(d),this._upgradesIndexedDB.sort(d)},g.prototype._createStores=function(){this._stores={calendarStore:f.getStore(e.calendarConfigForVersion(CONFIG.dbVersion)),connectionStore:f.getStore(e.connectionConfigForVersion(CONFIG.dbVersion)),contactStore:f.getStore(e.contactConfigForVersion(CONFIG.dbVersion)),syncTokenStore:f.getStore(e.syncTokenConfigForVersion(CONFIG.dbVersion)),occurrenceStore:f.getStore(e.occurrenceConfigForVersion(CONFIG.dbVersion)),favoritePlaceStore:f.getStore(e.favoritePlaceConfigForVersion(CONFIG.dbVersion))};var a=_.map(this._stores,function(a){return a.init()});return b.all(a)},g.prototype._removeStores=function(){f.dropTables(["Occurrences"])},g.prototype._setReady=function(){_.each(this._stores,function(a){a.setReady()}),this._stores=null},g.prototype._upgradeWebSQL=function(b,d,e){var g=""===b.version?CONFIG.dbVersion:b.version;if(f.oldVersion=g,this._upgradesWebSQL.length>d){var h=this._upgradesWebSQL[d];h.version>g&&h.version<=CONFIG.dbVersion?b.changeVersion(b.version,h.version,function(a){this[this._upgradesWebSQL[d].key](a)}.bind(this),function(b){a.error("Error while migrating to ",h.version,": ",b),c(function(){e.reject(b)})},function(){this._upgradeWebSQL(b,d+1,e)}.bind(this)):this._upgradeWebSQL(b,d+1,e)}else g<CONFIG.dbVersion?b.changeVersion(b.version,CONFIG.dbVersion,function(a){},function(b){a.error("Error while migrating to ",h.version,": ",b),c(function(){e.reject(b)})},function(){this._upgradeWebSQL(b,d+1,e)}.bind(this)):(f.version=g,c(function(){e.resolve()}))},g.prototype._upgradeIndexedDB=function(b,d){if(this._upgradesIndexedDB.length>b){var e=this._upgradesIndexedDB[b];e.version>f.oldVersion&&e.version<=CONFIG.dbVersion?this[this._upgradesIndexedDB[b].key]().then(function(){this._upgradeIndexedDB(b+1,d)}.bind(this),function(b){a.error("Error while migrating to ",e.version,": ",b),c(function(){d.reject()})}):this._upgradeIndexedDB(b+1,d)}else c(function(){d.resolve()})},g.prototype._upgradeTo_9_webSQL=function(a){var b=f.getStore(e.connectionConfigForVersion(8)),c=b.upgradeFromConfigToConfig(e.connectionConfigForVersion(8),e.connectionConfigForVersion(9),a);return c.then(function(){this._hasPerformedSignificantUpgrade=!0}.bind(this)),c},g.prototype._upgradeTo_12_webSQL=function(a){var b=f.getStore(e.connectionConfigForVersion(11));return b.upgradeFromConfigToConfig(e.connectionConfigForVersion(11),e.connectionConfigForVersion(12),a)},g.prototype._upgradeTo_13_webSQL=function(a){var b=f.getStore(e.occurrenceConfigForVersion(12));return b.upgradeFromConfigToConfig(e.occurrenceConfigForVersion(12),e.occurrenceConfigForVersion(13),a)},g.prototype._upgradeTo_15_both=function(){var a=f.getStore(e.occurrenceConfigForVersion(14)),c=f.getStore(e.syncTokenConfigForVersion(14)),d=f.getStore(e.calendarConfigForVersion(14)),g=f.getStore(e.connectionConfigForVersion(14)),h=b.all([a.removeAll(),c.removeAll(),d.removeAll(),g.removeAll()]);return h.then(function(){this._hasPerformedSignificantUpgrade=!0}.bind(this)),h},g.prototype.upgrade=function(){var a=b.defer();if(this._upgraded)return a.resolve(),a.promise;if(this._upgrading)return a.reject(),a.promise;this._upgrading=!0;var c=f.openDatabase();return this._createStores().then(function(){var d=function(){this._removeStores(),this._upgraded=!0,this._upgrading=!1,a.resolve()}.bind(this),e=function(){this._upgrading=!1,a.reject()}.bind(this);if(f.getServiceType()===f.INDEXED_DB){for(var g in this._stores){var h=this._stores[g];f.version=h.dbVersion,f.oldVersion=h.dbOldVersion;break}var i=b.defer();this._upgradeIndexedDB(0,i),i.promise.then(d,e)}else if(f.getServiceType()===f.WEB_SQL){var j=b.defer();this._setReady(),this._upgradeWebSQL(c,0,j),j.promise.then(d,e)}else e()}.bind(this),a.reject),a.promise},g.prototype.hasPerformedSignificantUpgrade=function(){return this._hasPerformedSignificantUpgrade};var h=new g;return h}]),angular.module("App").factory("SRDBConfigService",[function(){var a=function(){};a.prototype.calendarConfigForVersion=function(a){var b;return b={name:"Calendar",skeleton:{id:"String",type:"String",title:"String",color:"String",writable:"Boolean",description:"String",push:"Boolean",defaults:{visible:"Boolean",reminders:"Boolean",priority:"Integer",timezone:"String"},connectionId:"String",visible:"Boolean",reminders:"Boolean"},id:"id",indexes:[{fields:["connectionId"]
},{fields:["type"]}]}},a.prototype.connectionConfigForVersion=function(a){var b;return b=8>=a?{name:"Connection",skeleton:{id:"String",disconnected:"Boolean",type:"String",info:"String",unavailable:"Boolean",defaults:{priority:"Integer"}},id:"id",indexes:[{fields:["type"]}]}:{name:"Connection",skeleton:{id:"String",disconnected:"Boolean",type:"String",info:"String",unavailable:"Boolean",defaults:{priority:"Integer"},user:{email:"String"}},id:"id",indexes:[{fields:["type"]}]}},a.prototype.contactConfigForVersion=function(a){var b;return b={name:"Contact",skeleton:{email:"String",name:"String",firstName:"String",lastName:"String",score:"Integer"},id:"email",indexes:[{fields:["score"]}]}},a.prototype.syncTokenConfigForVersion=function(a){var b;return b={name:"SyncToken",skeleton:{calendarId:"String",connectionId:"String",syncToken:"String"},id:"calendarId",indexes:[{fields:["connectionId"]}]}},a.prototype.occurrenceConfigForVersion=function(a){var b;return b=11>=a?{name:"Occurrence",skeleton:{id:"String",iCalUID:"String",sourceId:"String",type:"String",status:"String",title:"String",description:"String",place:this._getPlaceSkeleton(),icon:{overlay:"String",baseColor:"String"},userRsvpStatus:"String",start:{date:"String",dateTime:"String",timezone:"String"},end:{date:"String",dateTime:"String",timezone:"String"},organizer:{id:"String",name:"String",emails:"Array",self:"Boolean"},inviter:{id:"String",name:"String",emails:"Array",self:"Boolean"},attendees:{data:"Array",counts:{invited:"Integer"}},recurrence:{rules:"Array",original:{dateTime:"String",date:"String"},parent:{id:"String"}},reminders:"Array",editable:"Boolean",transparent:"Boolean",uris:"Array",extensions:"Array",connectionId:"String",calendarId:"String",eventId:"String",startDate:"Date",endDate:"Date",allDay:"Boolean",durationDays:"Integer",timezone:"String",parent:"Boolean",exception:"Boolean",originalEventId:"String",originalStart:"Date",instance:"Boolean",imported:"Integer",updated:"Integer",hidden:"Boolean",skipNotificationEmail:"Boolean",userRsvpStatusChanged:"Boolean",isNew:"Boolean"},id:"id",indexes:[{fields:["connectionId"]},{fields:["calendarId"]},{fields:["eventId"]},{fields:["originalEventId"]},{fields:["updated"]},{fields:["userRsvpStatus"]},{fields:["durationDays","startDate"]},{fields:["imported"]},{fields:["place.name"]}]}:12>=a?{name:"Occurrence",skeleton:{id:"String",iCalUID:"String",sourceId:"String",type:"String",status:"String",title:"String",description:"String",place:this._getPlaceSkeleton(),icon:{overlay:"String",baseColor:"String"},userRsvpStatus:"String",start:{date:"String",dateTime:"String",timezone:"String"},end:{date:"String",dateTime:"String",timezone:"String"},organizer:{id:"String",name:"String",emails:"Array",self:"Boolean"},inviter:{id:"String",name:"String",emails:"Array",self:"Boolean"},attendees:{data:"Array",counts:{invited:"Integer"}},recurrence:{rules:"Array",original:{dateTime:"String",date:"String"},parent:{id:"String"}},reminders:"Array",editable:"Boolean",transparent:"Boolean",uris:"Array",extensions:"Array",connectionId:"String",calendarId:"String",eventId:"String",startDate:"Date",endDate:"Date",allDay:"Boolean",durationDays:"Integer",timezone:"String",parent:"Boolean",exception:"Boolean",exceptionToDelete:"Boolean",originalEventId:"String",originalStart:"Date",instance:"Boolean",imported:"Integer",updated:"Integer",hidden:"Boolean",skipNotificationEmail:"Boolean",userRsvpStatusChanged:"Boolean",isNew:"Boolean"},id:"id",indexes:[{fields:["connectionId"]},{fields:["calendarId"]},{fields:["eventId"]},{fields:["originalEventId"]},{fields:["updated"]},{fields:["userRsvpStatus"]},{fields:["durationDays","startDate"]},{fields:["imported"]},{fields:["place.name"]}]}:{name:"Occurrence",skeleton:{id:"String",iCalUID:"String",sourceId:"String",type:"String",status:"String",title:"String",description:"String",place:this._getPlaceSkeleton(),icon:{overlay:"String",baseColor:"String"},userRsvpStatus:"String",start:{date:"String",dateTime:"String",timezone:"String"},end:{date:"String",dateTime:"String",timezone:"String"},organizer:{id:"String",name:"String",emails:"Array",self:"Boolean"},inviter:{id:"String",name:"String",emails:"Array",self:"Boolean"},attendees:{data:"Array",counts:{invited:"Integer"}},recurrence:{rules:"Array",original:{dateTime:"String",date:"String"},parent:{id:"String"}},reminders:"Array",editable:"Boolean",transparent:"Boolean",uris:"Array",extensions:"Array",connectionId:"String",calendarId:"String",eventId:"String",startDate:"Date",endDate:"Date",allDay:"Boolean",durationDays:"Integer",timezone:"String",parent:"Boolean",exception:"Boolean",exceptionToDelete:"Boolean",originalEventId:"String",originalStart:"Date",instance:"Boolean",imported:"Integer",updated:"Integer",hidden:"Boolean",skipNotificationEmail:"Boolean",userRsvpStatusChanged:"Boolean",isNew:"Boolean"},id:"id",indexes:[{fields:["connectionId"]},{fields:["calendarId"]},{fields:["eventId"]},{fields:["updated"]},{fields:["userRsvpStatus"]},{fields:["durationDays","startDate"]},{fields:["imported"]},{fields:["place.name"]},{fields:["recurrence.parent.id"]}]}},a.prototype.favoritePlaceConfigForVersion=function(a){var b;return b={name:"FavoritePlace",skeleton:{id:"String",title:"String",standard:"Boolean",place:this._getPlaceSkeleton()},id:"id",indexes:[]}},a.prototype._getPlaceSkeleton=function(){return{name:"String",address:{street:"String",city:"String",state:"String",country:"String"},geometry:{location:{lat:"Float",lng:"Float"},viewport:{northeast:{lat:"Float",lng:"Float"},southwest:{lat:"Float",lng:"Float"}}}}};var b=new a;return b}]),angular.module("App").factory("SRUserLocationService",["$log","$q","$window","$location","SRStorageService","SROnlineStatusService","SRRequestService","SRBrowserService","SRUserTimezoneService",function(a,b,c,d,e,f,g,h,i){var j={};return j._chrome={},j._web={},j.cache=null,j._hasGeoLocation=function(){return c.navigator&&c.navigator.geolocation&&(!h.isSafari()||h.isMacApp())},j._getLocation={},j._getLocation.onError=function(b){b=function(){return _.isObject(b)&&b.code?"Error code "+b.code+": "+b.message:b}(),a.debug("SRUserLocationService._getLocation.onError():",b)},j._getLocation.onSuccess=function(c,d){var f=b.defer();return d=d||{},_.isEmpty(c)||!c.coords?(f.reject(),f.promise):(j.cache={latitude:c.coords.latitude,longitude:c.coords.longitude,timestamp:c.timestamp,accuracy:c.coords.accuracy},e.set("userLocation",j.cache).then(function(){var a=[j.cache.latitude,j.cache.longitude];i.setWithLocation(a),f.resolve()},f.reject),a.debug("SRUserLocationService._getLocation.onSuccess(): New position %c"+j.cache.latitude+", "+j.cache.longitude,"color:red;"),f.promise)},j._getLocation.html5=function(a){var c=b.defer();return a=a||{enableHighAccuracy:!1,timeout:5e3},j._hasGeoLocation()?(navigator.geolocation.getCurrentPosition(c.resolve,c.reject,a),c.promise):(c.reject(),c.promise)},j._getLocation.watch=function(){j._hasGeoLocation()&&c.navigator.geolocation.watchPosition(j._getLocation.onSuccess,j._getLocation.onError,{enableHighAccuracy:!0})},j.get=function(){return j.cache},j._web.init=function(){var a=b.defer(),c=function(){j._getLocation.watch(),a.resolve()};return d.path()&&d.path().contains("meet")?a.reject():j._getLocation.html5().then(c,c),a.promise},j._chrome.init=function(){var a=b.defer(),c=function(b){j._getLocation.onSuccess(b),j._getLocation.watch(),a.resolve()},d=function(b){j._getLocation.onError((_.isObject(b)?b.message:b)||b),j._getLocation.watch(),a.reject()};return f.isOnline()?j._getLocation.html5().then(c,d):d("No internet connection"),a.promise},"object"==typeof chrome&&chrome.storage?_.extend(j,j._chrome):_.extend(j,j._web),j}]),angular.module("App").factory("SRUserTimezoneService",["$q","$log","SRRequestService","SRStorageService","SRBrowserService","SROnlineStatusService","SRSettingsService","SRDateService",function(a,b,c,d,e,f,g,h){var i={};return i.cache={},i._getFromGoogle=function(b,d,e){var f=a.defer(),g={params:{location:b.join(","),timestamp:h.dateToUnix(d),sensor:e||!1}};return c.get(CONFIG.timezoneUrl,g).then(f.resolve,f.reject),f.promise},i._onChange=function(a,b){return a===b?!1:h.getDifferrenceBetweenTimezone(a,b)?(g.set("currentTimezone",a),!0):!1},i.setWithLocation=function(b){var c=a.defer();return _.isArray(b)&&f.isOnline()?i._getFromGoogle(b,Date.now()).then(function(a){i.cache=a,c.resolve()},c.reject):c.reject(),c.promise},i.getTimezoneId=function(){return i.cache.timeZoneId},i.init=function(){var b=a.defer();return i.cache.timeZoneId=CONFIG.userTimezone,d.get("userTimezone").then(function(a){d.set("userTimezone",CONFIG.userTimezone),i._onChange(CONFIG.userTimezone,a),b.resolve()},b.reject),b.promise},i}]),angular.module("App").factory("SRUserPresenceService",["$q","$document","$rootScope","SRUserService","SRClockService","SRMetricsService","SRRefreshService","SRFaviconService","SRAnchormanService","SRCurrentService",function(a,b,c,d,e,f,g,h,i,j){var k={};return k._isIdle=!1,k.on={},c.$on("onClockUpdate",function(){k._isIdle&&j.navigation.today()}),k.isIdle=function(){return k._isIdle},k.on.active=function(a,b,e,l){k._isIdle=!1,d.isLogged()&&(f.events.on.appOpened(),g.refresh({backgroundRefresh:!0})),"month"===j.getCurrentLocation()?c.$emit("onUpdate"):c.$emit("onUserActive"),h.setTodayIcon(),i.show()},k.on.inactive=function(a,b,c){k._isIdle=!0},k.init=function(){var c=a.defer();return b.idleTimer(18e5).on("idle.idleTimer",k.on.inactive).on("active.idleTimer",k.on.active),c.resolve(),c.promise},k}]),angular.module("App").factory("SRBeforeUnloadService",["$window",function(a){var b={};return b._callbacks=[],b._onBeforeUnloadHandler=function(c){var d;return _.some(b._callbacks,function(a){return!!(d=a())})?((c||a.event).returnValue=d,d):void 0},b.register=function(a){b._callbacks.unshift(a)},b.unregister=function(a){b._callbacks.splice(_.indexOf(b._callbacks,a),1)},a.addEventListener?a.addEventListener("beforeunload",b._onBeforeUnloadHandler):a.onbeforeunload=b._onBeforeUnloadHandler,b}]),angular.module("App").factory("SRManifestService",["$window","$q","SRBrowserService","SRUserPresenceService","SRLocationService",function(a,b,c,d,e){var f=function(){this._isUpdateAvailable=!1};f.prototype.checkForUpdate=function(){c.isMacApp()&&_.hasPath(a,["applicationCache","update"])&&(this._isUpdateAvailable||a.applicationCache.update())},f.prototype.updateIfNeeded=function(){c.isMacApp()&&d.isIdle()&&this._isUpdateAvailable&&(this._isUpdateAvailable=!1,e.reload())},f.prototype.init=function(){c.isMacApp()&&(a.applicationCache.addEventListener("updateready",function(){this._onUpdateReady(),this.updateIfNeeded()}.bind(this)),a.applicationCache.status===a.applicationCache.UPDATEREADY&&(this._onUpdateReady(),this.updateIfNeeded()),a.setInterval(function(){this.checkForUpdate(),this.updateIfNeeded()}.bind(this),18e5));var d=b.defer();return d.resolve(),d.promise},f.prototype._onUpdateReady=function(){this._isUpdateAvailable=!0};var g=new f;return g}]),angular.module("App").factory("SRPageVisibilityService",["$document",function(a){var b=function(){this._visibilityHiddenName=void 0,this._visibilityChangeEventName=void 0,this._visibilityStateName=void 0,"undefined"!=typeof document.hidden?(this._visibilityHiddenName="hidden",this._visibilityChangeEventName="visibilitychange",this._visibilityStateName="visibilityState"):"undefined"!=typeof document.mozHidden?(this._visibilityHiddenName="mozHidden",this._visibilityChangeEventName="mozvisibilitychange",this._visibilityStateName="mozVisibilityState"):"undefined"!=typeof document.msHidden?(this._visibilityHiddenName="msHidden",this._visibilityChangeEventName="msvisibilitychange",this._visibilityStateName="msVisibilityState"):"undefined"!=typeof document.webkitHidden&&(this._visibilityHiddenName="webkitHidden",this._visibilityChangeEventName="webkitvisibilitychange",this._visibilityStateName="webkitVisibilityState"),this._hasPageVisibilitySupport="undefined"!=typeof document[this._visibilityHiddenName]&&"undefined"!=typeof document[this._visibilityStateName],this._tasks=[],this._previousState=document[this._visibilityStateName]};b.prototype.register=function(a){this._tasks.length||this._addEventListener(),this._tasks.push(a)},b.prototype.unregister=function(a){this._tasks.splice(_.indexOf(this._tasks,a),1),this._tasks.length||this._removeEventListener()},b.prototype._addEventListener=function(){this._hasPageVisibilitySupport&&a.on(this._visibilityChangeEventName,this._onVisibilityChange.bind(this))},b.prototype._removeEventListener=function(){this._hasPageVisibilitySupport&&a.off(this._visibilityChangeEventName,this._onVisibilityChange)},b.prototype._onVisibilityChange=function(){var a=document[this._visibilityStateName],b=this._previousState;_.each(this._tasks,function(c){c(a,b)}),this._previousState=a};var c=new b;return c}]),angular.module("App").factory("SRMutationObserverService",["$q","$timeout",function(a,b){var c=function(){this.defautConfig={childList:!0,characterData:!1,attributes:!1,subtree:!0}};c.prototype.waitUntilExists=function(c,d,e){var f=a.defer();if(_.isUndefined(c)||!_.isString(d))return f.reject(),f.promise;c=c&&c instanceof jQuery?c[0]:c,e=e||{};var g=e.config||this.defautConfig,h=function(){var a=c.querySelector(d);a&&b(function(){i.disconnect(),f.resolve()})},i=new MutationObserver(h);return i.observe(c,g),h(),f.promise};var d=new c;return d}]),angular.module("App").factory("SRBridgeService",["SRMenuBridgeService","SRNotificationBridgeService","SRPopupBridgeService","$window","SRBrowserService",function(a,b,c,d,e){var f=function(){};f.prototype.init=function(){if(e.isMacApp()){var f={};f.menu=a.exportObject(),f.notice=b.exportObject(),f.popup=c.exportObject(),d[CONFIG.jsBridge]=f,_.hasPath(d,"SunriseMacBridge.webView.bridgeReady")&&d.SunriseMacBridge.webView.bridgeReady()}};var g=new f;return g}]),angular.module("App").factory("SRMenuBridgeService",["SRLayerService","SRSettingsService","SRShortcutService",function(a,b,c){var d=function(){};d.prototype.exportObject=function(){return{showPreferences:this.showPreferences,showShortcuts:this.showShortcuts}},d.prototype.showPreferences=function(){b.openModal()},d.prototype.showShortcuts=function(){c.openModal()};var e=new d;return e}]),angular.module("App").factory("SRNotificationBridgeService",["SROccurrenceModel","SRNavigateToService","$timeout",function(a,b,c){var d=function(){};d.prototype.exportObject=function(){return{navigateToOccurrence:this.navigateToOccurrence}},d.prototype.navigateToOccurrence=function(d){_.hasPath(d,"eventId")&&a.getById(d.eventId).then(function(a){a&&c(function(){b.occurrence(a)})})};var e=new d;return e}]),angular.module("App").factory("SRPopupBridgeService",["$rootScope","$timeout",function(a,b){var c=function(){};c.prototype.exportObject=function(){return{onPopupClose:this.onPopupClose}},c.prototype.onPopupClose=function(){b(function(){a.$emit("onPopupClose")})};var d=new c;return d}]),angular.module("App").factory("SRQCancellableService",["$q",function(a){var b={};return b.wrap=function(b,c){var d=!1;if(_.isFunction(b.cancel))return b;var e=a.defer(),f=a.defer(),g=a.all([b,e.promise]);return b.then(function(a){e.resolve()}),g.then(function(a){d=!0,f.resolve(a[0])},function(a){d=!0,f.reject(a)}),f.promise.cancel=function(a){d||(d=!0,a=a||"CANCELLED",_.isFunction(c)&&c(a),e.reject(a))},f.promise},b}]),angular.module("App").factory("SRQQueuingService",["$q",function(a){var b=function(){this._functions=[],this._executing=!1};return b.prototype._executeFunctionAtIndex=function(a,b,c){a>=this._functions.length?c.resolve(b):this._functions[a]().then(function(d){b.push(d),this._executeFunctionAtIndex(a+1,b,c)}.bind(this),function(){c.reject(a)})},b.prototype.push=function(a){_.isArray(a)||(a=[a]);var b=_.map(a,function(a){if(_.isFunction(a))return a;var b=a.task;return a.context&&a.arguments?b.bind.apply(b,[a.context].concat(a.arguments)):a.context?b.bind(a.context):b});this._functions=this._functions.concat(b)},b.prototype.execute=function(){this._executing=!0;var b=a.defer();return b.promise["finally"](function(){this._executing=!1}),this._executeFunctionAtIndex(0,[],b),b.promise},{createQueue:function(){return new b}}}]),angular.module("App").factory("SRQCascaderService",["$q","SRQCancellableService","$rootScope",function(a,b,c){var d=function(){this._deferred=null,this._promise=null,this._currentFunctionIndex=-1,this._currentPromise=null,this._functions=[]};return d.prototype.push=function(a){if(!_.isFunction(a))throw"SRQCascader was waiting for a Function but received "+typeof a;this._functions.push(a)},d.prototype.execute=function(){return null===this._promise&&(this._deferred=a.defer(),this._promise=b.wrap(this._deferred.promise,this._cancel.bind(this)),this._executeNextFunction()),this._promise},d.prototype._executeNextFunction=function(){if(this._currentFunctionIndex++,this._currentFunctionIndex>=this._functions.length)this._deferred.resolve.apply(null,arguments);else{var c=this._functions[this._currentFunctionIndex],d=c.apply(null,arguments);if(!this._isPromise(d)){var e=d,f=a.defer();d=f.promise,f.resolve(e)}_.isFunction(d.cancel)||(d=b.wrap(d)),d.then(this._executeNextFunction.bind(this),this._deferred.reject),this._currentPromise=d}},d.prototype._cancel=function(a){null!==this._currentPromise&&this._currentPromise.cancel(a)},d.prototype._isPromise=function(a){return _.isFunction(_.getPath(a,"then"))},{createCascader:function(a){var b;b=_.isArray(a)?a:void 0!==a?[a]:[];var c=new d;return _.each(b,c.push.bind(c)),c}}}]),angular.module("App").factory("SRBaseModel",function(){var a=function(){};return a.create=function(a){if(_.isArray(a)){var b=_.map(a,function(a){return new this(a)}.bind(this));return b}return new this(a)},a.createFromJSON=function(a){return a?this.create(a):null},a.prototype.json=function(){var a=_.clone(this);return a=_.omit(a,_.isUndefined)},a.prototype.copy=function(){return angular.copy(this)},a.prototype.description=function(){return"BaseModel"},a}),angular.module("App").factory("SRAbstractModel",["$q","$filter","$rootScope","SRDBService","SRBaseModel","SRQCascaderService",function(a,b,c,d,e,f){var g=function(){e.call(this)};return g.inheritsFrom(e),g._cache=null,g._store=null,g._skeletonHash=null,g.getById=function(a){var b=f.createCascader([this._store.get.bind(this._store,a),this._createFromDB.bind(this)]);return b.execute()},g.getByIdOnIndex=function(a,b){var c=f.createCascader([this._store.getOnIndex.bind(this._store,a,b),this._createFromDB.bind(this)]);return c.execute()},g.getAll=function(a){a=a||{};var b="getAll";if(!a.useCache||!this._cache[b]){var c=f.createCascader([this._store.getAll.bind(this._store),this._createFromDB.bind(this)]),d=c.execute();d.then(null,this._clearCacheKey.bind(this,b)),this._cache[b]=d}return this._cache[b]},g.getFilteredByOptions=function(a){var b=f.createCascader([this._store.getAll.bind(this._store,a),this._createFromDB.bind(this)]);return b.execute()},g.save=function(a){a=[].concat(a);var c=b("SRHelperFilter_objectsFilteredFromHash")(a,this._skeletonHash),d=this._store.save(c);return d["finally"](this._clearCache.bind(this)),d},g.removeById=function(a){var b=this._store.remove(a);return b["finally"](this._clearCache.bind(this)),b},g.removeAll=function(){var a=this._store.removeAll();return a["finally"](this._clearCache.bind(this)),a},g.count=function(){return this._store.count()},g._createFromDB=function(b){var c=a.defer();return void 0===b?c.resolve(null):c.resolve(this.create(b)),c.promise},g._clearCache=function(){this._cache={}},g._clearCacheKey=function(a){delete this._cache[a]},g.prototype.save=function(){return this.constructor.save(this)},g.prototype.remove=function(){var a=this.constructor._config().id;return this.constructor.removeById(this[a])},g._init=function(){var a=this._config();this._skeletonHash=b("SRHelperFilter_hashFromSkeleton")(a.skeleton),this._store=d.getStore(a)},g._config=function(){},g}]),angular.module("App").factory("SRConnectionModel",["SRAbstractModel","SRDBConfigService",function(a,b){var c=function(b){a.call(this),this.id=void 0,this.disconnected=void 0,this.type=void 0,this.info=void 0,this.unavailable=!1,this.defaults=void 0,this.user=void 0,_.extend(this,b)};return c.inheritsFrom(a),c._cache={},c.getFilteredByType=function(a,b){b=b||{};var c=["type",a].join("-");if(!b.useCache||!this._cache[c]){var d={fields:["type"],filters:{only:[a]}},e=this.getFilteredByOptions(d);e.then(null,this._clearCacheKey.bind(this,c)),this._cache[c]=e}return this._cache[c]},c.sortConnectionsByPriority=function(a){_.isArray(a)&&a.sort(c._sortByPriorityFunction)},c.sortConnectionsByType=function(a){_.isArray(a)&&a.sort(c._sortByTypeFunction)},c.sortConnectionsByInfo=function(a){_.isArray(a)&&a.sort(c._sortByInfoFunction)},c._sortByPriorityFunction=function(a,b){var d=void 0!==_.getPath(a,"defaults.priority")?a.defaults.priority:999,e=void 0!==_.getPath(b,"defaults.priority")?b.defaults.priority:999,f=d-e;return 0!==f?f:c._sortByTypeFunction(a,b)},c._sortByTypeFunction=function(a,b){var d=a.type,e=b.type;return d!==e?d>e?1:-1:c._sortByInfoFunction(a,b)},c._sortByInfoFunction=function(a,b){var c=a.info,d=b.info;return c>d?1:-1},c._config=function(){return b.connectionConfigForVersion(CONFIG.dbVersion)},c._init(),c}]),angular.module("App").factory("SRSyncTokenModel",["SRAbstractModel","SRDBConfigService","SRQCascaderService",function(a,b,c){var d=function(b){a.call(this),this.calendarId=void 0,this.connectionId=void 0,this.syncToken=void 0,_.extend(this,b)};return d.inheritsFrom(a),d._cache={},d.getByCalendarId=function(a){return this.getById(a)},d.getFilteredByConnectionId=function(a){var b={fields:["connectionId"],filters:{only:[a]}};return this.getFilteredByOptions(b)},d.removeFilteredByCalendarId=function(a){return this.removeById(a)},d.removeFilteredByConnectionId=function(a){var b=c.createCascader([this.getFilteredByConnectionId.bind(this,a),function(a){var b=_.pluck(a,"calendarId");return this.removeById(b)}.bind(this)]);return b.execute()},d._config=function(){return b.syncTokenConfigForVersion(CONFIG.dbVersion)},d._init(),d}]),angular.module("App").factory("SRContactModel",["SRAbstractModel","SRDBConfigService",function(a,b){var c=function(b){a.call(this),this.email=void 0,this.name=void 0,this.firstName=void 0,this.lastName=void 0,this.score=0,_.extend(this,b)};return c.inheritsFrom(a),c._cache={},c.getByEmail=function(a){return this.getById(a)},c._config=function(){return b.contactConfigForVersion(CONFIG.dbVersion)},c._init(),c}]),angular.module("App").factory("SRCalendarModel",["SRAbstractModel","$q","SRDBConfigService","SRQCascaderService","SRConnectionModel","SRSettingsService",function(a,b,c,d,e,f){var g=function(b){a.call(this),this.id=void 0,this.type=void 0,this.title=void 0,this.color=void 0,this.writable=!1,this.push=!1,this.defaults={},this.connectionId=void 0,this.visible=!1,this.reminders=!1,_.extend(this,b),this.color||(this.id&&this.id.contains("facebook")?this.color="3b5998":this.color="fa565a")};return g.inheritsFrom(a),g._cache={},g.electDefaultCalendar=function(){var a=b.all([g.getFilteredByWritable(),e.getAll({useCache:!0})]).then(function(a){var b=a[0],c=a[1];b.length>0&&(g.sortCalendarsByConnection(b,c),f.set("defaultCalendar",b[0].id))}.bind(this));return a},g.getFilteredByType=function(a,b){b=b||{};var c=["type",a].join("-");if(!b.useCache||!this._cache[c]){var d={fields:["type"],filters:{only:[a]}},e=this.getFilteredByOptions(d);e.then(null,this._clearCacheKey.bind(this,c)),this._cache[c]=e}return this._cache[c]},g.getFilteredByConnectionId=function(a,b){b=b||{};var c=["connectionId",a].join("-");if(!b.useCache||!this._cache[c]){var d={fields:["connectionId"],filters:{only:[a]}},e=this.getFilteredByOptions(d);e.then(null,this._clearCacheKey.bind(this,c)),this._cache[c]=e}return this._cache[c]},g.getFilteredByVisible=function(){var a=d.createCascader([this.getAll.bind(this,{useCache:!0}),function(a){var b=_.filter(a,function(a){return a.visible===!0});return b}]);return a.execute()},g.getFilteredByReminders=function(){var a=d.createCascader([this.getAll.bind(this,{useCache:!0}),function(a){var b=_.filter(a,function(a){return a.reminders===!0});return b}]);return a.execute()},g.getFilteredByWritable=function(){var a=d.createCascader([this.getAll.bind(this,{useCache:!0}),function(a){var b=_.filter(a,function(a){return a.writable===!0});return b}]);return a.execute()},g.getFilteredByPush=function(){var a=d.createCascader([this.getAll.bind(this,{useCache:!0}),function(a){var b=_.filter(a,function(a){return a.push===!0});return b}]);return a.execute()},g.removeFilteredByConnectionId=function(a){var b=d.createCascader([this.getFilteredByConnectionId.bind(this,a),function(a){var b=_.pluck(a,g._config().id);return this.removeById(b)}.bind(this)]);return b.execute()},g.sortCalendarsByPriority=function(a){_.isArray(a)&&a.sort(g._sortByPriorityFunction)},g.sortCalendarsByTitle=function(a){_.isArray(a)&&a.sort(g._sortByTitleFunction)},g.sortCalendarsByConnection=function(a,b){if(_.isArray(a)&&_.isArray(b)){var c=(b||[]).slice(0);e.sortConnectionsByPriority(c);var d=_.map(c,"id");a.sort(function(a,b){var c=_.indexOf(d,a.connectionId),e=_.indexOf(d,b.connectionId),f=c-e;return 0!==f?f:g._sortByPriorityFunction(a,b)})}},g._sortByPriorityFunction=function(a,b){var c=void 0!==_.getPath(a,"defaults.priority")?a.defaults.priority:999,d=void 0!==_.getPath(b,"defaults.priority")?b.defaults.priority:999,e=c-d;return 0!==e?e:g._sortByTitleFunction(a,b)},g._sortByTitleFunction=function(a,b){var c=a.title,d=b.title;return c>d?1:-1},g._config=function(){return c.calendarConfigForVersion(CONFIG.dbVersion)},g._init(),g}]),angular.module("App").factory("SROccurrenceModel",["SRAbstractModel","SRPlaceModel","SRPersonModel","$q","SRCalendarModel","SRFocusingEventService","SRDateService","$filter","SRExdateParserService","$log","SRSettingsService","$rootScope","SRDBConfigService","SRBrowserService","SRQCascaderService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=function(d){a.call(this),this.id=void 0,this.sourceId=void 0,this.type=void 0,this.status=void 0,this.title=void 0,this.description=void 0,this.place=void 0,this.icon=void 0,this.userRsvpStatus=void 0,this.start=void 0,this.end=void 0,this.organizer=void 0,this.inviter=void 0,this.attendees=void 0,this.recurrence=void 0,this.reminders=void 0,this.editable=void 0,this.transparent=void 0,this.uris=void 0,this.extensions=void 0,this.iCalUID=void 0,this.calendarId=void 0,this.connectionId=void 0,this.eventId=void 0,this.startDate=void 0,this.endDate=void 0,this.allDay=void 0,this.durationDays=void 0,this.timezone=void 0,this.parent=void 0,this.exception=void 0,this.exceptionToDelete=void 0,this.originalEventId=void 0,this.originalStart=void 0,this.instance=void 0,this.imported=void 0,this.updated=void 0,this.hidden=void 0,this.skipNotificationEmail=void 0,this.userRsvpStatusChanged=void 0,this.isNew=void 0,_.extend(this,d),this.place=_.isEmpty(this.place)||this.place instanceof b?this.place:new b(this.place),this.organizer=_.isEmpty(this.organizer)||this.organizer instanceof c?this.organizer:new c(this.organizer),this.inviter=_.isEmpty(this.inviter)||this.inviter instanceof c?this.organizer:new c(this.inviter),_.hasPath(this,"attendees.data")&&_.isArray(this.attendees.data)&&(this.attendees.data=_.map(this.attendees.data,function(a){return a instanceof c?a:new c(a)}))};return p.inheritsFrom(a),p._customFieldsToRemove=["calendarId","connectionId","eventId","startDate","endDate","allDay","durationDays","timezone","parent","exception","originalEventId","originalStart","instance","imported","hidden","userRsvpStatusChanged","isNew"],p._cache={},p.RECURRING_OPTION_ONLY=1,p.RECURRING_OPTION_FOLLOWINGS=2,p.RECURRING_OPTION_ALL=3,p.create=function(a){a=a||{};var b=new p;return b.isNew=!0,b.id=uuid.v4(),b.iCalUID=b.id,b.eventId=b.id,b.originalEventId=b.id,b.title="",b.status="confirmed",b.connectionId=_.getPath(a,["calendar","connectionId"]),b.calendarId=_.getPath(a,["calendar","id"]),b.type=function(){return _.hasPath(a,["calendar","type"])&&"s"===a.calendar.type.slice(-1)?a.calendar.type.slice(0,-1):_.getPath(a,["calendar","type"])}(),a.allDay===!0?(b.startDate=a.start||g.getStartOfTheDay(Date.now()),b.endDate=a.end||g.getStartOfTheDay(Date.now()),b.allDay=!0):(b.startDate=a.start||g.getRoundTime(new Date),b.endDate=a.end||g.getRoundTime(new Date),b.allDay=!1),b.timezone=k.get("currentTimezone")||CONFIG.userTimezone,b.editable=!0,b.transparent=!1,b.attendees={data:[],counts:{invited:0}},_.isNull(k.get("defaultAlert"))||(b.reminders=[{minutes:k.get("defaultAlert")}]),b.updated=Date.now(),b.parent=!1,b.exception=!1,b.instance=!1,b},p.createFromJSON=function(a,b){if(a=a||{},b=b||{},_.isArray(a)){var c=_.map(a,function(a){return p.createFromJSON(a,b)});return c}var d=new p(a);return _.isEmpty(b)||d._computeCustomFields(b),d},p.getFilteredByMaxTimeWindow=function(a){return this.getFilteredBetweenDates(CONFIG.calendarMinDate,CONFIG.calendarMaxDate,a)},p.getFilteredBetweenDates=function(a,b,c){c=c||{};var d=o.createCascader([this._getFilteredBetweenDates.bind(this,a,b,c),this.filterOccurrencesForRendering.bind(this)]);return d.execute()},p.getFilteredByRsvpNeeded=function(a){a=a||{};var b=moment().startOf("day").toDate(),c=moment().startOf("minute").toDate(),d=o.createCascader([this._getFilteredBetweenDates.bind(this,b,CONFIG.calendarMaxDate,{useCache:a.useCache}),function(b){return _.filter(b,function(b){return void 0!==a.calendarId&&b.calendarId!==a.calendarId?!1:b.allDay===!1&&void 0!==_.getPath(b,"endDate")&&c.getTime()>b.endDate.getTime()?!1:!0})},this._filterRsvpOccurrences.bind(this)]);return d.execute()},p.getFilteredBySyncNeeded=function(a){a=a||{};var b="syncNeeded";if(!a.useCache||!this._cache[b]){var c={fields:["updated"],iterateChecks:[{field:"updated",operator:"NOT NULL"}]},d=this.getFilteredByOptions(c);d.then(null,this._clearCacheKey.bind(this,b)),this._cache[b]=d}return this._cache[b]},p.getFilteredByConnectionId=function(a,b){b=b||{};var c=["connectionId",a].join("-");if(!b.useCache||!this._cache[c]){var d=this.getByIdOnIndex(a,"connectionId");d.then(null,this._clearCacheKey.bind(this,c)),this._cache[c]=d}return this._cache[c]},p.getFilteredByCalendarId=function(a,b){b=b||{};var c=["calendarId",a].join("-");if(!b.useCache||!this._cache[c]){var d=this.getByIdOnIndex(a,"calendarId");d.then(null,this._clearCacheKey.bind(this,c)),this._cache[c]=d}return this._cache[c]},p.getFilteredByEventId=function(a,b){b=b||{},b.onlyInstances=b.onlyInstances?!0:!1;var c=["eventId",a,b.onlyInstances].join("-");if(!b.useCache||!this._cache[c]){var d={fields:["eventId"],filters:{only:[a]}};b.onlyInstances&&(d.iterateChecks=[{field:"instance",operator:"=",value:!0}]);var e=this.getFilteredByOptions(d);e.then(null,this._clearCacheKey.bind(this,c)),this._cache[c]=e}return this._cache[c]},p.getFilteredByParentIds=function(a,b){var c=new Date;a=[].concat(a),b=b||{};var d=["parentIds",JSON.stringify(a)].join("-");if(!b.useCache||!this._cache[d]){var e=o.createCascader([this.getByIdOnIndex.bind(this,a,"recurrence.parent.id"),function(a){return j.debug("%cgetFilteredByParentIds: %ccount: "+a.length+": %c"+(new Date-c)+" ms","color:purple","color:green","color:red"),a}]),f=e.execute();f.then(null,this._clearCacheKey.bind(this,d)),this._cache[d]=f}return this._cache[d]},p.getFilteredByParentEvents=function(a){a=a||{};var b="parentEvents";if(!a.useCache||!this._cache[b]){var c=o.createCascader([this.getAll.bind(this,{useCache:!0}),function(a){var b=_.filter(a,function(a){return a.parent&&"cancelled"!==a.status});return b}]),d=c.execute();d.then(null,this._clearCacheKey.bind(this,b)),this._cache[b]=d}return this._cache[b]},p.getFilteredByExistingPlace=function(a){a=a||{};var b="existingPlace";if(!a.useCache||!this._cache[b]){var c={fields:["place.name"]},d=this.getFilteredByOptions(c);d.then(null,this._clearCacheKey.bind(this,b)),this._cache[b]=d}return this._cache[b]},p.getAttendeesScores=function(){var a={},b=this.getAll({
useCache:!0}).then(function(b){for(var c=this._filterOccurrencesForAttendeesScores(b),d=0;d<c.length;d++)for(var e=c[d],f=e.attendees.data,g=0;g<f.length;g++){var h=f[g],i=_.getPath(h,["emails",0]);i&&(a[i]?a[i]=a[i]+1:a[i]=1)}return a}.bind(this));return b},p["import"]=function(a,b){return b=b||{},a=[].concat(a),p._save(a,b)},p.save=function(a,b){a=[].concat(a);var c=_.map(a,function(a){return a.save(b)});return d.all(c)},p.notificationsForOccurrences=function(a){var b=Date.now();return _.reduce(a,function(a,c,d){if("cancelled"===c.status||"notReplied"!==c.userRsvpStatus)return a;var e=function(){if(!c.start)return 0;var a=c.start.date||c.start.dateTime,b=moment(a).toDate();return b.getTime()}();return a.push({eventId:c.id,calendarId:c.calendarId,connectionId:c.connectionId,updated:b,startAt:e}),a},[])},p.sortOccurrencesByTitle=function(a){_.isArray(a)&&a.sort(p._sortByTitleFunction)},p.sortOccurrencesByDuration=function(a){_.isArray(a)&&a.sort(p._sortByDurationFunction)},p.sortOccurrencesByStartDate=function(a){_.isArray(a)&&a.sort(p._sortByStartDateFunction)},p.regenerateInstancesBetweenDates=function(a,b){d.defer();return p.getFilteredByParentEvents().then(function(c){var d=[];return _.each(c,function(c){d=d.concat(c.createInstances(a,b))}),this._store.save(d)}.bind(this))},p.filterOccurrencesForRendering=function(a){var b,c,d,g,h=o.createCascader([e.getFilteredByVisible.bind(e),function(d){g=_.zipObject(_.pluck(d,"id"),d);if(b=[],c={},a=_.uniq(a,"id"),_.each(a,function(a){a.hidden&&(c[a.eventId]=!0),a.instance&&g[a.calendarId]&&(a.type&&a.type.endsWith(":birthday")||b.push(a))}),b.length>0){var e=_.uniq(_.pluck(b,"originalEventId"));return p.getFilteredByParentIds(e,{useCache:!0})}return[]},function(a){return d={},_.each(a,function(a){if(a&&_.getPath(a,"recurrence.parent.id")&&_.getPath(a,"originalStart")){var b=[a.recurrence.parent.id,a.originalStart.getTime()].join(":");d[b]=!0}}),null},function(){return a=_.filter(a,function(a){var b=function(){if(!a.instance)return!1;if(!a.originalEventId||!a.startDate)return!1;var b=[a.originalEventId,a.startDate.getTime()].join(":");return!!d[b]}(),e=c[a.eventId];return b||e?!1:a.hidden?!1:a.parent?!1:"declined"===a.userRsvpStatus?!1:g[a.calendarId]?"cancelled"===a.status?!1:"facebook:event"!==a.type||"declined"!==a.userRsvpStatus&&"notReplied"!==a.userRsvpStatus||f.get()===a.id?!0:!1:!1})}]);return h.execute()},p.prototype.json=function(){var a=this.copy();return a._computeDatesFromCustomField(),a=_.clone(a),a.updated&&(a.updated=Math.floor(a.updated/1e3)),_.isEmpty(a.place)?a.place=null:a.place=a.place.json(),_.isEmpty(a.organizer)||(a.organizer=a.organizer.json()),_.isEmpty(a.inviter)||(a.inviter=a.inviter.json()),a.calendar=a.calendarId,_.isEmpty(this.attendees)||(a.attendees=_.reduce(this.attendees.data,function(a,b){return a.push(b.json()),a},[])),a=_.omit(a,function(a,b){return _.contains(p._customFieldsToRemove,b)||void 0===a})},p.prototype.createInstances=function(a,b){if(!_.hasPath(this,["recurrence","rules",0]))return j.warn("SROccurrenceModel.prototype.createInstances(): Event missing rule:",event),[];if("cancelled"===this.status||"declined"===this.userRsvpStatus)return[];var c=function(a,b){return b=b||a.tz&&a.tz(),a=function(){var b=a.toDate?a:moment(a);return b.year()<1970&&b.year(1970),b}(),b?g.getTimezoneJSDate(a.valueOf(),b):a.toDate()};try{var d=function(){return this.start&&this.start.timezone?this.start.timezone:CONFIG.userTimezone}.bind(this)(),e=_.filter(this.recurrence.rules,function(a){return a.contains("EXDATE")}),f=[];_.each(e,function(a){f=f.concat(i.parse(a))});var h=_.find(this.recurrence.rules,function(a){return a.contains("RRULE")}),k=h.replace("RRULE:",""),l=RRule.parseString(k),m=_.reduce(k.split(";"),function(a,b){if(b){var c=b.split("=")[0],d=b.split("=")[1];a[c]=d}return a},{});k.contains("DTSTART")||(this.allDay?l.dtstart=moment(this.start.date,"YYYY-MM-DD").toDate():l.dtstart=c(this.startDate,d)),void 0!==m.UNTIL&&(m.UNTIL.contains("T")||(m.UNTIL=m.UNTIL+"T000000Z"),l.until=c(moment(m.UNTIL,"YYYYMMDDTHHmmss"))),l&&l.dtstart&&0===l.freq&&l.bymonthday&&(l.bymonthday=void 0);var n=new RRule(l),o=n.between(a,b),p=function(){return this.allDay?g.daysBetween(this.startDate,this.endDate):this.endDate.getTime()-this.startDate.getTime()}.bind(this)(),q=[];return _.each(o,function(a){a=new Date(a.getTime());var b=new Date(a);if(this.allDay&&(a=g.localToUtc(a)),f.length){var c=_.find(f,function(b){return b.getTime()===a.getTime()});if(c)return}var d=this.copy();if(d.id=d.id+"_"+a.getTime(),d.startDate=new Date(a.getTime()),d.allDay){var e=moment(b).add(p,"days").startOf("day").toDate();d.endDate=g.localToUtc(e)}else d.endDate=new Date(a.getTime()+p);d.parent=!1,d.exception=!1,d.instance=!0,d.originalStart=a,d._computeDatesFromCustomField(),q.push(d)}.bind(this)),q}catch(r){return j.warn("SROccurrenceModel.prototype.createInstances(): "+this.title,r),[]}},p.prototype.rsvp=function(a){if(a=_.isString(a)?a:"notReplied","ignored"===a){var b=this.copy();return b._transformIntoHiddenEvent(),b.save()}return this.userRsvpStatus=a,this.userRsvpStatusChanged=!0,_.getPath(this,["attendees","data",0])&&(this.attendees.data=_.map(this.attendees.data,function(b){return b.self===!0&&(b.rsvpStatus=a),b}.bind(this))),this.save()},p.prototype.cancel=function(a){a=a||{};var b=d.defer();if(!this.instance)return this.status="cancelled",this.updated=Date.now(),a.skipNotificationEmail&&(this.skipNotificationEmail=!0),p._save([this],{isUpdate:!0}).then(function(){l.$emit("didCancelEvent"),b.resolve()},b.reject);var c={};return c[p.RECURRING_OPTION_ONLY]=this._cancelInstance.bind(this),c[p.RECURRING_OPTION_FOLLOWINGS]=this._cancelFollowingInstances.bind(this),c[p.RECURRING_OPTION_ALL]=this._cancelAllInstances.bind(this),c[a.recurringType]().then(function(){l.$emit("didCancelEvent"),b.resolve()},b.reject),b.promise},p.prototype.save=function(a){var b=p.getById(this.id).then(function(b){var c;return b?(c=this._update(a),c.then(function(){l.$emit("didUpdateEvent")})):(c=p._save([this],a),c.then(function(){l.$emit("didCreateEvent")}.bind(this))),c}.bind(this));return b},p.prototype.isOnMultipleDays=function(){var a=g.dateToCurrentTimezone(this.endDate),b=g.dateToCurrentTimezone(this.startDate);if(void 0===a)return!1;var c=moment(a).startOf("day"),d=moment(b).startOf("day");return d.valueOf()===c.valueOf()?!1:a.getTime()===c.valueOf()&&moment(a).diff(moment(b),"days")<1?!1:!0},p._filterOccurrencesForAttendeesScores=function(a){var b={"icloud:event":!0,"google:event":!0,"office365:event":!0,"office365-sdf:event":!0},c=_.filter(a,function(a){return a.instance===!0?!1:b[a.type]?void 0===_.getPath(a,["attendees","data",0])?!1:!0:!1});return c},p._filterRsvpOccurrences=function(a){var b=o.createCascader([e.getFilteredByVisible.bind(e),function(b){var c=_.pluck(b,"id");a=_.uniq(a,"id");var d=_.reduce(a,function(a,b,c){return b.hidden&&a.push({eventId:b.eventId}),a},[]);return a=_.filter(a,function(a){var b=_.find(d,function(b){return b.eventId===a.eventId});return b?!1:a.hidden?!1:"notReplied"!==a.userRsvpStatus?!1:"cancelled"===a.status?!1:a.instance?!1:_.contains(c,a.calendarId)?!0:!1})}]);return b.execute()},p._createFromDB=function(a){var b=d.defer(),c=null;return _.isArray(a)?c=_.map(a,function(a){return new p(a)}):a&&(c=new p(a)),b.resolve(c),b.promise},p._save=function(a,b){var c=new Date;b=b||{},a=[].concat(a);var e=[],f=(Date.now(),d.defer());return a.length?(_.each(a,function(c){(b.isUpdate||c.isNew)&&(c.durationDays=g.getDaysDuration(c.startDate,c.endDate),c._computeDatesFromCustomField()),_.hasPath(c,["recurrence","rules",0])&&(c._transformIntoRecurringEvent(),a.push.apply(a,c.createInstances(CONFIG.calendarMinDate,CONFIG.calendarMaxDate))),(!b.skipDelete||b.isUpdate)&&e.push(p.getFilteredByEventId(c.eventId,{onlyInstances:!0,useCache:!0}))}),d.all(e).then(function(b){b=_.flatten(b);var c=_.pluck(b,"id");this.removeById(c).then(function(){var b=h("SRHelperFilter_objectsFilteredFromHash")(a,this._skeletonHash);this._store.save(b).then(f.resolve,f.reject)}.bind(this))}.bind(this)),f.promise["finally"](function(){this._clearCache(),j.debug("%c_save: %ccount: "+a.length+": %c"+((new Date).getTime()-c.getTime())+" ms","color:purple","color:green","color:red")}.bind(this)),f.promise):(f.resolve(),f.promise)},p._config=function(){return m.occurrenceConfigForVersion(CONFIG.dbVersion)},p._sortByTitleFunction=function(a,b){return a.title?b.title?a.title.toLowerCase()<b.title.toLowerCase()?-a.startDate:b.startDate:-1:1},p._sortByDurationFunction=function(a,b){var c=a.endDate-a.startDate-(b.endDate-b.startDate);return 0===c?0-p._sortByTitleFunction(a,b):c},p._sortByStartDateFunction=function(a,b){var c=function(){return a.allDay?g.allDayUtcToMidnight(a.startDate):a.startDate}(),d=function(){return b.allDay?g.allDayUtcToMidnight(b.startDate):b.startDate}(),e=c-d;return 0===e?0-p._sortByDurationFunction(a,b):e},p._getFilteredBetweenDates=function(a,b,c){var d=new Date;c=c||{};var e=["betweenDates",a.getTime(),b.getTime()].join("-");if(!c.useCache||!this._cache[e]){var f=g.localToUtc(a),h=g.localToUtc(b);if(n.hasIndexedDB()){var i=moment(f).subtract(1,"days").toDate(),k=moment.max(moment(b),moment(h)).toDate(),l={fields:["durationDays","startDate"],filters:{lower:[1,i],excludeLower:!1,upper:[1,k],excludeUpper:!1}},m={fields:["durationDays","startDate"],filters:{lower:[2,new Date(0)],excludeLower:!1}},p=[],q=o.createCascader([this.getFilteredByOptions.bind(this,l),function(a){return p.push(a),null},this.getFilteredByOptions.bind(this,m),function(a){return p.push(a),p},function(c){var e=_.flatten(c);return e=_.filter(e,function(c){return c.allDay?c.startDate<h&&c.endDate>f:c.startDate<=b&&c.endDate>a}),j.debug("%c_getFilteredByDates: %ccount: "+e.length+": %c"+(new Date-d)+" ms","color:purple","color:green","color:red"),e}]);this._cache[e]=q.execute()}else{var r="SELECT * FROM "+this._config().name+" WHERE ((allDay = 1 AND startDate < ? AND endDate > ?) OR (allDay = 0 AND startDate <= ? AND endDate > ?))",s=[g.dateToUnix(h),g.dateToUnix(f),g.dateToUnix(b),g.dateToUnix(a)],q=o.createCascader([this._store.executeTransaction.bind(this._store,r,s,!0),function(a){return j.debug("%c_getFilteredByDates: %ccount: "+a.length+": %c"+(new Date-d)+" ms","color:purple","color:green","color:red"),this._createFromDB(a)}.bind(this)]);this._cache[e]=q.execute()}}return this._cache[e].then(null,this._clearCacheKey.bind(this,e)),this._cache[e]},p.prototype._computeCustomFields=function(a){a=a||{};var b=a.now||Date.now();this.startDate=function(){if(!_.hasPath(this,"start.date")&&!_.hasPath(this,"start.dateTime"))return null;if(this.start.date){var a=moment.utc(this.start.date,"YYYY-MM-DD").toDate();return a}var b=moment(this.start.dateTime,"YYYY-MM-DDTHH:mm:ssZ").toDate();return b}.bind(this)(),this.endDate=function(){return _.hasPath(this,"end.date")||_.hasPath(this,"end.dateTime")?this.end.date?moment.utc(this.end.date,"YYYY-MM-DD").toDate():moment(this.end.dateTime,"YYYY-MM-DDTHH:mm:ssZ").toDate():this.startDate?this.start.date?moment.utc(this.start.date,"YYYY-MM-DD").add(1,"day").toDate():new Date(this.startDate.getTime()):null}.bind(this)(),a.connectionId&&(this.connectionId=a.connectionId),a.calendarId&&(this.calendarId=a.calendarId),this.eventId=this.id,this.allDay=this.start&&this.start.date?!0:!1,this.durationDays=g.getDaysDuration(this.startDate,this.endDate),this.imported=b,this.timezone=function(){return this.start&&this.start.timezone?this.start.timezone:this.end&&this.end.timezone?this.end.timezone:void 0}.bind(this)(),_.hasPath(this,"recurrence.parent")?(this.parent=!1,this.exception=!0,this.instance=!1,this.originalStart=function(){return _.hasPath(this,"recurrence.original.date")?moment.utc(this.recurrence.original.date,"YYYY-MM-DD").toDate():moment(this.recurrence.original.dateTime,"YYYY-MM-DDTHH:mm:ssZ").toDate()}.bind(this)()):_.hasPath(this,["recurrence","rules",0])?(this.parent=!0,this.exception=!1,this.instance=!1,this.originalEventId=this.sourceId):(this.parent=!1,this.exception=!1,this.instance=!1,this.originalEventId=this.sourceId)},p.prototype._computeDatesFromCustomField=function(){var a=this.timezone||CONFIG.userTimezone;return this.allDay?(this.start={date:moment.utc(this.startDate).format("YYYY-MM-DD"),timezone:a},this.end={date:moment.utc(this.endDate).format("YYYY-MM-DD"),timezone:a}):(this.start={dateTime:moment(this.startDate).format("YYYY-MM-DDTHH:mm:ssZ"),timezone:a},this.end={dateTime:moment(this.endDate).format("YYYY-MM-DDTHH:mm:ssZ"),timezone:a}),this},p.prototype._transformIntoException=function(a){this.id=uuid.v4(),a.allDay===!0?this.recurrence={original:{date:moment.utc(this.originalStart).format("YYYY-MM-DD")},parent:{id:a.sourceId}}:this.recurrence={original:{dateTime:moment(this.originalStart).format()},parent:{id:a.sourceId}},this.parent=!1,this.exception=!0,this.instance=!1},p.prototype._transformIntoRecurringEvent=function(){this.parent=!0,this.exception=!1,this.instance=!1},p.prototype._limitRecurrence=function(a){var b=_.findIndex(this.recurrence.rules,function(a){return a.contains("RRULE")});if(-1!==b){var c=this.recurrence.rules[b],d=RRule.parseString(c.replace("RRULE:",""));d.until=moment(a).subtract(1,"ms").toDate(),d.count&&delete d.count;var e=new RRule(d);e=["RRULE:",e.toString()].join(""),this.recurrence.rules[b]=e}},p.prototype._limitCountRecurrence=function(a){var b=_.findIndex(this.recurrence.rules,function(a){return a.contains("RRULE")});if(-1!==b){var c=this.recurrence.rules[b],d=RRule.parseString(c.replace("RRULE:","")),e=RRule.parseString(c.replace("RRULE:",""));c.contains("DTSTART")||(e.dtstart=a.startDate);var f=new RRule(e);if(d.count){var g=f.between(a.startDate,this.startDate);d.count=d.count-(g.length+1)}var h=new RRule(d);h=["RRULE:",h.toString()].join(""),this.recurrence.rules[b]=h}},p.prototype._updateAttendeesStatus=function(a){_.hasPath(this,"attendees.data")&&0!==_.getPath(this,"attendees.data.length")&&this._shouldResetAttendeesStatus(a)&&_.each(this.attendees.data,function(a){a.rsvpStatus="notReplied"})},p.prototype._shouldResetAttendeesStatus=function(a){return _.isEmpty(this)||!this.editable||this.isNew?!1:a.startDate.getTime()!==this.startDate.getTime()?!0:a.endDate.getTime()!==this.endDate.getTime()?!0:a.allDay!==this.allDay?!0:!1},p.prototype._update=function(a){a=a||{};var b;if(this.isNew=!1,!this.instance&&_.hasPath(this,["recurrence","rules",0]))this._transformIntoRecurringEvent(),b=this._updateRegular();else if(this.instance&&_.isEmpty(this.recurrence))b=d.all([p.getById(this.eventId),p.getFilteredByParentIds(this.originalEventId,{useCache:!0})]).then(function(a){var b=a[0],c=a[1];delete this.id,delete this.parent,delete this.exception,delete this.instance,delete this.originalStart,delete this.originalEventId,b=_.extend(b,this),b.recurrence={rules:[]},b.updated=Date.now();var e=[];return e.push(b._updateRegular()),_.each(c,function(a){"cancelled"!==a.status&&(a.status="cancelled",a.updated=Date.now(),e.push(a._updateRegular()))}),d.all(e)}.bind(this));else if(this.instance){var c={};c[p.RECURRING_OPTION_ONLY]=this._updateInstance.bind(this),c[p.RECURRING_OPTION_FOLLOWINGS]=this._updateFollowingInstances.bind(this),c[p.RECURRING_OPTION_ALL]=this._updateAllInstances.bind(this),b=c[a.recurringType]()}else b=this._updateRegular();return b},p.prototype._updateRegular=function(){var a=d.defer();return p.getById(this.id).then(function(a){return this.updated=Date.now(),this._updateAttendeesStatus(a),p._save(this,{isUpdate:!0})}.bind(this)).then(a.resolve,a.reject),a.promise},p.prototype._updateInstance=function(){var a=d.defer();return d.all([p.getById(this.eventId),p.getById(this.id)]).then(function(a){var b=a[0],c=a[1];return this._transformIntoException(b),this.updated=Date.now(),this._updateAttendeesStatus(c),p._save([b,this],{isUpdate:!0})}.bind(this)).then(a.resolve,a.reject),a.promise},p.prototype._updateFollowingInstances=function(){var a=d.defer();return d.all([p.getById(this.eventId),p.getById(this.id)]).then(function(a){var b=a[0],c=a[1],d=_.find(b.recurrence.rules,function(a){return a.contains("RRULE")}),e=this.allDay?g.allDayUtcToMidnight(this.originalStart):this.originalStart;return b._limitRecurrence(e),b.updated=Date.now(),this.id=uuid.v4(),this.eventId=this.id,this.iCalUID=uuid.v4(),this.updated=Date.now(),this.parent=!0,this.exception=!1,this.instance=!1,this.isNew=!0,this._updateAttendeesStatus(c),this.originalStart.getTime()===this.startDate.getTime()&&d.contains("COUNT")&&this._limitCountRecurrence(b),p._save([b,this],{isUpdate:!0})}.bind(this)).then(a.resolve,a.reject),a.promise},p.prototype._updateAllInstances=function(){var a=d.defer(),b={allDay:this.allDay,offset:this.startDate.getTime()-this.originalStart.getTime(),duration:this.endDate.getTime()-this.startDate.getTime()};return p.getById(this.eventId).then(function(a){var c=a.copy();return delete this.id,delete this.start,delete this.startDate,delete this.end,delete this.endDate,delete this.parent,delete this.exception,delete this.instance,delete this.originalStart,delete this.originalEventId,a=_.extend(a,this),a.allDay=b.allDay,a.startDate=new Date(a.startDate.getTime()+b.offset),a.endDate=new Date(a.startDate.getTime()+b.duration),a.updated=Date.now(),a._updateAttendeesStatus(c),p._save(a,{isUpdate:!0})}.bind(this)).then(a.resolve,a.reject),a.promise},p.prototype._cancelInstance=function(){var a=d.defer();return p.getById(this.eventId).then(function(a){return this._transformIntoException(a),this.status="cancelled",this.exceptionToDelete=!0,this.updated=Date.now(),p._save([a,this],{isUpdate:!0})}.bind(this)).then(a.resolve,a.reject),a.promise},p.prototype._cancelFollowingInstances=function(){var a=d.defer();return p.getById(this.eventId).then(function(a){var b=this.allDay?g.allDayUtcToMidnight(this.originalStart):this.originalStart;return a._limitRecurrence(b),a.updated=Date.now(),p._save([a],{isUpdate:!0})}.bind(this)).then(a.resolve,a.reject),a.promise},p.prototype._cancelAllInstances=function(){var a=d.defer();return d.all([p.getById(this.eventId),p.getFilteredByParentIds(this.originalEventId,{useCache:!0})]).then(function(a){var b=[],c=a[0],d=a[1];return c.status="cancelled",c.updated=Date.now(),b.push(c),_.each(d,function(a){"cancelled"!==a.status&&(a.status="cancelled",a.exceptionToDelete=!0,a.updated=Date.now(),b.push(a))}),p._save(b,{isUpdate:!0})}.bind(this)).then(a.resolve,a.reject),a.promise},p.prototype._transformIntoHiddenEvent=function(a){this.hidden=!0,this.id=["sunrise-hidden",this.id].join(":")},p._init(),p}]),angular.module("App").factory("SRFavoritePlaceModel",["SRAbstractModel","SRPlaceModel","SRUUIDService","SRDBConfigService",function(a,b,c,d){var e=5,f=function(d){a.call(this),this.id=void 0,this.title=void 0,this.standard=!1,this.place=void 0,_.extend(this,d),this.id=this.id?this.id:c.generate(e),this.place=_.isEmpty(this.place)||this.place instanceof b?this.place:b.create(this.place)};return f.inheritsFrom(a),f._cache={},f.createFromJSON=function(a){if(a=a||{},_.isArray(a)){var b=_.map(a,function(a){return f.createFromJSON(a)});return b}var c=new f(a);return c},f.prototype.json=function(){var a=this["super"].json.call(this);return this.place&&(a.place=this.place.json()),a},f.prototype.description=function(){return this.place?this.place.description():null},f._config=function(){return d.favoritePlaceConfigForVersion(CONFIG.dbVersion)},f._init(),f}]),angular.module("App").factory("SRPlaceModel",["$injector","$q","SRBaseModel",function(a,b,c){var d=function(a){c.call(this),this.name=void 0,this.address=void 0,this.geometry=void 0,_.extend(this,a)};return d.inheritsFrom(c),d.placeFromGooglePrediction=function(c){var e,f=b.defer(),g=a.get("SRPlaceService");return c.reference?g.getDetails(c.reference).then(function(a){var b=function(a,b){var c=_.find(a,function(a){return _.contains(a.types,b)});return c?c.short_name:null};if(a.geometry){var g=a.address_components,h=b(g,"street_number"),i=b(g,"route");e=new d({name:c.title||a.name,address:{city:b(g,"locality")||b(g,"sublocality")||void 0,country:b(g,"country")||void 0,state:b(g,"administrative_area_level_1")||void 0,street:i?[h,i].join(" "):void 0},geometry:{location:{lat:a.geometry.location.lat,lng:a.geometry.location.lng}}})}else e=new d({name:a.name});f.resolve(e)}.bind(this),function(){e=new d({name:c.title}),f.resolve(e)}.bind(this)):(e=new d({name:c.title}),f.resolve(e)),f.promise},d.prototype.description=function(){if(this.address&&!_.isEmpty(this.address)){var a=_.compact([this.address.street,this.address.city,this.address.state,this.address.country]);if(!_.isEmpty(a))return a.join(", ")}return this.name},d}]),angular.module("App").factory("SRPersonModel",["SRBaseModel",function(a){var b=function(b){a.call(this),this.id=void 0,this.name=void 0,this.firstName=void 0,this.lastName=void 0,this.emails=void 0,this.self=!1,this.rsvpStatus=void 0,_.extend(this,b)};return b.inheritsFrom(a),b.prototype.json=function(){return{name:this.name,email:_.getPath(this,["emails",0])}},b}]),angular.module("App").factory("SRMeetModel",["$q","$injector","$queueFactory","$rootScope","$filter","SRSettingsService","SRDateService","SRUserService","SROnlineStatusService","SRUUIDService","SRBaseModel","SROccurrenceModel",function(a,b,c,d,e,f,g,h,i,j,k,l){var m=function(a){k.call(this),a=a||{},this.id=void 0,this.status=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.freeBusyAt=void 0,this.title=void 0,this.autoTitle=void 0,this.dial=void 0,this.place=void 0,this.duration=void 0,this.timeZone=void 0,this.confirmedTimeId=void 0,this.confirmedAt=void 0,this.organizer=void 0,this.suggestedTimes=void 0,this.attendees=void 0,this.freeBusy=void 0,this.event=void 0,this.isEditable=void 0,_.extend(this,a)};return m.inheritsFrom(k),m._customFieldsToRemove=["isEditable"],m.prototype._syncQueue=c(1,!0),m.isValidConnectionType=function(a){var b={icloud:!0,google:!0,office365:!0,"office365-sdf":!0};return b[a]||!1},m.create=function(a){if(a=a||{},_.isArray(a)){var b=_.map(a,function(a){return new this(a)}.bind(this));return b}return a.id=a.id||j.generate(10),a.place=a.place||{},a.duration=a.duration||60,a.timeZone=a.timeZone||f.get("currentTimezone"),a.organizer=a.organizer||{},a.suggestedTimes=a.suggestedTimes||[],a.attendees=a.attendees||[],a.freeBusy=a.freeBusy||[],a.autoTitle="New Meeting",a.isEditable=!0,a.event=a.event||{},a.calendarId&&(a.event={calendarId:a.calendarId},a.freeBusy=[a.calendarId],delete a.calendarId),new m(a)},m.getTimeSlotDate=function(a){return _.isObject(a)&&_.hasPath(a,"start")?new Date(a.start):new Date(a)},m.prototype.json=function(){var a=this.copy();return a=_.omit(a,function(a,b){return _.contains(m._customFieldsToRemove,b)||void 0==a})},m.prototype.copy=function(){return angular.copy(this)},m.prototype.getAvailableTimeSlotsSorted=function(){if(!_.size(this.suggestedTimes))return[];var a=g.dateToCurrentTimezone(),b=60*(this.duration||0)*1e3,c=_.chain(this.suggestedTimes).filter(function(c){var d=m.getTimeSlotDate(c);return d.getTime()+b>a.getTime()}).sortBy(function(a){var b=m.getTimeSlotDate(a);return b.getTime()}).value();return c},m.prototype.getAsOccurrences=function(){var a=function(){return d.hasMeetReply?this.getAvailableTimeSlotsSorted():this.suggestedTimes}.bind(this)(),b=_.reduce(a,function(a,b){var c=l.create(this),d=m.getTimeSlotDate(b),e=_.getPath(b,"id")||d.getTime();return c.id=[this.id,e].join(":"),c.meetId=this.id,c.timeSlotId=e,c.instance=!0,c.type="sunrise:meet",c.editable=!1,c.timezone=this.timeZone||f.get("currentTimezone"),c.startDate=new Date(d),c.endDate=new Date(d.getTime()+60*this.duration*1e3),c.allDay=!1,a.push(c),a}.bind(this),[]);return b},m.prototype.getConfirmedTimeSlot=function(){var a=_.find(this.suggestedTimes,function(a){return a.id===this.confirmedTimeId}.bind(this));return a||{}},m.prototype.addTimeSlot=function(a){if(!_.hasPath(a,"start"))return!1;if(!this.isEditable)return!1;var b;return(b=a.skipOverlappedTimeSlot&&a.duration?_.find(this.suggestedTimes,function(b){var c=m.getTimeSlotDate(b).getTime(),d=c+60*a.duration*1e3-1,e=a.start.getTime(),f=a.start.getTime()+60*a.duration*1e3;return g.isRangeContains(e,f,c,d)}):_.find(this.suggestedTimes,function(b){return m.getTimeSlotDate(b).getTime()===a.start.getTime()}))?!1:(this.suggestedTimes.push({start:moment(a.start).format()}),d.$emit("reLayout"),!0)},m.prototype.removeTimeSlot=function(a){if(this.isEditable){var b=m.getTimeSlotDate(a).getTime();_.remove(this.suggestedTimes,function(a){return m.getTimeSlotDate(a).getTime()===b}),d.$emit("reLayout")}},m.prototype.updateFreeBusy=function(){void 0!==this.freeBusy&&_.isArray(this.freeBusy)&&(this.freeBusy=[_.getPath(this,["event","calendarId"])])},m.prototype.changeTimezone=function(a){var b=this.timeZone;this.timeZone=a,this.suggestedTimes=_.map(this.suggestedTimes,function(c){var d=m.getTimeSlotDate(c),e=g.getDifferrenceBetweenTimezone(b,a,d);return{id:c.id,start:moment(d).add(e,"ms").format()}}),d.$emit("reLayout")},m.prototype.changeDuration=function(a){this.duration=a,d.$emit("reLayout")},m.prototype.getLimits=function(){var a={min:CONFIG.calendarMinDate,max:CONFIG.calendarMaxDate};if(!_.hasPath(this,["suggestedTimes",0]))return a;var b=g.dateToCurrentTimezone(moment().startOf("week").toDate()),c=_.reduce(this.suggestedTimes,function(a,c){var d=m.getTimeSlotDate(c);return d=g.dateToCurrentTimezone(d),d.getTime()>=b.getTime()&&a.push({date:d,timestamp:d.getTime()}),a},[]),d=function(){var b=_.min(c,"timestamp");return b?moment(b.date).startOf("week").toDate():a.min}(),e=function(){var b=_.max(c,"timestamp");return b?moment(b.date).startOf("week").add(1,"week").toDate():a.min}();return{min:d,max:e}},m.prototype.getFormatedTitle=function(){if(this.title)return this.title;if("confirmed"===this.status){var a=h.getUserName(),b=this.autoTitle;return b&&b.startsWith(a)&&(b=b.replace(a,""),b=b.replace(/\//g,"")),b}return"Pending response"},m.prototype.sync=function(){var c=a.defer(),d=b.get("SRApiService");return i.isOnline()?(this._syncQueue._queue.length&&_.each(this._syncQueue._queue,function(a){this._syncQueue.remove(a)}.bind(this)),this._syncQueue.enqueue(function(){var a=this.json();return d.meets.update(a).then(c.resolve,c.resolve)}.bind(this)),c.promise):(c.reject(),c.promise)},m.prototype.disable=function(){this.isEditable=!1},m.prototype.enable=function(){this.isEditable=!0},m}]),angular.module("App").factory("SRWeekValidatorHelper",["SRCalendarModel",function(a){var b=function(){};b.prototype.weekDatesValidator=function(a,b,c){var d=a[b];if(!_.isArray(d))return new Error("Validation failed: dates is not an array");if(7!==d.length)return new Error("Validation failed: dates should be an array of 7 dates");for(var e=0;e<d.length;e++){var f=d[e];if(!moment.isMoment(f))return new Error("Validation failed: dates should be an array of momentjs objects")}},b.prototype.weekDateValidator=function(a,b,c){var d=a[b];return moment.isMoment(d)?void 0:new Error("Validation failed: date should be a momentjs object")};var c=new b;return c}]),angular.module("App").factory("SREventValidatorHelper",["SROccurrenceModel","SREventConstants",function(a,b){var c=_.assign({},{eventValidator:function(c,d,e){var f=React.PropTypes.shape({occurrence:React.PropTypes.instanceOf(a).isRequired,calendarColor:React.PropTypes.string.isRequired,state:React.PropTypes.oneOf(_.values(b.states)).isRequired,date:function(a,b,c){var d=a[b];return moment.isMoment(d)?void 0:new Error("Validation failed: date should be a momentjs object")},position:React.PropTypes.shape({top:React.PropTypes.number.isRequired,bottom:React.PropTypes.number.isRequired,duration:React.PropTypes.number.isRequired,left:React.PropTypes.number.isRequired,width:React.PropTypes.number.isRequired}).isRequired});return f}});return c}]),angular.module("App").factory("SREventHelper",["SROccurrenceColorService","SRDateService","SRIconicService","SROnlineStatusService","SRCacheService","SREventConstants","SRCalendarModel","SRSettingsService","$filter","SRI18nService","SRConnectionModel","$q",function(a,b,c,d,e,f,g,h,i,j,k,l){var m=5,n="foursquare:checkin",o="sunrise:meet",p=(f.states,function(){this._cache={}});p.prototype.ICON_STATE={CACHED:0,NOT_CACHED:1,REPLY:2,NULL:3},p.prototype.PROFILE_PICTURE_STATE={CACHED:0,NOT_CACHED:1,NULL:3},p.prototype.ICONIC_URL_STATE={NORMAL:0,HIGHLIGHTED:1},p.prototype.createEvent=function(a){return a=a||{},a.position=a.position||{},Immutable.fromJS(a)},p.prototype.getIconicUrl=function(a,b,d,e){var f=_.hasPath(a,["place","name"])?a.place.name:"",g=function(){return a.icon&&a.icon.overlay?a.icon.overlay:[a.title,f].join(":")}(),h=function(){return b===this.ICONIC_URL_STATE.NORMAL?d.iconic["default"].replace("#",""):d.iconic.focus.replace("#","")}.bind(this)(),i=c.getUrl(a.type,h,g,e,!1,!1);return i},p.prototype.getIconState=function(a,b){if("notReplied"===a.userRsvpStatus)return this.ICON_STATE.REPLY;var d=c.getCachedVersion(b);return d===!1?this.ICON_STATE.NOT_CACHED:null===d?this.ICON_STATE.NULL:this.ICON_STATE.CACHED},p.prototype.getProfilePicturesState=function(a,b){b=void 0!==b?b:m;var a=a;if(void 0===_.getPath(a,["attendees","data",0]))return{};for(var c={},d=Math.min(a.attendees.data.length,b),f=0;d>f;f++){var g=a.attendees.data[f];if(!g.self){var h=_.getPath(g,["image","thumbnail","url"]),i=e.get("images",h||g.emails[0]),j=g.id||g.name;void 0===i?c[j]=this.PROFILE_PICTURE_STATE.NOT_CACHED:null===i?c[j]=this.PROFILE_PICTURE_STATE.NULL:c[j]=this.PROFILE_PICTURE_STATE.CACHED}}return c},p.prototype.getColors=function(c,d,e,f){var g=a.getOccurrenceColors({isPast:b.dateToCurrentTimezone(c.endDate)<new Date,baseColor:e||d,calendarColor:d,noBackground:!f});return g},p.prototype.getDefaultCalendar=function(){var a=l.all([g.getFilteredByWritable({useCache:!0}),k.getAll({useCache:!0})]).then(function(a){var b=a[0],c=a[1];if(b&&b.length){var d=_.find(b,{id:h.get("defaultCalendar")});return d?d:(g.sortCalendarsByConnection(b,c),b[0])}return null});return a},p.prototype.getAriaLabel=function(a){var c=function(){return a.type===o?!1:a.type===n&&a.title?i("SRStringFilter_foursquareTitle")(a.title):a.title}(),d=[],e=function(){return a.allDay?b.allDayUtcToMidnight(a.startDate):b.dateToCurrentTimezone(a.startDate)}(),f=function(){return a.allDay?b.allDayUtcToMidnight(a.endDate):b.dateToCurrentTimezone(a.endDate)}();if(a.allDay&&1===a.durationDays)d.push(i("date")(e,"mediumDate"));else{var g=e.getTime()-(new Date).getTime();if(432e5>=g&&g>0)d.push(i("SRDateFilter_fromNow")(g,"long",!0));else{if(a.allDay)var h={start:a.allDay?i("date")(e,"mediumDate"):i("date")(e,"medium"),end:a.allDay?i("date")(f,"mediumDate"):i("date")(f,"medium")};else var h={start:i("date")(e,"medium"),end:b.isSameDay(e,f)?i("date")(f,"mediumTime"):i("date")(f,"medium")};d.push(j.getMessage("X_TO_X",[h.start,h.end]))}}return d.push(c),_.getPath(a,"place.name")&&d.push(_.getPath(a,"place.name")),d.join(", ")};var q=new p;return q}]),angular.module("App").factory("SRDOMHelper",function(){var a=function(){};a.prototype.isEventInElementBounds=function(a,b){if(void 0===a||void 0===b)return!1;var c=b.getBoundingClientRect();return a.clientX>=c.left&&a.clientX<=c.right&&a.clientY>=c.top&&a.clientY<=c.bottom};var b=new a;return b}),angular.module("App").factory("SRDispatcher",function(){var a=1,b="ID_",c=function(){this._callbacks={},this._isPending={},this._isHandled={},this._isDispatching=!1,this._pendingPayload=null};return c.prototype.register=function(c){var d=b+a++;return this._callbacks[d]=c,d},c.prototype.unregister=function(a){delete this._callbacks[a]},c.prototype.waitFor=function(a){for(var b=0;b<a.length;b++){var c=a[b];this._isPending[c]||this._invokeCallback(c)}},c.prototype.dispatch=function(a){this._startDispatching(a);try{for(var b in this._callbacks)this._isPending[b]||this._invokeCallback(b)}finally{this._stopDispatching()}},c.prototype.isDispatching=function(){return this._isDispatching},c.prototype._invokeCallback=function(a){this._isPending[a]=!0,this._callbacks[a](this._pendingPayload),
this._isHandled[a]=!0},c.prototype._startDispatching=function(a){for(var b in this._callbacks)this._isPending[b]=!1,this._isHandled[b]=!1;this._pendingPayload=a,this._isDispatching=!0},c.prototype._stopDispatching=function(){this._pendingPayload=null,this._isDispatching=!1},c}),angular.module("App").factory("SRWeekDispatcher",["SRDispatcher",function(a){return new a}]),angular.module("App").factory("SRWeekInteractionDispatcher",["SRDispatcher",function(a){return new a}]),angular.module("App").factory("SRWeekStore",["SRWeekDispatcher","SRWeekConstants","SREventConstants","SRLayoutBuilderService","SROccurrenceModel","SRWeekActionCreator","SREventHelper","SRDialogService","SRDateService","SRSettingsService","SRCurrentMeetService","$rootScope","SRShortcutService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n="CHANGE_EVENT",o=b.actionTypes,p=c.states,q=c.layout,r=c.types,s=b.modes,t=_.assign({},EventEmitter.prototype,{addChangeListener:function(a){this.on(n,a)},removeChangeListener:function(a){this.removeListener(n,a)},getEvents:function(){return this._eventsByType},getDates:function(){return this._dates},getHighlightedEventId:function(){return this._highlightedEventId},getMode:function(){return this._mode},isInteracting:function(){return this._mode===b.modes.INTERACTION},_init:function(){this._mode=l.hasMeetReply?s.MEET_RSVP:s.NORMAL,this._interactionOccurrence=null,l.$watch(function(){return _.getPath(h,"child._scope.hasChanged")},function(a,b){a===!0&&f.setMode(s.EDITING)})},_emitChange:function(){this.emit(n)},_getEventsPathById:function(a){var a=a,b=[];return this._eventsByType.forEach(function(c,d){"timed"===d?c.forEach(function(c,e){c.has(a)&&b.push([d,e,a])}):c.has(a)&&b.push([d,a])}),b},_isEventLastOfOccurrence:function(a){var b=a.get("occurrence");return b.isOnMultipleDays()?a.get("date").getTime()===i.getStartOfTheDay(i.dateToCurrentTimezone(b.endDate)).getTime():!0},_getMeetOcccurrences:function(){var a=k.get();return null===a?[]:a.getAsOccurrences()},_createEvents:function(a){var b=i.add("day",this._dates.last(),1),c=this._dates.first(),d=i.add("day",this._dates.last(),1),e=i.localToUtc(c),f=i.localToUtc(d);a=_.filter(a,function(a){return a.allDay?a.startDate<f&&a.endDate>e:i.dateToCurrentTimezone(a.startDate)<=d&&i.dateToCurrentTimezone(a.endDate)>c});var h=[];return _.each(a,function(a){if(void 0!==a.startDate){var c=_.getPath(this._calendarsById.get(a.calendarId),"color"),d=function(){return a.allDay?i.utcToLocal(a.startDate):i.dateToCurrentTimezone(a.startDate)}(),e=function(){return null===k.get()||l.hasMeetReply?l.hasMeetReply?void 0!==a.meetId?p.NORMAL:p.MEET:p.NORMAL:void 0!==a.meetId?p.HIGHLIGHTED:p.MEET}(),f=g.createEvent({occurrence:a,date:i.getStartOfTheDay(d),calendarColor:c,state:e});if(a.allDay||a.durationDays>1)h.push(f);else{d.getTime()>=this._dates.first().getTime()&&h.push(f);var j=i.dateToCurrentTimezone(a.endDate),m=i.getStartOfTheDay(d),n=i.getStartOfTheDay(j);if(j.getTime()>n.getTime()&&m.getTime()!==n.getTime()&&j.getTime()>=this._dates.first().getTime()&&j.getTime()<=b.getTime()){var o=g.createEvent({occurrence:f.get("occurrence"),date:n,calendarColor:f.get("calendarColor"),state:f.get("state")});h.push(o)}}}}.bind(this)),Immutable.fromJS(h)},_computeAllDayPositions:function(){var a=this._eventsByType.get("allDays").merge(this._eventsByType.get("multiDays")),b=[];this._dates.forEach(function(a){b.push(new Date(a.getTime()))});var c=[];a.forEach(function(a){c.push(a.get("occurrence"))}),e.sortOccurrencesByStartDate(c);var f=d.getRowSizes(c,{period:b});_.each(f,function(a){a.top=a.start*(q.allDay.HEIGHT+q.allDay.MARGIN)+q.allDay.MARGIN,a.left=100*a.left/this._dates.size,a.width=100*a.width/this._dates.size}.bind(this)),this._eventsByType=this._eventsByType.withMutations(function(a){_.each(f,function(b,c){var d=["allDays",c,"position"];this._eventsByType.hasIn(d)||(d[0]="multiDays"),a.mergeDeepIn(d,b)}.bind(this))}.bind(this))},_computeTimedPositions:function(a){var b=this._eventsByType.getIn(["timed",a.getTime().toString()]),c=[];b.forEach(function(a){c.push(a.get("occurrence"))});var e=d.getColumnPositions(c,a);_.merge(e,d.getColumnsLeft(e)),this._eventsByType=this._eventsByType.withMutations(function(b){_.each(e,function(c,d){var e=["timed",a.getTime().toString(),d,"position"];b.mergeDeepIn(e,c)})})},_addEvents:function(a){var b=0,c={allDays:!1,timed:{}};return this._dates.forEach(function(a){c.timed[a.getTime()]=!1}),this._eventsByType=this._eventsByType.withMutations(function(d){a.forEach(function(a){var e=a.get("occurrence"),f=e.id;this._occurrencesById[f]=e;var g=null;if(e.type.endsWith(r.BIRTHDAY_SUFFIX))g=["birthdays",f];else if(e.allDay)g=["allDays",f],c.allDays=!0;else if(e.durationDays>1)g=["multiDays",f],c.allDays=!0;else{var h=a.get("date").getTime().toString();g=["timed",h,f],c.timed[h]=!0}null!==g&&(b++,d.setIn(g,a))}.bind(this))}.bind(this)),c.allDays&&this._computeAllDayPositions(),_.each(c.timed,function(a,b){a&&this._computeTimedPositions(new Date(parseInt(b)))}.bind(this)),b},_removeEventsWithIds:function(a,b){b=b||{};var c=!1,d={allDays:!1,timed:{}};return this._dates.forEach(function(a){d.timed[a.getTime()]=!1}),a=[].concat(a),this._eventsByType=this._eventsByType.withMutations(function(b){_.each(a,function(a){delete this._occurrencesById[a];var e=this._getEventsPathById(a);this._highlightedEventId===a&&(this._highlightedEventId=null),_.each(e,function(a){a.length>2?d[a[0]][a[1]]=!0:("allDays"===a[0]||"multiDays"===a[0])&&(d.allDays=!0),b.deleteIn(a),c=!0})}.bind(this))}.bind(this)),b.computeLayoutIfNeeded&&(d.allDays&&this._computeAllDayPositions(),_.each(d.timed,function(a,b){a&&this._computeTimedPositions(new Date(parseInt(b)))}.bind(this))),c},_updateEvent:function(a){var b=!1,c=this._getEventsPathById(a.id);return _.each(c,function(c){var d=this._eventsByType.getIn(c);if(!_.isEqual(d.get("occurrence"),a)){this._removeEventsWithIds([a.id],{computeLayoutIfNeeded:!0});var e=this._createEvents([a],this._dates);this._addEvents(e),b=!0}return!1}.bind(this)),b},_setEventState:function(a,b){var c=!1,d=a.id,e=this._getEventsPathById(d);return _.each(e,function(a){var d=this._eventsByType.getIn(a),e=d.set("state",b);this._eventsByType=this._eventsByType.setIn(a,e),c=!0}.bind(this)),c},_setAllEventsState:function(a){this._eventsByType=this._eventsByType.withMutations(function(b){_.each(this._occurrencesById,function(c,d){var e=this._getEventsPathById(d);_.each(e,function(c){c.push("state"),b.setIn(c,a)})}.bind(this))}.bind(this))},_highlightEvent:function(a){var b=this._setEventState(a,p.HIGHLIGHTED);return this._highlightedEventId=a.id,b},_unhighlightHighlightedEvent:function(){var a=!1;if(null!==this._highlightedEventId){var b=this._getEventsPathById(this._highlightedEventId);_.each(b,function(b){var c=this._eventsByType.getIn(b),d=c.set("state",p.NORMAL);this._eventsByType=this._eventsByType.setIn(b,d),a=!0}.bind(this))}return this._highlightedEventId=null,a},_getDates:function(a,b){a=i.getStartOfTheDay(a),b=i.getStartOfTheDay(b);for(var c=[],d=0;d<moment(b).diff(moment(a),"days");d++){var e=i.add("day",a,d);c.push(e)}return Immutable.fromJS(c)},_initializeData:function(a,b){this._dates=this._getDates(a,b);var c={allDays:{},multiDays:{},birthdays:{},timed:{}};this._dates.forEach(function(a){c.timed[a.getTime()]={}}),this._eventsByType=Immutable.fromJS(c),this._calendarsById=Immutable.fromJS({}),this._highlightedEventId=null,this._occurrencesById={},this._lastEnabledTimestamp=(new Date).getTime(),this._previousUserTimezone=j.get("currentTimezone"),this._mode!==s.MEET&&this._mode!==s.MEET_RSVP&&f.setMode(s.NORMAL)},_initializeEvents:function(a,b){var c=_.indexBy(b,"id");this._calendarsById=Immutable.fromJS(c);var d=this._createEvents(a,this._dates);this._addEvents(d)},_updateWeek:function(a,b){var c=_.indexBy(b,"id"),d={};_.each(c,function(a,b){this._calendarsById.get(b)&&this._calendarsById.get(b).color!==a.color&&(d[b]=a)},this),this._calendarsById=Immutable.fromJS(c);var e=_.indexBy(a,"id"),f=[],g=[];_.each(a,function(a){var b=this._occurrencesById[a.id];null!==this._interactionOccurrence&&this._interactionOccurrence.id===a.id||(void 0===b?g.push(a):_.isEqual(a,b)&&void 0===d[a.calendarId]||(f.push(a.id),g.push(a)))}.bind(this)),_.each(this._occurrencesById,function(a,b){void 0!==e[b]||null!==this._interactionOccurrence&&this._interactionOccurrence.id===a.id||f.push(b)}.bind(this));var h=this._highlightedEventId,i=this._removeEventsWithIds(f,{computeLayoutIfNeeded:!0}),j=this._createEvents(g,this._dates),k=this._addEvents(j);if(null!==h){var l=this._getEventsPathById(h);if(l.length>0){var m=this._eventsByType.getIn(l[0]).get("occurrence");this._highlightEvent(m)}else this._highlightEventId=null}return i||k>0},_handleNewWeekAction:function(a){this._initializeData(a.startDate,a.endDate),this._emitChange()},_handleNewWeekSuccessAction:function(a){var b=a.occurrences.concat(this._getMeetOcccurrences());this._initializeEvents(b,a.calendars),this._emitChange()},_handleUpdateWeekSuccessAction:function(a){var b=!1,c=j.get("currentTimezone"),d=a.occurrences.concat(this._getMeetOcccurrences());this._previousUserTimezone!==c?(this._initializeData(this._dates.first(),i.add("day",this._dates.last(),1)),this._initializeEvents(d,a.calendars),b=!0):b=this._updateWeek(d,a.calendars),b&&this._emitChange()},_handleAddEventAction:function(a){var b=this._createEvents([a.occurrence]),c=this._addEvents(b);c>0&&this._emitChange()},_handleAddEventsAction:function(a){var b=this._createEvents(a.occurrences),c=this._addEvents(b);c>0&&this._emitChange()},_handleRemoveEventAction:function(a){var b=a.options||{},c=this._removeEventsWithIds(a.occurrence.id,b);c&&this._emitChange()},_handleUpdateEventAction:function(a){var b=this._updateEvent(a.occurrence);b&&this._emitChange()},_handleSetInteractionEventAction:function(a){this._interactionOccurrence=a.occurrence},_handleClearInteractionEventAction:function(a){this._interactionOccurrence=null},_handleHighlightEventAction:function(a){var b=this._unhighlightHighlightedEvent(),c=this._highlightEvent(a.occurrence);(b||c)&&this._emitChange()},_handleUnhighlightHighlightedEventAction:function(a){var b=this._unhighlightHighlightedEvent();b&&this._emitChange()},_handleSetEventStateAction:function(a){var b=!1;if(a.state===p.RESIZABLE){var c=a.occurrence.id,d=this._getEventsPathById(c);_.each(d,function(a){var c=this._eventsByType.getIn(a);if(this._isEventLastOfOccurrence(c)){var d=c.set("state",p.RESIZABLE);this._eventsByType=this._eventsByType.setIn(a,d),b=!0}}.bind(this))}else b=this._setEventState(a.occurrence,a.state);b&&this._emitChange()},_handleSetModeAction:function(a){a.mode===s.MEET&&this._mode!==s.MEET?(this._setAllEventsState(p.MEET),this._emitChange()):a.mode!==s.MEET&&this._mode===s.MEET&&(this._setAllEventsState(p.NORMAL),this._emitChange()),a.mode===s.INTERACTION||a.mode===s.SELECTION||a.mode===s.EDITING?m.disable():m.enable(),this._mode=a.mode},_handleAction:function(a){switch(a.type){case o.NEW_WEEK_ACTION:this._handleNewWeekAction(a);break;case o.NEW_WEEK_SUCCESS_ACTION:this._handleNewWeekSuccessAction(a);break;case o.UPDATE_WEEK_SUCCESS_ACTION:this._handleUpdateWeekSuccessAction(a);break;case o.ADD_EVENT_ACTION:this._handleAddEventAction(a);break;case o.ADD_EVENTS_ACTION:this._handleAddEventsAction(a);break;case o.REMOVE_EVENT_ACTION:this._handleRemoveEventAction(a);break;case o.UPDATE_EVENT_ACTION:this._handleUpdateEventAction(a);break;case o.SET_INTERACTION_EVENT_ACTION:this._handleSetInteractionEventAction(a);break;case o.CLEAR_INTERACTION_EVENT_ACTION:this._handleClearInteractionEventAction(a);break;case o.HIGHLIGHT_EVENT_ACTION:this._handleHighlightEventAction(a);break;case o.UNHIGHLIGHT_HIGHLIGHTED_EVENT_ACTION:this._handleUnhighlightHighlightedEventAction(a);break;case o.SET_EVENT_STATE_ACTION:this._handleSetEventStateAction(a);break;case o.SET_MODE_ACTION:this._handleSetModeAction(a)}}});return this.dispatcherToken=a.register(t._handleAction.bind(t)),t._init(),t}]),angular.module("App").factory("SRWeekActionCreator",["SRWeekDispatcher","SRWeekInteractionDispatcher","SRWeekConstants","SROccurrenceModel","SRCalendarModel","$q","SRDateService",function(a,b,c,d,e,f,g){var h=c.actionTypes,i=_.assign({},{_pendingWeekPromisesInfo:[],createNewWeek:function(b,c){a.dispatch({type:h.NEW_WEEK_ACTION,startDate:b,endDate:c}),this._loadOccurrences(b,c).then(function(d){a.dispatch({type:h.NEW_WEEK_SUCCESS_ACTION,occurrences:d[0],calendars:d[1]}),this._preloadOccurrences(g.add("week",b,-1),g.add("week",c,-1)),this._preloadOccurrences(g.add("week",b,1),g.add("week",c,1))}.bind(this),function(b){"CANCELLED"!==b&&a.dispatch({type:h.NEW_WEEK_FAIL_ACTION,error:b})})},updateWeek:function(b,c){a.dispatch({type:h.UPDATE_WEEK_ACTION}),this._loadOccurrences(b,c).then(function(d){a.dispatch({type:h.UPDATE_WEEK_SUCCESS_ACTION,occurrences:d[0],calendars:d[1]}),this._preloadOccurrences(g.add("week",b,-1),g.add("week",c,-1)),this._preloadOccurrences(g.add("week",b,1),g.add("week",c,1))}.bind(this),function(b){"CANCELLED"!==b&&a.dispatch({type:h.UPDATE_WEEK_FAIL_ACTION,error:b})})},addEvent:function(b){a.dispatch({type:h.ADD_EVENT_ACTION,occurrence:b})},addEvents:function(b){a.dispatch({type:h.ADD_EVENTS_ACTION,occurrences:b})},removeEvent:function(b,c){a.dispatch({type:h.REMOVE_EVENT_ACTION,occurrence:b,options:c})},updateEvent:function(b){a.dispatch({type:h.UPDATE_EVENT_ACTION,occurrence:b})},setInteractionEvent:function(b){a.dispatch({type:h.SET_INTERACTION_EVENT_ACTION,occurrence:b})},clearInteractionEvent:function(){a.dispatch({type:h.CLEAR_INTERACTION_EVENT_ACTION})},highlightEvent:function(b){a.dispatch({type:h.HIGHLIGHT_EVENT_ACTION,occurrence:b})},unhighlightHighlightedEvent:function(){a.dispatch({type:h.UNHIGHLIGHT_HIGHLIGHTED_EVENT_ACTION})},setEventState:function(b,c){a.dispatch({type:h.SET_EVENT_STATE_ACTION,occurrence:b,state:c})},setMode:function(b){a.dispatch({mode:b,type:h.SET_MODE_ACTION})},onMouseDownTimedEvent:function(a,c){b.dispatch({type:h.ON_MOUSE_DOWN_TIMED_EVENT_ACTION,event:a,mouseEvent:c})},onClickFailTimedEvent:function(a){b.dispatch({type:h.ON_CLICK_FAIL_TIMED_EVENT_ACTION,event:a})},onClickTimedEvent:function(a,c){b.dispatch({type:h.ON_CLICK_TIMED_EVENT_ACTION,event:a,mouseEvent:c})},onDoubleClickTimedEvent:function(a,c){b.dispatch({type:h.ON_DOUBLE_CLICK_TIMED_EVENT_ACTION,event:a,mouseEvent:c})},setTimedEventResizable:function(a){b.dispatch({type:h.SET_TIMED_EVENT_RESIZABLE_ACTION,event:a})},setTimedEventUnresizable:function(a){b.dispatch({type:h.SET_TIMED_EVENT_UNRESIZABLE_ACTION,event:a})},startAddTimedEvent:function(a,c){b.dispatch({type:h.START_ADD_TIMED_EVENT_ACTION,date:a,mouseEvent:c})},endAddTimedEvent:function(a){b.dispatch({type:h.END_ADD_TIMED_EVENT_ACTION,occurrenceState:a})},startAddResizeTimedEvent:function(a){b.dispatch({type:h.START_ADD_RESIZE_TIMED_EVENT_ACTION,date:a})},inAddResizeTimedEvent:function(){b.dispatch({type:h.IN_ADD_RESIZE_TIMED_EVENT_ACTION})},endAddResizeTimedEvent:function(a){b.dispatch({type:h.END_ADD_RESIZE_TIMED_EVENT_ACTION,occurrenceState:a})},startResizeTimedEvent:function(a){b.dispatch({type:h.START_RESIZE_TIMED_EVENT_ACTION,event:a})},endResizeTimedEvent:function(a){b.dispatch({type:h.END_RESIZE_TIMED_EVENT_ACTION,event:a})},startDragTimedEvent:function(a,c){b.dispatch({type:h.START_DRAG_TIMED_EVENT_ACTION,event:a,mouseEvent:c})},endDragTimedEvent:function(a){b.dispatch({type:h.END_DRAG_TIMED_EVENT_ACTION,event:a})},onAllDayViewResize:function(){b.dispatch({type:h.ON_ALLDAY_VIEW_RESIZE_ACTION})},onMouseDownAllDayEvent:function(a,c){b.dispatch({type:h.ON_MOUSE_DOWN_ALLDAY_EVENT_ACTION,event:a,mouseEvent:c})},onClickFailAllDayEvent:function(a){b.dispatch({type:h.ON_CLICK_FAIL_ALLDAY_EVENT_ACTION,event:a})},onClickAllDayEvent:function(a,c){b.dispatch({type:h.ON_CLICK_ALLDAY_EVENT_ACTION,event:a,mouseEvent:c})},onDoubleClickAllDayEvent:function(a,c){b.dispatch({type:h.ON_DOUBLE_CLICK_ALLDAY_EVENT_ACTION,event:a,mouseEvent:c})},onClickBirthdayEvent:function(a,c){b.dispatch({type:h.ON_CLICK_BIRTHDAY_EVENT_ACTION,event:a,mouseEvent:c})},startDragAllDayEvent:function(a,c){b.dispatch({type:h.START_DRAG_ALLDAY_EVENT_ACTION,event:a,mouseEvent:c})},startAddMeetEvent:function(a,c){b.dispatch({type:h.START_ADD_MEET_EVENT_ACTION,date:a,mouseEvent:c})},inAddMeetEvent:function(a){b.dispatch({type:h.IN_ADD_MEET_EVENT_ACTION,mouseEvent:a})},endAddMeetEvent:function(a){b.dispatch({type:h.END_ADD_MEET_EVENT_ACTION,mouseEvent:a})},onClickMeetEvent:function(a,c){b.dispatch({type:h.ON_CLICK_MEET_EVENT_ACTION,event:a,mouseEvent:c})},onMouseEnterMeetEvent:function(a,c){b.dispatch({type:h.ON_MOUSE_ENTER_MEET_EVENT_ACTION,event:a,mouseEvent:c})},onMouseLeaveMeetEvent:function(a,c){b.dispatch({type:h.ON_MOUSE_LEAVE_MEET_EVENT_ACTION,event:a,mouseEvent:c})},selectMeetTimeslot:function(a){b.dispatch({type:h.SELECT_MEET_TIMESLOT_ACTION,timeslotId:a})},enableMeet:function(a){b.dispatch({meet:a,type:h.ENABLE_MEET_ACTION})},disableMeet:function(){b.dispatch({type:h.DISABLE_MEET_ACTION})},_loadOccurrences:function(a,b){var c=[];_.each(this._pendingWeekPromisesInfo,function(d){d.startDate.getTime()===a.getTime()&&d.endDate.getTime()===b.getTime()?c.push(d):d.promise.cancel()}),this._pendingWeekPromisesInfo=c;var h=d.getFilteredBetweenDates(g.dateToCurrentTimezone(a,{inverse:!0}),g.dateToCurrentTimezone(b,{inverse:!0}),{useCache:!0}),i=f.all([h,e.getAll({useCache:!0})]);return this._pendingWeekPromisesInfo.push({startDate:new Date(a.getTime()),endDate:new Date(b.getTime()),promise:h}),i},_preloadOccurrences:function(a,b){var c=d.getFilteredBetweenDates(g.dateToCurrentTimezone(a,{inverse:!0}),g.dateToCurrentTimezone(b,{inverse:!0}),{useCache:!0});this._pendingWeekPromisesInfo.push({startDate:new Date(a.getTime()),endDate:new Date(b.getTime()),promise:c})}});return i}]),angular.module("App").factory("SRWeekConstants",["SREventConstants","SRWeekInteractionDispatcher",function(a,b){var c={modes:{NORMAL:"NORMAL",SELECTION:"SELECTION",INTERACTION:"INTERACTION",EDITING:"EDITING",MEET:"MEET",MEET_RSVP:"MEET_RSVP"},layout:{allDay:{MIN_HEIGHT:a.layout.allDay.HEIGHT+10,MAX_HEIGHT:5*(a.layout.allDay.HEIGHT+a.layout.allDay.MARGIN)+2+10,BIRTHDAY_HEIGHT:34},timed:{HOUR_HEIGHT:function(){if(void 0===c.layout.timed._hourHeightCache){var a=document.querySelector(".sr-week-timed-background > .time-slot");a&&(c.layout.timed._hourHeightCache=2*Number(window.getComputedStyle(a).height.replace("px","")))}return c.layout.timed._hourHeightCache||44},RATIO:function(){return 60/c.layout.timed.HOUR_HEIGHT()}}},actionTypes:{NEW_WEEK_ACTION:"NEW_WEEK_ACTION",NEW_WEEK_SUCCESS_ACTION:"NEW_WEEK_SUCCESS_ACTION",NEW_WEEK_FAIL_ACTION:"NEW_WEEK_FAIL_ACTION",UPDATE_WEEK_ACTION:"UPDATE_WEEK_ACTION",UPDATE_WEEK_SUCCESS_ACTION:"UPDATE_WEEK_SUCCESS_ACTION",UPDATE_WEEK_FAIL_ACTION:"UPDATE_WEEK_FAIL_ACTION",ADD_EVENT_ACTION:"ADD_EVENT_ACTION",ADD_EVENTS_ACTION:"ADD_EVENTS_ACTION",REMOVE_EVENT_ACTION:"REMOVE_EVENT_ACTION",UPDATE_EVENT_ACTION:"UPDATE_EVENT_ACTION",SET_INTERACTION_EVENT_ACTION:"SET_INTERACTION_EVENT_ACTION",CLEAR_INTERACTION_EVENT_ACTION:"CLEAR_INTERACTION_EVENT_ACTION",HIGHLIGHT_EVENT_ACTION:"HIGHLIGHT_EVENT_ACTION",UNHIGHLIGHT_HIGHLIGHTED_EVENT_ACTION:"UNHIGHLIGHT_HIGHLIGHTED_EVENT_ACTION",SET_EVENT_STATE_ACTION:"SET_EVENT_STATE_ACTION",SET_MODE_ACTION:"SET_MODE_ACTION",ON_MOUSE_DOWN_TIMED_EVENT_ACTION:"ON_MOUSE_DOWN_TIMED_EVENT_ACTION",ON_CLICK_FAIL_TIMED_EVENT_ACTION:"ON_CLICK_FAIL_TIMED_EVENT_ACTION",ON_CLICK_TIMED_EVENT_ACTION:"ON_CLICK_TIMED_EVENT_ACTION",ON_DOUBLE_CLICK_TIMED_EVENT_ACTION:"ON_DOUBLE_CLICK_TIMED_EVENT_ACTION",SET_TIMED_EVENT_RESIZABLE_ACTION:"SET_TIMED_EVENT_RESIZABLE_ACTION",SET_TIMED_EVENT_UNRESIZABLE_ACTION:"SET_TIMED_EVENT_UNRESIZABLE_ACTION",START_RESIZE_TIMED_EVENT_ACTION:"START_RESIZE_TIMED_EVENT_ACTION",START_DRAG_TIMED_EVENT_ACTION:"START_DRAG_TIMED_EVENT_ACTION",ON_ALLDAY_VIEW_RESIZE_ACTION:"ON_ALLDAY_VIEW_RESIZE_ACTION",ON_MOUSE_DOWN_ALLDAY_EVENT_ACTION:"ON_MOUSE_DOWN_ALLDAY_EVENT_ACTION",ON_CLICK_FAIL_ALLDAY_EVENT_ACTION:"ON_CLICK_FAIL_ALLDAY_EVENT_ACTION",ON_CLICK_BIRTHDAY_EVENT_ACTION:"ON_CLICK_BIRTHDAY_EVENT_ACTION",ON_CLICK_ALLDAY_EVENT_ACTION:"ON_CLICK_ALLDAY_EVENT_ACTION",ON_DOUBLE_CLICK_ALLDAY_EVENT_ACTION:"ON_DOUBLE_CLICK_ALLDAY_EVENT_ACTION",START_DRAG_ALLDAY_EVENT_ACTION:"START_DRAG_ALLDAY_EVENT_ACTION",ON_CLICK_MEET_EVENT_ACTION:"REMOVE_MEET_EVENT_ACTION",ON_MOUSE_ENTER_MEET_EVENT_ACTION:"ON_MOUSE_ENTER_MEET_EVENT_ACTION",ON_MOUSE_LEAVE_MEET_EVENT_ACTION:"ON_MOUSE_LEAVE_MEET_EVENT_ACTION",SELECT_MEET_TIMESLOT_ACTION:"SELECT_MEET_TIMESLOT_ACTION",ENABLE_MEET_ACTION:"ENABLE_MEET_ACTION",DISABLE_MEET_ACTION:"DISABLE_MEET_ACTION"}};$(window).on("resize",function(){c.layout.timed._hourHeightCache=void 0});var d=function(a){switch(a.type){case c.actionTypes.ON_ALLDAY_VIEW_RESIZE_ACTION:c.layout.timed._hourHeightCache=void 0}};return b.register(d),c}]),angular.module("App").factory("SREventConstants",function(){var a={states:{NORMAL:"NORMAL",HIGHLIGHTED:"HIGHLIGHTED",RESIZABLE:"RESIZABLE",DELETABLE:"DELETABLE",MEET:"MEET"},types:{BIRTHDAY_SUFFIX:":birthday",FACEBOOK:"facebook:event",CHECKIN_SUFFIX:":checkin"},ui:{MEET_COLOR:"#DDD"},layout:{timed:{BOTTOM_MARGIN:2,MASK_PADDING:2,LINE_HEIGHT:20,ICON_SIZE:32},allDay:{MARGIN:2,ICON_SIZE:32,HEIGHT:22}}};return a}),angular.module("App").factory("SRReactConstants",function(){var a={events:{mouse:{LEFT_BUTTON:0}}};return a}),angular.module("App").factory("SRDragMixin",["$document","SRReactConstants",function(a,b){var c=10,d=b.events.mouse,e={componentDidMount:function(){this.__stateDragMixin={hasDragStarted:!1,mouseDownEvent:null}},componentWillUnmount:function(){this.__stopListeningToDocumentDragMixin()},onMouseDownDragMixin:function(a){a.button===d.LEFT_BUTTON&&(this.__stateDragMixin.mouseDownEvent=_.clone(a),this.__startListeningToDocumentDragMixin())},__onDocumentMouseMoveDragMixin:function(a){var b=a.clientX-this.__stateDragMixin.mouseDownEvent.clientX,d=a.clientY-this.__stateDragMixin.mouseDownEvent.clientY;if(this.__stateDragMixin.hasDragStarted)_.isFunction(this.onDragMove)&&this.onDragMove(a,{x:b,y:d});else{var e=Math.max(Math.abs(b),Math.abs(d));e>=c&&(!_.isFunction(this.shouldStartDrag)||this.shouldStartDrag(this.__stateDragMixin.mouseDownEvent))&&(this.__stateDragMixin.hasDragStarted=!0,_.isFunction(this.onDragStart)&&this.onDragStart(this.__stateDragMixin.mouseDownEvent,{x:b,y:d}))}},__onDocumentMouseUpDragMixin:function(a){if(this.__stateDragMixin.hasDragStarted){var b=this.__stateDragMixin.mouseDownEvent;if(this.__stateDragMixin.hasDragStarted=!1,this.__stateDragMixin.mouseDownEvent=null,_.isFunction(this.onDragEnd)){var c=a.clientX-b.clientX,d=a.clientY-b.clientY;this.onDragEnd(a,{x:c,y:d})}}this.__stopListeningToDocumentDragMixin()},__startListeningToDocumentDragMixin:function(){a.on("mousemove.drag-mixin",this.__onDocumentMouseMoveDragMixin),a.on("mouseup.drag-mixin",this.__onDocumentMouseUpDragMixin)},__stopListeningToDocumentDragMixin:function(){a.off("mousemove.drag-mixin"),a.off("mouseup.drag-mixin")}};return e}]),angular.module("App").factory("SRClickMixin",["$document","SRReactConstants","SRDOMHelper",function(a,b,c){var d=400,e=b.events.mouse,f={componentDidMount:function(){this.__stateClickMixin={wasDoubleClickSuccessfull:!1,lastMouseDownDate:null}},componentWillUnmount:function(){this.__stopListeningToDocumentClickMixin()},onMouseDownClickMixin:function(a){if(a.button===e.LEFT_BUTTON){var b=new Date;this.__stateClickMixin.lastMouseDownDate&&b.getTime()-this.__stateClickMixin.lastMouseDownDate.getTime()<d?(this.__stateClickMixin.wasDoubleClickSuccessfull=!0,_.isFunction(this.onDoubleClick)&&this.onDoubleClick(_.clone(a)),a.stopPropagation()):(this.__stateClickMixin.lastMouseDownDate=new Date,_.isFunction(this.onMouseDown)&&this.onMouseDown(_.clone(a))),this.__startListeningToDocumentClickMixin()}},__onDocumentMouseUpClickMixin:function(a){return this.__stateClickMixin.wasDoubleClickSuccessfull?(this.__stateClickMixin.wasDoubleClickSuccessfull=!1,void this.__stopListeningToDocumentClickMixin()):(c.isEventInElementBounds(a,React.findDOMNode(this))?(!_.isFunction(this.shouldClick)||this.shouldClick(a))&&_.isFunction(this.onClick)&&this.onClick(a):_.isFunction(this.onClickFail)&&this.onClickFail(a),void this.__stopListeningToDocumentClickMixin())},__startListeningToDocumentClickMixin:function(){a.on("mouseup.click-mixin",this.__onDocumentMouseUpClickMixin)},__stopListeningToDocumentClickMixin:function(){a.off("mouseup.click-mixin")}};return f}]),angular.module("App").factory("SRKeyboardFocusMixin",["$position",function(a){var b=32,c=13,d={componentDidMount:function(){var a=$(React.findDOMNode(this));a.on("keypress.keyboard-focus-mixin",this.__onKeyPressKeyboardFocusMixin)},componentWillUnmount:function(){var a=$(React.findDOMNode(this));a.off("keypress.keyboard-focus-mixin")},__onKeyPressKeyboardFocusMixin:function(a){(a.which===b||a.which===c)&&(a.stopPropagation(),a.preventDefault(),this.__simulateClickKeyboardFocusMixin())},__simulateClickKeyboardFocusMixin:function(){var b=$(React.findDOMNode(this)),c=a.offset(b),d=new jQuery.Event("mousedown");d.clientX=Math.floor(c.left),d.clientY=Math.floor(c.top),d.which=1,b.trigger(d);var e=new jQuery.Event("mouseup");e.clientX=Math.floor(c.left),e.clientY=Math.floor(c.top),b.trigger(e)}};return d}]),angular.module("App").factory("SRWeek",["SRWeekStore","SRWeekActionCreator","SRWeekTimed","SRWeekHeader","SRWeekAllDay","SRWeekValidatorHelper","SREventValidatorHelper","SRCurrentService","$rootScope","SRSettingsService","SRCurrentMeetService","SRWeekConstants","SRDateService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=React.createClass({displayName:"SRWeek",render:function(){return React.createElement("div",{className:"sr-week"},React.createElement(d,{dates:this.state.dates}),React.createElement(e,{dates:this.state.dates,multiDayEvents:this.state.events.get("multiDays"),birthdayEvents:this.state.events.get("birthdays"),allDayEvents:this.state.events.get("allDays")}),React.createElement(c,{dates:this.state.dates,events:this.state.events.get("timed")}))},getInitialState:function(){return{dates:a.getDates(),events:a.getEvents()}},componentWillMount:function(){a.addChangeListener(this._onChange),this._watchCurrentDate(),this._watchMeet(),this._offOnUpdate=i.$on("onUpdate",this._onUpdate),this._offOnUserActive=i.$on("onUserActive",this._onUserActive),this._offOnHasCalendars=i.$on("hasCalendars",this._onHasCalendars),this._createWeek()},componentWillUnmount:function(){a.removeChangeListener(this._onChange),this._offWatchCurrentDate(),this._offWatchMeet(),this._offOnUpdate(),this._offOnUserActive(),this._offOnHasCalendars()},componentDidUpdate:function(a,b){i.$emit("didLoadWeek")},_onChange:function(){this.setState({dates:a.getDates(),events:a.getEvents()})},_onUpdate:function(){b.updateWeek(this.state.dates.first(),m.add("day",this.state.dates.first(),7))},_onUserActive:function(){b.updateWeek(this.state.dates.first(),m.add("day",this.state.dates.first(),7))},_onHasCalendars:function(){b.updateWeek(this.state.dates.first(),m.add("day",this.state.dates.first(),7))},_watchCurrentDate:function(){this._offWatchCurrentDate=i.$watch(function(){return h.getDate()},function(a,c){if(a.getTime()!==c.getTime()&&"week"===h.getCurrentLocation()){var d=m.getStartOfTheDay(a);b.createNewWeek(d,m.add("day",d,7))}}.bind(this))},_watchMeet:function(){this._offWatchMeet=i.$watch(function(){return k.get()},function(a,c){if(a!==c)if(null===a||i.hasMeetReply)if(i.hasMeetReply&&null===c){var d=k.get();d.suggestedTimes.length>0&&b.updateWeek(this.state.dates.first(),m.add("day",this.state.dates.first(),7))}else b.disableMeet();else{var d=k.get();b.enableMeet(d)}}.bind(this))},_createWeek:function(){var a=m.getStartOfTheDay(h.getDate());b.createNewWeek(a,m.add("day",a,7))}});return n}]),angular.module("App").factory("SRWeekHeader",["$filter","SRDateService","SRWeekValidatorHelper","SRSettingsService","$rootScope",function(a,b,c,d,e){var f=React.createClass({displayName:"SRWeekHeader",render:function(){return React.createElement("ul",{className:"sr-week-header"},this.props.dates.map(this._renderLabelItem))},getInitialState:function(){var a=b.dateToCurrentTimezone();return{today:b.getStartOfTheDay(a)}},shouldComponentUpdate:function(a,b){return this.props.dates!==a.dates||!_.isEqual(this.state,b)},componentDidMount:function(){this._watchDateFormat(),this._offOnClockUpdate=e.$on("onClockUpdate",function(){var a=b.dateToCurrentTimezone();this.setState({today:b.getStartOfTheDay(a)})}.bind(this)),this._offOnUserActive=e.$on("onUserActive",function(){var a=b.dateToCurrentTimezone();this.setState({today:b.getStartOfTheDay(a)})}.bind(this))},componentWillUnmount:function(){this._offWatchDateFormat(),this._offOnClockUpdate(),this._offOnUserActive()},_renderLabelItem:function(c){var d=a("SRDateFilter_calendarHeadDay")(c),e=classNames("label",{"label--weekend":b.isWeekend(c)},{"label--today":b.isToday(c)});return React.createElement("li",{key:c.getTime(),className:e},d)},_watchDateFormat:function(){this._offWatchDateFormat=e.$watch(function(){return d.get("shortDate")},function(a,b){a!==b&&this.forceUpdate()}.bind(this))}});return f}]),angular.module("App").factory("SRWeekTimed",["SRWeekTimedBackground","SRWeekTimedSidebar","SRWeekTimedDay","SRWeekTimedInteraction","SRWeekValidatorHelper","SREventValidatorHelper","SROccurrenceModel","SRSettingsService","SRDateService","SRWeekConstants",function(a,b,c,d,e,f,g,h,i,j){var k=j.layout.timed,l=React.createClass({displayName:"SRWeekTimed",render:function(){return React.createElement("div",{className:"sr-week-timed"},React.createElement(b,null),React.createElement("div",{className:"container"},React.createElement(a,{dates:this.props.dates}),React.createElement("div",{className:"container-relative"},React.createElement("div",{className:"days-container"},this.props.dates.map(this._renderWeekMainDay)),React.createElement(d,{dates:this.props.dates,events:this.props.events}))))},getInitialState:function(){return{currentTimezone:h.get("currentTimezone")}},componentWillReceiveProps:function(a){this.setState({currentTimezone:h.get("currentTimezone")})},shouldComponentUpdate:function(a,b){return this.props.dates!==a.dates||this.props.events!==a.events||this.state.currentTimezone!==b.currentTimezone},componentDidMount:function(){this._scrollToNowIfNeeded()},componentDidUpdate:function(a,b){this._scrollToNowIfNeeded(a.dates,b)},_renderWeekMainDay:function(a){var b=a.getTime().toString();return React.createElement(c,{key:a.getTime(),events:this.props.events.get(b)})},_scrollToNowIfNeeded:function(a,b){if(void 0!==a)var c=i.isTodayInRange(a.first(),i.add("day",a.last(),1));var d=i.isTodayInRange(this.props.dates.first(),i.add("day",this.props.dates.last(),1));if((void 0===a||!c)&&d||this.state.currentTimezone!==_.getPath(b,"currentTimezone")){var e=$(React.findDOMNode(this)),f=i.dateToCurrentTimezone(),g=Math.round((f.getMinutes()+60*f.getHours())/k.RATIO())-k.HOUR_HEIGHT();e.scrollTop(g)}}});return l}]),angular.module("App").factory("SRWeekTimedBackground",["SRWeekValidatorHelper","SRDateService","SRSettingsService","$rootScope",function(a,b,c,d){var e=48,f=React.createClass({displayName:"SRWeekTimedBackground",render:function(){return React.createElement("ul",{className:"sr-week-timed-background"},this._renderDays(),this._renderTimeSlotItems())},getInitialState:function(){return{isTodayIncluded:b.isTodayInRange(this.props.dates.first(),b.add("day",this.props.dates.last(),1)),now:this._getNowDate(),startDay:this.props.dates.first().getDay(),currentTimezone:c.get("currentTimezone")}},componentWillReceiveProps:function(a){this.setState({isTodayIncluded:b.isTodayInRange(a.dates.first(),b.add("day",a.dates.last(),1)),now:this._getNowDate(),startDay:this.props.dates.first().getDay(),currentTimezone:c.get("currentTimezone")})},componentDidMount:function(){this._offOnClockUpdate=d.$on("onClockUpdate",function(){this.setState({now:this._getNowDate()})}.bind(this)),this._offOnUserActive=d.$on("onUserActive",function(){
this.setState({now:this._getNowDate()})}.bind(this))},componentWillUnmount:function(){this._offOnClockUpdate(),this._offOnUserActive()},shouldComponentUpdate:function(a,b){return this.state.isTodayIncluded!==b.isTodayIncluded||this.state.now.getTime()!==b.now.getTime()||this.state.startDay!==b.startDay||this.state.currentTimezone!==b.currentTimezone},_renderTimeSlotItems:function(){for(var a=[],b=0;e>b;b++)a.push({index:b});return a.map(this._renderTimeSlotItem)},_renderTimeSlotItem:function(a){return React.createElement("li",{key:a.index,className:"time-slot"})},_renderDays:function(){return React.createElement("ul",{className:"days-container"},this.props.dates.map(this._renderDay))},_renderDay:function(a){var c=classNames("day",{today:b.isToday(a)});return React.createElement("li",{key:a.getTime(),className:c},this._renderTimeMarker(a))},_renderTimeMarker:function(a){if(!b.isToday(a))return null;var c=b.dateToCurrentTimezone().getTime(),d=b.getStartOfTheDay(c).getTime(),e=b.getEndOfTheDay(c).getTime(),f={top:(c-d)/(e-d)*100+"%"};return React.createElement("div",{className:"now-marker",style:f})},_getNowDate:function(){var a=b.dateToCurrentTimezone(),c=moment(a).startOf("day").add(a.getHours(),"hours").add(a.getMinutes(),"minutes");return c.toDate()}});return f}]),angular.module("App").factory("SRWeekTimedSidebar",["$filter","SRSettingsService","$rootScope",function(a,b,c){var d=24,e=React.createClass({displayName:"SRWeekTimedSidebar",render:function(){return React.createElement("ul",{className:"sr-week-timed-sidebar"},this._renderTimeItems())},shouldComponentUpdate:function(a,b){return!1},componentDidMount:function(){this._watchTimeFormat()},componentWillUnmount:function(){this._offWatchTimeFormat()},_renderTimeItems:function(){for(var a=[],b=0;d>b;b++)a.push({hour:b});return a.map(this._renderTimeItem)},_renderTimeItem:function(b){var c=a("SRDateFilter_toHour")(b.hour);return React.createElement("li",{key:b.hour,className:"time"},c)},_watchTimeFormat:function(){this._offWatchTimeFormat=c.$watch(function(){return b.get("format24HourTime")},function(a,b){a!==b&&this.forceUpdate()}.bind(this))}});return e}]),angular.module("App").factory("SRWeekTimedDay",["SRWeekValidatorHelper","SREventValidatorHelper","SREventBlock","SREventInline","SREventMeet",function(a,b,c,d,e){var f="facebook:event",g=React.createClass({displayName:"SRWeekTimedDay",render:function(){return React.createElement("div",{className:"sr-week-timed-day"},this.props.events.valueSeq().map(this._renderEvent))},shouldComponentUpdate:function(a,b){return this.props.events!==a.events},_renderEvent:function(a){var b=a.get("occurrence");return void 0!==b.meetId?React.createElement(e,{key:b.id,event:a}):b.startDate.getTime()===b.endDate.getTime()&&b.type!==f?React.createElement(d,{key:b.id,event:a}):React.createElement(c,{key:b.id,event:a})}});return g}]),angular.module("App").factory("SRWeekTimedInteraction",["SRWeekDispatcher","SRWeekInteractionDispatcher","SRWeekConstants","$document","SREventEditing","SRWeekActionCreator","SRDateService","SRSettingsService","SRCalendarModel","SROccurrenceModel","SREventHelper","SREventConstants","SROccurrenceEditConfirmService","SRDialogService","SRWeekStore","SRReactConstants","SREventMeet","$rootScope","SRSyncingEventService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=c.actionTypes,u=c.modes,v={MOUSE_DOWN:"MOUSED_DOWN",RESIZING:"RESIZING",DRAGGING:"DRAGGING",ADDING:"ADDING",ADD_BY_DRAGGING:"ADD_BY_DRAGGING",MEET_ADDING:"MEET_ADDING"},w=10,x=30,y=30,z=l.states,A=c.layout.timed,B=p.events.mouse,C={TOP:1001,CENTER:1,BOTTOM:0},D={};D[u.NORMAL]=C.CENTER,D[u.SELECTION]=C.BOTTOM,D[u.INTERACTION]=C.TOP,D[u.MEET]=C.TOP,D[u.MEET_RSVP]=C.BOTTOM,D[u.EDITING]=C.BOTTOM;var E={};E[u.NORMAL]=null,E[u.SELECTION]=C.CENTER,E[u.INTERACTION]=null,E[u.MEET]=null,E[u.MEET_RSVP]=C.TOP,E[u.EDITING]=C.TOP;var F=React.createClass({displayName:"SRWeekTimedInteraction",render:function(){return React.createElement("ul",{className:"sr-week-timed-interaction",ref:"week-timed-interaction"},this.props.dates.valueSeq().map(this._renderDay),this._renderInteractionLayer(),this._renderBlockingLayer())},getInitialState:function(){return{mode:o.getMode()}},shouldComponentUpdate:function(a,b){return this.props.dates!==a.dates||!_.isEqual(this.state,b)},componentWillMount:function(){this._initWatchers(),this._dispatcherToken=a.register(this._handleAction),this._interactionDispatcherToken=b.register(this._handleInteractionAction)},componentWillUnmount:function(){this._deinitWatchers(),this._deinitMeetWatcher(),a.unregister(this._dispatcherToken),b.unregister(this._interactionDispatcherToken),this._stopListeningToDocument()},_renderBlockingLayer:function(){var a=E[this.state.mode];return null===a?null:React.createElement("div",{key:"blocking-layer",className:"blocking-layer",style:{zIndex:a}})},_renderInteractionLayer:function(){return React.createElement("div",{key:"interaction-layer",className:"interaction-layer",style:{zIndex:D[this.state.mode]},onMouseDown:this._onMouseDown})},_renderDay:function(a){var b=a.getTime();return React.createElement("li",{key:b,className:"day","data-date":b},this._renderEvents(a),this._renderMeetEvents(a))},_renderEvents:function(a){if(this.state.type!==v.RESIZING&&this.state.type!==v.DRAGGING&&this.state.type!==v.ADDING&&this.state.type!==v.ADD_BY_DRAGGING)return null;var b=classNames("event-wrapper-margin-left",{"event-wrapper-margin-right":this.state.type===v.RESIZING},{"event-wrapper-margin-right-small":this.state.type===v.DRAGGING||this.state.type===v.ADDING||this.state.type===v.ADD_BY_DRAGGING}),c=[];return _.each(this.state.events,function(d,f){d.get("date").getTime()===a.getTime()&&c.push(React.createElement("div",{key:d.get("occurrence").id,className:b},React.createElement(e,{event:d})))}),c},_renderMeetEvents:function(a){if(this.state.mode!==u.MEET)return null;var b=[];return _.each(this.state.events,function(c,d){c.get("date").getTime()===a.getTime()&&b.push(React.createElement(q,{key:c.get("occurrence").id,event:c}))}),React.createElement("div",{className:"event-wrapper-margin-left event-wrapper-margin-right"},b)},_initWatchers:function(){this._offSelectedTimeSlotIdWatcher=r.$watch("selectedTimeSlotId",function(a,b){a!==b&&f.selectMeetTimeslot(a)})},_initMeetWatcher:function(){this._offMeetDurationWatcher=r.$watch(function(){var a=this.state.meet;return a.duration}.bind(this),function(a,b){a!==b&&f.updateWeek(this.props.dates.first(),g.add("day",this.props.dates.first(),7))}.bind(this))},_deinitWatchers:function(){this._offSelectedTimeSlotIdWatcher&&this._offSelectedTimeSlotIdWatcher()},_deinitMeetWatcher:function(){this._offMeetDurationWatcher&&this._offMeetDurationWatcher()},_getDateToUserTimezone:function(a){var b=g.getDifferrenceBetweenTimezone(h.get("currentTimezone"),CONFIG.userTimezone,a);return new Date(a.getTime()-b)},_getNewOccurrencesForMeet:function(){var a=this.state.currentOccurrences.concat(this.state.newOccurrences),b=_.indexBy(a,"id"),c=[];return _.each(this.state.meet.getAsOccurrences(),function(a){void 0===b[a.id]&&c.push(a)}),c},_computeEventsForOccurrence:function(a,b,c){var d=[],e=g.getStartOfTheDay(g.dateToCurrentTimezone(a.startDate));if(e.getTime()>=this.props.dates.first().getTime()&&e.getTime()<=this.props.dates.last().getTime()){var f=k.createEvent({occurrence:a,calendarColor:b,date:e,state:z.HIGHLIGHTED});f=f.mergeDeepIn(["position"],this._computePositionForEvent(f,c)),d.push(f)}if(a.isOnMultipleDays()){var h=g.getStartOfTheDay(g.dateToCurrentTimezone(a.endDate));if(a.endDate.getTime()===h.getTime()&&(h=g.add("day",h,-1)),h.getTime()>=this.props.dates.first().getTime()&&h.getTime()<=this.props.dates.last().getTime()){var i=k.createEvent({occurrence:a,calendarColor:b,date:h,state:z.HIGHLIGHTED});i=i.mergeDeepIn(["position"],this._computePositionForEvent(i,c)),d.push(i)}}return d},_isEventLastOfOccurrence:function(a){var b=a.get("occurrence");if(!b.isOnMultipleDays())return!0;var c=g.getStartOfTheDay(g.dateToCurrentTimezone(b.startDate));return a.get("date").getTime()!==c.getTime()},_computePositionForEvent:function(a,b){b=b||Immutable.fromJS({});var c=a.get("occurrence"),d=g.dateToCurrentTimezone(c.startDate),e=g.dateToCurrentTimezone(c.endDate),f=function(){return c.isOnMultipleDays()&&this._isEventLastOfOccurrence(a)?0:this._getTopForDate(d)}.bind(this)(),h=function(){return c.isOnMultipleDays()?this._isEventLastOfOccurrence(a)?this._getTopForDate(new Date(e.getTime()-1)):this._getTopForDate(g.getEndOfTheDay(d)):this._getTopForDate(new Date(e.getTime()-1))}.bind(this)(),i=Math.max(h-f,100/48),j={top:f,bottom:h,duration:i};return b.mergeDeep(j)},_getMinutesForClientY:function(a){var b=$(React.findDOMNode(this.refs["week-timed-interaction"])),c=a-b.offset().top,d=24*A.HOUR_HEIGHT(),e=Math.min(Math.max(0,c/d),1),f=24*e*60;return f},_getDateForClientX:function(a){var b=$(React.findDOMNode(this.refs["week-timed-interaction"])),c=b.width(),d=b.offset().left,e=Math.min(Math.max(a-d,0),c-1),f=c/this.props.dates.size;return new Date(this.props.dates.get(Math.floor(e/f)).getTime())},_getTopForDate:function(a){var b=g.getStartOfTheDay(g.add("day",a,1)),c=g.getStartOfTheDay(a),d=function(){return a.getTime()===b.getTime()?1:Math.min((a.getTime()-c.getTime())/(b.getTime()-c.getTime()),1)}();return 100*d},_startListeningToDocument:function(){d.on("mousemove.week-timed-interaction",this._onDocumentMouseMove),d.on("mouseup.week-timed-interaction",this._onDocumentMouseUp)},_stopListeningToDocument:function(){d.off("mousemove.week-timed-interaction"),d.off("mouseup.week-timed-interaction")},_saveOccurrence:function(a,b,c){if(_.isEqual(a,b))_.isFunction(c)&&c("cancel");else{var d=m.askForUpdateConfirmation(b);d.then(function(b){a.skipNotificationEmail=b.skipNotificationEmail;var d={};b.recurringType&&(d.recurringType=b.recurringType),a.save(d).then(function(){f.updateWeek(this.props.dates.first(),g.add("day",this.props.dates.first(),7))}.bind(this)),_.isFunction(c)&&c("save")}.bind(this),function(){_.isFunction(c)&&c("cancel")})}},_onAddByClick:function(a){var b=this.state.mouseDownEvent,c=Math.floor(this._getMinutesForClientY(b.clientY)/x)*x,d=moment(this._getDateForClientX(b.clientX)).add(c,"minutes").toDate(),e=moment(d).add(h.get("defaultEventLength"),"minutes").toDate();d=this._getDateToUserTimezone(d),e=this._getDateToUserTimezone(e),k.getDefaultCalendar().then(function(a){if(null!==a){var b=j.create({start:d,end:e,allDay:!1,calendar:a});this.setState({originalOccurrence:b,events:this._computeEventsForOccurrence(b,a.color,Immutable.fromJS({width:100})),type:v.ADDING}),n.open({event:this.state.mouseDownEvent,scope:{occurrence:this.state.events[0].get("occurrence"),isNew:!0},element:$('[data-id="'+this.state.events[0].get("occurrence").id+'"]'),closeCallback:function(a){"save"===a.state&&f.addEvent(b),this.replaceState({}),f.setMode(u.NORMAL)}.bind(this)}),f.setMode(u.EDITING)}}.bind(this))},_onDragMove:function(a){var b=this._getDateForClientX(a.clientX),c=moment(b).diff(moment(this.state.originalDate),"days"),d=Math.round((this._getMinutesForClientY(a.clientY)-this.state.initialMinutesForClientY)/x)*x,e=this.state.originalOccurrence.copy();e.startDate=moment(e.startDate).add(c,"days").add(d,"minutes").toDate(),void 0!==e.endDate&&(e.endDate=moment(e.endDate).add(c,"days").add(d,"minutes").toDate());var f=this._computeEventsForOccurrence(e,this.state.events[0].get("calendarColor"),Immutable.fromJS({width:100}));f=_.map(f,function(a){return a.set("state",z.HIGHLIGHTED)}),this.setState({events:f})},_onDragEnd:function(a){var b=this.state.events[0].get("occurrence"),c=this.state.originalOccurrence;this._saveOccurrence(b,this.state.originalOccurrence,function(a){"save"===a?(f.removeEvent(c,{computeLayoutIfNeeded:!0}),f.addEvent(b)):f.unhighlightHighlightedEvent(),this.replaceState({}),f.clearInteractionEvent(),f.setMode(u.NORMAL)}.bind(this))},_onAddByDraggingStart:function(a){k.getDefaultCalendar().then(function(a){if(null!==a){var b=this._getDateForClientX(this.state.mouseDownEvent.clientX),c=Math.floor(this._getMinutesForClientY(this.state.mouseDownEvent.clientY)/x)*x,d=moment(b).startOf("day").add(c,"minutes").toDate(),e=moment(d).add(y,"minutes").toDate();d=this._getDateToUserTimezone(d),e=this._getDateToUserTimezone(e);var f=j.create({start:d,end:e,allDay:!1,calendar:a});this.setState({originalOccurrence:f,events:this._computeEventsForOccurrence(f,a.color,Immutable.fromJS({width:100})),type:v.ADD_BY_DRAGGING})}}.bind(this))},_onAddByDraggingMove:function(a){var b=this.state.originalOccurrence,c=moment(g.dateToCurrentTimezone(b.startDate)),d=moment(g.dateToCurrentTimezone(b.endDate)),e=Math.round(this._getMinutesForClientY(a.clientY)/x)*x,f=c.clone().startOf("day").add(e,"minutes"),h=function(){return f.valueOf()>=c.valueOf()?(f.valueOf()===c.valueOf()&&f.add(y,"minutes"),[c.toDate(),f.toDate()]):(f.valueOf()===d.valueOf()&&f.subtract(y,"minutes"),[f.toDate(),c.toDate()])}.bind(this)(),i=b.copy();i.startDate=this._getDateToUserTimezone(h[0]),i.endDate=this._getDateToUserTimezone(h[1]),i.durationDays=1,this.setState({events:this._computeEventsForOccurrence(i,this.state.events[0].get("calendarColor"),this.state.events[0].get("position"))})},_onAddByDraggingEnd:function(a){var b=this.state.events[0].get("occurrence");n.open({event:this.state.mouseDownEvent,scope:{occurrence:b,isNew:!0},element:$('[data-id="'+b.id+'"]'),closeCallback:function(a){"save"===a.state&&f.addEvent(b),this.replaceState({}),f.setMode(u.NORMAL)}.bind(this)}),f.setMode(u.EDITING)},_onResizeMove:function(a){var b=this.state.originalOccurrence,c=(this.state.currentOccurrence,moment(g.dateToCurrentTimezone(b.endDate))),d=moment(g.dateToCurrentTimezone(b.startDate)),e=Math.round(this._getMinutesForClientY(a.clientY)/x)*x,f=function(){var a=function(){return b.isOnMultipleDays()?c.startOf("day").add(y,"minutes").valueOf():Math.min(c.valueOf(),moment(d).add(y,"minutes").valueOf())}.bind(this)(),f=c.clone().add(1,"days").startOf("day").valueOf(),g=function(){return b.isOnMultipleDays()?c.clone().startOf("day").add(e,"minutes").valueOf():moment(d).startOf("day").add(e,"minutes").valueOf()}.bind(this)(),h=Math.min(Math.max(a,g),f);return moment(h)}.bind(this)(),h=b.copy();h.endDate=this._getDateToUserTimezone(f.toDate()),h.durationDays=g.getDaysDuration(h.startDate,h.endDate),this.setState({events:this._computeEventsForOccurrence(h,this.state.events[0].get("calendarColor"),this.state.originalPosition)})},_onResizeEnd:function(a){var b=this.state.events[0].get("occurrence").copy();this._saveOccurrence(b,this.state.originalOccurrence,function(a){"save"===a?f.addEvent(b):f.addEvent(this.state.originalOccurrence),this.replaceState({}),f.clearInteractionEvent(),f.setMode(u.NORMAL)}.bind(this))},_onAddMeetByDraggingStart:function(a){var b=Math.floor(this._getMinutesForClientY(a.clientY)/x)*x,c=moment(this._getDateForClientX(a.clientX)).startOf("day").add(b,"minutes").toDate(),d=this._getDateToUserTimezone(c),e=this.state.meet;e.addTimeSlot({start:d});var f=this._getNewOccurrencesForMeet(),g=[];_.each(f,function(a){g=g.concat(this._computeEventsForOccurrence(a,null,Immutable.fromJS({width:100,left:0})))}.bind(this)),this.setState({currentOccurrences:this.state.currentOccurrences,newOccurrences:f,events:g,type:v.MEET_ADDING,minDate:c,maxDate:c}),1===e.suggestedTimes.length&&r.$apply()},_onAddMeetByDraggingMove:function(a){var b=this.state.meet,c=Math.floor(this._getMinutesForClientY(a.clientY)/x)*x,d=moment(this.state.minDate).startOf("day").add(c,"minutes"),e=moment(this.state.minDate),f=moment(this.state.maxDate);if(d.valueOf()<e.valueOf()&&e.diff(d,"minutes")>=b.duration)e=d;else{if(!(d.valueOf()>f.valueOf()&&d.diff(f,"minutes")>=b.duration))return;f=d}for(var g=Math.floor(f.diff(e,"minutes")/b.duration)+1,h=0;g>h;h++){var i=e.clone().add(h*b.duration,"minutes");b.addTimeSlot({start:i.toDate()})}var j=this._getNewOccurrencesForMeet(),k=[];_.each(j,function(a){k=k.concat(this._computeEventsForOccurrence(a,null,Immutable.fromJS({width:100,left:0})))}.bind(this)),this.setState({currentOccurrences:this.state.currentOccurrences,newOccurrences:this.state.newOccurrences.concat(j),minDate:e.toDate(),maxDate:f.toDate(),events:this.state.events.concat(k)})},_onAddMeetByDraggingEnd:function(){f.addEvents(this.state.newOccurrences),this.replaceState({mode:u.MEET,meet:this.state.meet,events:[],currentOccurrences:this.state.currentOccurrences.concat(this.state.newOccurrences),newOccurrences:[]})},_onMouseDown:function(a){a.button===B.LEFT_BUTTON&&(this.setState({type:v.MOUSE_DOWN,mouseDownEvent:_.clone(a)}),this.state.mode===u.MEET?this._onAddMeetByDraggingStart(a):f.setMode(u.INTERACTION),this._startListeningToDocument())},_onDocumentMouseMove:function(a){switch(this.state.type){case v.RESIZING:this._onResizeMove(a);break;case v.ADD_BY_DRAGGING:this._onAddByDraggingMove(a);break;case v.MEET_ADDING:this._onAddMeetByDraggingMove(a);break;case v.DRAGGING:this._onDragMove(a);break;case v.MOUSE_DOWN:Math.abs(a.clientY-this.state.mouseDownEvent.clientY)>w&&this._onAddByDraggingStart(a)}},_onDocumentMouseUp:function(a){switch(this.state.type){case v.RESIZING:this._onResizeEnd(a);break;case v.ADD_BY_DRAGGING:this._onAddByDraggingEnd(a);break;case v.DRAGGING:this._onDragEnd(a);break;case v.MEET_ADDING:this._onAddMeetByDraggingEnd(a);break;case v.MOUSE_DOWN:this._onAddByClick(a)}this._stopListeningToDocument()},_handleOnMouseDownTimedEventAction:function(a){var b=a.event.get("occurrence");f.highlightEvent(b)},_handleOnClickFailTimedEventAction:function(a){f.unhighlightHighlightedEvent()},_handleOnClickTimedEventAction:function(a){var b=a.event.get("occurrence");this.state.occurrenceId!==b.id&&(n.open({event:a.mouseEvent,scope:{occurrence:b},element:$('[data-id="'+b.id+'"]'),closeCallback:function(a){a.reused||(this.replaceState({}),f.unhighlightHighlightedEvent(),f.setMode(u.NORMAL))}.bind(this)}),this.setState({occurrenceId:b.id,editing:!1}),f.setMode(u.SELECTION))},_handleOnDoubleClickTimedEventAction:function(a){var b=a.event.get("occurrence");if(b.editable&&(this.state.occurrenceId!==b.id||!this.state.editing)){var c=b.copy();n.open({event:a.mouseEvent,scope:{occurrence:c},element:$('[data-id="'+b.id+'"]'),closeCallback:function(a){"save"===a.state&&f.updateEvent(c),a.reused||(f.unhighlightHighlightedEvent(),this.replaceState({}),f.setMode(u.NORMAL))}.bind(this),edit:!0}),this.setState({occurrenceId:b.id,editing:!0}),f.setMode(u.SELECTION)}},_handleSetTimedEventResizableAction:function(a){var b=a.event.get("occurrence");_.contains(s.get(),b.id)||f.setEventState(b,z.RESIZABLE)},_handleSetTimedEventUnresizableAction:function(a){var b=a.event.get("occurrence");f.setEventState(b,z.NORMAL)},_handleStartResizeTimedEventAction:function(a){var b=a.event.get("occurrence");_.contains(s.get(),b.id)||(this.setState({originalOccurrence:b,originalPosition:a.event.get("position"),events:this._computeEventsForOccurrence(b,a.event.get("calendarColor"),a.event.get("position")),type:v.RESIZING}),f.removeEvent(b),f.setInteractionEvent(b),f.setMode(u.INTERACTION),this._startListeningToDocument())},_handleStartDragTimedEventAction:function(a){var b=a.event.get("occurrence");this.setState({originalOccurrence:b.copy(),originalDate:a.event.get("date"),initialMinutesForClientY:this._getMinutesForClientY(a.mouseEvent.clientY),events:this._computeEventsForOccurrence(b,a.event.get("calendarColor"),Immutable.fromJS({width:100})),type:v.DRAGGING}),f.highlightEvent(b),f.setInteractionEvent(b),f.setMode(u.INTERACTION),this._startListeningToDocument()},_handleOnClickMeetEventAction:function(a){var b=a.event,c=b.get("occurrence"),d=this.state.meet,e=this.state.currentOccurrences;this.state.mode===u.MEET&&this.state.meet.isEditable?(_.remove(e,function(a){return a.id===c.id}),d.removeTimeSlot(c.timeSlotId),f.removeEvent(c,{computeLayoutIfNeeded:!0}),this.setState({currentOccurrences:e}),0===d.suggestedTimes.length&&r.$apply()):this.state.mode===u.MEET_RSVP&&(f.highlightEvent(c),r.selectedTimeSlotId=c.timeSlotId,r.$apply())},_handleOnMouseEnterMeetEventAction:function(a){this.state.meet.isEditable&&f.setEventState(a.event.get("occurrence"),z.DELETABLE)},_handleOnMouseLeaveMeetEventAction:function(a){f.setEventState(a.event.get("occurrence"),z.HIGHLIGHTED)},_handleSelectMeetTimeslotAction:function(a){this.props.events.forEach(function(b){var c=b.find(function(b){return b.get("occurrence").timeSlotId===a.timeslotId});return void 0!==c?(f.highlightEvent(c.get("occurrence")),!1):void 0})},_handleSetModeAction:function(a){this.setState({mode:a.mode})},_handleEnableMeetAction:function(a){this.replaceState({meet:a.meet,events:[],currentOccurrences:[],newOccurrences:[]}),this._initMeetWatcher(),f.setMode(u.MEET)},_handleDisableMeetAction:function(a){this.replaceState({type:v.NORMAL}),this._deinitMeetWatcher(),f.setMode(u.NORMAL),f.updateWeek(this.props.dates.first(),g.add("day",this.props.dates.first(),7))},_handleAction:function(a){switch(a.type){case t.SET_MODE_ACTION:this._handleSetModeAction(a)}},_handleInteractionAction:function(a){switch(this.state.mode){case u.NORMAL:switch(a.type){case t.ON_MOUSE_DOWN_TIMED_EVENT_ACTION:this._handleOnMouseDownTimedEventAction(a);break;case t.ON_CLICK_TIMED_EVENT_ACTION:this._handleOnClickTimedEventAction(a);break;case t.ON_DOUBLE_CLICK_TIMED_EVENT_ACTION:this._handleOnDoubleClickTimedEventAction(a);break;case t.ON_CLICK_FAIL_TIMED_EVENT_ACTION:this._handleOnClickFailTimedEventAction(a);break;case t.SET_TIMED_EVENT_RESIZABLE_ACTION:this._handleSetTimedEventResizableAction(a);break;case t.SET_TIMED_EVENT_UNRESIZABLE_ACTION:this._handleSetTimedEventUnresizableAction(a);break;case t.START_RESIZE_TIMED_EVENT_ACTION:this._handleStartResizeTimedEventAction(a);break;case t.START_DRAG_TIMED_EVENT_ACTION:this._handleStartDragTimedEventAction(a);break;case t.ENABLE_MEET_ACTION:this._handleEnableMeetAction(a)}break;case u.SELECTION:switch(a.type){case t.ON_MOUSE_DOWN_TIMED_EVENT_ACTION:this._handleOnMouseDownTimedEventAction(a);break;case t.ON_CLICK_TIMED_EVENT_ACTION:this._handleOnClickTimedEventAction(a);break;case t.ON_DOUBLE_CLICK_TIMED_EVENT_ACTION:this._handleOnDoubleClickTimedEventAction(a);break;case t.ON_CLICK_FAIL_TIMED_EVENT_ACTION:this._handleOnClickFailTimedEventAction(a)}break;case u.MEET:switch(a.type){case t.ON_CLICK_MEET_EVENT_ACTION:this._handleOnClickMeetEventAction(a);break;case t.ON_MOUSE_ENTER_MEET_EVENT_ACTION:this._handleOnMouseEnterMeetEventAction(a);break;case t.ON_MOUSE_LEAVE_MEET_EVENT_ACTION:this._handleOnMouseLeaveMeetEventAction(a);break;case t.DISABLE_MEET_ACTION:this._handleDisableMeetAction(a)}break;case u.MEET_RSVP:switch(a.type){case t.ON_CLICK_MEET_EVENT_ACTION:this._handleOnClickMeetEventAction(a);break;case t.SELECT_MEET_TIMESLOT_ACTION:this._handleSelectMeetTimeslotAction(a)}}}});return F}]),angular.module("App").factory("SRWeekAllDay",["SRWeekAllDayContent","SRWeekAllDayBirthday","SRWeekValidatorHelper","SREventValidatorHelper","$document","SREventConstants","SRWeekConstants","SRWeekActionCreator",function(a,b,c,d,e,f,g,h){var i=f.layout.allDay,j=g.layout.allDay,k=React.createClass({displayName:"SRWeekAllDay",render:function(){return React.createElement("div",{className:"sr-week-all-day",style:this._getStyle()},React.createElement(a,{dates:this.props.dates,multiDayEvents:this.props.multiDayEvents,allDayEvents:this.props.allDayEvents}),React.createElement(b,{dates:this.props.dates,events:this.props.birthdayEvents}),React.createElement("div",{className:"border",onMouseDown:this._onBorderMouseDown}))},getInitialState:function(){return{customHeight:null}},componentWillMount:function(){this._mouseDownEvent=null,this._previousHeight=null,this._currentHeight=null},componentWillUnmount:function(){this._stopListeningToDocument()},componentWillReceiveProps:function(a){this.props.dates!==a.dates&&this.setState({customHeight:null})},shouldComponentUpdate:function(a,b){return this.props.multiDayEvents!==a.multiDayEvents||this.props.allDayEvents!==a.allDayEvents||this.props.birthdayEvents!==a.birthdayEvents||this.props.dates!==a.dates||this.state.customHeight!==b.customHeight},componentDidMount:function(){h.onAllDayViewResize()},componentDidUpdate:function(a,b){this._previousHeight!==this._currentHeight&&h.onAllDayViewResize()},_getStyle:function(){var a=null===this.state.customHeight?this._getDefaultHeight()+"px":this.state.customHeight+"%";return this._previousHeight=this._currentHeight,this._currentHeight=a,{height:a,minHeight:a}},_startListeningToDocument:function(){e.on("mousemove.week-all-day",this._onDocumentMouseMove),e.on("mouseup.week-all-day",this._onDocumentMouseUp)},_stopListeningToDocument:function(){e.off("mousemove.week-all-day"),e.off("mouseup.week-all-day")},_onBorderMouseDown:function(a){this._mouseDownEvent=_.clone(a);var b=$(React.findDOMNode(this));this._originalHeight=b.height(),this._startListeningToDocument()},_onDocumentMouseMove:function(a){if(null!==this._mouseDownEvent){var b=$(".sr-week"),c=a.clientY-this._mouseDownEvent.clientY,d=Math.max(c+this._originalHeight,this._getMinHeight()),e=100*d/b.height();e=Math.min(e,75),this.setState({customHeight:e})}},_onDocumentMouseUp:function(a){this._stopListeningToDocument(),this._mouseDownEvent=null,this._originalHeight=null},_getDefaultHeight:function(){var a=0,b=function(b){var c=b.get("position");a=Math.max(a,c.get("start")+1)};this.props.allDayEvents.forEach(b),this.props.multiDayEvents.forEach(b);var c=(a+1)*(i.HEIGHT+i.MARGIN)+2,d=j.MAX_HEIGHT;return this.props.birthdayEvents.size>0&&(c+=j.BIRTHDAY_HEIGHT,d+=j.BIRTHDAY_HEIGHT),Math.max(Math.min(c,d),this._getMinHeight())},_getMinHeight:function(){return this.props.birthdayEvents.size>0?j.MIN_HEIGHT+j.BIRTHDAY_HEIGHT:j.MIN_HEIGHT}});return k}]),angular.module("App").factory("SRWeekAllDayContentBackground",["SRWeekValidatorHelper","SRDateService","$rootScope",function(a,b,c){var d=React.createClass({displayName:"SRWeekAllDayContentBackground",render:function(){return React.createElement("div",{className:"sr-week-all-day-content-background"},this._renderDays())},getInitialState:function(){var a=b.dateToCurrentTimezone();return{isTodayIncluded:b.isTodayInRange(this.props.dates.first(),b.add("day",this.props.dates.last(),1)),today:b.getStartOfTheDay(a),startDay:this.props.dates.first().getDay()}},componentWillReceiveProps:function(a){var c=b.dateToCurrentTimezone();this.setState({isTodayIncluded:b.isTodayInRange(a.dates.first(),b.add("day",a.dates.last(),1)),today:b.getStartOfTheDay(c),startDay:this.props.dates.first().getDay()})},componentDidMount:function(){this._offOnClockUpdate=c.$on("onClockUpdate",function(){var a=b.dateToCurrentTimezone();this.setState({today:b.getStartOfTheDay(a)})}.bind(this)),this._offOnUserActive=c.$on("onUserActive",function(){var a=b.dateToCurrentTimezone();this.setState({today:b.getStartOfTheDay(a)})}.bind(this))},componentWillUnmount:function(){this._offOnClockUpdate(),this._offOnUserActive()},shouldComponentUpdate:function(a,b){return this.state.isTodayIncluded!==b.isTodayIncluded||this.state.today.getTime()!==b.today.getTime()||this.state.startDay!==b.startDay},_renderDays:function(){return React.createElement("ul",{className:"days-container"},this.props.dates.map(this._renderDay))},_renderDay:function(a){var c=classNames("day",{today:b.isToday(a)});return React.createElement("li",{key:a.getTime(),className:c,style:{width:100/this.props.dates.size+"%"}})}});return d}]),angular.module("App").factory("SRWeekAllDayContent",["SRWeekValidatorHelper","SREventValidatorHelper","SRWeekAllDayContentBackground","SREventAllDay","SREventMultiDay","SREventConstants","SRWeekAllDayContentInteraction",function(a,b,c,d,e,f,g){var h=f.layout.allDay,i=React.createClass({displayName:"SRWeekAllDayContent",render:function(){return React.createElement("div",{className:"sr-week-all-day-content"},React.createElement("div",{className:"container",style:this._getContainerStyle()},React.createElement(c,{dates:this.props.dates}),React.createElement(g,{dates:this.props.dates}),React.createElement("div",{key:this._getDatesKey(),className:"events-container"},this.props.allDayEvents.valueSeq().map(this._renderAllDayEvent),this.props.multiDayEvents.valueSeq().map(this._renderMultiDayEvent))))},shouldComponentUpdate:function(a,b){return this.props.allDayEvents!==a.allDayEvents||this.props.multiDayEvents!==a.multiDayEvents||this.props.dates!==a.dates},_renderAllDayEvent:function(a){return React.createElement(d,{key:a.get("occurrence").id,event:a})},_renderMultiDayEvent:function(a){return React.createElement(e,{key:a.get("occurrence").id,event:a})},_getContainerStyle:function(){var a=0,b=function(b){var c=b.get("position");a=Math.max(a,c.get("start")+1)};return this.props.allDayEvents.forEach(b),this.props.multiDayEvents.forEach(b),{minHeight:(a+1)*(h.HEIGHT+h.MARGIN)+"px"}},_getDatesKey:function(){var a=this.props.dates;return a.first().getTime()+"-"+a.last().getTime()}});return i}]),angular.module("App").factory("SRWeekAllDayContentInteraction",["SRWeekDispatcher","SRWeekInteractionDispatcher","$document","SRWeekConstants","SREventAllDay","SREventMultiDay","SREventConstants","SRWeekActionCreator","SRDateService","SREventHelper","SROccurrenceModel","SROccurrenceEditConfirmService","SRDialogService","SRWeekStore","SRReactConstants","$rootScope","SRSyncingEventService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=10,s=1440,t={MOUSE_DOWN:"MOUSE_DOWN",ADD_BY_DRAGGING:"ADD_BY_DRAGGING",DRAGGING:"DRAGGING"},u=d.actionTypes,v=d.modes,w=g.states,x=o.events.mouse,y={TOP:3,CENTER:1,BOTTOM:0},z={};z[v.NORMAL]=y.CENTER,z[v.SELECTION]=y.BOTTOM,z[v.INTERACTION]=y.TOP,z[v.MEET]=y.BOTTOM,z[v.MEET_RSVP]=y.BOTTOM,z[v.EDITING]=y.BOTTOM;var A={};A[v.NORMAL]=null,A[v.SELECTION]=y.CENTER,A[v.INTERACTION]=null,A[v.MEET]=y.TOP,A[v.MEET_RSVP]=y.TOP,A[v.EDITING]=y.TOP;var B=React.createClass({displayName:"SRWeekAllDayContentInteraction",render:function(){return React.createElement("ul",{className:"sr-week-all-day-content-interaction",ref:"week-all-day-content-interaction"},this._renderInteractionLayer(),this._renderOverlay(),this._renderEvent(),this._renderBlockingLayer())},getInitialState:function(){return{mode:n.getMode()}},shouldComponentUpdate:function(a,b){return!_.isEqual(this.state,b)},componentWillMount:function(){this._dispatcherToken=a.register(this._handleAction),this._interactionDispatcherToken=b.register(this._handleInteractionAction)},componentWillUnmount:function(){a.unregister(this._dispatcherToken),b.unregister(this._interactionDispatcherToken),this._stopListeningToDocument()},_renderBlockingLayer:function(){var a=A[this.state.mode];return null===a?null:React.createElement("div",{key:"blocking-layer",className:"blocking-layer",style:{zIndex:a}})},_renderInteractionLayer:function(){return React.createElement("div",{key:"interaction-layer",className:"interaction-layer",style:{zIndex:z[this.state.mode]},onMouseDown:this._onMouseDown})},_renderOverlay:function(){if(this.state.type===v.DRAGGING||this.state.type===v.ADD_BY_DRAGGING||this.state.type===v.MOUSE_DOWN)return null;var a=this.state.overlayStartIndex,b=this.state.overlayEndIndex,c={left:100*a/this.props.dates.size+"%",width:100*(b-a+1)/this.props.dates.size+"%"};return React.createElement("div",{className:"overlay",style:c})},_renderEvent:function(){return this.state.type!==t.DRAGGING?null:this.state.event.get("occurrence").allDay?React.createElement(e,{event:this.state.event}):React.createElement(f,{event:this.state.event})},_startListeningToDocument:function(){c.on("mousemove.week-all-day-content-interaction",this._onDocumentMouseMove),c.on("mouseup.week-all-day-content-interaction",this._onDocumentMouseUp)},_stopListeningToDocument:function(){c.off("mousemove.week-all-day-content-interaction"),c.off("mouseup.week-all-day-content-interaction")},_getPositionFromMouseEvent:function(a,b,c){var d=$(React.findDOMNode(this.refs["week-all-day-content-interaction"])),e=d.width(),f=a.clientX-d.offset().left-b.x,g=a.clientY-d.offset().top-b.y,h=100*(c.get("left")/100*e+f)/e,i=c.get("top")+g,j=100/(2*this.props.dates.size)+1;
return h=Math.max(Math.min(h,100-j),-c.get("width")+j),i=Math.max(Math.min(i,d.height()-25),0),{left:h,top:i}},_getRelativeCoordinatesFromMouseEvent:function(a){var b=$(React.findDOMNode(this.refs["week-all-day-content-interaction"]));return{x:a.clientX-b.offset().left,y:a.clientY-b.offset().top}},_getDateIndexFromMouseEvent:function(a){var b=$(React.findDOMNode(this.refs["week-all-day-content-interaction"])),c=b.width(),d=b.offset().left,e=Math.min(Math.max(a.clientX-d,0),c-1),f=c/this.props.dates.size;return Math.floor(e/f)},_getDateIndexFromPosition:function(a){var b=$(React.findDOMNode(this.refs["week-all-day-content-interaction"])),c=b.width(),d=a.get("left")*c/100,e=c/this.props.dates.size;return Math.floor((d+5)/e)},_endEditOfEvent:function(a,b,c){"save"===c.state?h.updateEvent(a):b&&h.removeEvent(a,{computeLayoutIfNeeded:!0}),h.clearInteractionEvent(),c.reused||(h.unhighlightHighlightedEvent(),this.replaceState({}),h.setMode(v.NORMAL))},_onDragMove:function(a){var b=this._getPositionFromMouseEvent(a,this.state.originalRelativeMouseCoordinates,this.state.originalEvent.get("position")),c=this.state.event.mergeDeepIn(["position"],b),d=this.state.originalEvent.get("occurrence"),e=$(React.findDOMNode(this.refs["week-all-day-content-interaction"])),f=e.width(),g=f/this.props.dates.size,h=(c.get("position").get("width")*f/100,b.left*f/100),j=0>h?Math.abs(h%g):g-Math.abs(h%g),k=Math.floor(h/g);g/2>j&&k++;var l=this.props.dates.get(this.state.originalVisibleStartDateIndex);l=moment(i.localToUtc(l));var m=Math.ceil(l.diff(moment(d.startDate),"minutes")/s),n=Math.ceil(moment(d.endDate).diff(l,"minutes")/s),o=Math.min(Math.max(0,k-m),this.props.dates.size-1),p=Math.max(o,Math.min(k+n-1,this.props.dates.size-1)),q=k-this.state.originalVisibleStartDateIndex;this.setState({event:c,overlayStartIndex:o,overlayEndIndex:p,daysOffset:q})},_onDragEnd:function(a){var b=this.state.event.get("occurrence").copy(),c=this.state.originalEvent.get("occurrence");if(b.startDate=i.add("day",b.startDate,this.state.daysOffset),b.endDate=i.add("day",b.endDate,this.state.daysOffset),b.startDate.getTime()===c.startDate.getTime()&&b.endDate.getTime()===c.endDate.getTime())h.addEvent(c),h.clearInteractionEvent(),this.replaceState({}),h.setMode(v.NORMAL);else{var d=l.askForUpdateConfirmation(c);d.then(function(a){b.skipNotificationEmail=a.skipNotificationEmail;var c={};a.recurringType&&(c.recurringType=a.recurringType),b.save(c).then(function(){h.updateWeek(this.props.dates.first(),i.add("day",this.props.dates.first(),7))}.bind(this)),h.addEvent(b)}.bind(this),function(){h.addEvent(c)}),d["finally"](function(){h.clearInteractionEvent(),this.replaceState({}),h.setMode(v.NORMAL)}.bind(this))}},_onAddByDraggingStart:function(a){var b=this._getDateIndexFromMouseEvent(this.state.mouseDownEvent),c=this._getDateIndexFromMouseEvent(a);this.setState({type:t.ADD_BY_DRAGGING,overlayStartIndex:Math.min(b,c),overlayEndIndex:Math.max(b,c)})},_onAddByDraggingMove:function(a){var b=this._getDateIndexFromMouseEvent(this.state.mouseDownEvent),c=this._getDateIndexFromMouseEvent(a);this.setState({overlayStartIndex:Math.min(b,c),overlayEndIndex:Math.max(b,c)})},_onAddByDraggingEnd:function(a){j.getDefaultCalendar().then(function(a){if(null!==a){var b=this.state.overlayStartIndex,c=this.state.overlayEndIndex,d=k.create({start:i.localToUtc(this.props.dates.get(b)),end:i.localToUtc(i.add("day",this.props.dates.get(c),1)),allDay:!0,calendar:a});h.addEvent(d.copy()),h.highlightEvent(d),h.setInteractionEvent(d),m.open({event:this.state.mouseDownEvent,scope:{occurrence:d,isNew:!0},element:$('[data-id="'+d.id+'"]'),closeCallback:this._endEditOfEvent.bind(this,d,!0)}),h.setMode(v.EDITING)}}.bind(this))},_onAddByClick:function(a){j.getDefaultCalendar().then(function(a){var b=this._getDateIndexFromMouseEvent(this.state.mouseDownEvent);if(null!==a){var c=k.create({start:i.localToUtc(this.props.dates.get(b)),end:i.localToUtc(i.add("day",this.props.dates.get(b),1)),allDay:!0,calendar:a});h.addEvent(c.copy()),h.highlightEvent(c),h.setInteractionEvent(c),m.open({event:this.state.mouseDownEvent,scope:{occurrence:c,isNew:!0},element:$('[data-id="'+c.id+'"]'),closeCallback:this._endEditOfEvent.bind(this,c,!0)}),h.setMode(v.EDITING)}}.bind(this))},_onMouseDown:function(a){if(a.button===x.LEFT_BUTTON){this._startListeningToDocument();var b=this._getDateIndexFromMouseEvent(a);this.setState({type:t.MOUSE_DOWN,mouseDownEvent:_.clone(a),overlayStartIndex:b,overlayEndIndex:b}),h.setMode(v.INTERACTION)}},_onDocumentMouseMove:function(a){this.state.type===t.DRAGGING?this._onDragMove(a):this.state.type===t.ADD_BY_DRAGGING?this._onAddByDraggingMove(a):Math.abs(this.state.mouseDownEvent.clientX-a.clientX)>r&&this._onAddByDraggingStart(a)},_onDocumentMouseUp:function(a){this.state.type===t.DRAGGING?this._onDragEnd(a):this.state.type===t.ADD_BY_DRAGGING?this._onAddByDraggingEnd(a):this._onAddByClick(a),this._stopListeningToDocument()},_handleOnMouseDownAllDayEventAction:function(a){var b=a.event.get("occurrence");h.highlightEvent(b)},_handleOnClickFailAllDayEventAction:function(a){h.unhighlightHighlightedEvent()},_handleOnClickAllDayEventAction:function(a){var b=a.event.get("occurrence");this.state.occurrenceId!==b.id&&(m.open({event:a.mouseEvent,scope:{occurrence:b},element:$('[data-id="'+b.id+'"]'),closeCallback:function(a){a.reused||(this.replaceState({}),h.unhighlightHighlightedEvent(),h.setMode(v.NORMAL))}.bind(this)}),this.setState({occurrenceId:b.id,editing:!1}),h.setMode(v.SELECTION))},_handleOnDoubleClickAllDayEventAction:function(a){var b=a.event.get("occurrence");if(b.editable&&(this.state.occurrenceId!==b.id||!this.state.editing)){var c=b.copy();m.open({event:a.mouseEvent,scope:{occurrence:c},element:$('[data-id="'+b.id+'"]'),closeCallback:this._endEditOfEvent.bind(this,c,!1),edit:!0}),this.setState({occurrenceId:b.id,editing:!0}),h.setMode(v.SELECTION)}},_handleOnClickBirthdayEventAction:function(a){var b=a.event.get("occurrence");this.state.occurrenceId!==b.id&&(m.open({event:a.mouseEvent,scope:{date:a.event.get("date"),birthdays:!0},element:$('[data-ids*="'+b.id+'"]'),closeCallback:function(a){a.reused||(this.replaceState({}),h.unhighlightHighlightedEvent(),h.setMode(v.NORMAL))}.bind(this)}),this.setState({occurrenceId:b.id,editing:!1}),h.setMode(v.SELECTION))},_handleStartDragAllDayEventAction:function(a){var b=a.event.get("occurrence");this._lastStartNormalMode>a.mouseEvent.nativeEvent.timeStamp||_.contains(q.get(),b.id)||(h.removeEvent(b),h.setInteractionEvent(b),this.setState({type:t.DRAGGING,originalEvent:a.event,originalRelativeMouseCoordinates:this._getRelativeCoordinatesFromMouseEvent(a.mouseEvent),originalVisibleStartDateIndex:this._getDateIndexFromPosition(a.event.get("position")),event:a.event.set("state",w.EDITING_STATE)}),h.setMode(v.INTERACTION),this._startListeningToDocument())},_handleSetModeAction:function(a){this.setState({mode:a.mode})},_handleAction:function(a){switch(a.type){case u.SET_MODE_ACTION:this._handleSetModeAction(a)}},_handleInteractionAction:function(a){switch(this.state.mode){case v.NORMAL:switch(a.type){case u.ON_MOUSE_DOWN_ALLDAY_EVENT_ACTION:this._handleOnMouseDownAllDayEventAction(a);break;case u.ON_CLICK_ALLDAY_EVENT_ACTION:this._handleOnClickAllDayEventAction(a);break;case u.ON_DOUBLE_CLICK_ALLDAY_EVENT_ACTION:this._handleOnDoubleClickAllDayEventAction(a);break;case u.ON_CLICK_BIRTHDAY_EVENT_ACTION:this._handleOnClickBirthdayEventAction(a);break;case u.ON_CLICK_FAIL_ALLDAY_EVENT_ACTION:this._handleOnClickFailAllDayEventAction(a);break;case u.START_DRAG_ALLDAY_EVENT_ACTION:this._handleStartDragAllDayEventAction(a)}break;case v.SELECTION:switch(a.type){case u.ON_MOUSE_DOWN_ALLDAY_EVENT_ACTION:this._handleOnMouseDownAllDayEventAction(a);break;case u.ON_CLICK_ALLDAY_EVENT_ACTION:this._handleOnClickAllDayEventAction(a);break;case u.ON_DOUBLE_CLICK_ALLDAY_EVENT_ACTION:this._handleOnDoubleClickAllDayEventAction(a);break;case u.ON_CLICK_BIRTHDAY_EVENT_ACTION:this._handleOnClickBirthdayEventAction(a);break;case u.ON_CLICK_FAIL_ALLDAY_EVENT_ACTION:this._handleOnClickFailAllDayEventAction(a)}}}});return B}]),angular.module("App").factory("SRWeekAllDayBirthday",["SRWeekValidatorHelper","SREventValidatorHelper","SRWeekAllDayBirthdayBackground","SRWeekAllDayBirthdayDays",function(a,b,c,d){var e=React.createClass({displayName:"SRWeekAllDayBirthday",render:function(){return 0===this.props.events.size?null:React.createElement("div",{className:"sr-week-all-day-birthday"},React.createElement("div",{className:"container"},React.createElement(c,{dates:this.props.dates}),React.createElement(d,{dates:this.props.dates,events:this.props.events})))},shouldComponentUpdate:function(a,b){return this.props.dates!==a.dates||this.props.events!==a.events}});return e}]),angular.module("App").factory("SRWeekAllDayBirthdayBackground",["SRWeekValidatorHelper","SRDateService","$rootScope",function(a,b,c){var d=React.createClass({displayName:"SRWeekAllDayBirthdayBackground",render:function(){return React.createElement("ul",{className:"sr-week-all-day-birthday-background"},this._renderDays())},getInitialState:function(){var a=b.dateToCurrentTimezone();return{isTodayIncluded:b.isTodayInRange(this.props.dates.first(),b.add("day",this.props.dates.last(),1)),today:b.getStartOfTheDay(a),startDay:this.props.dates.first().getDay()}},componentWillReceiveProps:function(a){var c=b.dateToCurrentTimezone();this.setState({isTodayIncluded:b.isTodayInRange(a.dates.first(),b.add("day",a.dates.last(),1)),today:b.getStartOfTheDay(c),startDay:this.props.dates.first().getDay()})},componentDidMount:function(){this._offOnClockUpdate=c.$on("onClockUpdate",function(){var a=b.dateToCurrentTimezone();this.setState({today:b.getStartOfTheDay(a)})}.bind(this)),this._offOnUserActive=c.$on("onUserActive",function(){var a=b.dateToCurrentTimezone();this.setState({today:b.getStartOfTheDay(a)})}.bind(this))},componentWillUnmount:function(){this._offOnClockUpdate(),this._offOnUserActive()},shouldComponentUpdate:function(a,b){return this.state.isTodayIncluded!==b.isTodayIncluded||this.state.today.getTime()!==b.today.getTime()||this.state.startDay!==b.startDay},_renderDays:function(){return this.props.dates.map(this._renderDay)},_renderDay:function(a){var c=classNames("day",{today:b.isToday(a)});return React.createElement("li",{key:a.getTime(),className:c,style:{width:100/this.props.dates.size+"%"}})}});return d}]),angular.module("App").factory("SRWeekAllDayBirthdayDays",["SRWeekValidatorHelper","SREventValidatorHelper","SREventBirthday",function(a,b,c){var d=React.createClass({displayName:"SRWeekAllDayBirthdayDays",render:function(){return React.createElement("ul",{className:"sr-week-all-day-birthday-days"},this.props.dates.map(this._renderDay))},componentWillUpdate:function(a,b){this._eventsByDates=this._getEventsByDates(a.events)},componentWillMount:function(){this._eventsByDates=this._getEventsByDates(this.props.events)},shouldComponentUpdate:function(a,b){return this.props.events!==a.events},_renderDay:function(a){var b=a.getTime().toString();return React.createElement("li",{key:b,className:"day"},React.createElement(c,{events:this._eventsByDates.get(b)}))},_getEventsByDates:function(a){var b={};return this.props.dates.forEach(function(a){b[a.getTime()]=[]}),a.forEach(function(a){var c=a.get("date").getTime().toString();b[c].push(a)}),Immutable.fromJS(b)}});return d}]),angular.module("App").factory("SREventBlock",["SROccurrenceModel","SRDateService","SRIconicService","$filter","SRSettingsService","SRCacheService","SRPeopleService","$q","SRQCancellableService","SREventHelper","SREventValidatorHelper","SRWeekActionCreator","SREventConstants","SRDragMixin","SRClickMixin","SRKeyboardFocusMixin","SRReactConstants","SRWeekConstants",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=5,t=4,u=m.states,v=(m.states,m.layout.timed),w=r.layout.timed,x=(q.events.mouse,Number((100/24).toFixed(2))),y=Number((100/48).toFixed(2)),z=React.createClass({displayName:"SREventBlock",propTypes:{event:k.eventValidator},mixins:[n,o,p],render:function(){return React.createElement("div",{className:this._getClassName(),style:this._getStyle(),role:"button",tabIndex:"0","aria-label":j.getAriaLabel(this.props.event.get("occurrence")),"data-id":this.props.event.get("occurrence").id,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onMouseDown:this._onMouseDown},this._renderIcon(),this._renderTitle(),this._renderDates(),this._renderPictures(),this._renderResizeHandler(),this._renderMasks())},getInitialState:function(){return this._computeState(this.props)},componentWillReceiveProps:function(a){this.props.event!==a.event&&this.setState(this._computeState(a))},shouldComponentUpdate:function(a,b){return this.props.event!==a.event||!_.isEqual(this.state,b)},componentWillMount:function(){this._pendingPromises=[],this._pendingPromisesAll=null},componentDidMount:function(){this._preloadHighlightedIcon(),this._runPendingPromises()},componentWillUpdate:function(){this._cancelPendingPromises()},componentDidUpdate:function(a,b){this._preloadHighlightedIcon(),this._runPendingPromises()},componentWillUnmount:function(){this._cancelPendingPromises()},_renderIcon:function(){var a=this.state.iconState,b=function(){switch(a){case j.ICON_STATE.REPLY:return React.createElement("i",{className:"icon icon_reply"});case j.ICON_STATE.CACHED:var b=c.getCachedVersion(this.state.iconicUrl);return React.createElement("img",{src:b,alt:"",draggable:"false",className:"icon"});case j.ICON_STATE.NOT_CACHED:return this._scheduleUpdateAfterPromise(c.getIcon(this.state.iconicUrl).then(function(a){return{iconState:null===a?j.ICON_STATE.NULL:j.ICON_STATE.CACHED}}.bind(this))),null;default:return null}}.bind(this)();return b},_renderTitle:function(){var a=this.props.event.get("occurrence");return React.createElement("span",{className:this._getTitleClassName()},a.title)},_renderDates:function(){var a=this.props.event.get("occurrence"),c=this.props.event.get("position");if(Number(c.get("duration").toFixed(2))<x)return null;var f=function(){var b=d("SRDateFilter_timeFormat")(a.startDate,!0);return React.createElement("time",{className:"time__hours"},b)}(),g=function(){if(c.get("width")<100)return null;if(!a.timezone)return null;if(a.timezone===e.get("currentTimezone"))return null;var f=b.getDifferrenceBetweenTimezone(a.timezone,e.get("currentTimezone"),a.startDate);if(0===f)return null;var g=d("SRDateFilter_timeFormat")(new Date(a.startDate.getTime()+f),!0,!1),h=b.getTimezoneAbbreviation(a.startDate,a.timezone);return React.createElement("span",{className:"time__timezone"},"("+[g,h].join(" ")+")")}();return React.createElement("div",{className:"time"},f,g)},_renderPictures:function(){var a=this.props.event.get("occurrence"),b=this.props.event.get("position");if(Number(b.get("duration").toFixed(2))<x)return null;var c=_.keys(this.state.profilePicturesState);if("notReplied"===a.userRsvpStatus||0===c.length)return null;var d=_.indexBy(a.attendees.data,function(a){return void 0!==a.id?a.id:a.name}),e=c.length>s?t:s;c=c.slice(0,e);var f=_.map(c,function(a){var b=this.state.profilePicturesState[a];return this._renderPicture(b,a,d[a])}.bind(this));return a.attendees.data.length>e&&f.push(React.createElement("span",{key:"icon-more",className:"icon-more-wrapper"},React.createElement("i",{className:"icon icon_more"}))),f},_renderPicture:function(a,b,c){var d;if(a===j.PROFILE_PICTURE_STATE.NULL)d=null;else{var e=_.getPath(c,["image","thumbnail","url"]);if(a===j.PROFILE_PICTURE_STATE.CACHED){var h=f.get("images",e||_.getPath(c,["emails",0]));d=React.createElement("img",{className:"profile-picture",alt:this.props.event.get("occurrence").title,draggable:"false",src:h})}else{d=null;var i;i=void 0!==e?g.getImageByUrl.bind(g,e):g.getImage.bind(g,_.getPath(c,["emails",0])),this._scheduleUpdateAfterPromise(i().then(function(a){var c={};return c[b]=null===a?j.PROFILE_PICTURE_STATE.NULL:j.PROFILE_PICTURE_STATE.CACHED,{profilePicturesState:c}}))}}return React.createElement("span",{key:b,className:"profile-picture-wrapper"},d)},_renderResizeHandler:function(){return this.props.event.get("state")!==u.RESIZABLE?null:React.createElement("div",{className:"resize-handle",onMouseDown:this._onResizeHandlerMouseDown},React.createElement("div",null))},_renderMasks:function(){var a=this.props.event.get("occurrence");if(Number(this.props.event.get("position").get("duration").toFixed(2))<=y||"notReplied"===a.userRsvpStatus)return null;var b=this._getMaskStyles();return[React.createElement("div",{key:"mask-right",className:"mask-right",style:b.right}),React.createElement("div",{key:"mask-bottom",className:"mask-bottom",style:b.bottom})]},_getStyle:function(){var a=this.state.colors,b=this.props.event.get("position"),c=24*w.HOUR_HEIGHT(),d=Math.floor(b.get("left"))||2,e=this.props.event.get("state")===u.HIGHLIGHTED,f=(b.get("duration")*c/100-v.BOTTOM_MARGIN)/c*100;return{backgroundColor:e?a.background.focus:a.background["default"],color:e?a.text.focus:a.text["default"],borderColor:e?a.border.focus:a.border["default"],width:b.get("width")+"%",height:f+"%",top:b.get("top")+"%",left:b.get("left")+"%",zIndex:d}},_getMaskStyles:function(){var a=this.props.event.get("state")===u.HIGHLIGHTED,b=a?this.state.colors.background.focus:this.state.colors.background["default"],c=24*w.HOUR_HEIGHT(),d=(Math.round(this.props.event.get("position").get("duration")*c/100)-v.MASK_PADDING-v.BOTTOM_MARGIN)%v.LINE_HEIGHT+v.MASK_PADDING/2;return{right:{backgroundColor:b},bottom:{backgroundColor:b,height:d+"px"}}},_getTitleClassName:function(){var a=this.props.event.get("position");return classNames("title",{"one-line":Number(a.get("duration").toFixed(2))<x})},_getClassName:function(){return classNames("sr-event","sr-event-block",{bordered:this.props.event.get("position").get("left")>0},{shadowed:this.props.event.get("state")===u.HIGHLIGHTED},{striped:"notReplied"===this.props.event.get("occurrence").userRsvpStatus},{meet:this.props.event.get("state")===u.MEET})},_computeState:function(a){var b=a.event.get("state")===u.MEET?m.ui.MEET_COLOR:a.event.get("calendarColor"),c=function(){return a.event.get("state")!==u.MEET&&_.hasPath(a.event.get("occurrence"),["icon","baseColor"])?_.getPath(a.event.get("occurrence"),["icon","baseColor"]):void 0}(),d=j.getColors(a.event.get("occurrence"),b,c,!0),e=function(){return a.event.get("state")===u.HIGHLIGHTED?j.ICONIC_URL_STATE.HIGHLIGHTED:j.ICONIC_URL_STATE.NORMAL}(),f=j.getIconicUrl(a.event.get("occurrence"),e,d,v.ICON_SIZE);j.getProfilePicturesState(a.event.get("occurrence"));return{colors:d,iconState:j.getIconState(a.event.get("occurrence"),f),iconicUrl:f,profilePicturesState:j.getProfilePicturesState(a.event.get("occurrence"))}},_scheduleUpdateAfterPromise:function(a){this._pendingPromises.push(a)},_runPendingPromises:function(){if(_.getPath(this._pendingPromises,[0])){var a=function(a){if("CANCELLED"!==a){var b={};_.each(a,function(a){_.merge(b,a)}),this._pendingPromises=[],this._pendingPromisesAll=null,this.isMounted()&&this.setState(b)}}.bind(this);return this._pendingPromisesAll=i.wrap(h.all(this._pendingPromises)),this._pendingPromisesAll.then(a,a),this._pendingPromisesAll}},_cancelPendingPromises:function(){null!==this._pendingPromisesAll&&this._pendingPromisesAll.cancel()},_preloadHighlightedIcon:function(){var a=j.getIconicUrl(this.props.event.get("occurrence"),j.ICONIC_URL_STATE.HIGHLIGHTED,this.state.colors,v.ICON_SIZE);c.getIcon(a)},onClick:function(a){l.onClickTimedEvent(this.props.event,a)},onDoubleClick:function(a){l.onDoubleClickTimedEvent(this.props.event,a)},onClickFail:function(a){l.onClickFailTimedEvent(this.props.event)},onMouseDown:function(a){l.onMouseDownTimedEvent(this.props.event,a)},shouldStartDrag:function(){return this.props.event.get("occurrence").editable===!0},onDragStart:function(a,b){l.startDragTimedEvent(this.props.event,a)},_onMouseDown:function(a){this.onMouseDownClickMixin(a),this.onMouseDownDragMixin(a)},_onMouseEnter:function(a){this.props.event.get("occurrence").editable===!0&&this.props.event.get("state")!==u.HIGHLIGHTED&&l.setTimedEventResizable(this.props.event)},_onMouseLeave:function(a){this.props.event.get("occurrence").editable===!0&&this.props.event.get("state")!==u.HIGHLIGHTED&&l.setTimedEventUnresizable(this.props.event)},_onResizeHandlerMouseDown:function(a){l.startResizeTimedEvent(this.props.event),a.stopPropagation()}});return z}]),angular.module("App").factory("SREventAllDay",["SROccurrenceModel","SREventHelper","SREventValidatorHelper","SRWeekActionCreator","SREventConstants","SRDragMixin","SRClickMixin","SRKeyboardFocusMixin","SRReactConstants",function(a,b,c,d,e,f,g,h,i){var j=e.states,k=(i.events.mouse,React.createClass({displayName:"SREventAllDay",propTypes:{event:c.eventValidator},mixins:[f,g,h],render:function(){return React.createElement("div",{className:"sr-event sr-event-all-day",style:this._getStyle(),role:"button",tabIndex:"0","aria-label":b.getAriaLabel(this.props.event.get("occurrence")),"data-id":this.props.event.get("occurrence").id,onMouseDown:this._onMouseDown},React.createElement("div",{className:this._getContainerClassName(),style:this._getContainerStyle()},this._renderIcon(),this._renderTitle()))},getInitialState:function(){return this._computeState(this.props)},componentWillReceiveProps:function(a){this.props.event!==a.event&&this.setState(this._computeState(a))},shouldComponentUpdate:function(a,b){return this.props.event!==a.event||!_.isEqual(this.state,b)},_renderIcon:function(){return"notReplied"!==this.props.event.get("occurrence").userRsvpStatus?null:React.createElement("i",{className:"icon icon_reply"})},_renderTitle:function(){var a=this.props.event.get("occurrence");return React.createElement("span",{className:"title"},a.title)},_getStyle:function(){var a=this.props.event.get("position");return{top:a.get("top")+"px",left:a.get("left")+"%",width:a.get("width")+"%"}},_getContainerStyle:function(){var a=this.state.colors,b=this.props.event.get("state")===j.HIGHLIGHTED;return{backgroundColor:b?a.background.focus:a.background["default"],color:b?a.text.focus:a.text["default"],borderColor:b?a.border.focus:a.border["default"]}},_getContainerClassName:function(){return classNames("container",{shadowed:this.props.event.get("state")===j.HIGHLIGHTED},{striped:"notReplied"===this.props.event.get("occurrence").userRsvpStatus},{meet:this.props.event.get("state")===j.MEET})},_computeState:function(a){var c=a.event.get("state")===j.MEET?e.ui.MEET_COLOR:a.event.get("calendarColor"),d=function(){return a.event.get("state")!==j.MEET&&_.hasPath(a.event.get("occurrence"),["icon","baseColor"])?_.getPath(a.event.get("occurrence"),["icon","baseColor"]):void 0}(),f=b.getColors(a.event.get("occurrence"),c,d,!0);return{colors:f}},onClick:function(a){d.onClickAllDayEvent(this.props.event,a)},onDoubleClick:function(a){d.onDoubleClickAllDayEvent(this.props.event,a)},onClickFail:function(a){d.onClickFailAllDayEvent(this.props.event)},onMouseDown:function(a){d.onMouseDownAllDayEvent(this.props.event,a)},shouldStartDrag:function(){return this.props.event.get("occurrence").editable===!0},onDragStart:function(a,b){d.startDragAllDayEvent(this.props.event,a)},_onMouseDown:function(a){this.onMouseDownClickMixin(a),this.onMouseDownDragMixin(a)}}));return k}]),angular.module("App").factory("SREventBirthday",["SROccurrenceModel","SRClickMixin","SRWeekActionCreator","SREventConstants","SREventHelper","SRI18nService",function(a,b,c,d,e,f){var g=d.states,h=React.createClass({displayName:"SREventBirthday",mixins:[b],render:function(){return 0===this.props.events.size?null:React.createElement("div",{className:this._getClassName(),role:"button",tabIndex:"0","aria-label":this._getAriaLabel(),"data-ids":this._getIds(),onMouseDown:this._onMouseDown},React.createElement("i",{className:"icon icon_gift"}),React.createElement("span",{className:"title"},this._getTitle()))},getInitialState:function(){return this._computeState(this.props)},componentWillReceiveProps:function(a){this.props.events!==a.events&&this.setState(this._computeState(a))},shouldComponentUpdate:function(a,b){return this.props.events!==a.events||!_.isEqual(this.state,b)},_getClassName:function(){return classNames("sr-event sr-event-birthday",{shadowed:this.state.state===g.HIGHLIGHTED},{highlighted:this.state.state===g.HIGHLIGHTED},{meet:this.state.state===g.MEET})},_getTitle:function(){var a=this.props.events.reduce(function(a,b){var c=b.get("occurrence"),d=_.getPath(c,["attendees","data",0]);return void 0===d?a.push(c.title):a.push(d.name||[d.firstName,d.lastName].join(" ")),a},[]);return a.join(", ")},_getIds:function(){var a=this.props.events.reduce(function(a,b){return a.push(b.get("occurrence").id),a},[]);return a.join(", ")},_getState:function(a){for(var b=0,c=a.size;c>b;b++){var d=a.get(b);if(d.get("state")===g.HIGHLIGHTED)return g.HIGHLIGHTED}return g.NORMAL},_computeState:function(a){if(0===a.events.size)return null;var b=e.getColors(a.events.first().get("occurrence"),a.events.first().get("calendarColor"),void 0,!1);return{colors:b,state:this._getState(a.events)}},onClick:function(a){c.onClickBirthdayEvent(this.props.events.first(),a)},onClickFail:function(a){c.onClickFailAllDayEvent(this.props.events.first())},onMouseDown:function(a){c.onMouseDownAllDayEvent(this.props.events.first(),a)},_onMouseDown:function(a){this.onMouseDownClickMixin(a)},_getAriaLabel:function(){return 1===this.props.events.size?f.getMessage("BIRTHDAY_X",this._getTitle()):f.getMessage("BIRTHDAYS_X",this._getTitle())}});return h}]),angular.module("App").factory("SREventInline",["SROccurrenceModel","$q","SRQCancellableService","SROccurrenceColorService","SRIconicService","SRDateService","SROnlineStatusService","$filter","SREventHelper","SREventValidatorHelper","SRWeekActionCreator","SREventConstants","SRDragMixin","SRClickMixin","SRKeyboardFocusMixin","SRReactConstants","SRWeekConstants",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=l.states,s=l.types,t=l.layout.timed,u=q.layout.timed,v=(p.events.mouse,React.createClass({displayName:"SREventInline",propTypes:{event:j.eventValidator},mixins:[m,n,o],render:function(){return React.createElement("div",{className:this._getClassName(),style:this._getStyle(),role:"button",tabIndex:"0","aria-label":i.getAriaLabel(this.props.event.get("occurrence")),"data-id":this.props.event.get("occurrence").id,onMouseDown:this._onMouseDown},this._renderIcon(),this._renderTitle())},getInitialState:function(){return this._computeState(this.props)},componentWillReceiveProps:function(a){this.props.event!==a.event&&this.setState(this._computeState(a))},shouldComponentUpdate:function(a,b){return this.props.event!==a.event||!_.isEqual(this.state,b)},componentDidMount:function(){this._preloadHighlightedIcon()},componentDidUpdate:function(){this._preloadHighlightedIcon()},_renderIcon:function(){var a=this.state.iconState,b=function(){switch(a){case i.ICON_STATE.REPLY:return React.createElement("i",{className:"icon icon_reply"});case i.ICON_STATE.CACHED:if(this.props.event.get("occurrence").type.endsWith(s.CHECKIN_SUFFIX)){var b=this.props.event.get("state")===r.HIGHLIGHTED?this.state.colors.text.focus:this.state.colors.background.focus;return React.createElement("i",{className:"icon icon_marker",style:{color:b}})}var c=e.getCachedVersion(this.state.iconicUrl);return React.createElement("img",{src:c,alt:"",draggable:"false",className:"icon"});case i.ICON_STATE.NOT_CACHED:var d=this.state.iconicUrl;return e.getIcon(d).then(function(a){this.isMounted()&&this.state.iconicUrl===d&&this.setState({iconState:null===a?i.ICON_STATE.NULL:i.ICON_STATE.CACHED})}.bind(this)),null;default:return null}}.bind(this)();return b},_renderTitle:function(){var a=this.props.event.get("occurrence"),b=function(){return a.title?a.type.endsWith(s.CHECKIN_SUFFIX)?h("SRStringFilter_foursquareTitle")(a.title):a.title:null}();return React.createElement("span",{className:"title"},b)},_getStyle:function(){var a=(this.props.event.get("state"),this.props.event.get("position")),b=(24*u.HOUR_HEIGHT(),this.props.event.get("state")===r.HIGHLIGHTED);return{background:b?this.state.colors.background.focus:this.state.colors.background["default"],color:b?this.state.colors.text.focus:this.state.colors.text["default"],width:a.get("width")+"%",height:a.get("duration")+"%",top:a.get("top")+"%",left:a.get("left")+"%"}},_getClassName:function(){this.props.event.get("state");return classNames("sr-event","sr-event-inline",{shadowed:this.props.event.get("state")===r.HIGHLIGHTED},{meet:this.props.event.get("state")===r.MEET})},_computeState:function(a){var b=a.event.get("state")===r.MEET?l.ui.MEET_COLOR:a.event.get("calendarColor"),c=function(){return a.event.get("state")!==r.MEET&&_.hasPath(a.event.get("occurrence"),["icon","baseColor"])?_.getPath(a.event.get("occurrence"),["icon","baseColor"]):void 0}(),d=i.getColors(a.event.get("occurrence"),b,c,!1),e=function(){return a.event.get("state")===r.HIGHLIGHTED?i.ICONIC_URL_STATE.HIGHLIGHTED:i.ICONIC_URL_STATE.NORMAL}(),f=i.getIconicUrl(a.event.get("occurrence"),e,d,t.ICON_SIZE),g=function(){return a.event.get("occurrence").type.endsWith(s.CHECKIN_SUFFIX)?i.ICON_STATE.CACHED:i.getIconState(a.event.get("occurrence"),f)}.bind(this)();return{iconState:g,iconicUrl:f,colors:d}},_preloadHighlightedIcon:function(){var a=i.getIconicUrl(this.props.event.get("occurrence"),i.ICONIC_URL_STATE.HIGHLIGHTED,this.state.colors,t.ICON_SIZE);e.getIcon(a)},onClick:function(a){k.onClickTimedEvent(this.props.event,a)},onDoubleClick:function(a){k.onDoubleClickTimedEvent(this.props.event,a)},onClickFail:function(a){k.onClickFailTimedEvent(this.props.event)},onMouseDown:function(a){k.onMouseDownTimedEvent(this.props.event,a)},shouldStartDrag:function(){return this.props.event.get("occurrence").editable===!0},onDragStart:function(a,b){k.startDragTimedEvent(this.props.event,a)},_onMouseDown:function(a){this.onMouseDownClickMixin(a),this.onMouseDownDragMixin(a)}}));return v}]),angular.module("App").factory("SREventMultiDay",["SROccurrenceModel","SREventHelper","SRIconicService","$filter","SREventValidatorHelper","SRWeekActionCreator","SREventConstants","SRDragMixin","SRClickMixin","SRKeyboardFocusMixin","SRReactConstants",function(a,b,c,d,e,f,g,h,i,j,k){var l=g.states,m=g.layout.allDay,n=(k.events.mouse,React.createClass({displayName:"SREventMultiDay",propTypes:{event:e.eventValidator},mixins:[h,i,j],render:function(){return React.createElement("div",{className:"sr-event sr-event-multi-day",style:this._getStyle(),role:"button",tabIndex:"0","aria-label":b.getAriaLabel(this.props.event.get("occurrence")),"data-id":this.props.event.get("occurrence").id,onMouseDown:this._onMouseDown},React.createElement("div",{className:this._getContainerClassName(),style:this._getContainerStyle()},this._renderIcon(),this._renderTitle(),this._renderDates()))},getInitialState:function(){return this._computeState(this.props)},componentWillReceiveProps:function(a){this.props.event!==a.event&&this.setState(this._computeState(a))},shouldComponentUpdate:function(a,b){return this.props.event!==a.event||!_.isEqual(this.state,b)},componentDidMount:function(){this._preloadHighlightedIcon()},componentDidUpdate:function(){this._preloadHighlightedIcon()},_renderIcon:function(){var a=this.state.iconState,d=function(){switch(a){case b.ICON_STATE.REPLY:return React.createElement("i",{className:"icon icon_reply"});case b.ICON_STATE.CACHED:var d=c.getCachedVersion(this.state.iconicUrl);return React.createElement("img",{src:d,alt:"",draggable:"false",className:"icon"});case b.ICON_STATE.NOT_CACHED:var e=this.state.iconicUrl;return c.getIcon(e).then(function(a){this.isMounted()&&this.state.iconicUrl===e&&this.setState({iconState:null===a?b.ICON_STATE.NULL:b.ICON_STATE.CACHED})}.bind(this)),null;case b.ICON_STATE.NULL:var f=this.props.event.get("state")===l.HIGHLIGHTED?this.state.colors.text.focus:this.state.colors.text["default"];return React.createElement("i",{className:"icon icon--placeholder",style:{backgroundColor:f}});default:return null;
}}.bind(this)();return d},_renderTitle:function(){var a=this.props.event.get("occurrence");return React.createElement("span",{className:"title"},a.title)},_renderDates:function(){var a=this.props.event.get("occurrence"),b=d("SRDateFilter_timeFormat")(a.endDate);return React.createElement("time",{className:"time"},b)},_getStyle:function(){var a=this.props.event.get("position");return{top:a.get("top")+"px",left:a.get("left")+"%",width:a.get("width")+"%"}},_getContainerStyle:function(){var a=this.state.colors,b=this.props.event.get("state")===l.HIGHLIGHTED;return{backgroundColor:b?a.background.focus:a.background["default"],color:b?a.text.focus:a.text["default"],borderColor:b?a.border.focus:a.border["default"]}},_getContainerClassName:function(){return classNames("container",{shadowed:this.props.event.get("state")===l.HIGHLIGHTED},{striped:"notReplied"===this.props.event.get("occurrence").userRsvpStatus},{meet:this.props.event.get("state")===l.MEET})},_computeState:function(a){var c=a.event.get("state")===l.MEET?g.ui.MEET_COLOR:a.event.get("calendarColor"),d=function(){return a.event.get("state")!==l.MEET&&_.hasPath(a.event.get("occurrence"),["icon","baseColor"])?_.getPath(a.event.get("occurrence"),["icon","baseColor"]):void 0}(),e=b.getColors(a.event.get("occurrence"),c,d,!0),f=function(){return a.event.get("state")===l.HIGHLIGHTED?b.ICONIC_URL_STATE.HIGHLIGHTED:b.ICONIC_URL_STATE.NORMAL}(),h=b.getIconicUrl(a.event.get("occurrence"),f,e,m.ICON_SIZE);return{iconState:b.getIconState(a.event.get("occurrence"),h),iconicUrl:h,colors:e}},_preloadHighlightedIcon:function(){var a=b.getIconicUrl(this.props.event.get("occurrence"),b.ICONIC_URL_STATE.HIGHLIGHTED,this.state.colors,m.ICON_SIZE);c.getIcon(a)},onClick:function(a){f.onClickAllDayEvent(this.props.event,a)},onDoubleClick:function(a){f.onDoubleClickAllDayEvent(this.props.event,a)},onClickFail:function(a){f.onClickFailAllDayEvent(this.props.event)},onMouseDown:function(a){f.onMouseDownAllDayEvent(this.props.event,a)},shouldStartDrag:function(){return this.props.event.get("occurrence").editable===!0},onDragStart:function(a,b){f.startDragAllDayEvent(this.props.event,a)},_onMouseDown:function(a){this.onMouseDownClickMixin(a),this.onMouseDownDragMixin(a)}}));return n}]),angular.module("App").factory("SREventEditing",["SROccurrenceModel","$filter","SREventHelper","SREventConstants","SRWeekConstants",function(a,b,c,d,e){var f=d.states,g=e.layout.timed,h=React.createClass({displayName:"SREventEditing",render:function(){return React.createElement("div",{className:"sr-event sr-event-editing",style:this._getStyle(),"data-id":this.props.event.get("occurrence").id},this._renderDates())},getInitialState:function(){return this._computeState(this.props)},componentWillReceiveProps:function(a){this.props.event!==a.event&&this.setState(this._computeState(a))},shouldComponentUpdate:function(a,b){return this.props.event!==a.event||!_.isEqual(this.state,b)},_renderDates:function(){var a=this.props.event.get("occurrence"),c=b("SRDateFilter_timeFormat")(a.startDate,!0),d=b("SRDateFilter_timeFormat")(a.endDate,!0),e=b("SRDateFilter_duration")(a.endDate.getTime()-a.startDate.getTime(),"ms",null,!0),f=c+" - "+d+" ("+e+")";return React.createElement("span",{className:"time"},f)},_renderResizeHandle:function(){return React.createElement("div",{className:"resize-handle"})},_getStyle:function(){var a=this.state.colors,b=this.props.event.get("position"),c=(24*g.HOUR_HEIGHT(),this.props.event.get("state")===f.HIGHLIGHTED);return{color:c?a.text.focus:a.text["default"],backgroundColor:c?a.background.focus:a.background["default"],borderColor:c?a.background.focus:a.background["default"],width:b.get("width")+"%",height:b.get("duration")+"%",top:b.get("top")+"%",left:b.get("left")+"%"}},_computeState:function(a){var b=c.getColors(a.event.get("occurrence"),a.event.get("calendarColor"),void 0,!0);return{colors:b}}});return h}]),angular.module("App").factory("SREventMeet",["SREventConstants","$filter","SRWeekActionCreator","SRClickMixin","SRCurrentMeetService","SRWeekConstants",function(a,b,c,d,e,f){var g=a.layout.timed,h=a.states,i=f.layout.timed,j=React.createClass({displayName:"SREventMeet",mixins:[d],render:function(){return React.createElement("div",{className:this._getClassName(),role:"button",style:this._getStyle(),onMouseDown:this._onMouseDown,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,"data-timeslot-id":this.props.event.get("occurrence").timeSlotId},this._renderDates(),this._renderOverlay())},componentDidMount:function(){setTimeout(function(){if(this.isMounted()){var a=$(React.findDOMNode(this));a.is(":hover")&&this.isMounted()&&this._onMouseEnter()}}.bind(this),200)},shouldComponentUpdate:function(a,b){return this.props.event!==a.event},_renderDates:function(){var a=this.props.event.get("occurrence"),c=[b("SRDateFilter_timeFormat")(a.startDate,!0),b("SRDateFilter_timeFormat")(a.endDate,!0)].join(" - ");return React.createElement("span",{className:"time"},c)},_renderOverlay:function(){return React.createElement("div",{className:"overlay"},React.createElement("i",{className:"icon icon_trash"}))},_getStyle:function(){var a=this.props.event.get("position"),b=24*i.HOUR_HEIGHT(),c=(a.get("duration")*b/100-g.BOTTOM_MARGIN)/b*100;return{height:c+"%",top:a.get("top")+"%",width:a.get("width")+"%",left:a.get("left")+"%"}},_getClassName:function(){var a=this.props.event.get("state");return classNames("sr-event-meet",{highlighted:a===h.HIGHLIGHTED||a===h.DELETABLE},{deletable:a===h.DELETABLE})},onClick:function(a){c.onClickMeetEvent(this.props.event,a)},_onMouseEnter:function(a){c.onMouseEnterMeetEvent(this.props.event,a)},_onMouseLeave:function(a){c.onMouseLeaveMeetEvent(this.props.event,a)},_onMouseDown:function(a){this.onMouseDownClickMixin(a)}});return j}]),angular.module("App").run(["$templateCache",function(a){"use strict";a.put("/template/partials/_anchorman-banner_tpl.html",'<div\n  class="banner"\n  role="alertdialog"\n  data-ng-click="closeBannerAndShow(true, $event)"\n  data-ng-if="banner !== null"\n>\n  <i class="banner__icon"></i>\n  <section class="banner__content">\n    <h1 class="banner__title" data-ng-bind-html=":: banner.title"></h1>\n    <h2 class="banner__description" data-ng-bind-html=":: banner.description"></h2>\n  </section>\n  <section class="banner__button-container">\n    <div role="button" class="banner__button" data-ng-click="closeBannerAndShow(false, $event)">\n      <i class="banner__button__icon"></i>\n    </div>\n  </section>\n</div>\n'),a.put("/template/partials/_anchorman-modal_tpl.html",'<header class="modal-header" data-ng-style="{\'background-color\': \'#\' + content.backgroundColor }">\n  <a\n    href="#"\n    role="button"\n    class="modal__close-button"\n    data-ng-click=":: onCloseButtonClick()"\n  >\n    <i class="modal__close-button__icon"></i>\n  </a>\n</header>\n\n<section class="modal-body" data-ng-style="{\'background-color\': \'#\' + content.backgroundColor }">\n\n  <div class="scrollbox-layer scrollbox-layer--top"></div>\n    <iframe data-ng-if=":: !isChromeApp" data-ng-src="{{ content.contentHTML || content.contentURL }}"></iframe>\n    <webview data-ng-if=":: isChromeApp" data-ng-src="{{ content.contentHTML || content.contentURL }}"></webview>\n  <div class="scrollbox-layer scrollbox-layer--bottom"></div>\n\n  <div data-ng-if="mode === \'share\'" class="modal-share" data-ng-click="onShareBackgroundClick($event)">\n    <div class="modal-share__btn-wrapper">\n      <button\n        role="button"\n        data-ng-click=":: onShareButtonClick($event, \'facebook\')"\n        class="btn btn--block btn--large btn--facebook"\n      >\n        <i class="icon icon_facebook"></i>\n        {{:: \'SHARE_ON_X\' | SRHelperFilter_translate:\'Facebook\'}}\n      </button>\n      <button\n        role="button"\n        data-ng-click=":: onShareButtonClick($event, \'twitter\')"\n        class="btn btn--block btn--large btn--twitter"\n      >\n        <i class="icon icon_twitter"></i>\n        {{:: \'SHARE_ON_X\' | SRHelperFilter_translate:\'Twitter\'}}\n      </button>\n    </div>\n  </div>\n</section>\n\n<footer class="modal-footer" data-ng-style="{\'background-color\': \'#\' + content.backgroundColor }" ng-switch on="mode">\n  <button\n    role="button"\n    class="btn btn--block btn--large btn--primary footer__button"\n    data-ng-switch-when="share"\n    data-ng-click=":: onShareCancelButtonClick()"\n    data-ng-bind=":: \'CANCEL\' | SRHelperFilter_translate"\n  ></button>\n  <button\n    role="button"\n    class="btn btn--block btn--large btn--primary footer__button"\n    data-ng-switch-when="normal"\n    data-ng-click=":: onFooterButtonClick()"\n    data-ng-bind="content.action.title"\n  ></button>\n</footer>\n'),a.put("/template/partials/_autocomplete-people_tpl.html",'<a class="autocomplete-menu-item autocomplete-menu-item--people" role="button" tabindex="-1">\n'+"  {{match.model['name']}} <span data-ng-if=\"match.model['name']\"> - </span> <strong>{{match.model['email']}}</strong>\n</a>\n"),a.put("/template/partials/_autocomplete-place_tpl.html",'<a class="autocomplete-menu-item" role="button" tabindex="-1">\n  <strong>{{match.model[\'title\']}}</strong>\n  <small class="muted">{{match.model[\'description\']}}</small>\n</a>\n'),a.put("/template/partials/_calendar-picker-list_tpl.html",'<ul class="calendar-picker__list">\n  <li\n    class="calendar-picker__list-connection"\n\n    data-ng-repeat="connection in ::connections | orderBy:[\'+defaults.priority\', \'+type\', \'+info\'] track by connection.id"\n    data-ng-show="calendars[connection.id] && calendars[connection.id].length"\n  >\n\n    <h3 class="calendar-picker__list-connection__title">\n      <span data-ng-bind=":: connection.type | SRStringFilter_titleCase"></span>\n      <b data-ng-show=":: connection.info">\n        (<span data-ng-bind=":: connection.info"></span>)\n      </b>\n    </h3>\n\n    <ul class="calendar-picker__list-calendars">\n      <li\n        class=""\n        data-ng-repeat="calendar in ::calendars[connection.id] | orderBy:[\'+defaults.priority\', \'+title\'] track by calendar.id"\n      >\n        <a\n          class="calendar-picker__list-calendar media media--overflow media--0"\n          role="button"\n          aria-label="{{:: \'SWITCH_TO_X\' | SRHelperFilter_translate:(connection.type + \' - \' + calendar.title)}}"\n          aria-selected="{{calendarId === calendar.id}}"\n          data-ng-click="onSelect(calendar)"\n          data-ng-class="{\n            \'active\': calendarId === calendar.id\n          }"\n        >\n          <div class="media__object">\n            <sr-iconic type="{{:: calendar.type}}" color="{{:: calendar.color}}" size="40"></sr-iconic>\n          </div>\n          <div class="media__body media media--10">\n            <div class="media__object--rev" data-ng-if="calendarId === calendar.id">\n              <i class="icon icon_checkmark calendar-picker__list-checkmark"></i>\n            </div>\n            <div class="media__body">\n              <h4 class="calendar-picker__list-calendar__title" data-ng-bind=":: calendar.title"></h4>\n            </div>\n          </div>\n        </a>\n      </li>\n    </ul>\n  </li>\n</ul>\n'),a.put("/template/partials/_calendar-picker_tpl.html",'<div class="calendar-picker">\n\n  <a\n    class="calendar-picker__action media media--overflow media--10"\n    aria-label="Current Calendar: {{ calendarsHash[calendarId].title }}"\n    data-ng-click="togglePopover()"\n    role="button"\n    data-ng-disabled="!calendarsHash[calendarId] || hasPopover || options.disabled"\n  >\n    <span class="media__object">\n      <sr-iconic type="{{calendarsHash[calendarId].type}}" color="{{calendarsHash[calendarId].color}}" size="options.size"></sr-iconic>\n    </span>\n    <span class="media__body">\n      {{ calendarsHash[calendarId].title }}\n      <i class="icon icon_chevron-bottom"></i>\n    </span>\n  </a>\n\n  <ul class="calendar-picker__dialog" data-sr-ui-close-popover data-ng-if="hasPopover">\n    <sr-calendar-picker-list calendar-id="$parent.calendarId" connections=":: connections" calendars=":: calendars" has-popover="$parent.hasPopover"></sr-calendar-picker-list>\n  </ul>\n\n</div>\n'),a.put("/template/partials/_calendars-list_tpl.html",'<ul class="calendars-list">\n\n  <li data-ng-if="!connections.length && type === \'visibility\' && !isLoading && !onlyInterestingCalendars">\n    <a class="btn btn--block btn--small" role="button" data-ng-click="addAccount()">\n      {{ :: i18n.ADD_ACCOUNT }}\n    </a>\n  </li>\n\n  <li\n    data-ng-repeat="connection in connections | orderBy:[\'+defaults.priority\', \'+type\', \'+info\'] track by connection.id"\n    data-ng-if="connectionsVisibility[connection.id]"\n    data-ng-disabled="connection.disconnected || isDisabled"\n  >\n    <h3 class="calendars-list__title heading-5" data-ng-if=":: connection.type !== \'store\' && !noHeaders">\n      <span data-ng-bind=":: connection.type | SRStringFilter_titleCase"></span>\n      <span data-ng-if=":: connection.info">(<span data-ng-bind=":: connection.info"></span>)</span>\n    </h3>\n\n    <h3 class="calendars-list__title heading-5" data-ng-if=":: connection.type === \'store\' && !noHeaders">\n      <span>{{ :: i18n.INTERESTING_CALENDARS }}</span>\n    </h3>\n\n    <ul class="calendars-list__list">\n      <li\n        data-ng-repeat="calendar in calendars[connection.id] | orderBy:[\'+defaults.priority\', \'+title\'] track by calendar.id"\n        data-ng-if="type === \'visibility\' || (type === \'reminders\' && calendar.visible)"\n      >\n        <label\n          class="calendars-list__label"\n          for="{{:: calendarCheckboxId = (\'calendars-list-\' + type + \'-\' + calendar.id) }}"\n        >\n\n          <sr-ui-spinner\n            class="spinner--calendars-list"\n            data-custom-options="{\'circle\': {\'strokeColor\': \'#636a78\'}}"\n            data-ng-if="type === \'visibility\'"\n            data-ng-hide="!refreshStatus.calendars[calendar.id]"\n          >\n          </sr-ui-spinner>\n\n          <!-- Visibility -->\n          <sr-ui-checkbox\n            data-value="calendar.visible"\n            data-id="calendarCheckboxId"\n            data-on-change="toggleVisibility(calendar)"\n\n            data-ng-if="type === \'visibility\'"\n            data-ng-hide="refreshStatus.calendars[calendar.id]"\n          >\n          </sr-ui-checkbox>\n\n          <!-- Reminders -->\n          <sr-ui-checkbox\n            data-value="calendar.reminders"\n            data-on-change="toggleReminders(calendar)"\n            data-id="calendarCheckboxId"\n\n            data-ng-if="type === \'reminders\'"\n          >\n          </sr-ui-checkbox>\n\n          <sr-iconic type="{{:: calendar.type}}" color="{{ calendar.color}}" size="40"></sr-iconic>\n          <span data-ng-bind=":: calendar.title"></span>\n        </label>\n      </li>\n    </ul>\n  </li>\n</ul>\n\n'),a.put("/template/partials/_checkbox_tpl.html",'<span class="checkbox">\n   <input\n     class="checkbox__input"\n     type="checkbox"\n     role="checkbox"\n     data-ng-attr-tabindex="{{:: tabindex}}"\n     data-ng-model="value"\n     data-ng-change=":: onValueChange()"\n     data-ng-attr-id="{{:: id}}"\n   />\n   <span class="checkbox__background"></span>\n   <i class="icon icon_checkmark checkbox__checkmark" aria-hidden="true"></i>\n</span>\n'),a.put("/template/partials/_confirm_tpl.html",'<div class="confirm__wrapper">\n  <div class="confirm__overlay" data-ng-if="confirm"></div>\n  <div\n    class="confirm__box"\n\n    role="alertdialog"\n    aria-labelledby="confirm-title"\n    aria-describedby="confirm-msg"\n\n    data-ng-if="confirm"\n    sr-ui-focus="true"\n  >\n    <header class="confirm__header">\n      <h1 id="confirm-title" data-ng-if="confirm.title">{{confirm.title}}</h1>\n    </header>\n    <div class="confirm__body">\n      <p id="confirm-msg" data-ng-if="confirm.msg">{{confirm.msg}}</p>\n\n      <ul class="confirm__body__buttons">\n        <li data-ng-repeat="action in confirm.actions">\n           <button\n            class="btn btn--block"\n\n            role="button"\n\n            data-ng-class="action.cssClass"\n            data-index="{{$index}}"\n            data-sr-ui-focus="action.focus"\n          >\n              {{action.label}}\n            </button>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n'),a.put("/template/partials/_dialog-attendees-list_tpl.html",'<div class="form-attendees__list">\n\n  <!-- Regular Events -->\n  <ul class="form-attendees__vertical-list" data-ng-if=":: type !== \'facebook:event\'">\n    <li data-ng-repeat="attendee in attendeesList">\n      <div class="media media--10">\n        <div class="media__object form-attendees__vertical-list__profile-picture"  data-ng-class="{\'form-attendees__vertical-list__profile-picture--single\': !attendee.name}">\n          <sr-profile-picture id="{{:: attendee.id}}" email="{{:: attendee.email}}" name="{{:: attendee.name}}" rsvp-status="{{attendee.rsvpStatus}}" thumbnail-url="{{:: attendee.thumbnail}}" ></sr-profile-picture>\n        </div>\n        <div class="media__body form-attendees__vertical-list__label">\n          <p data-ng-bind=":: attendee.name || attendee.email"></p>\n          <p class="muted" data-ng-if="attendee.name && attendee.email" data-ng-bind=":: attendee.email"></p>\n        </div>\n      </div>\n    </li>\n    <li data-ng-if=":: showViewMore">\n      <div class="media media--10">\n        <div class="media__body form-attendees__vertical-list__label form-attendees__vertical-list__label__view-more">\n          <a data-ng-click="viewAllAttendees()" role="button">\n            <p data-ng-bind=":: i18n.VIEW_ALL_ATTENDEES"></p>\n          </a>\n        </div>\n      </div>\n    </li>\n  </ul>\n\n  <!-- Facebook Events -->\n  <ul class="form-attendees__horizontal-list profile-picture-list profile-picture-list--large" data-ng-if=":: type === \'facebook:event\'">\n\n    <li data-ng-repeat="attendee in attendeesList | limitTo: 6">\n      <a\n        aria-label="{{attendee.email}}"\n        role="link"\n        data-sr-ui-open-url="attendee.profileUrl"\n      >\n        <sr-profile-picture id="{{attendee.id}}" thumbnail-url="{{attendee.thumbnail}}" email="{{attendee.email}}" name="{{attendee.name}}" rsvp-status="{{attendee.rsvpStatus}}" show-tooltip="true"></sr-profile-picture>\n      </a>\n    </li>\n\n    <li>\n      <a\n        data-ng-click="viewAllAttendees()"\n        aria-label="{{:: i18n.VIEW_ALL_ATTENDEES }}"\n        role="button"\n        tooltip="{{:: i18n.VIEW_ALL_ATTENDEES }}"\n        tooltip-append-to-body="true"\n      >\n        <i class="icon icon_more"></i>\n      </a>\n    </li>\n  </ul>\n\n</div>\n'),a.put("/template/partials/_dialog-birthdays_tpl.html",'<section class="dialog-birthdays js-draggable-handler">\n\n  <ul class="birthdays">\n    <li data-ng-repeat="birthday in birthdays">\n\n      <sr-ui-facebook-cover class="birthdays__cover" data-ng-if="birthday.cover" image-to-download="birthday.cover.url" image-sizes="birthday.cover.sizes"></sr-ui-facebook-cover>\n\n      <div class="birthdays__item media media--10 media--overflow" data-ng-class="{\'birthdays__item--cover\': birthday.cover}">\n        <div class="media__object profile-picture-birthdays">\n          <sr-profile-picture email="{{birthday.email}}" thumbnail-url="{{birthday.thumbnailUrl}}" ></sr-profile-picture>\n        </div>\n        <div class="media__body">\n\n          <div class="media media--10 media--overflow">\n            <div class="media__object--rev" data-ng-if="birthday.profileUrl">\n              <button data-ng-click="openTo(birthday.profileUrl)" role="button" class="btn btn--small btn--block">\n                {{ i18n.VIEW_TIMELINE }}\n              </button>\n            </div>\n            <div class="media__body birthdays__content">\n              <h3 class="birthdays__title">{{birthday.name}}</h3>\n              <h5 class="birthdays__date">{{birthday.age}}</h5>\n            </div>\n          </div>\n\n        </div>\n      </div>\n\n    </li>\n  </ul>\n</section>\n'),a.put("/template/partials/_dialog-details-attendees_tpl.html",'<div>\n  <ul class="form-attendees--list">\n    <li data-ng-repeat="attendee in attendeesList">\n      <div role="link" class="media form-attendees--list__action form-attendees--list__action--facebook" data-ng-if=":: type === \'facebook:event\'" data-sr-ui-open-url=":: attendee.profiles[0].url">\n        <div class="media__object">\n          <sr-profile-picture id="{{:: attendee.id}}" email="{{:: attendee.emails[0]}}" name="{{:: attendee.name}}" rsvp-status="{{:: attendee.rsvpStatus}}" thumbnail-url="{{:: attendee.image.thumbnail.url}}" ></sr-profile-picture>\n        </div>\n        <div class="media__body">\n          <p>{{:: attendee.name || attendee.emails[0]}}</p>\n        </div>\n      </div>\n\n      <div class="media form-attendees--list__action" data-ng-if=":: type !== \'facebook:event\'">\n        <div class="media__object">\n          <sr-profile-picture id="{{:: attendee.id}}" email="{{:: attendee.emails[0]}}" name="{{:: attendee.name}}" rsvp-status="{{:: attendee.rsvpStatus}}" thumbnail-url="{{:: attendee.image.thumbnail.url}}" ></sr-profile-picture>\n        </div>\n        <div class="media__body">\n          <p>{{:: attendee.name || attendee.emails[0]}}</p>\n          <p class="muted" data-ng-if=":: attendee.name && attendee.emails[0]" data-ng-bind=":: attendee.emails[0]"></p>\n        </div>\n      </div>\n    </li>\n  </ul>\n\n  <div class="form-attendees__Loading muted" data-ng-if="isLoading">\n    <sr-ui-spinner class="spinner--details-attendees"></sr-ui-spinner>\n  </div>\n</div>\n'),a.put("/template/partials/_dialog-details-place_tpl.html",'<div class="form-map form__row--border">\n  <div class=\'link\' tabindex="0" data-ng-mouseup=":: didMouseUp()" role="link" target="_blank" aria-label="{{ :: placeDetails ? placeDetails : placeName }}">\n    <div class="form-map__webview" data-ng-if=":: place.geometry.location && showMap">\n      <sr-ui-map data-address=":: place.address" data-geometry=":: place.geometry" data-width="378" data-height="100"></sr-ui-map>\n    </div>\n\n    <div class="form__row">\n      <div class="media media--10">\n        <div class="media__object form__media-object">\n          <i class="icon icon_marker"></i>\n        </div>\n        <div class="media__body">\n          <h3 class="form-map__title" data-ng-bind=":: placeName"></h3>\n          <span data-ng-show=":: placeDetails" class="form-map__details muted" data-ng-bind=":: placeDetails"></span>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),a.put("/template/partials/_dialog-details-rsvp_tpl.html",'<div>\n  <ul class="rsvp-action-list" data-ng-if=":: i18n.INVITED_YOU" data-ng-class="{\'rsvp-action-list--stack\': hasRsvp}">\n    <li>\n      <a\n        class="rsvp-action rsvp-action--attending"\n        data-ng-class="{\'rsvp-action--disabled\': userRsvpStatus !== \'attending\'}"\n        data-ng-click="onRsvpChange(\'attending\')"\n      >\n        <i class="icon icon_checkmark-circle-plain"></i>\n      </a>\n    </li>\n    <li>\n      <a\n        class="rsvp-action rsvp-action--unsure"\n        data-ng-class="{\'rsvp-action--disabled\': userRsvpStatus !== \'unsure\'}"\n        data-ng-click="onRsvpChange(\'unsure\')"\n      >\n        <i class="icon icon_question-mark"></i>\n      </a>\n    </li>\n    <li>\n      <a\n        class="rsvp-action rsvp-action--declined"\n        data-ng-class="{\'rsvp-action--disabled\': userRsvpStatus !== \'declined\'}"\n        data-ng-click="onRsvpChange(\'declined\')"\n      >\n        <i class="icon icon_x-circle"></i>\n      </a>\n    </li>\n  </ul>\n  <ul class="form__row form__row--multiple form-rsvp">\n    <li class="media media--10 media--overflow">\n      <div class="media__object" data-ng-if=":: inviterEmail">\n        <sr-profile-picture email="{{:: inviterEmail}}" thumbnail-url="{{:: inviterThumbnail}}" ></sr-profile-picture>\n      </div>\n      <div class="media__body">\n        <p data-ng-if=":: inviterName">\n          <span class="form-rsvp__name" data-ng-bind=":: inviterName"></span> {{:: i18n.INVITED_YOU }}\n        </p>\n        <p data-ng-if=":: !inviterName" data-ng-bind=":: i18n.WERE_INVITED"></p>\n      </div>\n    </li>\n    <li class="rsvp-action-wrapper" data-ng-if=":: i18n.INVITED_YOU" ></li>\n  </ul>\n</div>\n'),a.put("/template/partials/_dialog-details_tpl.html",'<div class="dialog__wrapper">\n\n  <!-- ================= -->\n  <!-- Details views -->\n  <!-- ================= -->\n  <section class="dialog__details" data-ng-if="dialogView">\n\n    <header class="dialog__bar">\n      <div class="form__row">\n        <a\n          aria-label="{{:: \'CANCEL\' | SRHelperFilter_translate}}"\n          role="button"\n          class="btn-link"\n          data-ng-click="changeView()"\n        >\n          <i class="icon icon_chevron-left"></i>\n        </a>\n        <a class="btn btn--small btn" role="button" data-ng-click="changeView()" data-ng-bind=":: i18n.DONE"></a>\n        <h1 class="dialog__bar__title" data-ng-bind=":: dialogView.title"></h1>\n      </div>\n    </header>\n\n    <div class="form__row form-description" data-ng-if=":: dialogView.view === \'details-description\'">\n      <p data-ng-bind-html=":: occurrence.description | SRStringFilter_noHTML | SRStringFilter_linesbreak | SRStringFilter_convertLinks"></p>\n    </div>\n\n    <div class="form__row " data-ng-if=":: dialogView.view === \'details-attendees\'">\n      <sr-dialog-details-attendees event-title="{{:: occurrence.title}}" event-id="{{:: occurrence.eventId}}" calendar-id="{{:: occurrence.calendarId}}" type="{{:: occurrence.type}}" attendees=":: occurrence.attendees.data"></sr-dialog-details-attendees>\n    </div>\n  </section>\n\n  <section class="dialog__main" data-ng-class="{\'dialog__main--hidden\': dialogView}">\n\n    <div class="dialog__body">\n\n      <div class="dialog__body__details">\n\n        <!-- RSVP -->\n        <div data-ng-if=":: occurrence.userRsvpStatus && !occurrence.editable">\n          <sr-dialog-details-rsvp organizer=":: occurrence.organizer" inviter=":: occurrence.inviter" user-rsvp-status=":: occurrence.userRsvpStatus"></sr-dialog-details-rsvp>\n        </div>\n\n        <div class="form__row" data-ng-class="{\'form__row--border\': occurrence.userRsvpStatus && !occurrence.editable}">\n\n          <!-- Title & Iconic -->\n          <section class="media media--10">\n            <div class="media__object form__media-object">\n              <div tooltip="{{:: calendar.title}}" tooltip-append-to-body="true" tooltip-placement="bottom">\n                <sr-iconic type="{{:: occurrence.type}}" overlay="{{:: ((occurrence.icon && occurrence.icon.overlay) ? occurrence.icon.overlay : occurrence.title + \':\' + occurrence.place.name) }}" color="{{:: ((occurrence.icon && occurrence.icon.baseColor) ? occurrence.icon.baseColor : calendar.color) }}" size="56"></sr-iconic>\n              </div>\n            </div>\n            <div class="media__body form-title">\n              <sr-dialog-details-title title="{{:: occurrence.title}}" type="{{:: occurrence.type}}"></sr-dialog-details-title>\n            </div>\n          </section>\n\n          <!-- Date -->\n          <section class="form-date form-date--details">\n            <sr-ui-date-duration has-icon="true" duration-days=":: occurrence.durationDays" timezone=":: occurrence.timezone" start=":: occurrence.startDate" end=":: occurrence.endDate" all-day=":: occurrence.allDay"></sr-ui-date-duration>\n            <sr-ui-time-duration has-icon="true" duration-days=":: occurrence.durationDays" timezone=":: occurrence.timezone" start=":: occurrence.startDate" end=":: occurrence.endDate" all-day=":: occurrence.allDay" is-recurring=":: occurrence.instance"></sr-ui-time-duration>\n\n            <!-- Recurring event -->\n            <div class="form-date__small media media--10" data-ng-show=":: occurrence.instance">\n              <div class="media__object form__media-object"></div>\n              <p class="media__body muted" data-ng-bind=":: i18n.PART_RECURRING_EVENT"></p>\n            </div>\n          </section>\n        </div>\n\n        <!-- Place -->\n        <sr-dialog-details-place data-ng-if=":: occurrence.place && occurrence.place.name" place=":: occurrence.place"></sr-dialog-details-place>\n\n        <!-- Attendees -->\n        <div class="form__row--border form-attendees" data-ng-if=":: occurrence.attendees && occurrence.attendees.data && occurrence.attendees.data.length">\n          <div class="media media--10">\n            <div class="media__object form__media-object">\n              <i class="icon icon_people"></i>\n            </div>\n            <div class="media__body">\n              <sr-dialog-attendees-list attendees="occurrence.attendees" type="{{:: occurrence.type}}"></sr-dialog-attendees-list>\n            </div>\n          </div>\n        </div>\n\n        <!-- Link -->\n        <sr-dialog-details-links uris=":: occurrence.uris" type="{{:: occurrence.type}}" source-id="{{:: occurrence.sourceId}}"></sr-dialog-details-links>\n\n        <!-- Description -->\n        <div class="form__row form__row--border" data-ng-if=":: occurrence.description">\n          <sr-dialog-details-description description="{{:: occurrence.description}}"></sr-dialog-details-description>\n        </div>\n\n        <!-- Extensions -->\n        <sr-dialog-details-extension extension=":: extension" data-ng-repeat="extension in ::occurrence.extensions"></sr-dialog-details-extension>\n      </div>\n    </div>\n\n    <footer class="dialog__footer js-draggable-handler" data-ng-if=":: occurrence.editable">\n      <!-- Switch to edit mode -->\n      <a tabindex="1001" role="button" class="btn btn--small btn float-left" data-ng-click="toggleEditMode()">\n        {{ i18n.EDIT }}\n      </a>\n\n      <!-- Delete -->\n      <a tabindex="1000" role="button" class="btn btn--small btn btn--danger" data-ng-if=":: !isNew" data-ng-click="remove()">\n        {{ i18n.DELETE }}\n      </a>\n    </footer> <!-- /.dialog__footer -->\n\n  </section> <!-- /.dialog__main -->\n\n</div>\n'),a.put("/template/partials/_dialog-edit-allday_tpl.html",'<div class="form-edit-allday">\n  <label for="dialog-allday">\n    <div class="form-edit-allday__checkbox">\n      <sr-ui-checkbox data-value="allDay" data-tabindex="200" data-id="\'dialog-allday\'"></sr-ui-checkbox>\n    </div>\n    <span class="form-edit-allday__label">{{ :: \'ALL_DAY\' | SRHelperFilter_translate }}</span>\n  </label>\n</div>\n'),a.put("/template/partials/_dialog-edit-attendees_tpl.html",'<div class="people-picker" data-ng-class="{\'people-picker--focus\': isFocus}" data-ng-click="setFocus()" tabindex="-1">\n  <ul class="people-picker__choices" data-ng-class="{\'people-picker__choices--notempty\': attendees.data.length > 0}">\n    <li class="people-picker__placeholder" data-ng-if="!attendees.data && !newAttendee || attendees.data.length <= 0 && !newAttendee">\n      {{ i18n.TYPE_NAME_ADDRESS }}\n    </li>\n    <li data-ng-repeat="attendee in attendees.data" class="people-picker__search-choice" data-index="{{$index}}" tabindex="-1" tooltip="{{attendee.emails[0]}}" tooltip-append-to-body="true">\n      <sr-ui-image class="people-picker__picture" image-url="images[attendee.emails[0]]" data-ng-if="images[attendee.emails[0]]"></sr-ui-image>\n      {{attendee.name || attendee.emails[0]}}\n      <a\n        aria-label="{{:: \'DELETE_ATTENDEE\' | SRHelperFilter_translate}}"\n        role="button"\n        data-ng-click="removeAttendee($index)"\n      >\n        <i class="icon icon_plus"></i>\n      </a>\n    </li>\n    <li class="people-picker__search-field">\n      <input type="text" class="people-picker__input" data-ng-model="newAttendee"\n             placeholder="" autocomplete="off" tabindex="400" data-ng-blur="::onInputBlur($event)" data-ng-change="::onInputChange($event)" data-ng-focus="::onInputFocus($event)" data-ng-style="{\'width\': inputWidth}">\n\n      <sr-popover data-ng-if="showPopover" has-popover="showPopover" options="::{\'name\': \'search-contact\', excludeDismissOnClasses: [\'people-picker__input\']}">\n        <sr-table class="search-table--contact" never-unhighlight-first-row-on-up-arrow="::true" focus-element="$input" delegate="delegate" sections="sections" info="tableInfo" selection-keys="::[9, 13]">\n          <sr-table-section data-index="0">\n            <sr-table-section-row ng-repeat="row in sections[0] track by info.random()">\n              <div class="table__row search-table__section__row--contact">\n                <span class="content">{{row.name}} <span data-ng-if="row.name"> - </span> <strong>{{row.email}}</strong></span>\n              </div>\n            </sr-table-section-row>\n          </sr-table-section>\n\n        </sr-table>\n      </sr-popover>\n    </li>\n    <li class="people-picker__clone">\n      <span data-ng-bind="newAttendee"></span>\n    </li>\n  </ul>\n\n</div>\n\n\n'),
a.put("/template/partials/_dialog-edit-calendar_tpl.html",'<select\n  class="form-select form-select--light"\n  data-ng-model="selected"\n  data-ng-options="calendar.title group by calendar.connectionInfo for calendar in calendars"\n  data-ng-change="onChange()"\n  tabindex="500">\n</select>\n'),a.put("/template/partials/_dialog-edit-color_tpl.html",'<div class="color-selector">\n  <ul class="color-selector__list">\n    <li>\n      <a\n        class="color-selector__btn"\n        href="#"\n        aria-label="{{ \'CHANGE_COLOR_TO\' | SRHelperFilter_translate:calendarColor}}"\n        role="button"\n        data-ng-click="changeColor(calendarColor)"\n        data-color="{{calendarColor}}"\n        data-ng-style="{\'background-color\': \'#\' + calendarColor}"\n      >\n        <i data-ng-if="selected === calendarColor" class="icon icon_checkmark"></i>\n      </a>\n    </li>\n    <li data-ng-repeat="color in colors">\n      <a\n        class="color-selector__btn"\n        href="#"\n        aria-label="{{ \'CHANGE_COLOR_TO\' | SRHelperFilter_translate:color}}"\n        role="button"\n        data-ng-click="changeColor(color)"\n        data-color="{{color}}"\n        data-ng-style="{\'background-color\': \'#\' + color}"\n      >\n        <i data-ng-if="selected === color" class="icon icon_checkmark"></i>\n      </a>\n    </li>\n  </ul>\n</div>\n'),a.put("/template/partials/_dialog-edit-date_tpl.html",'<div class="form-edit-date__datepicker">\n  <input\n    class="form-input form-edit-date__datepicker__field"\n    aria-label="{{dates[type] | date:\'fullDate\' }}"\n    ui-date="dateOptions"\n    data-ng-model="date"\n    tabindex="{{tabindex}}"\n  >\n  <input class="form-input form-edit-date__datepicker__altfield" disabled="disabled" value="{{dates[type] | date:dateFormat }}">\n</div>\n\n'),a.put("/template/partials/_dialog-edit-datetime_tpl.html",'<div class="form-edit-datetime">\n  <div class="form-edit-date">\n    <sr-dialog-edit-date data-tabindex="tabindex + 1" dates="dates" type="{{type}}"></sr-dialog-edit-date>\n  </div>\n\n  <div class="form-edit-time" data-ng-class="{\'hidden\': allDay}">\n    <div class="form-edit-time__timepicker">\n      <sr-dialog-timepicker\n        id="dialog-edit-time-{{type}}"\n        type="{{type}}"\n        date="dates[type]"\n        dates="dates"\n        data-tabindex="tabindex + 2"\n        data-disabled="allDay"\n        >\n      </sr-dialog-timepicker>\n    </div>\n  </div>\n\n\n  <!--div class="form-edit-metas" data-ng-class="{\'hidden\': !allDay}">\n    <input type="text" disabled class="form-input form-input--muted" value="{{meta}}">\n  </div-->\n</div>\n'),a.put("/template/partials/_dialog-edit-place_tpl.html",'<div class="form-place dialog-edit-place">\n  <div class="input-action">\n    <a href="#"\n       class="input-button"\n       data-ng-if="!isLoading && favoritesEnabled && selectedItem"\n       data-ng-mousedown=":: onInputImageMouseDown($event)"\n    >\n      <i class="input-button__icon input-button__icon--star--full" data-ng-if="selectedItem.id && selectedItem.id !== \'work\' && selectedItem.id !== \'home\'"></i>\n      <i class="input-button__icon input-button__icon--star--empty" data-ng-if="!selectedItem.id"></i>\n      <i class="input-button__icon input-button__icon--home" data-ng-if="selectedItem.id === \'home\'"></i>\n      <i class="input-button__icon input-button__icon--work" data-ng-if="selectedItem.id === \'work\'"></i>\n    </a>\n    <sr-ui-spinner class="input-spinner" data-ng-if="isLoading"></sr-ui-spinner>\n  </div>\n\n  <input type="text"\n         class="form-input input--place"\n         data-ng-model="inputValue"\n         aria-label="{{ :: placeholder }}"\n         placeholder="{{ :: placeholder }}"\n         autocomplete="off"\n         data-ng-attr-tabindex="{{ :: tabindex }}"\n         data-ng-focus=":: onInputFocus($event)"\n         data-ng-blur=":: onInputBlur($event)"\n         data-ng-change=":: onInputChange($event)"\n         data-ng-keydown=":: onInputKeyDown($event)"\n  >\n\n  <sr-popover data-ng-if="showPopover"\n              has-popover="showPopover"\n              options=":: {\'name\': \'search-place\'}"\n  >\n    <sr-table always-show-header=":: true"\n              focus-element=":: $input"\n              delegate=":: delegate"\n              sections="sections"\n              info=":: tableInfo"\n              reset-on-reload=":: false"\n              methods=":: tableMethods"\n    >\n\n      <!-- Favorites -->\n      <sr-table-section data-index="0">\n        <sr-table-section-header data-ng-show="info.showHeaders">\n          <header class="table__header">{{ :: \'FAVORITES\' | SRHelperFilter_translate }}</header>\n        </sr-table-section-header>\n\n        <sr-table-section-row ng-repeat="row in sections[0] track by info.random()">\n          <div class="table__row">\n            <div class="media media--0">\n              <div class="media__object">\n                <i class="table__row__favorite-icon table__row__favorite-icon--star--full"\n                   data-ng-if=":: !row.standard"></i>\n                <i class="table__row__favorite-icon table__row__favorite-icon--home"\n                   data-ng-if=":: row.id === \'home\'"></i>\n                <i class="table__row__favorite-icon table__row__favorite-icon--work"\n                   data-ng-if=":: row.id === \'work\'"></i>\n              </div>\n              <div class="media__body">\n                 <div class="media media--10">\n                  <div class="media__object--rev">\n                    <a class="table__row__favorite-button"\n                       data-ng-if=":: row.standard"\n                       data-ng-mousedown=":: info.methods.onFavoriteRowEditButtonMouseDown($event, {row: $index, section: 0})"\n\n                    >\n                      <i class="table__row__favorite-button__icon table__row__favorite-button__icon--edit">\n                      </i>\n                    </a>\n                    <a class="table__row__favorite-button"\n                       data-ng-if=":: !row.standard"\n                       data-ng-mousedown=":: info.methods.onFavoriteRowDeleteButtonMouseDown($event, {row: $index, section: 0})"\n                    >\n                      <i class="table__row__favorite-button__icon table__row__favorite-button__icon--delete">\n                      </i>\n                    </a>\n                  </div>\n                  <div class="media__body">\n                    <strong>{{ :: row.title }}</strong>\n                    <small>\n                      {{ :: row.description() || (row.standard ? (\'TAP_TO_ADD_ADDRESS\' | SRHelperFilter_translate) : \'\') }}\n                    </small>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </sr-table-section-row>\n      </sr-table-section>\n\n      <!-- Frequents -->\n      <sr-table-section data-index="1">\n        <sr-table-section-header data-ng-show="info.showHeaders">\n          <header class="table__header">{{ :: \'FREQUENTS\' | SRHelperFilter_translate }}</header>\n        </sr-table-section-header>\n\n        <sr-table-section-row ng-repeat="row in sections[1] track by info.random()">\n          <div class="table__row">\n            <strong>{{ :: row.name }}</strong>\n            <small data-ng-if=":: row.description() !== \'\'"> {{ :: row.description() }}</small>\n          </div>\n        </sr-table-section-row>\n      </sr-table-section>\n\n      <!-- Search -->\n      <sr-table-section data-index="2">\n        <sr-table-section-header data-ng-show="info.showHeaders">\n          <header class="table__header">{{ :: \'SEARCH\' | SRHelperFilter_translate }}</header>\n        </sr-table-section-header>\n\n        <sr-table-section-row ng-repeat="row in sections[2] track by info.random()">\n          <div class="table__row">\n            <strong>{{ :: row.title }}</strong>\n            <small data-ng-if=":: row.description !== undefined && row.description !== \'\'">{{ :: row.description  }}</small>\n          </div>\n        </sr-table-section-row>\n      </sr-table-section>\n\n    </sr-table>\n\n    <!-- No results -->\n    <div class="popover__no-results"\n         data-ng-if="sections[0].length === 0 && sections[1].length === 0 && sections[2].length === 0">\n      <h1>{{ :: \'NO_RESULTS\' | SRHelperFilter_translate }}</h1>\n    </div>\n  </sr-popover>\n\n</div>\n'),a.put("/template/partials/_dialog-edit-recurrence_tpl.html",'<ul class="form-recurrence">\n\n  <!-- Freqs -->\n  <li class="form-recurrence__item media media--10">\n    <div class="media__object">\n      <h3 class="form-recurrence__title muted">{{ i18n.REPEATS}}</h3>\n    </div>\n    <div class="media__body">\n      <select\n        class="form-select form-select--inline form-select--small"\n        tabindex="-1"\n        data-ng-model="selected.freq"\n        data-ng-options="r.label for r in freqs"\n        data-ng-change="onChangeFreq()">\n      </select>\n    </div>\n  </li>\n\n  <!-- Interval -->\n  <li class="form-recurrence__item media media--10" data-ng-if="hasRecurrence">\n    <div class="media__object">\n      <h3 class="form-recurrence__title muted">\n        {{ i18n.INTERVAL }}\n      </h3>\n    </div>\n    <div class="media__body">\n    <div class="media media--10">\n      <div class="media__object">\n        <select class="form-select form-select--inline form-select--small" data-ng-model="selected.interval" data-ng-options="i as i for i in intervals" data-ng-change="onChangeInterval()"></select>\n      </div>\n      <div class="media__body" data-ng-switch data-on="selected.freq.options.freq">\n        <span data-ng-switch-when="0">\n          <ng-pluralize count="selected.interval" when="{\'1\': \'{{ i18n.FREQS_SINGULAR[0]}}\', \'other\': \'{{ i18n.FREQS_PLURAL[0]}}\'}"></ng-pluralize>\n        </span>\n        <span data-ng-switch-when="1">\n          <ng-pluralize count="selected.interval" when="{\'1\': \'{{ i18n.FREQS_SINGULAR[1]}}\', \'other\': \'{{ i18n.FREQS_PLURAL[1]}}\'}"></ng-pluralize>\n        </span>\n        <span data-ng-switch-when="2">\n          <ng-pluralize count="selected.interval" when="{\'1\': \'{{ i18n.FREQS_SINGULAR[2]}}\', \'other\': \'{{ i18n.FREQS_PLURAL[2]}}\'}"></ng-pluralize>\n        </span>\n        <span data-ng-switch-when="3">\n          <ng-pluralize count="selected.interval" when="{\'1\': \'{{ i18n.FREQS_SINGULAR[3]}}\', \'other\': \'{{ i18n.FREQS_PLURAL[3]}}\'}"></ng-pluralize>\n        </span>\n      </div>\n    </div>\n    </div>\n  </li>\n\n  <!-- Starts on\n  <li class="form-recurrence__item media media--10" data-ng-if="selected.end && ruleOptions && start">\n    <div class="media__object">\n      <h3 class="form-recurrence__title muted">\n        {{ i18n.STARTS_ON }}\n      </h3>\n    </div>\n    <div class="media__body">\n      <input type="text" class="form-recurrence__input-text" ui-date="dateOptions" data-ng-model="start" data-ng-disabled="true" style="width:85px;">\n    </div>\n  </li-->\n\n\n  <!-- Week day -->\n  <li class="form-recurrence__item media media--10" data-ng-if="hasRecurrence && ruleOptions.freq === 2">\n    <div class="media__object">\n      <h3 class="form-recurrence__title muted">\n        {{ i18n.ON_DAYS }}\n      </h3>\n    </div>\n    <div class="media__body">\n      <ul class="form-recurrence__repeat-on-list">\n        <li data-ng-repeat="day in days track by $index">\n          <label class="checkbox">\n            <input type="checkbox" data-ng-click="toggleWeekDay(day.value)" class="checkbox__input" value="{{day.value}}" data-ng-checked="selected.byweekday.indexOf(day.value) > -1" />\n            <span class="checkbox__background"></span>\n            <i class="icon icon_checkmark checkbox__checkmark"></i>\n          </label>\n          {{day.label}}\n        </li>\n      </ul>\n    </div>\n  </li>\n\n  <!-- Day of the month -->\n  <li class="form-recurrence__item media media--10" data-ng-if="hasRecurrence && ruleOptions.freq === 1">\n    <div class="media__object">\n      <h3 class="form-recurrence__title muted">\n        {{ i18n.REPEAT_BY }}\n      </h3>\n    </div>\n    <div class="media__body">\n      <ul class="form-recurrence__radio-list">\n        <li>\n          <label>\n            <input type="radio" class="form-checkbox" data-ng-model="selected.byday.n" data-ng-value="null">  {{ i18n.DAY_OF_THE_MONTH }}\n          </label>\n        </li>\n        <li>\n          <input type="radio" class="form-checkbox" data-ng-model="selected.byday.n" data-ng-value="currentWeekOfTheMonth">  {{ i18n.DAY_OF_THE_WEEK }}\n        </li>\n      </ul>\n    </div>\n  </li>\n\n  <!-- Ends -->\n  <li class="form-recurrence__item media media--10" data-ng-if="hasRecurrence">\n    <div class="media__object">\n      <h3 class="form-recurrence__title muted">\n        {{ i18n.ENDS }}\n      </h3>\n    </div>\n    <div class="media__body">\n      <ul class="form-recurrence__radio-list">\n        <li>\n          <label>\n            <input type="radio" class="form-checkbox" data-ng-model="selected.end" value="never"> {{ i18n.NEVER }}\n          </label>\n        </li>\n        <li>\n          <label>\n            <input type="radio" class="form-checkbox" data-ng-model="selected.end" value="count">  {{ i18n.AFTER }}\n            <input type="text" data-ng-if="selected.end === \'count\'" class="form-recurrence__input-text" style="width: 35px;margin-left: 5px;" data-ng-model="ruleOptions.count" data-ng-change="onCountChange()" >\n            <input type="text" data-ng-if="selected.end !== \'count\'" class="form-recurrence__input-text" style="width: 35px;margin-left: 5px;" data-ng-disabled="true" readonly>\n            {{ i18n.OCCURRENCES }}\n          </label>\n        </li>\n        <li>\n          <label>\n            <input type="radio" class="form-checkbox" data-ng-model="selected.end" value="until">  {{ i18n.ON }}\n            <input type="text" data-ng-if="selected.end === \'until\'" class="form-recurrence__input-text" ui-date="dateOptions" data-ng-model="ruleOptions.until" data-ng-change="onDatepickerChange()" style="width:85px;margin-left: 7px;">\n            <input type="text" data-ng-if="selected.end !== \'until\'" class="form-recurrence__input-text" style="width: 85px;margin-left: 7px;" data-ng-disabled="true" readonly>\n          </label>\n        </li>\n      </ul>\n    </div>\n  </li>\n\n\n  <li class="form-recurrence__item media media--10" data-ng-if="hasRecurrence">\n    <div class="media__object">\n      <h3 class="form-recurrence__title muted">\n        {{ i18n.SUMMARY }}\n      </h3>\n    </div>\n    <div class="media__body">\n      <h4 class="form-recurrence__summary">\n        <sr-ui-rule-to-text recurrence="recurrence"></sr-ui-rule-to-text>\n      </h4>\n    </div>\n  </li>\n\n</ul>\n'),a.put("/template/partials/_dialog-edit-reminders_tpl.html",'<ul class="form-reminders">\n  <li data-ng-if="reminders.length <= 0">\n    <p class="form-reminder__empty muted">\n      {{ i18n.NONE }}\n    </p>\n  </li>\n  <li data-ng-repeat="reminder in reminders | orderBy:\'minutes\'">\n\n    <div class="form-reminder media">\n      <div class="media__object--rev">\n        <a\n          aria-label="{{:: \'DELETE_REMINDER\' | SRHelperFilter_translate}}"\n          role="button"\n          data-ng-click="removeReminder(reminder)"\n        >\n          <i class="icon icon_plus"></i>\n        </a>\n      </div>\n      <div class="media__body">\n        <span class="muted">{{ i18n.ALERT_LABEL }}</span>\n        <h4 class="form-reminder__label">{{ reminder.minutes | SRDateFilter_duration:\'minutes\':\'BEFORE\' }}</h4>\n      </div>\n    </div>\n\n  </li>\n  <li data-ng-class="{\'hidden\': reminders.length >= 5}">\n    <select\n      class="form-select form-select--reminders"\n      data-ng-model="newReminder"\n      data-ng-options="r.label for r in alerts"\n      data-ng-change="addReminder(newReminder)"\n      tabindex="0">\n        <option value="">\n          {{ i18n.ADD_ALERT }}\n        </option>\n    </select>\n  </li>\n</ul>\n'),a.put("/template/partials/_dialog-edit-title_tpl.html",'<input\n  tabindex="101"\n  type="text"\n  class="form-input form-input--large js-form-title"\n  data-ng-model="title"\n  placeholder="{{ :: \'PLACEHOLDER_TITLE\' | SRHelperFilter_translate }}"\n  data-sr-ui-focus="shouldFocus"\n/>\n'),a.put("/template/partials/_dialog-edit-transparency_tpl.html",'<div class="form-transparency">\n  <a\n    role="button"\n    aria-label="{{ (!transparent) ? i18n.BUSY : i18n.FREE }}"\n    data-ng-attr-aria-pressed="{{ (!transparent) ? \'true\' : \'false\' }}"\n\n    tabindex="102"\n\n    data-ng-click="toggleTransparency()"\n    data-tooltip="{{ (!transparent) ? i18n.BUSY : i18n.FREE }}"\n    data-tooltip-append-to-body="true"\n    data-tooltip-placement="top"\n  >\n    <i\n      class="icon"\n      data-ng-class="{\n        \'icon_lock\': !transparent,\n        \'icon_unlock\': transparent\n      }"\n    >\n    </i>\n    </a>\n</div>\n'),a.put("/template/partials/_dialog-edit_tpl.html",'<form class="dialog__wrapper">\n\n  <!-- ================= -->\n  <!-- Details views -->\n  <!-- ================= -->\n  <section class="dialog__details" data-ng-if="dialogView">\n\n    <header class="dialog__bar js-draggable-handler">\n      <div class="form__row">\n        <a\n          href="#"\n          aria-label="{{:: \'CANCEL\' | SRHelperFilter_translate}}"\n          role="button"\n          class="btn-link"\n          data-ng-click="changeView()"\n        >\n          <i class="icon icon_chevron-left"></i>\n        </a>\n        <a href="#" class="btn btn--small btn" role="button" data-ng-click="changeView()">\n          {{ i18n.DONE }}\n        </a>\n        <h1 class="dialog__bar__title">{{dialogView.title}}</h1>\n      </div>\n    </header>\n\n    <div class="form-description--edit" data-ng-if="dialogView.view === \'edit-description\'">\n      <textarea class="form-input" data-ng-model="occurrence.description" placeholder="{{ i18n.PLACEHOLDER_DESCRIPTION }}" sr-ui-focus="true" sr-ui-focus-delay="100"></textarea>\n    </div>\n\n    <div class="form__row" data-ng-if="dialogView.view === \'edit-reminders\'">\n      <sr-dialog-edit-reminders reminders="occurrence.reminders"></sr-dialog-edit-reminders>\n    </div>\n\n    <div class="form__row" data-ng-if="dialogView.view === \'edit-recurrence\'">\n      <sr-dialog-edit-recurrence recurrence="occurrence.recurrence" all-day="occurrence.allDay" start="occurrence.startDate"></sr-dialog-edit-recurrence>\n    </div>\n  </section>\n\n  <section class="dialog__main" data-ng-class="{\'dialog__main--hidden\': dialogView}">\n    <div class="dialog__body">\n\n      <!-- ================= -->\n      <!-- Edit Mode -->\n      <!-- ================= -->\n      <div class="dialog__body__edit">\n\n        <!-- Title & Iconic -->\n        <!-- Tabindex: 100+ -->\n        <div class="form__row form__row--large">\n          <div class="media media--10">\n            <div class="media__object">\n\n              <!-- Iconic -->\n              <a\n                aria-label="{{:: \'CHANGE_COLOR\' | SRHelperFilter_translate }}"\n                aria-expanded="{{hasColorSelector}}"\n                aria-owns="dialog-edit-color"\n                role="button"\n                tabindex="100"\n                href="#"\n                data-ng-click="showColorSelector()"\n                class="js-close-popover-disabled"\n              >\n                <sr-iconic type="{{occurrence.type}}" overlay="{{((occurrence.icon && occurrence.icon.overlay) ? occurrence.icon.overlay : occurrence.title + \':\' + occurrence.place.name)}}" color="{{((occurrence.icon && occurrence.icon.baseColor) ? occurrence.icon.baseColor : calendar.color)}}" size="56" show-borders-layer="true"></sr-iconic>\n              </a>\n\n              <!-- Color -->\n              <div id="dialog-edit-color" class="dialog-edit-color" data-ng-if="hasColorSelector" data-sr-ui-close-popover>\n                <sr-dialog-edit-color calendar-color="calendar.color" icon="occurrence.icon" data-on-change="srUiClosePopover()"></sr-dialog-edit-color>\n              </div>\n\n            </div>\n            <div class="media__body">\n              <div class="media media--10">\n                <div class="media__object--rev" data-ng-class="{\'hidden\': !hasTransparency}">\n\n                  <!-- Transparency -->\n                  <sr-dialog-edit-transparency transparent="occurrence.transparent"></sr-dialog-edit-transparency>\n\n                </div>\n                <div class="media__body">\n                   <!-- Title -->\n                  <sr-dialog-edit-title title="occurrence.title" should-focus="isNew"></sr-dialog-edit-title>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n\n        <!-- Datetime -->\n        <!-- Tabindex: 200+ -->\n        <ul class="form__row form__row--multiple form__row--multiple--datetime">\n          <li class="form__row">\n            <sr-dialog-edit-allday all-day="occurrence.allDay"></sr-dialog-edit-allday>\n          </li>\n          <li class="form__row form__row--flex-2">\n            <sr-dialog-edit-datetime data-tabindex="210" dates="dates" type="start" all-day="occurrence.allDay"></sr-dialog-edit-datetime>\n          </li>\n          <li class="form__row form__row--arrow">\n            <i class="form__row--arrow__arrow-top"></i>\n            <i class="form__row--arrow__arrow-bottom"></i>\n          </li>\n          <li class="form__row form__row--flex-2">\n            <sr-dialog-edit-datetime data-tabindex="220" dates="dates" type="end" all-day="occurrence.allDay"></sr-dialog-edit-datetime>\n          </li>\n        </ul>\n\n        <!-- Place -->\n        <!-- Tabindex: 300+ -->\n        <ul class="form__row--border form__row form__row--multiple">\n          <li class="form__row form__row--flex-3">\n            <sr-ui-float-label label="{{:: i18n.LOCATION }}" auto-hide="false">\n              <sr-dialog-edit-place place="occurrence.place" timezone="occurrence.timezone" placeholder="{{::  i18n.TYPE_A_PLACE }}" favorites-enabled="false" frequents-enabled="false" predictions-enabled="true" data-tabindex="301"></sr-dialog-edit-place>\n            </sr-ui-float-label>\n          </li>\n\n          <li class="form__row" data-ng-if="!occurrence.allDay && occurrence.timezone">\n            <sr-ui-float-label label="{{:: i18n.TIMEZONE }}" auto-hide="false">\n              <sr-timezone-picker timezone="occurrence.timezone" data-tabindex="301"></sr-timezone-picker>\n            </sr-ui-float-label>\n          </li>\n        </ul>\n\n        <div class="form__row form__row--small form__row--narrow" data-ng-if="occurrence.place && occurrence.place.geometry && occurrence.place.geometry.location">\n          <div class="form-map__webview">\n            <sr-ui-map data-geometry="occurrence.place.geometry" data-width="378" data-height="100"></sr-ui-map>\n          </div>\n        </div>\n\n        <ul class="form__row--border">\n\n          <!-- Attendees -->\n          <!-- Tabindex: 400+ -->\n          <li class="form__row">\n            <sr-ui-float-label label="{{ i18n.PEOPLE }}" auto-hide="false">\n              <sr-dialog-edit-attendees attendees="occurrence.attendees"></sr-dialog-edit-attendees>\n            </sr-ui-float-label>\n          </li>\n\n          <!-- Calendar -->\n          <!-- Tabindex: 500+ -->\n          <li class="form__row">\n            <sr-ui-float-label label="{{ i18n.CALENDARS }}" auto-hide="false">\n              <sr-dialog-edit-calendar calendar-id="occurrence.calendarId" connection-id="occurrence.connectionId" calendars="calendars"></sr-dialog-edit-calendar>\n            </sr-ui-float-label>\n          </li>\n\n          <!-- Reminders -->\n          <!-- Tabindex: 600+ -->\n          <li class="form__row" data-ng-if="isFullEditing" data-ng-click="changeView(\'edit-reminders\', i18n.ALERTS)" role="button" tabindex="600">\n            <sr-ui-float-label label="{{ \'ALERTS_VAL\' | SRHelperFilter_translate:((occurrence.reminders.length ? \'(\' + occurrence.reminders.length + \')\' : \'(0)\')) }}" auto-hide="false">\n              <div class="form-select form-select--light form-select--light--reminders form-select--panel">\n                <span class="muted" data-ng-if="!occurrence.reminders || occurrence.reminders.length <= 0">\n                  {{ i18n.NONE }}\n                </span>\n                <span data-ng-repeat="reminder in occurrence.reminders">{{reminder.minutes | SRDateFilter_duration:\'minutes\':\'BEFORE\'}}</span>\n              </div>\n            </sr-ui-float-label>\n          </li>\n\n          <!-- Description -->\n          <!-- Tabindex: 700+ -->\n          <li class="form__row form-description" data-ng-if="isFullEditing" data-ng-click="changeView(\'edit-description\', i18n.DESCRIPTION)" role="button" tabindex="700">\n            <sr-ui-float-label label="{{ i18n.DESCRIPTION }}" auto-hide="false">\n              <div class="form-select form-select--light form-select--panel">\n                <span data-ng-if="!occurrence.description" class="muted">\n                  {{ i18n.ADD_DESCRIPTION }}\n                </span>\n                <span>{{occurrence.description}}</span>\n              </div>\n            </sr-ui-float-label>\n          </li>\n\n          <!-- Recurrence -->\n          <!-- Tabindex: 800+ -->\n          <li class="form__row" data-ng-if="isFullEditing" data-ng-click="changeView(\'edit-recurrence\', i18n.REPEAT)" role="button" tabindex="800">\n            <sr-ui-float-label label="{{ i18n.REPEAT }}" auto-hide="false">\n              <div class="form-select form-select--light form-select--panel">\n                <sr-ui-rule-to-text recurrence="occurrence.recurrence"></sr-ui-rule-to-text>\n              </div>\n            </sr-ui-float-label>\n          </li>\n        </ul>\n\n      </div>\n\n    </div>\n\n    <!-- Tabindex: 1000+ -->\n    <footer class="dialog__footer js-draggable-handler">\n      <!-- Switch to full edit mode -->\n      <a tabindex="1000" role="button" class="btn btn--small btn-link float-left" data-ng-if="isNew && !isFullEditing" data-ng-click="toglleFullEditing()">\n        {{ i18n.MORE_OPTIONS }}\n      </a>\n\n      <!-- Cancel -->\n      <a tabindex="1001" role="button" class="btn btn--small btn float-left" data-ng-if="!isNew" data-ng-click="cancel()">\n        {{ i18n.CANCEL }}\n      </a>\n\n      <!-- Save/Close -->\n      <button\n        tabindex="1002"\n        role="button"\n        type="button"\n        class="btn btn--small btn btn--primary js-form-submit"\n        data-ng-disabled="!occurrence.title"\n        data-ng-click="save()"\n      >\n        {{ i18n.SAVE }}\n      </button>\n    </footer> <!-- /.dialog__footer -->\n\n  </section>\n\n</form>\n'),a.put("/template/partials/_edit-place_tpl.html",'<header class="modal-header"> \n  <i class="modal-header__icon modal-header__icon--home" \n     data-ng-if=":: model.favorite.id === \'home\'"></i>\n  <i class="modal-header__icon modal-header__icon--work" \n     data-ng-if=":: model.favorite.id === \'work\'"></i>\n  <h1 class="modal-header__title">{{ :: model.favorite.title }}</h1>\n</header>\n\n<section class="modal-body">\n  <div class="modal-body__input">\n  <sr-ui-float-label label="{{ :: model.floatLabel }}" auto-hide="false">\n      <sr-dialog-edit-place place="model.newPlace"\n                            placeholder="{{ :: \'TYPE_A_PLACE\' | SRHelperFilter_translate }}" \n                            predictions-enabled=":: true" \n                            autofocus=":: true"\n      >\n      </sr-dialog-edit-place>\n    </sr-ui-float-label>\n  </div>\n  <div class="modal-body__map">\n    <sr-ui-map data-geometry="model.newPlace.geometry"\n               data-width="320" \n              data-height="100" \n              data-ng-if="model.newPlace && model.newPlace.geometry"\n    >\n    </sr-ui-map>\n  </div>\n</section>\n\n<footer class="modal-footer">\n  <button class="modal-footer__cancel-button" data-ng-click=":: onCancelClick()" tabindex="301">{{ :: \'CANCEL\' | SRHelperFilter_translate}}</button>\n  <button class="modal-footer__save-button" data-ng-click=":: onSaveClick()" data-ng-disabled="!model.newPlace" tabindex="302">{{ :: \'SAVE\' | SRHelperFilter_translate}}</button>\n</footer>\n'),a.put("/template/partials/_feedback-banner_tpl.html",'<a class="feedback__banner" data-ng-href="{{:: ctrl.mailto}}" tabindex="0" tooltip="Send Feedback to web.beta@sunrise.am">\n  Send Feedback!\n</a>\n'),a.put("/template/partials/_iconic_tpl.html",'<div class="iconic">\n  <b class="iconic__circle" data-ng-if="!imageUrl"  data-ng-style="style"></b>\n  <img\n    class="iconic__img"\n    alt=""\n    draggable="false"\n    data-ng-if="imageUrl"\n    data-ng-src="{{imageUrl}}"\n  />\n</div>\n'),a.put("/template/partials/_interesting-calendar_tpl.html",'<sr-interesting-calendar>\n  <header class="modal-header">\n    <a class="modal-header__back-button" \n       href="#" \n       tabindex="0" \n       role="button"\n       data-ng-if="showBackButton"\n       data-ng-click=":: didClickBackButton()"\n       aria-label="{{:: \'BACK\' | SRHelperFilter_translate }}"\n    >\n      <i class="modal-header__icon"></i>\n    </a>\n    <h1>{{ :: \'INTERESTING_CALENDARS\' | SRHelperFilter_translate }}</h1>\n    <button class="modal-header__edit-button" \n            tabindex="0" \n            role="button"\n            data-ng-if="showEditButton" \n            data-ng-click=":: didClickEditButton()"\n            aria-label="{{:: \'EDIT\' | SRHelperFilter_translate }}"\n    >\n      {{ :: \'EDIT\' | SRHelperFilter_translate }}\n    </button>\n  </header>\n\n  <section class="modal-body" data-ng-switch on="mode">\n\n    <!-- Spinner mode -->\n    <div class="spinner-container" data-ng-switch-when="spinnerMode">\n      <sr-ui-spinner class="spinner-container__spinner" custom-options=":: {width: \'50px\', height: \'50px\'}"></sr-ui-spinner>\n    </div>\n\n    <!-- Normal mode -->\n    <div class="normal-container" data-ng-switch-when="normalMode">\n      <sr-table sections="sections" \n                delegate="::delegate" \n                never-unhighlight-first-row-on-up-arrow=":: true"\n                role="list"\n                data-autofocus="true"\n                info=":: tableInfo"\n      >\n        <sr-table-section ng-repeat="section in sections">\n          <sr-table-section-header data-ng-if="section.title">\n            <h3 class="table__header">{{ section.title }}</h3>\n          </sr-table-section-header>\n          <sr-table-section-row ng-repeat="row in section.items track by info.random()">\n            <div class="table__row" data-ng-switch on="row.type"\n            >\n              <div data-ng-switch-when="catalog"\n                   tabindex="0"\n                   role="button"\n                   aria-label="{{ :: \'CATALOG\' | SRHelperFilter_translate:(section.title ? section.title + \' - \' : \'\') + row.title }}"\n              >\n                <div class="media media--10">\n                  <div class="media__object--rev">\n                    <i class="table__row__chevron"></i>\n                  </div>\n                  <div class="media__body">\n                    <div class="media media--10">\n                      <div class="media__object media__object--row-image">\n                        <sr-ui-image class="table__row__image"\n                                     data-ng-if=":: row.imageUrl" \n                                     data-image-url=":: row.imageUrl">\n                        </sr-ui-image>\n                        <i class="table__row__placeholder" data-ng-if="!row.imageUrl"></i>\n                      </div>\n                      <div class="media__body">\n                        <h1>{{:: row.title }}</h1>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <label data-ng-switch-when="calendar"\n                     for="{{ :: checkboxId = \'row\' + sectionIndex + \'-\' + $index }}"\n              >\n                <div class="media media--10">\n                  <div class="media__object--rev">\n                    <div data-ng-if="!row.syncing" class="table__row__checkbox">\n                      <sr-ui-checkbox on-change=":: didClickCheckbox({row: $index, section: $parent.$parent.$index})"\n                                      data-value="row.checked"\n                                      data-tabindex="0" \n                                      data-id="checkboxId">\n                      </sr-ui-checkbox>\n                    </div>\n\n                    <sr-ui-spinner data-ng-if="row.syncing" \n                                   class="table__row__spinner"\n                                   custom-options="{circle: {strokeColor: \'#000000\'}, width: \'18px\', height: \'18px\'}">\n                    </sr-ui-spinner>\n                  </div>\n                  <div class="media__body">\n                    <div class="media media--10">\n                      <div class="media__object media__object--row-image">\n                        <sr-ui-image class="table__row__image"\n                                     data-ng-if=":: row.imageUrl" \n                                     data-image-url=":: row.imageUrl">\n                        </sr-ui-image>\n                        <i class="table__row__placeholder" data-ng-if="!row.imageUrl"></i>\n                      </div>\n                      <div class="media__body">\n                        <h1>{{:: row.title }}</h1>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </label>\n\n            </div>\n          </sr-table-section-row>\n        </sr-table-section>\n      </sr-table>\n    </div>\n\n    <!-- Edit mode -->\n    <div class="edit-container" data-ng-switch-when="editMode">\n      <sr-table sections="sections" \n                delegate="::delegate" \n                data-autofocus="true" \n                info=":: tableInfo"\n                methods="tableMethods"\n                reset-on-reload=":: false"\n      >\n        <sr-table-section ng-repeat="section in sections">\n          <sr-table-section-row ng-repeat="row in section track by info.random()">\n            <div class="table__row" tabindex="0" aria-label="{{:: row.title + \' - \' + (\'UNSUBSCRIBE\' | SRHelperFilter_translate) }}">\n              <div class="media media--10">\n                <div class="media__object--rev">\n                  <div class="table__row__checkbox">\n                    <sr-ui-checkbox data-value="true"\n                                    data-tabindex="-1"\n                    >\n                    </sr-ui-checkbox>\n                  </div>\n                  <span class="table__row__unsubscribe">{{:: \'UNSUBSCRIBE\' | SRHelperFilter_translate }}</span>\n                </div>\n                <div class="media__body">\n                  <h1>{{:: row.title }}</h1>\n                </div>\n              </div>\n            </div>\n          </sr-table-section-row>\n        </sr-table-section>\n      </sr-table>\n\n      <h1 class="edit-container__message" data-ng-if="sections[0].length === 0">\n        {{ :: \'NO_CALENDARS\' | SRHelperFilter_translate }}\n      </h1>\n    </div>\n\n    <!-- Offline mode -->\n    <div class="offline-container" data-ng-switch-when="offlineMode">\n      <div class="offline-container__error">\n        <i class="offline-container__icon"></i>\n        <h1>{{ :: \'FEATURE_CONNECTION_ERROR\' | SRHelperFilter_translate }}</h1>\n      </div>\n    </div>\n  </section>\n\n  <footer class="modal-footer">\n    <button class="modal-footer__done-button"\n            data-ng-click=":: didClickDoneButton()"\n            tabindex="0" \n            role="button">{{ :: \'DONE\' | SRHelperFilter_translate }}\n    </button>\n  </footer>\n\n</sr-interesting-calendar>\n'),
a.put("/template/partials/_invitation-list_tpl.html",'<section\n  class="invitations-popover"\n  data-ng-class="{\'invitations-popover--empty\': isLoading || invitations.length <= 0}"\n  data-sr-ui-close-popover\n>\n\n  <header\n    class="invitations-popover__header"\n    data-ng-if="!isLoading && invitations.length > 0">\n    <h1 class="invitations-popover__title">\n      {{ i18n.INVITATIONS }}\n    </h1>\n  </header>\n\n  <ul class="invitations-list">\n\n    <li class="invitations__loading" data-ng-if="isLoading">\n      <span class="muted">\n        {{ i18n.PLEASE_WAIT }}\n      </span>\n    </li>\n\n    <li class="invitations__empty" data-ng-if="!isLoading && invitations.length <= 0">\n      <i class="sprite sprite-invitations-logo"></i>\n      <span class="muted">\n        {{ i18n.NO_INVITATIONS }}\n      </span>\n    </li>\n\n    <li\n      data-ng-repeat="invitation in invitations | orderBy:[\'+startDate\', \'+title\'] track by invitation.id"\n      data-ng-class="{\'active\': unreadNotifications[invitation.id]}"\n    >\n      <div class="media media--10 media--overflow invitations__item">\n\n        <div class="media__object">\n          <sr-iconic\n            type="{{invitation.type}}"\n            overlay="{{((invitation.icon && invitation.icon.overlay) ? invitation.icon.overlay : invitation.title + \':\' + invitation.place.name)}}"\n            color="{{calendars[invitation.calendarId].color}}"\n            size="40"\n          >\n          </sr-iconic>\n        </div>\n\n        <div class="media__body">\n\n          <a\n            class="muted float-right invitation__ignore"\n            tooltip="{{ i18n.HIDE_INVITATION }}"\n            tooltip-placement="left"\n            data-ng-click="rsvp(invitation, \'ignored\')"\n            aria-label="{{ i18n.HIDE_INVITATION }}"\n            role="button"\n          >\n            <i class="icon icon_plus"></i>\n          </a>\n\n          <a role="button" ng-click="navigateTo(invitation)">\n            <h5 class="invitations__range">\n              {{invitation.startDate | SRDateFilter_fullDate:invitation.allDay}}\n            </h5>\n\n            <h3 class="invitations__title">\n              {{invitation.title}}\n            </h3>\n\n            <h5 class="invitations__times">\n              <sr-ui-time-duration has-icon="false" duration-days="invitation.durationDays" timezone="invitation.timezone" start="invitation.startDate" end="invitation.endDate" all-day="invitation.allDay"></sr-ui-time-duration>\n            </h5>\n          </a>\n\n          <h5 class="invitations__organizer muted"> {{ :: \'INVITED_BY_SOMEONE\' | SRHelperFilter_translate:(invitation.organizer.name || invitation.organizer.emails[0])}}</h5>\n\n          <div class="invitations__actions">\n            <div class="btn-group--dialog">\n              <button class="btn btn--tiny btn" data-ng-disabled="!onlineStatus.onLine" role="button" data-ng-click="rsvp(invitation, \'attending\')">\n                {{ i18n.GOING_1 }}\n              </button>\n              <button class="btn btn--tiny btn" data-ng-disabled="!onlineStatus.onLine" role="button" data-ng-click="rsvp(invitation, \'unsure\')">\n                {{ i18n.MAYBE_1 }}\n              </button>\n              <button class="btn btn--tiny btn" data-ng-disabled="!onlineStatus.onLine" role="button" data-ng-click="rsvp(invitation, \'declined\')">\n                {{ i18n.DECLINE_1 }}\n              </button>\n            </div>\n          </div>\n\n        </div>\n\n      </div>\n    </li>\n  </ul>\n\n</section>\n'),a.put("/template/partials/_invitation_tpl.html",'<section class="invitations">\n\n  <sr-invitation-badge count="badgeCount"></sr-invitation-badge>\n  <sr-invitation-list unread-notifications="unreadNotifications" data-ng-if="hasPopover"></sr-invitation-list>\n\n  <a\n    class="invitations-logo"\n    title="{{ :: i18n.SHOW_INVITATION }}"\n    aria-label="{{ariaLabel}}"\n    role="button"\n    data-ng-click="togglePopover()"\n    data-ng-disabled="hasPopover"\n    data-ng-class="{\'js-close-popover-disabled\': hasPopover}"\n  >\n    <i class="sprite sprite-navbar-logo"></i>\n  </a>\n</section>\n'),a.put("/template/partials/_meet-add-timeslot-modal_tpl.html",'<form name="meetEditAddTimeslotForm">\n  <div class="modal-header">\n    <h1 class="modal-title">{{:: \'PICK_TIME\' | SRHelperFilter_translate}}</h1>\n  </div>\n  <div class="modal-body">\n    <label>\n      <h4>{{:: \'DATE_COLON\' | SRHelperFilter_translate:\' \'}}</h4>\n      <input\n        type="date"\n        name="date"\n        required="true"\n        aria-label="{{:: \'SET_DATE\' | SRHelperFilter_translate}}"\n        data-sr-ui-focus="true"\n        data-ng-model="value.date"\n        data-ng-change="onChange()"\n      />\n    </label>\n\n    <label>\n      <h4>{{:: \'TIME_COLON\' | SRHelperFilter_translate:\' \'}}</h4>\n      <input\n        type="time"\n        name="time"\n        aria-label="{{:: \'SET_TIME\' | SRHelperFilter_translate}}"\n        required="true"\n        data-ng-model="value.time"\n        data-ng-change="onChange()"\n      />\n    </label>\n  </div>\n  <div class="modal-footer">\n    <button\n      type="submit"\n      class="btn btn--primary"\n      role="button"\n      data-ng-disabled="!meetEditAddTimeslotForm.$valid"\n      data-ng-click="addTimeSlot($event)"\n    >\n      Add {{value.formatedDate}}\n    </button>\n  </div>\n</form>\n'),a.put("/template/partials/_meet-button_tpl.html",'<div class="meet-button" data-ng-hide="ctrl.shouldHideMeetButton">\n  <button\n    class="btn btn--primary"\n    role="button"\n    aria-label="{{:: \'CREATE_MEET\' | SRHelperFilter_translate}}"\n    title="{{:: \'CREATE_MEET\' | SRHelperFilter_translate}}"\n    data-ng-click=":: ctrl.createMeet()"\n    data-ng-disabled="ctrl.shouldDisableMeetButton"\n  >\n    Meet\n  </button>\n</div>\n'),a.put("/template/partials/_meet-edit-add-timeslot-button_tpl.html",'<button\n  class="btn btn--gray meet-edit__add-timeslot-button"\n  data-ng-click="onClick($event)"\n>\n  {{:: \'ADD_TIMESLOT\' | SRHelperFilter_translate}}\n</button>\n'),a.put("/template/partials/_meet-edit-calendar_tpl.html",'<div class="meet-edit__calendar">\n\n  <div class="meet-edit__popover meet-edit__popover--calendar-picker" data-sr-ui-close-popover data-ng-if="hasPopover">\n    <sr-calendar-picker-list calendar-id="$parent.calendarId" connections=":: connections" calendars=":: calendars"></sr-calendar-picker-list>\n  </div>\n\n  <button\n    class="btn btn-border meet-edit__popover-button meet-edit__popover-button--calendars"\n    role="button"\n    aria-label="{{\'CURRENT_CALENDAR_COLON\' | SRHelperFilter_translate:calendarsHash[calendarId].title}}"\n    data-ng-class="{\'js-close-popover-disabled\': hasPopover}"\n    data-ng-click="togglePopover()"\n    data-ng-disabled="hasPopover"\n  >\n    <sr-iconic type="{{ calendarsHash[calendarId].type }}" color="{{ calendarsHash[calendarId].color }}" size="40"></sr-iconic>\n  </button>\n\n</div>\n'),a.put("/template/partials/_meet-edit-cancel_tpl.html",'<div class="meet-edit__cancel">\n  <a\n    class="meet-edit__cancel__btn"\n    role="button"\n    aria-label="{{:: \'CANCEL\' | SRHelperFilter_translate}}"\n    data-ng-click="cancel()"\n  >\n    <i class="icon icon_x"></i>\n  </a>\n</div>\n'),a.put("/template/partials/_meet-edit-duration_tpl.html",'<div class="meet-edit__duration">\n\n\n  <div class="meet-edit__popover meet-edit__popover--horizontal" data-sr-ui-close-popover data-ng-if="hasPopover">\n    <ul class="meet-edit__popover-list meet-edit__popover-list--horizontal">\n      <li data-ng-repeat="duration in durations">\n        <a\n          class="meet-edit__popover-list__item"\n          role="button"\n          aria-label="{{:: \'CHANGE_DURATION_TO_COLON\' | SRHelperFilter_translate:duration.label}}"\n          data-ng-class="{\'active\': meet.duration === duration.value}"\n          aria-selected="meet.duration === duration.value"\n          data-ng-click="onChange(duration)"\n        >\n          <h3 class="meet-edit__popover-list__title" data-ng-bind=":: duration.label"></h3>\n        </a>\n      </li>\n    </ul>\n  </div>\n\n  <button\n    class="btn meet-edit__popover-button"\n    role="button"\n    aria-label="{{\'DURATION_COLON\' | SRHelperFilter_translate:duration}}"\n    data-ng-class="{\'js-close-popover-disabled\': hasPopover}"\n    data-ng-click="togglePopover()"\n    data-ng-disabled="hasPopover">\n      <i class="icon icon_clock"></i>\n      {{ duration }}\n  </button>\n</div>\n'),a.put("/template/partials/_meet-edit-location_tpl.html",'<div class="meet-edit__location">\n  <div class="meet-edit__popover meet-edit__popover--location" data-sr-ui-close-popover data-ng-if="hasPopover">\n\n    <ul class="meet-edit__popover-list">\n      <li class="media media--10 media--overflow">\n        <a\n\n          class="meet-edit__popover-list__item"\n          data-ng-class="{\'active\': placeType === \'later\'}"\n          role="button"\n          aria-selected="placeType === \'later\'"\n          aria-label="{{:: \'DECIDE_LATER\' |  SRHelperFilter_translate}}"\n          data-ng-click="setToLater()"\n        >\n          <div class="media__object meet-edit__popover-list__icon" aria-hidden="true">\n            <i class="icon icon_question-mark"></i>\n          </div>\n          <div class="media__body">\n            <h4 class="meet-edit__popover-list__title">{{:: \'DECIDE_LATER\' |  SRHelperFilter_translate}}</h4>\n            <p class="meet-edit__popover-list__description">\n              {{:: \'NOT_SETTLED_PLACE\' |  SRHelperFilter_translate}}\n            </p>\n          </div>\n        </a>\n      </li>\n\n      <li\n        class="media media--10 meet-edit__popover-list__item"\n        data-ng-class="{\'active\': placeType === \'place\'}"\n        aria-selected="placeType === \'later\'"\n      >\n        <div class="media__object meet-edit__popover-list__icon" aria-hidden="true">\n          <i class="icon icon_marker"></i>\n        </div>\n        <div class="media__body">\n          <h4 class="meet-edit__popover-list__title">{{:: \'PLACE\' |  SRHelperFilter_translate}}</h4>\n          <sr-dialog-edit-place on-select-place="onSelectPlace()" place="$parent.selected" placeholder="{{:: \'TYPE_A_PLACE\' | SRHelperFilter_translate }}" favorites-enabled="false" frequents-enabled="false" predictions-enabled="true"></sr-dialog-edit-place>\n        </div>\n      </li>\n    </ul>\n\n  </div>\n\n  <button\n    class="btn meet-edit__popover-button"\n    role="button"\n    data-ng-class="{\'js-close-popover-disabled\': hasPopover}"\n    data-ng-click="togglePopover()"\n    data-ng-disabled="hasPopover"\n  >\n      <i\n        class="icon"\n        aria-hidden="true"\n        data-ng-class="{\n'+"          'icon_question-mark': (placeType === 'later'),\n          'icon_marker': (placeType === 'place')\n        }\">\n      </i>\n      <span data-ng-if=\"placeType === 'later'\" aria-label=\"{{:: 'SET_CUSTOM_LOCATION' |  SRHelperFilter_translate}}\">\n        {{:: 'LOCATION' |  SRHelperFilter_translate}}\n      </span>\n      <span data-ng-if=\"placeType === 'place'\" aria-label=\"{{ 'LOCATION_COLON' | SRHelperFilter_translate:place.name }}\">\n        {{ place.name | SRStringFilter_limitTo:15:true }}\n      </span>\n  </button>\n</div>\n"),a.put("/template/partials/_meet-edit-submit_tpl.html",'<div class="meet-edit__submit">\n  <button\n      id="copy-url"\n      class="btn btn--primary meet-edit__submit-btn"\n      type="submit"\n      aria-label="{{:: \'SAVE\' | SRHelperFilter_translate}}"\n      role="button"\n      tabindex="0"\n      data-ng-disabled="!meet || meet.suggestedTimes.length === 0 || hasSubmitted"\n      tooltip="{{tooltipValue}}"\n      tooltip-append-to-body="true"\n      tooltip-trigger="openTrigger"\n      tooltip-placement="left"\n      data-clipboard-text="{{ meetUrl }}"\n      data-sr-ui-enter="submitFromKeyboard($event)"\n    >\n    <i class="icon icon_checkmark"></i>\n  </button>\n</div>\n'),a.put("/template/partials/_meet-edit-title_tpl.html",'<div class="meet-edit__title">\n\n  <div class="meet-edit__popover" data-sr-ui-close-popover data-ng-if="hasPopover">\n    <ul class="meet-edit__popover-list">\n      <li>\n        <a\n          class="media media--10 media--overflow meet-edit__popover-list__item"\n          role="button"\n          data-ng-class="{\'active\': !title}"\n          aria-selected="!title"\n          data-ng-click="setDefaultTitle()"\n        >\n          <div class="media__object meet-edit__popover-list__icon" aria-hidden="true">\n            <i class="icon icon_auto"></i>\n          </div>\n          <div class="media__body">\n            <h4 class="meet-edit__popover-list__title">{{:: \'AUTOMATIC\' | SRHelperFilter_translate}}</h4>\n            <p class="meet-edit__popover-list__description">\n               {{ \'MEET_AUTOMATIC_TITLE_DESCRIPTION\' | SRHelperFilter_translate:userName}}\n            </p>\n          </div>\n        </a>\n      </li>\n\n      <li\n        class="media media--10 media--overflow meet-edit__popover-list__item"\n        data-ng-class="{\'active\': title}"\n        aria-selected="title"\n      >\n        <div class="media__object meet-edit__popover-list__icon" aria-hidden="true">\n          <i class="icon icon_text"></i>\n        </div>\n        <div class="media__body">\n          <h4 class="meet-edit__popover-list__title">{{:: \'CUSTOM_TITLE\' | SRHelperFilter_translate}}</h4>\n          <input\n            class="form-input"\n            type="text"\n            placeholder="{{:: \'TYPE_TITLE\' | SRHelperFilter_translate}}"\n            aria-label="{{:: \'TYPE_TITLE\' | SRHelperFilter_translate}}"\n            data-ng-model="$parent.selected"\n            data-sr-ui-enter="togglePopover()"\n          />\n        </div>\n      </li>\n    </ul>\n  </div>\n\n  <button\n    class="btn meet-edit__popover-button"\n    role="button"\n    aria-label="{{(title) ? (\'TITLE_COLON\' | SRHelperFilter_translate:title) : (\'SET_CUSTOM_TITLE\' | SRHelperFilter_translate)}}"\n    data-ng-class="{\'js-close-popover-disabled\': hasPopover}"\n    data-ng-click="togglePopover()"\n    data-ng-disabled="hasPopover"\n  >\n    <span data-ng-if="!title">\n      {{:: \'TITLE_AUTO\' | SRHelperFilter_translate}}\n    </span>\n    <span data-ng-if="title">\n      {{ title | SRStringFilter_limitTo:15:true }}\n    </span>\n  </button>\n\n</div>\n'),a.put("/template/partials/_meet-edit-url_tpl.html",'<div class="meet-edit__url">\n  <input\n    class="btn btn--input"\n    type="text"\n    aria-label="{{:: \'COPY_AND_SHARE_URL\'| SRHelperFilter_translate}}"\n    title="{{:: \'COPY_AND_SHARE_URL\'| SRHelperFilter_translate}}"\n    value="{{:: meetUrl}}"\n    data-ng-click=":: onClickUrl($event)"\n    data-ng-readonly="true"\n  >\n</div>\n'),a.put("/template/partials/_meet-edit_tpl.html",'<section class="meet-edit" data-sr-meet-edit-keyboard data-ng-switch data-on="step" aria-busy="{{step === \'loading\'}}">\n\n  <div class="meet-edit__error" data-ng-switch-when="error" role="alert">\n    {{ :: \'NETWORK_CONNECTION_ERROR\' | SRHelperFilter_translate }}\n  </div>\n\n  <div class="meet-edit__loading" data-ng-switch-when="loading">\n    {{ :: \'LOADING\' | SRHelperFilter_translate }}\n  </div>\n\n  <div data-ng-switch-when="edit">\n    <form class="meet-edit__form">\n      <ul class="meet-edit__list">\n        <li class="meet-edit__list-item" data-ng-if="!hasSubmitted">\n          <sr-meet-edit-cancel></sr-meet-edit-cancel>\n        </li>\n\n        <li class="meet-edit__list-item meet-edit__list-item--group" data-ng-if="!hasSubmitted">\n          <sr-meet-edit-add-timeslot-button></sr-meet-edit-add-timeslot-button>\n          <sr-meet-edit-duration></sr-meet-edit-duration>\n          <sr-meet-edit-location place="meet.place" timezone="{{meet.timeZone}}"></sr-meet-edit-location>\n          <sr-meet-edit-calendar connections="connections" calendars="calendars" calendars-hash="calendarsHash" calendar-id="meet.event.calendarId"></sr-meet-edit-calendar>\n          <sr-meet-edit-title title="meet.title" auto-title="meet.autoTitle"></sr-meet-edit-title>\n        </li>\n\n        <li class="meet-edit__list-item" data-ng-if="hasSubmitted || forceUrl">\n          <sr-meet-edit-url meet-id=":: meet.id"></sr-meet-edit-url>\n        </li>\n\n        <li class="meet-edit__list-item">\n          <sr-meet-edit-submit></sr-meet-edit-submit>\n        </li>\n      </ul>\n    </form>\n  </div>\n\n</section>\n'),a.put("/template/partials/_meet-reply-action_tpl.html",'<button\n  type="submit"\n  class="btn  btn--block btn--large meet-reply__action"\n  aria-label="{{ (selectedTimeSlotId) ? (\'CONFIRM_FOR_DATE\' | SRHelperFilter_translate:date) : (\'SELECT_TIME_CONFIRM\' | SRHelperFilter_translate)}}"\n  data-ng-click="onClickAction()"\n  data-ng-disabled="disabled"\n  data-ng-class="{\n    \'meet-reply__action--multipe-rows\': selectedTimeSlotId,\n    \'btn--primary\': !disabled\n  }"\n>\n  <span class="meet-reply__action__labels" data-ng-if="!hideLabels">\n    <span data-ng-if="!selectedTimeSlotId" data-ng-bind=":: \'SELECT_TIME_CONFIRM\' | SRHelperFilter_translate"></span>\n    <span data-ng-if="selectedTimeSlotId">\n      <div data-ng-bind=":: \'CONFIRM\' | SRHelperFilter_translate"></div>\n      <small data-ng-bind="date"></small>\n    </span>\n  </span>\n\n  <span class="meet-reply__action__spinner">\n    <sr-ui-spinner\n      class="spinner--meet-reply-action"\n      data-custom-options="{\n        circle: {\n          strokeColor: \'#fff\'\n        }\n      }"\n    >\n    </sr-ui-spinner>\n  </span>\n</button>\n'),a.put("/template/partials/_meet-reply-confirmed_tpl.html",'<div class="meet-reply__box meet-reply__box--confirmed">\n  <i class="sprite sprite-resolved-check"></i>\n  <p class="meet-reply__text meet-reply__text--important" data-ng-bind-html=":: confirmedText"></p>\n\n  <p class="meet-reply__text" data-ng-if=":: isLogged">\n    <a href="/" role="link" class="btn btn--gray" data-ng-bind=":: \'RETURN_TO_CALENDAR\' | SRHelperFilter_translate"></a>\n  </p>\n</div>\n'),a.put("/template/partials/_meet-reply-download-app_tpl.html",'<p class="meet-reply__text" data-ng-bind=":: \'TRY_SUNRISE_NOW_SENTENCE\' | SRHelperFilter_translate"></p>\n<sr-ui-download-button></sr-ui-download-button>\n'),a.put("/template/partials/_meet-reply-loading_tpl.html",'<section class="meet-reply__box meet-reply__box--loading">\n  <div class="meet-reply__loading">\n    <div\n      class="meet-reply__loading__spinner"\n      data-ng-if="!errors.loadingError"\n      aria-label="{{:: \'PLEASE_WAIT\' | SRHelperFilter_translate}}"\n    >\n      <b>\n        <sr-ui-spinner class="spinner--meet-reply-loading"></sr-ui-spinner>\n      </b>\n    </div>\n    <p class="meet-reply__loading__text" data-ng-if="errors && errors.loadingError">\n      <b data-ng-bind=":: errors.loadingError"></b>\n    </p>\n  </div>\n</section>\n'),a.put("/template/partials/_meet-reply-map_tpl.html",'<a\n  data-ng-href="{{:: placeUrl}}"\n  role="link"\n  class="meet-reply__place-map"\n  target="_blank"\n>\n  <sr-ui-map data-address=":: place.address" data-geometry=":: place.geometry" data-height=":: mapHeight"></sr-ui-map>\n</a>\n'),a.put("/template/partials/_meet-reply-profile-picture_tpl.html",'<ul class="profile-picture-list meet-reply__profile-pictures">\n  <li>\n    <sr-profile-picture email="{{organizerEmail}}"></sr-profile-picture>\n  </li>\n  <li>\n    <sr-profile-picture email="{{attendeeEmail}}" auto-update="true"></sr-profile-picture>\n  </li>\n</ul>\n'),a.put("/template/partials/_meet-reply-realtime_tpl.html",'<div class="meet-reply__timeslots-realtime">\n  <div class="media media--overflow media--10">\n    <div class="media__object" data-ng-if=":: !hideSpinner">\n      <sr-ui-spinner\n          class="spinner--meet-reply-realtime"\n          data-custom-options=":: {\n            \'circle\': {\n'+"              'strokeColor': '#FFFFFF',\n            },\n            'width': '26px',\n            'height': '26px'\n          }\"\n      >\n      </sr-ui-spinner>\n    </div>\n    <p class=\"media__body\">\n      {{:: 'REAL_TIME_AVAILABILITIES_FOR' | SRHelperFilter_translate:(organizer.name || organizer.email)}}<br>\n      <small>{{ 'UPDATED' | SRHelperFilter_translate:updatedTimeslotsStr}}</small>\n    </p>\n  </div>\n</div>\n"),a.put("/template/partials/_meet-reply-timeslots-group_tpl.html",'<div>\n  <h3 class="meet-reply__timeslots__period-title" data-ng-if="type" data-ng-bind=":: type | SRHelperFilter_translate"></h3>\n  <ul class="meet-reply__timeslots__list">\n    <li data-ng-repeat="timeSlot in timeSlots">\n      <button\n        role="button"\n        class="btn btn--large"\n        data-ng-click="onClickTimeSlot(timeSlot.id, {scrollToTimeSlot: true})"\n        data-ng-class="{\'btn--primary\': selectedTimeSlotId === timeSlot.id}"\n        aria-selected="{{selectedTimeSlotId === timeSlot.id}}"\n        aria-label="{{:: dateLabel}} - {{:: timeSlot.start || timeSlot | SRDateFilter_dateStringToTime}} {{:: timeSlot.start || timeSlot | SRDateFilter_zoneAbbr:timezone}}"\n      >\n        <h4 data-ng-bind=":: timeSlot.start || timeSlot | SRDateFilter_dateStringToTime"></h4>\n        <h5 class="muted" data-ng-bind=":: timeSlot.start || timeSlot | SRDateFilter_zoneAbbr:timezone"></h5>\n      </button>\n    </li>\n  </ul>\n</div>\n'),a.put("/template/partials/_meet-reply_tpl.html",'<div class="meet-reply" data-ng-class="{\'meet-reply--logged\': isLogged}" aria-busy="{{ meet ? false : true}}">\n\n  <form class="meet-reply__content">\n\n    <!-- Loading -->\n    <sr-meet-reply-loading errors="errors" data-ng-if="!meet"></sr-meet-reply-loading>\n\n    <!-- Header -->\n    <header role="banner" class="meet-reply__box" data-ng-if=":: meet">\n      <sr-meet-reply-profile-picture attendee-email="identity.email" organizer-email=":: meet.organizer.email"></sr-meet-reply-profile-picture>\n\n      <h1 class="meet-reply__title meet-reply__title--header" data-ng-bind-html=":: meetValues.title"></h1>\n\n      <h2 class="meet-reply__title meet-reply__title--duration" data-ng-if=":: meet.duration">\n        <i class="icon icon_clock"></i>\n        {{ :: meet.duration | SRDateFilter_duration:\'minutes\'}}\n      </h2>\n\n      <hr class="meet-reply__hr" data-ng-if=":: meet.place && meet.place.name && meet.status === \'pending\'" />\n\n      <div class="meet-reply__place" data-ng-if=":: meet.place && meet.place.name && meet.status === \'pending\'">\n        <h3 class="meet-reply__place-name">\n          <i class="icon icon_marker"></i>\n          {{:: meet.place.name}}\n        </h3>\n        <h4 class="meet-reply__place-address" data-ng-if=":: meetValues.placeAddress" data-ng-bind=":: meetValues.placeAddress"></h4>\n      </div>\n\n      <sr-meet-reply-map data-ng-if=":: (meet && meet.place && meet.place.geometry && meet.place.name && meet.status === \'pending\')" data-place=":: meet.place"></sr-meet-reply-map>\n    </header>\n\n    <!-- Confirmed state -->\n    <section class="meet-reply__confirmed" data-ng-if="meet && meet.status === \'confirmed\'" aria-busy="{{hasLoadedTimeSlots ? false : true}}">\n\n      <div class="meet-reply__box meet-reply__box--loading-timeslots" data-ng-if="!hasLoadedTimeSlots">\n        <sr-meet-reply-loading errors="errors"></sr-meet-reply-loading>\n      </div>\n\n      <sr-meet-reply-confirmed\n        data-ng-if="hasLoadedTimeSlots"\n        suggested-times=":: meet.suggestedTimes"\n        confirmed-time-id=":: meet.confirmedTimeId"\n        timezone=":: meetValues.timezone"\n      >\n      </sr-meet-reply-confirmed>\n\n      <div class="meet-reply__box meet-reply__box--transparent meet-reply__box--confirm-download" data-ng-if=":: !isLogged">\n        <sr-meet-reply-download-app></sr-meet-reply-download-app>\n      </div>\n    </section>\n\n    <!-- Confirmation -->\n    <section class="meet-reply__confirm hide" data-ng-if="meet && meet.status === \'pending\'" data-ng-disabled="!meetValues.hasSubmitted">\n      <div class="meet-reply__box">\n        <div class="meet-reply__confirm__checkmark">\n          <i class="sprite sprite-submitted-check"></i>\n        </div>\n\n        <h1 class="meet-reply__confirm__date">\n          {{ meetValues.startDates[$root.selectedTimeSlotId] | SRDateFilter_longDate }}\n          @\n          {{ meetValues.startDates[$root.selectedTimeSlotId] | SRDateFilter_timeFormat:true }}\n          ({{ meetValues.startDates[$root.selectedTimeSlotId] | SRDateFilter_zoneAbbr:meetValues.timezone }})\n        </h1>\n\n        <p class="meet-reply__text">\n          {{:: \'RECEIVE_INVIT_SHORTLY\' | SRHelperFilter_translate}}<br>\n          {{:: \'X_HAS_BEEN_NOTIFIED\' | SRHelperFilter_translate:(meet.organizer.name || meet.organizer.email)}}\n        </p>\n\n        <p class="meet-reply__text" data-ng-if=":: isLogged">\n          <a href="/" role="button" class="btn btn--gray" data-ng-bind=":: \'RETURN_TO_CALENDAR\' | SRHelperFilter_translate"></a>\n        </p>\n      </div>\n\n      <div class="meet-reply__box meet-reply__box--transparent meet-reply__box--confirm-download" data-ng-if=":: !isLogged">\n        <sr-meet-reply-download-app></sr-meet-reply-download-app>\n      </div>\n    </section>\n\n    <!-- Form  -->\n    <section class="meet-reply__form" data-ng-if="meet && meet.status === \'pending\'" data-ng-disabled="meetValues.hasSubmitted"  aria-busy="{{hasLoadedTimeSlots ? false : true}}">\n\n      <div class="meet-reply__box meet-reply__box--timeslots-empty" data-ng-if="hasLoadedTimeSlots && (meetValues.timeSlotsGroupedByDay | SRHelperFilter_isEmpty)">\n        <i class="sprite sprite-unavailable"></i>\n        <p role="alert" data-ng-bind=":: \'TIMES_SUGGESTED_UNAVAILABLE\' | SRHelperFilter_translate:(meet.organizer.name || meet.organizer.email)"></p>\n      </div>\n\n      <sr-meet-reply-loading errors="errors" data-ng-if="!hasLoadedTimeSlots"></sr-meet-reply-loading>\n\n      <div class="meet-reply__box meet-reply__box--timeslots" data-ng-if="!(meetValues.timeSlotsGroupedByDay | SRHelperFilter_isEmpty)">\n        <header class="meet-reply__box--timeslots__header">\n          <h1 class="meet-reply__title meet-reply__title--timeslots" data-ng-bind=":: \'PICK_TIME\' | SRHelperFilter_translate"></h1>\n\n          <hr class="meet-reply__hr">\n\n          <sr-timezone-picker\n            class="timezone-picker--meet"\n            options="{\n              \'current-time\': false,\n              \'timezones\': [meet.timeZone],\n              \'showTimezoneName\': true\n            }"\n            date="meetValues.date"\n            data-ng-if="!isLogged && meetValues.shouldShowTimeZonePicker"\n          >\n          </sr-timezone-picker>\n        </header>\n\n        <sr-ui-scrollbox class="sr-ui-scrollbox--meet">\n          <ul class="meet-reply__timeslots">\n            <li data-ng-repeat="day in meetValues.timeSlotsGroupedByDay | orderBy:[\'timeStamp\'] track by day.id">\n              <h3 class="meet-reply__timeslots__title">\n                <span data-ng-if="day.date | SRDateFilter_calendarDay:false:true">\n                  <strong data-ng-bind="day.date | SRDateFilter_calendarDay:false:true"></strong> -\n                </span>\n                {{day.date | date:\'fullDate\'}}\n              </h3>\n\n              <!-- Night -->\n              <sr-meet-reply-timeslots-group\n                data-date-label="{{day.date | date:\'fullDate\'}}"\n                data-ng-show="day.groupsOfTimeSlots.NIGHT"\n                data-time-slots="day.groupsOfTimeSlots.NIGHT"\n                data-timezone="meetValues.timezone"\n                data-selected-time-slot-id="$root.selectedTimeSlotId">\n              </sr-meet-reply-timeslots-group>\n\n              <!-- Morning -->\n              <sr-meet-reply-timeslots-group\n                data-date-label="{{day.date | date:\'fullDate\'}}"\n                data-type="MORNING"\n                data-ng-show="day.groupsOfTimeSlots.MORNING"\n                data-time-slots="day.groupsOfTimeSlots.MORNING"\n                data-timezone="meetValues.timezone"\n                data-selected-time-slot-id="$root.selectedTimeSlotId">\n              </sr-meet-reply-timeslots-group>\n\n              <!-- Afternoon -->\n              <sr-meet-reply-timeslots-group\n                data-date-label="{{day.date | date:\'fullDate\'}}"\n                data-type="AFTERNOON"\n                data-ng-show="day.groupsOfTimeSlots.AFTERNOON"\n                data-time-slots="day.groupsOfTimeSlots.AFTERNOON"\n                data-timezone="meetValues.timezone"\n                data-selected-time-slot-id="$root.selectedTimeSlotId">\n              </sr-meet-reply-timeslots-group>\n\n              <!-- Evening -->\n              <sr-meet-reply-timeslots-group\n                data-date-label="{{day.date | date:\'fullDate\'}}"\n                data-type="EVENING"\n                data-ng-show="day.groupsOfTimeSlots.EVENING"\n                data-time-slots="day.groupsOfTimeSlots.EVENING"\n                data-timezone="meetValues.timezone"\n                data-selected-time-slot-id="$root.selectedTimeSlotId">\n              </sr-meet-reply-timeslots-group>\n            </li>\n          </ul>\n        </sr-ui-scrollbox>\n      </div>\n\n      <div class="meet-reply__box meet-reply__box--actions" data-ng-if="meetValues.shouldShowConfirmButton">\n        <fieldset class="meet-reply__fieldset" data-ng-if=":: !isLogged">\n          <p class="meet-reply__text meet-reply__text--important" data-ng-if="meetValues.shouldHideInputs">\n            {{:: \'EVENT_ADDED_TO_CALENDAR\' | SRHelperFilter_translate}}\n            <a\n              role="button"\n              data-ng-click="meetValues.shouldHideInputs = false"\n              data-ng-bind=":: identity.email"\n              tooltip="{{:: \'CLICK_TO_CHANGE_EMAIL\' | SRHelperFilter_translate}}"\n              tooltip-append-to-body="true"\n              tooltip-popup-delay="1000"\n            >\n            </a>\n          </p>\n\n          <ul class="form-collapsed-inputs" data-ng-if="!meetValues.shouldHideInputs" sr-ui-form-collapsed-inputs>\n            <li>\n               <input\n                class="form-input form-input--large"\n                type="email"\n                data-ng-model="identity.email"\n                aria-label="{{:: \'ENTER_EMAIL_CONFIRM\' | SRHelperFilter_translate}}"\n                placeholder="{{:: \'ENTER_EMAIL_CONFIRM\' | SRHelperFilter_translate}}"\n                data-ng-model-options="{ updateOn: \'default blur\', debounce: {\'default\': 1000, \'blur\': 0} }"\n                data-ng-change="onAttendeeEmailChange()"\n                data-sr-ui-focus="meetValues.shouldFocusOnEmailField"\n              >\n              <i class="icon icon_mail"></i>\n              <sr-ui-spinner\n                class="spinner--meet-reply-email"\n                data-ng-if="loading[\'attendeeEmail\']"\n                data-custom-options="{\n                  \'width\': \'22px\',\n                  \'height\': \'22px\'\n                }"\n              >\n              </sr-ui-spinner>\n\n            </li>\n            <li data-ng-if="validate.shouldShowName">\n              <input\n                class="form-input form-input--large"\n                type="text"\n                data-ng-model="identity.name"\n                aria-label="{{:: \'TYPE_YOUR_NAME_OPTIONAL\' | SRHelperFilter_translate}}"\n                placeholder="{{:: \'TYPE_YOUR_NAME_OPTIONAL\' | SRHelperFilter_translate}}"\n              >\n              <i class="icon icon_user"></i>\n            </li>\n          </ul>\n        </fieldset>\n\n        <div class="meet-reply__calendar" data-ng-if=":: isLogged">\n          <sr-calendar-picker\n            class="calendar-picker--meet-reply"\n            data-calendar-id="meetValues.calendarId"\n            data-calendars-hash="calendarsHash"\n            data-connections="connections"\n            data-calendars="calendarsByConnectionId"\n            data-options="{\'size\': 50, disabled: (meetValues.timeSlotsGroupedByDay | SRHelperFilter_isEmpty)}"\n          >\n          </sr-calendar-picker>\n        </div>\n\n        <div class="meet-reply__action-wrapper">\n          <div class="meet-reply__action-error" data-ng-if="errors.timeSlotGone">\n            <p role="alert" data-ng-bind=":: \'TIME_NOT_AVAILABLE\' | SRHelperFilter_translate"></p>\n          </div>\n\n          <sr-meet-reply-action\n            data-time-slots-start-dates="meetValues.startDates"\n            data-selected-time-slot-id="$root.selectedTimeSlotId"\n            data-timezone="meetValues.timezone"\n            data-disabled="!isLogged && !validate.attendeeEmail || (meetValues.timeSlotsGroupedByDay | SRHelperFilter_isEmpty)"\n          >\n          </sr-meet-reply-action>\n        </div>\n\n      </div>\n\n      <div\n        class="meet-reply__box meet-reply__box--transparent meet-reply__box--confirm-download"\n        data-ng-if="!isLogged && hasLoadedTimeSlots && (meetValues.timeSlotsGroupedByDay | SRHelperFilter_isEmpty)"\n      >\n        <sr-meet-reply-download-app></sr-meet-reply-download-app>\n      </div>\n\n      <div\n        class="meet-reply__box meet-reply__box--transparent meet-reply__box--realtime"\n        data-ng-if="isLogged || hasLoadedTimeSlots && !(meetValues.timeSlotsGroupedByDay | SRHelperFilter_isEmpty) && !isLogged"\n      >\n        <sr-meet-reply-realtime organizer=":: meet.organizer" updated-date="updatedDate"></sr-meet-reply-realtime>\n      </div>\n\n    </section>\n  </form>\n\n  <div class="meet-reply__window" data-ng-transclude></div>\n</div>\n'),
a.put("/template/partials/_message_tpl.html",'<div class="message {{message.cssClass}}">\n  <div\n    class="message__box"\n\n    role="alertdialog"\n    aria-labelledby="message-label"\n    aria-describedby="message-error"\n\n    data-ng-if="message.msg"\n  >\n    <a\n      aria-label="{{ :: \'CANCEL\' | SRHelperFilter_translate }}"\n      role="button"\n\n      data-ng-if=":: message.closeable"\n      data-ng-click="close()"\n    >\n      <i class="icon icon_plus"></i>\n    </a>\n    <p id="message-label" class="message__label" ng-bind=":: message.msg"></p>\n    <p id="message-error" class="message__error" data-ng-if=":: message.error" data-ng-bind=":: message.error"></p>\n  </div>\n</div>\n'),a.put("/template/partials/_modal-connection-form_tpl.html",'<header class="modal-header">\n  <a\n    aria-label="{{ :: \'CANCEL\' | SRHelperFilter_translate }}"\n    role="button"\n    class="connection-form__close"\n    data-ng-click="cancel()"\n  >\n    <i class="icon icon_plus"></i>\n  </a>\n  <h3>{{ i18n.ICLOUD_MAC_CONNECT_TITLE }}</h3>\n</header>\n\n<form class="modal-body">\n  <ul class="connection-form__form connection-form__form--mac">\n     <li class="form__row connection-form__mac">\n      <p data-ng-bind="i18n.ICLOUD_MAC_MSG"></p>\n      <p data-ng-bind="i18n.ICLOUD_MAC_MSG_2"></p>\n\n      <div class="connection-form__mac__links">\n        <a aria-label="App Store" href="https://itunes.apple.com/us/app/sunrise-calendrier-google/id599114150" target="_blank">\n          <i class="sprite sprite-app-store"></i>\n        </a>\n      </div>\n    </li>\n  </ul>\n\n</form>\n'),a.put("/template/partials/_modal-meet-answer-success_tpl.html",'<div class="modal-body">\n  <div class="meet-answer__success">\n    <sr-meet-answer-confirm-message organizer="meet.organizer" time-slots="meet.timeSlots"></sr-meet-answer-confirm-message>\n  </div>\n\n <div class="meet-answer__actions">\n   <button class="btn btn--gray btn--small" data-ng-click="done()">\n     Return to Sunrise\n   </button>\n </div>\n</div>\n'),a.put("/template/partials/_modal-shortcuts_tpl.html",'<header class="modal-header">\n  <h3>\n    {{ i18n.KEYBOARD_SHORTCUTS }}\n  </h3>\n</header>\n\n<div class="modal-body">\n  <div ng-if="!isMacApp">\n    <ul>\n      <li class="media media--10">\n        <div class="media__object">\n          <code class="notmono">&larr;</code> / <code class="notmono">&uarr;</code> / <code>p</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.PREVIOUS_PERIOD }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code class="notmono">&rarr;</code> / <code class="notmono">&darr;</code> / <code>n</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.NEXT_PERIOD }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>1</code> / <code>w</code> \n        </div>\n        <div class="media__body">\n          {{ i18n.WEEK_VIEW }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>2</code> / <code>m</code> \n        </div>\n        <div class="media__body">\n          {{ i18n.MONTH_VIEW }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>t</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.TODAY }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>c</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.NEW_EVENT }}\n        </div>\n      </li>\n    </ul>\n  </div>\n  <div ng-if="!isMacApp">\n    <ul>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>delete</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.DEL_EVENT }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>h</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.TOGGLE_SIDEBAR }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>r</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.REFRESH }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>escape</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.BACK_TO_CAL }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>s</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.SETTINGS }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>/</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.SEARCH }}\n        </div>\n      </li>\n    </ul>\n  </div>\n  <div ng-if="isMacApp">\n    <ul>\n      <li class="media media--10">\n        <div class="media__object">\n          <code class="notmono">&#8984;&larr;</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.PREVIOUS_PERIOD }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code class="notmono">&#8984;&rarr;</code>       \n        </div>\n        <div class="media__body">\n          {{ i18n.NEXT_PERIOD }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>&#8984;1</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.WEEK_VIEW }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>&#8984;2</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.MONTH_VIEW }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>&#8984;t</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.TODAY }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>&#8984;n</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.NEW_EVENT }}\n        </div>\n      </li>\n    </ul>\n  </div>\n  <div ng-if="isMacApp">\n    <ul>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>delete</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.DEL_EVENT }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>h</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.TOGGLE_SIDEBAR }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>&#8984;r</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.REFRESH }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>escape</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.BACK_TO_CAL }}\n        </div>\n      </li>\n      <li class="media media--10">\n        <div class="media__object">\n          <code>&#8984;/</code>\n        </div>\n        <div class="media__body">\n          {{ i18n.SEARCH }}\n        </div>\n      </li>\n    </ul>\n  </div>\n</div>\n'),a.put("/template/partials/_month_tpl.html",'<div class="month">\n\n  <sr-timezone-picker class="timezone-picker--month" options="{\'current-time\': true}"></sr-timezone-picker>\n\n  <sr-calendar-daynames data-type="month"></sr-calendar-daynames>\n\n  <section class="month__rows month__rows--{{rowsLength}} draggable-wrapper" sr-scrollable="month">\n\n    <div class="month__row" data-ng-repeat="days in dates track by $index"  data-ng-style="{ height: 100/rowsLength + \'%\'}">\n      <month-row days="days" data-start="start"></month-row>\n    </div>\n\n    <row-events id="row-events--month" class="month__events" data-ng-if="availableRows" data-available-rows="availableRows" data-occurrences="occurrences" data-dates="dates" data-calendars="calendars" data-updated="updated"></row-events>\n  </section>\n\n</div>\n\n'),a.put("/template/partials/_navbar-calendars_tpl.html",'<li class="navbar__item navbar__item--calendars">\n  <a\n    data-ng-click="togglePopover()"\n    role="button"\n    data-ng-disabled="hasPopover"\n  >\n    <strong data-ng-bind="i18n.CALENDARS"></strong>\n    <i class="icon icon_chevron-bottom"></i>\n  </a>\n\n  <sr-popover\n    data-ng-if="hasPopover"\n    has-popover="$parent.hasPopover"\n    options="{\n'+"      'animation': 'fade',\n      'name': 'navbar-calendars'\n    }\"\n  >\n    <sr-calendars-list type=\"visibility\"></sr-calendars-list>\n  </sr-popover>\n</li>\n"),a.put("/template/partials/_navbar-controls_tpl.html",'<li class="navbar__item navbar__item--controls">\n  <a\n    class="prev"\n    data-ng-disabled="states.prevDisabled"\n    data-ng-click="prev()"\n    aria-label="{{ (SRCurrentService._location === \'week\' ? i18n.PREVIOUS_WEEK : i18n.PREVIOUS_MONTH) }}"\n    role="button"\n  >\n    <i class="icon icon_chevron-left"></i>\n  </a>\n  <b class="navbar__item--controls__separator"></b>\n  <a\n    class="next"\n    data-ng-disabled="states.nextDisabled"\n    data-ng-click="next()"\n    aria-label="{{ (SRCurrentService._location === \'week\' ? i18n.NEXT_WEEK : i18n.NEXT_MONTH) }}"\n    role="button"\n  >\n    <i class="icon icon_chevron-right"></i>\n  </a>\n</li>\n'),a.put("/template/partials/_navbar-new-event_tpl.html",'<li\n  role="button"\n  aria-label="{{:: \'CREATE_EVENT\' | SRHelperFilter_translate}}"\n  class="navbar__item navbar__item--new-event"\n  data-ng-click="createEvent()"\n>\n  <span>\n    <i class="icon icon_plus"></i>\n  </span>\n</li>\n'),a.put("/template/partials/_navbar-today_tpl.html",'<li\n  class="navbar__item navbar__item--today"\n  data-ng-class="{\'navbar__item--disabled\': isToday}"\n>\n  <a\n    data-ng-click="onClick()"\n    aria-label="{{:: i18n.TODAY}}"\n    data-ng-disabled="isToday"\n    role="button"\n  >\n    <strong data-ng-bind=":: i18n.TODAY"></strong>\n  </a>\n</li>\n'),a.put("/template/partials/_navbar-toggle-sidebar_tpl.html",'<li\n  class="navbar__item navbar__item--menu"\n  data-ng-class="{\'navbar__item--active\': !SRToggleSidebarService.hideSidebar}"\n  tooltip="{{ (SRToggleSidebarService.hideSidebar) ? i18n.SHOW_SIDEBAR : i18n.HIDE_SIDEBAR }}"\n  tooltip-placement="right"\n  tooltip-popup-delay="800"\n  tooltip-append-to-body="true"\n>\n  <a\n    aria-label="{{ (SRToggleSidebarService.hideSidebar) ? i18n.SHOW_SIDEBAR : i18n.HIDE_SIDEBAR }}"\n    role="button"\n    data-ng-click="toggleSidebar()"\n  >\n    <i class="icon icon_hamburger"></i>\n  </a>\n</li>\n'),a.put("/template/partials/_place-menu_tpl.html",'<div class="place-menu">\n  \n</div>\n\n<a class="place-menu-item" tabindex="-1" ng-switch on="match.model.type">\n  <div ng-switch-when="favorite">\n    <img width="30px" height:"30px" background-color="gray" style="float: left; width:30px; height:30px"><img>\n    <div style="float: left; padding-left: 10px">\n      <strong>{{ match.model[\'title\'] }}</strong>\n      <small class="muted">{{ match.model[\'description\'] || \'Tap here to add an address\' }}</small>\n    </div>\n  </div>\n\n  <div ng-switch-when="prediction">\n    <strong>{{ match.model[\'title\'] }}</strong>\n    <small class="muted">{{ match.model[\'description\'] }}</small>\n  </div>\n</a>\n'),a.put("/template/partials/_profile-picture_tpl.html",'<div class="profile-picture">\n  <div class="profile-picture__tooltip" data-tooltip="{{tooltipLabel}}" data-tooltip-append-to-body="true">\n    <sr-ui-image\n      class="profile-picture__img"\n      data-image-url="image"\n      data-ng-class="{\'profile-picture__img--hidden\': !image}"\n    >\n    </sr-ui-image>\n    <i data-ng-if="rsvpStatus" class="sprite sprite-{{rsvpStatus}}">{{rsvpStatus}}</i>\n  </div>\n</div>\n\n\n'),a.put("/template/partials/_scrollbox_tpl.html",'<div class="scrollbox-layer scrollbox-layer--top"></div>\n<div class="scrollbox-wrapper">\n  <div ng-transclude></div>\n</div>\n<div class="scrollbox-layer scrollbox-layer--bottom"></div>\n'),a.put("/template/partials/_search-input_tpl.html",'<div class="sidebar__search-input">\n  <input\n    class="js-search-input"\n    type="search"\n    placeholder="{{:: i18n.PLACEHOLDER }}"\n    tabindex="0"\n\n    role="search"\n    aria-label="{{:: \'SEARCH_EVENT\' |  SRHelperFilter_translate}}"\n\n    data-ng-model="searchText"\n    data-ng-class="{\'active\': searchText}"\n  >\n\n  <i class="icon icon_search"></i>\n\n  <a\n    class="sidebar__search-clear"\n\n    aria-label="{{:: \'CANCEL_SEARCH\' | SRHelperFilter_translate }}"\n    role="button"\n\n    data-ng-click="clearSearch()"\n    data-ng-class="{\'hidden\': !searchText}"\n  >\n    <i class="icon icon_plus"></i>\n  </a>\n</div>\n'),a.put("/template/partials/_search-results_tpl.html",'<ul class="search-results">\n\n  <li class="search-results__loading" data-ng-if="!sections">\n    <sr-ui-spinner data-custom-options="{\'circle\': {\'strokeColor\': \'#636a78\'}}" class="spinner--search-results"></sr-ui-spinner>\n    {{ i18n.LOADING }}\n  </li>\n\n  <li class="search-results__empty" data-ng-if="sections && sections[0] && sections[0].length <= 0">\n     {{ i18n.NO_RESULTS }}\n  </li>\n\n  <li class="search-results__shake-shack" data-ng-if="searchText.toLowerCase() === \'shake shack\' && !isChromeApp">\n    <sr-shake-shack></sr-shake-shack>\n  </li>\n\n  <li  class="search-results__config"  data-ng-if="searchText.toLowerCase() === \'about:config\'">\n    <h3 class="search-results__title">Browser time zone:</h3>\n    {{config.timezone}}\n    <br>\n    <br>\n\n    <div data-ng-if="config.locationTz">\n      <h3 class="search-results__title">Location time zone:</h3>\n      {{config.locationTz}}\n      <br>\n      <br>\n    </div>\n\n    <div data-ng-if="config.location && config.location.latitude">\n      <h3 class="search-results__title">Location:</h3>\n      <p>Latitude:  {{config.location.latitude}}</p>\n      <p>Longitude: {{config.location.longitude}}</p>\n      <p>Accuracy:  {{config.location.accuracy}}</p>\n      <br>\n      <br>\n    </div>\n\n    <h3 class="search-results__title">Browser language:</h3>\n    {{config.language}}\n    <br>\n    <br>\n\n    <button class="btn btn--danger btn--block btn--small" data-ng-click="clearDataBases()" role="button">Clear Local Database</button>\n  </li>\n  <li class="search-results__table-container">\n    <sr-table delegate="delegate" focus-element="input" sections="sections" info="tableInfo" scroll-top-on-reload="false">\n      <sr-table-section data-index="0">\n        <sr-table-section-row class="search-results__table__section__row" data-ng-repeat="occurrence in sections[0] track by occurrence.id">\n          <div class="media media--overlow media--10 search-results__result">\n            <div class="media__object">\n              <sr-iconic type="{{:: occurrence.type}}" overlay="{{:: ((occurrence.icon && occurrence.icon.overlay) ? occurrence.icon.overlay : occurrence.title + \':\' + occurrence.place.name)}}" color="{{:: info.calendars[occurrence.calendarId].color}}" background="false" size="40"></sr-iconic>\n            </div>\n            <div class="media__body">\n                <h3 class="search-results__title" data-ng-bind=":: occurrence.title"></h3>\n                <div class="search-results__datetime">\n                  <!-- Duration -->\n                  <sr-ui-date-duration has-icon="false" duration-days=":: occurrence.durationDays" timezone=":: occurrence.timezone" start=":: occurrence.startDate" end=":: occurrence.endDate" all-day=":: occurrence.allDay"></sr-ui-date-duration>\n                  <sr-ui-time-duration has-icon="false" duration-days=":: occurrence.durationDays" timezone=":: occurrence.timezone" start=":: occurrence.startDate" end=":: occurrence.endDate" all-day=":: occurrence.allDay"></sr-ui-time-duration>\n                </div>\n            </div>\n          </div>\n        </sr-table-section-row>\n      </sr-table-section>\n    </sr-table>\n    <div class="search-results__more-content-loading" data-ng-if="showMoreContentSpinner">\n      <sr-ui-spinner data-custom-options="{\'circle\': {\'strokeColor\': \'#636a78\'}}" class="search-results__more-content-loading__spinner"></sr-ui-spinner>\n    </div>\n  </li>\n</ul>\n'),a.put("/template/partials/_settings-accounts_tpl.html",'<div>\n\n  <h3 class="settings__accounts__title" data-ng-bind=":: i18n.ADD_ACCOUNT "></h3>\n\n  <ul class="settings__acounts__list">\n    <li class="settings__acounts__list__item media" data-ng-repeat="service in services.calendars">\n      <div class="media__object--rev">\n        <button\n          class="btn btn--small"\n          aria-label="{{:: \'CONNECT_TO\' | SRHelperFilter_translate:service.title }}"\n          role="button"\n          tabindex="0"\n\n          sr-connection-add="service.type || service.id"\n\n          data-service="service"\n          data-ng-bind=":: i18n.CONNECT"\n          data-ng-disabled="!onlineStatus.onLine"\n        >\n        </button>\n      </div>\n      <div class="media__body">\n        <div class="media media--10">\n          <div class="media__object">\n            <i class="sprite sprite-settings-logo-{{:: service.id}}"></i>\n          </div>\n          <div class="media__body">\n            <h4 class="settings__accounts__list__title" data-ng-bind=":: service.title"></h4>\n            <span class="muted" data-ng-bind=":: service.description | SRHelperFilter_translate"</span>\n          </div>\n        </div>\n\n      </div>\n    </li>\n\n    <li data-ng-repeat="service in services.apps" class="settings__acounts__list__item media">\n      <div class="media__object--rev">\n        <button\n          class="btn btn--small"\n          aria-label="{{:: \'CONNECT_TO\' | SRHelperFilter_translate:service.title }}"\n          role="button"\n          tabindex="0"\n\n          sr-connection-add="service.type || service.id"\n\n          data-service="service"\n          data-ng-bind=":: i18n.CONNECT"\n          data-ng-disabled="!onlineStatus.onLine"\n        >\n        </button>\n      </div>\n      <div class="media__body">\n        <div class="media media--10">\n          <div class="media__object">\n            <i class="sprite sprite-settings-logo-{{:: service.id}}"></i>\n          </div>\n          <div class="media__body">\n            <h4 class="settings__accounts__list__title" data-ng-bind=":: service.title"></h4>\n            <span class="muted" data-ng-bind=":: service.description | SRHelperFilter_translate"</span>\n          </div>\n        </div>\n\n      </div>\n    </li>\n  </ul>\n\n  <h3 class="settings__accounts__title" data-ng-bind=":: i18n.ACCOUNTS"></h3>\n\n  <ul class="settings__acounts__list">\n    <li class="settings__acounts__list__item media" data-ng-repeat="service in connections" data-ng-if="service.type !== \'sunrise\' && service.type !== \'store\'" data-ng-class="{\'settings__acounts__list__item--disconnected\': service.disconnected}">\n\n      <div class="media__object--rev">\n        <button\n          class="btn btn--small"\n          aria-label="{{:: \'RECONNECT_YOUR_X_ACOUNT\' | SRHelperFilter_translate:service.type }}"\n          role="button"\n          tabindex="0"\n\n          data-ng-if="service.disconnected"\n          data-ng-disabled="!onlineStatus.onLine"\n          data-ng-bind=":: i18n.RECONNECT"\n\n          sr-connection-add="service.type || service.id"\n          service="service"\n        >\n        </button>\n        <button\n          class="btn btn--danger btn--small"\n          aria-label="{{:: \'REMOVE_YOUR_X_ACCOUNT\' | SRHelperFilter_translate:service.type }}"\n          role="button"\n          tabindex="0"\n          data-ng-disabled="!onlineStatus.onLine"\n\n          sr-connection-remove\n          data-connection="service"\n\n          tooltip="{{:: i18n.DISCONNECT }}"\n          tooltip-append-to-body="true"\n        >\n          <i class="icon icon_x"></i>\n        </button>\n      </div>\n\n      <div class="media__body">\n        <div class="media media--10">\n          <div class="media__object">\n            <i class="sprite sprite-settings-logo-{{:: service.type}}"></i>\n            <i data-ng-if="service.disconnected" class="icon icon_warning icon_warning--accounts-list"></i>\n          </div>\n          <div class="media__body">\n            <h4 class="settings__accounts__list__title" data-ng-bind=":: service.type | SRStringFilter_titleCase"></h4>\n            <span class="muted" data-ng-bind=":: service.info"></span>\n          </div>\n        </div>\n\n      </div>\n    </li>\n  </ul>\n</div>\n'),a.put("/template/partials/_settings-general_tpl.html",'<div>\n\n  <div class="settings__refresh">\n    <button\n      class="btn btn--spinner btn--spinner--settings"\n      data-ng-click="refresh()"\n      role="button"\n      data-ng-class="{\'btn--spinner--active\': appRefresh._isRefreshing}"\n      data-ng-disabled="(appRefresh._isRefreshing || !onlineStatus.onLine)"\n    >\n      <span class="btn--spinner__spinner">\n        <sr-ui-spinner class="spinner--btn-spinner" data-ng-if="appRefresh._isRefreshing"></sr-ui-spinner>\n        <i class="icon icon_refresh" data-ng-if="!appRefresh._isRefreshing"></i>\n      </span>\n      {{ i18n.REFRESH }}\n    </button>\n    <p class="muted">\n      {{ \'LAST_UPDATED\' | SRHelperFilter_translate:lastUpdated }}\n    </p>\n  </div>\n\n  <ul class="settings__options">\n    <li data-ng-repeat="item in settings" class="media" data-ng-if="item.values">\n      <label\n        class="media__object"\n        for="{{:: [\'settings__options\', item.key] | SRHelperFilter_toValidElementId}}"\n        data-ng-bind="item.label"\n      >\n      </label>\n      <div class="media__body">\n        <select\n          id="{{:: [\'settings__options\', item.key] | SRHelperFilter_toValidElementId}}"\n          class="form-select form-select--inline"\n\n          data-ng-model="item.selected"\n          data-ng-change="updateSetting(item.key, item.selected)"\n          data-ng-options="v.label group by v.group for v in item.values"\n        >\n        </select>\n      </div>\n    </li>\n    <li class="settings__options__version media">\n      <div class="media__object" data-ng-bind="i18n.VERSION"></div>\n      <div class="media__body muted" data-ng-bind="appVersion"></div>\n    </li>\n  </ul>\n\n  <div class="settings__delete-account">\n    <a data-ng-click="deleteAccount()" role="button" data-ng-bind="i18n.DELETE_ACCOUNT"></a>\n  </div>\n\n</div>\n'),a.put("/template/partials/_settings-menu_tpl.html",'<ul class="nav settings__menu" role="tablist">\n  <li\n    role="presentation"\n\n    data-ng-repeat="section in sections"\n    data-ng-class="{\'active\': currentSection === section.name}"\n  >\n    <a\n      id="{{:: \'settings-tab-\' + section.name}}"\n      role="tab"\n      aria-controls="{{:: \'settings-panel-\' + section.name}}"\n      aria-selected="{{currentSection === section.name}}"\n      data-ng-click="changeSection(section)"\n    >\n      <!-- Display a warning icon if a connection is disconnected -->\n      <sr-connection-warning data-ng-if="section.name === \'accounts\'"></sr-connection-warning>\n\n      <i class="icon icon_{{section.icon}}"></i>\n      <span class="settings__menu__label" data-ng-bind="section.label"></span>\n    </a>\n  </li>\n</ul>\n'),a.put("/template/partials/_settings-notifications_tpl.html",'<div>\n  <h3 class="settings__accounts__title">{{ :: \'NOTIFICATION_CALENDARS\' | SRHelperFilter_translate }}</h3>\n\n  <p class="settings__accounts__sub-title" data-ng-if="appNotifications.hasNotifications">\n    {{ :: \'NOTIFICATION_CALENDARS_SUBTITLE\' | SRHelperFilter_translate }}\n  </p>\n\n  <p class="settings__accounts__sub-title" data-ng-if="!appNotifications.hasNotifications">\n    {{ :: \'NOTIFICATION_CALENDARS_ERROR\' | SRHelperFilter_translate }}\n  </p>\n\n  <sr-calendars-list is-disabled="!appNotifications.hasNotifications" type="reminders"></sr-calendars-list>\n</div>\n'),a.put("/template/partials/_settings_tpl.html",'<header class="modal-header">\n  <sr-settings-menu current-section="currentSection"></sr-settings-menu>\n</header>\n\n<section class="modal-body modal-body--{{currentSection}}" data-ng-switch on="currentSection">\n  <div id="settings-panel-general" role="tabpanel" aria-labelledby="settings-tab--general">\n    <div data-ng-switch-when="general">\n      <sr-settings-general></sr-settings-general>\n    </div>\n  </div>\n  <div id="settings-panel-accounts" role="tabpanel" aria-labelledby="settings-tab--accounts">\n    <div data-ng-switch-when="accounts">\n      <sr-settings-accounts></sr-settings-accounts>\n    </div>\n  </div>\n  <div id="settings-panel-notifications" role="tabpanel" aria-labelledby="settings-tab--notifications">\n    <div data-ng-switch-when="notifications">\n      <sr-settings-notifications></sr-settings-notifications>\n    </div>\n  </div>\n</section>\n\n<footer class="modal-footer">\n  <sr-settings-logout></sr-settings-logout>\n  <button class="btn float-right" data-ng-click="cancel()" role="button" data-ng-bind="i18n.DONE"></button>\n</footer>\n'),a.put("/template/partials/_show-more_tpl.html",'<div class="show-more" data-ng-style="positions">\n\n  <header class="show-more__header">\n    <a\n      aria-label="{{ :: \'CANCEL\' | SRHelperFilter_translate }}"\n      role="button"\n      class="show-more__close"\n      data-ng-click="close()"\n    >\n      <i class="icon icon_plus"></i>\n    </a>\n    {{date | date:\'fullDate\'}}\n  </header>\n\n  <div class="show-more__content">\n    <div class="show-more__scroll-panel">\n\n      <div\n        role="button"\n        data-ng-repeat="occurrence in occurrences"\n        class="occurrence occurrence--row occurrence--show-more"\n        data-ng-class="{\n          \'occurrence--row--timed\': !occurrence.allDay,\n          \'occurrence--declined\': occurrence.userRsvpStatus === \'declined\',\n          \'occurrence--foursquare\': occurrence.type === \'foursquare:checkin\',\n          \'occurrence--facebook\': occurrence.type === \'facebook:event\'\n        }"\n\n        data-ng-style="{\n          \'border-left-color\': colors[occurrence.id].border.default,\n          \'color\': colors[occurrence.id].text.default,\n          \'background-color\': colors[occurrence.id].background.default\n        }"\n\n        data-ng-click="onClickOcccurrence($event, occurrence)"\n      >\n        <sr-iconic data-ng-if="!occurrence.allDay" type="{{occurrence.type}}" overlay="{{((occurrence.icon && occurrence.icon.overlay) ? occurrence.icon.overlay : occurrence.title + \':\' + occurrence.place.name)}}" color="{{((occurrence.icon && occurrence.icon.baseColor) ? occurrence.icon.baseColor : calendars[occurrence.calendarId].color)}}" size="32" background="false"></sr-iconic>\n        <span data-ng-if="!occurrence.allDay && occurrence.durationDays === 1" class="occurrence__time float-right">{{occurrence.startDate | SRDateFilter_timeFormat}}</span>\n        <span class="occurrence__title">{{occurrence.title || \'\'}}</span>\n      </div>\n\n    </div>\n  </div>\n</div>\n'),a.put("/template/partials/_spinner_tpl.html",'<svg\n  class="spinner__content"\n  data-ng-attr-width="{{:: options.width}}"\n  data-ng-attr-height="{{:: options.height}}"\n  viewBox="0 0 100 100"\n  xmlns="http://www.w3.org/2000/svg">\n   <circle\n    class="spinner__path"\n    fill="none"\n    data-ng-attr-stroke="{{:: options.circle.strokeColor}}"\n    data-ng-attr-stroke-width="{{:: options.circle.strokeWidth}}"\n    data-ng-attr-stroke-dasharray="{{:: options.circle.strokeDasharray}}"\n    data-ng-attr-stroke-dashoffset="{{:: options.circle.strokeDashoffset}}"\n    stroke-linecap="round"\n    cx="50"\n    cy="50"\n    data-ng-attr-r="{{:: options.circle.radius}}">\n  </circle>\n</svg>\n\n'),a.put("/template/partials/_timepicker-popover_tpl.html",'<div class="timepicker__popover">\n  <ul class="timepicker__popover__list">\n    <li data-ng-repeat="time in ::times" data-int="{{:: time.int}}" data-ng-class="{\'active\': selected.int === time.int}" data-ng-click="onChange(time, true)">\n      {{:: time.label}} <span class="muted" data-ng-if=":: time.duration" data-ng-bind=":: time.duration"></span>\n    </li>\n  </ul>\n</div>\n'),a.put("/template/partials/_timepicker_tpl.html",'<div class="timepicker">\n\n  <input\n    data-ng-model="value"\n    class="form-input timepicker__input timepicker__input--{{type}"\n    data-sr-ui-enter="onEnter()"\n    data-sr-ui-select\n    tabindex="{{tabindex}}"\n    type="text"\n    data-ng-disabled="disabled"\n  >\n\n  <sr-dialog-timepicker-popover type="type" dates="dates" data-ng-if="hasPopover"></sr-dialog-timepicker-popover>\n</div>\n'),a.put("/template/partials/_timezone-picker-dropdown_tpl.html",'<section>\n  <ul class="timezone-picker__list">\n    <li data-ng-repeat="timezone in timezones">\n      <a\n        class="timezone-picker__item"\n        href="#"\n\n        aria-selected="{{selectedTimezone === timezone}}"\n\n        data-ng-click="changeTimezone($event, timezone)"\n        data-ng-class="{\n          \'active\': selectedTimezone === timezone,\n          \'timezone-picker__item--current-location\': timezone.currentLocation\n        }"\n\n        sr-ui-focus="selectedTimezone === timezone"\n      >\n        <div class="media media--overflow media--10">\n          <div class="media__object--rev">\n            <span\n              aria-hidden="true"\n              class="timezone-picker__local-time muted"\n              data-ng-if="options[\'current-time\']"\n              data-ng-hide="hasEditMode"\n              data-ng-bind=":: timezone.name | SRDateFilter_localTime"\n            >\n            </span>\n            <button\n              class="btn-link timezone-picker__remove"\n\n              aria-label="{{ :: \'DELETE_TIMEZONE\' | SRHelperFilter_translate }}"\n              role="button"\n\n              data-ng-click="removeTimezone(timezone)"\n              data-ng-if="hasEditMode && !timezone.currentLocation"\n\n              tooltip="{{ :: \'DELETE_TIMEZONE\' | SRHelperFilter_translate }}"\n              tooltip-append-to-body="true"\n            >\n              <i class="icon icon_plus"></i>\n            </button>\n          </div>\n          <div class="media__body timezone-picker__label" aria-label="{{:: timezone.ariaLabel}}">\n            <span class="muted">{{:: timezone.abbr}} -</span> {{:: timezone.label}}\n          </div>\n        </div>\n      </a>\n    </li>\n\n    <li class="timezone-picker__item muted" data-ng-if="isLoading" data-ng-bind="i18n.PLEASE_WAIT"></li>\n  </ul>\n\n  <div\n    class="form__row form__row--border timezone-picker__input"\n    data-ng-hide="!hasEditMode"\n  >\n    <input\n      type="text"\n      class="form-input js-search-input"\n      aria-label="{{ :: i18n.SEARCH_CITY }}"\n      ng-model="place"\n      placeholder="{{ :: i18n.SEARCH_CITY }}"\n      typeahead="item as item.label for item in getPlaces($viewValue) | filter:{label:$viewValue}"\n      typeahead-on-select="onSelect()"\n      typeahead-loading="typeaheadIsLoading"\n      data-ng-hide="!hasEditMode"\n    >\n    <sr-ui-spinner data-ng-if="typeaheadIsLoading" class="spinner--timezone-picker-dropdown"></sr-ui-spinner>\n  </div>\n\n  <footer class="form__row form__row--border timezone-picker__footer">\n    <div data-ng-if="!hasEditMode">\n      <a\n        href="#"\n        class="btn btn--small timezone-picker__button"\n        data-ng-click="toggleEditMode()"\n        data-ng-bind=":: i18n.ADD_REMOVE_TIMEZONES">\n      </a>\n    </div>\n    <div data-ng-if="hasEditMode">\n      <a\n        href="#"\n        class="btn btn--primary btn--small"\n        data-ng-click="toggleEditMode()"\n        data-ng-bind=":: i18n.DONE"\n      >\n      </a>\n    </div>\n  </footer>\n</section>\n'),
a.put("/template/partials/_ui-download-button_tpl.html",'<a\n  aria-label="{{:: text}}"\n  role="link"\n  class="btn btn--block btn--large btn--transparent"\n  data-ng-click="onClick()"\n  data-ng-bind=":: text"\n>\n</a>\n'),a.put("/template/partials/_ui-search-place-dropdown_tpl.html",'<div class="ui-search-place-dropdown" \n     data-ng-show="showMenu"\n     data-ng-mousemove="onDropdownMouseMove($event)">\n\n  <!-- Menu Items -->\n  <!-- Favorite Items -->\n  <div class="ui-search-place-dropdown__section--0">\n    <header class=\'ui-search-place-dropdown__section__header\' data-ng-show="sections[0].length > 0">\n      <h1>Favorites</h1>\n    </header>\n\n    <a class="ui-search-place-dropdown__section__item" \n        data-ng-class="{ \'ui-search-place-dropdown__section__item--hover\': highlightedIndexPath && highlightedIndexPath.section == 0 && highlightedIndexPath.row == $index }" \n        tabindex="-1" \n        data-ng-mouseover=\'onItemMouseOver($event, {row: $index, section: 0})\'\n        data-ng-repeat="item in sections[0]"\n        data-ng-mousedown="onItemMouseDown($event, {row: $index, section: 0})">\n\n      <img class="favorite-icon" src="https://cdn2.iconfinder.com/data/icons/pittogrammi/142/65-512.png">\n      <div style="float: left; padding-left: 10px">\n        <strong>{{ item.title }}</strong>\n        <small class="muted">{{ item.description || \'Tap here to add an address\' }}</small>\n      </div>\n      <button data-ng-if="standardFavorites.indexOf(item.title.toLowerCase()) === -1" \n              class="favorite-button favorite-button--delete" \n              data-ng-mousedown="onFavoriteItemDeleteButtonMouseDown($event, {row: $index, section: 0})">\n      </button>\n      <button data-ng-if="standardFavorites.indexOf(item.title.toLowerCase()) !== -1"\n              class="favorite-button favorite-button--edit"\n              data-ng-mousedown="onFavoriteItemEditButtonMouseDown($event, {row: $index, section: 0})">\n      </button>\n    </a>\n  </div>\n\n  <!-- Recent Items -->\n  <div class="ui-search-place-dropdown__section--1">\n    <header class=\'ui-search-place-dropdown__section__header\' data-ng-show="sections[1].length > 0">\n      <h1>Recents</h1>\n    </header>\n\n    <a class="ui-search-place-dropdown__section__item" \n        data-ng-class="{ \'ui-search-place-dropdown__section__item--hover\': highlightedIndexPath && highlightedIndexPath.section == 1 && highlightedIndexPath.row == $index }" \n        tabindex="-1" \n        data-ng-mouseover=\'onItemMouseOver($event, {row: $index, section: 1})\'\n        data-ng-repeat="item in sections[1]"\n        data-ng-mousedown="onItemMouseDown($event, {row: $index, section: 1})">\n      <strong>{{ item.title }}</strong>\n      <small class="muted" data-ng-if="item.description">{{ item.description }}</small> \n    </a>\n  </div>\n\n  <!-- Prediction Items -->\n  <div class="ui-search-place-dropdown__section--2">\n    <header class=\'ui-search-place-dropdown__section__header\' data-ng-show="sections[2].length > 0">\n      <h1>Search</h1>\n    </header>\n\n    <a class="ui-search-place-dropdown__section__item" \n        data-ng-class="{ \'ui-search-place-dropdown__section__item--hover\': highlightedIndexPath && highlightedIndexPath.section == 2 && highlightedIndexPath.row == $index }" \n        tabindex="-1" \n        data-ng-mouseover=\'onItemMouseOver($event, {row: $index, section: 2})\'\n        data-ng-repeat="item in sections[2]"\n        data-ng-mousedown="onItemMouseDown($event, {row: $index, section: 2})">\n      <strong>{{ item.title }}</strong>\n      <small class="muted">{{ item.description }}</small>\n    </a>\n  </div>\n</div>\n'),a.put("/template/partials/_week-container_tpl.html",'<sr-timezone-picker class="timezone-picker--week" options="{\'current-time\': true}"></sr-timezone-picker>\n<sr-meet-button data-ng-if="!hasMeetReply"></sr-meet-button>\n<div class="container" sr-scrollable="week"></div>'),a.put("/template/views/calendar_tpl.html",'<sr-anchorman-banner></sr-anchorman-banner>\n\n<sr-sidebar class="app-sidebar" data-ng-class="{\'app-sidebar--active\': !SRToggleSidebarService.hideSidebar}"></sr-sidebar>\n\n<div class="app-window">\n  <nav class="app-navbar">\n    <sr-navbar></sr-navbar>\n  </nav>\n\n  <div class="app-wrapper" role="main" data-ng-switch on="appCurrent._location">\n    <div sr-week-container class="app-container app-container--week" data-ng-switch-when="week" data-animated="true"></div>\n    <div class="app-container app-container--month" data-ng-switch-when="month">\n      <month on-mouse-events drawable></month>\n    </div>\n    <sr-feedback-banner data-ng-if=":: showFeedbackBanner && !$root.hasMeetReply"></sr-feedback-banner>\n  </div>\n</div>\n\n<sr-connect data-ng-if="!isLogged && !meetId"></sr-connect>\n<sr-meet-edit data-ng-if="hasMeetEdit"></sr-meet-edit>\n'),a.put("/template/views/connect_tpl.html",'<section class="connect">\n\n  <div class="connect__overlay"></div>\n\n  <div\n    class="connect__content"\n\n    role="dialog"\n  >\n\n    <div class="connect__errors" data-ng-if="error" data-ng-bind="error"></div>\n\n    <div class="connect__connect">\n\n      <h1 class="connect__logo" aria-label="Sunrise, your new Calendar">\n        <i class="icon icon_logo"></i>\n      </h1>\n\n      <div class="connect__intro--browser-error" data-ng-if="!isBrowserReady">\n        <p>\n          <strong>{{:: \'NO_SUPPORT_1\' | SRHelperFilter_translate}}</strong>\n        </p>\n        <p>\n          {{:: \'NO_SUPPORT_2\' | SRHelperFilter_translate}}\n        </p>\n        <p>\n          {{:: \'NO_SUPPORT_3\' | SRHelperFilter_translate}}\n        </p>\n      </div>\n\n      <div data-ng-if="isBrowserReady">\n          <button role="button" data-ng-click="connect(\'google\')" data-ng-disabled="!onlineStatus.onLine" class="btn-google btn--large btn--block">\n            <i class="sprite sprite-btn-google"></i>\n            {{:: \'CONNECT_WITH\' | SRHelperFilter_translate:\'Google\' }}\n          </button>\n\n          <button role="button" data-ng-click="connect(\'facebook\')" data-ng-disabled="!onlineStatus.onLine" class="btn-facebook btn--large btn--block">\n            <i class="sprite sprite-btn-facebook"></i>\n            {{:: \'CONNECT_WITH\' | SRHelperFilter_translate:\'Facebook\' }}\n          </button>\n\n          <button role="button" data-ng-click="connect(\'email\')" data-ng-disabled="!onlineStatus.onLine" class="btn-mail btn--large btn--block">\n            <i class="sprite sprite-btn-mail"></i>\n            {{:: \'CONNECT_WITH_EMAIL\' | SRHelperFilter_translate }}\n          </button>\n\n          <footer class="connect__facepile" aria-disabled>\n            <div class="fb-facepile" data-app-id="292375587511410" data-width="450" data-max-rows="1" data-colorscheme="dark" data-size="small" data-show-count="true"></div>\n          </footer>\n      </div>\n\n    </div>\n\n  </div>\n\n\n\n  <footer class="connect__footer">\n\n    <div class="connect__mobile-links">\n      <a role="link" href="https://itunes.apple.com/us/app/sunrise-calendar/id886106985?ls=1&mt=12" target="_blank" tabindex="0">\n        <i class="sprite sprite-mac-app-store">{{ :: i18n.SUNRISE_FOR }} Mac</i>\n      </a>\n      <a role="link" href="https://itunes.apple.com/us/app/sunrise-calendrier-google/id599114150" target="_blank" tabindex="0">\n        <i class="sprite sprite-app-store">{{ :: i18n.SUNRISE_FOR }} iOS</i>\n      </a>\n      <a role="link" href="https://play.google.com/store/apps/details?id=am.sunrise.android.calendar" data-ng-if=":: !isMacApp" target="_blank" tabindex="0">\n        <i class="sprite sprite-google-play">{{ :: i18n.SUNRISE_FOR }} Android</i>\n      </a>\n    </div>\n\n    <ul class="nav nav--center nav--connect">\n      <li>\n        <a role="link" href="http://www.sunrise.am/about/privacy" target="_blank" tabindex="0">\n          {{:: \'PRIVACY_POLICY\' | SRHelperFilter_translate }}\n        </a>\n      </li>\n      <li>\n        <a role="link" href="http://www.sunrise.am/about/terms" target="_blank" tabindex="0">\n          {{:: \'TERMS_OF_SERVICES\' | SRHelperFilter_translate }}\n        </a>\n      </li>\n      <li>\n        <a role="link" href="http://support.sunrise.am" target="_blank" tabindex="0">\n          {{:: \'HELP\' | SRHelperFilter_translate }}\n        </a>\n      </li>\n      <li>\n        <a role="link" href="http://www.sunrise.am/jobs" target="_blank" tabindex="0">\n          {{:: \'JOBS\' | SRHelperFilter_translate }}\n        </a>\n      </li>\n    </ul>\n  </footer>\n</section>\n'),a.put("/template/views/dialog_tpl.html",'<div class="dialog">\n  <div class="dialog__content" data-ng-style="placement" data-sr-ui-draggable>\n    <div id="dialog-transclude" data-ng-class="{\'hidden\': appDialog.isLoading}"></div>\n    <div class="dialog__loading" data-ng-class="{\'hidden\': !appDialog.isLoading}">\n       <sr-ui-spinner class="spinner--dialog-loading"></sr-ui-spinner>\n    </div>\n  </div>\n</div>\n'),a.put("/template/views/loading_tpl.html",'<div class="loading-message">\n  <div class="loading-message__overlay" data-ng-if="isActive"></div>\n  <div\n    class="loading-message__message"\n    data-ng-if="isActive"\n    data-ng-class="{\n      \'loading-message__message--spinner\': loadingMessage.spinner\n    }"\n  >\n\n   <sr-ui-spinner\n      class="spinner--loading"\n      data-ng-if="loadingMessage.spinner"\n      data-custom-options="{\n        circle: {\n          strokeColor: \'#fff\',\n          strokeWidth: \'8px\'\n        },\n        width: \'60px\',\n        height: \'60px\'\n      }"\n    >\n    </sr-ui-spinner>\n\n    <span class="loading-message__label" data-ng-bind="loadingMessage.msg"></span>\n  </div>\n\n</div>\n'),a.put("/template/views/meet_tpl.html",'<sr-meet-reply meet-id="{{meetId}}">\n  <div class="app-navbar" data-ng-if=":: isLogged">\n    <sr-navbar-meet></sr-navbar-meet>\n  </div>\n  <div sr-week-container class="week-container" data-ng-if=":: isLogged"></div>\n</sr-meet-reply>\n'),a.put("/template/views/navbar-meet_tpl.html",'<nav class="navbar__wrapper navbar__wrapper--meet">\n  <ul class="nav nav--left">\n    <sr-navbar-controls></sr-navbar-controls>\n    <sr-navbar-calendars></sr-navbar-calendars>\n  </ul>\n\n  <ul class="nav nav--right">\n    <sr-navbar-date></sr-navbar-date>\n  </ul>\n</nav>\n'),a.put("/template/views/navbar_tpl.html",'<nav class="navbar__wrapper">\n\n  <ul class="nav nav--left" role="navigation">\n    <sr-navbar-toggle-sidebar></sr-navbar-toggle-sidebar>\n    <sr-navbar-today></sr-navbar-today>\n    <sr-navbar-controls></sr-navbar-controls>\n  </ul>\n\n  <ul class="nav nav--center">\n    <li>\n      <sr-invitation></sr-invitation>\n    </li>\n  </ul>\n\n  <ul class="nav nav--right">\n    <sr-navbar-date></sr-navbar-date>\n    <sr-navbar-location></sr-navbar-location>\n    <sr-navbar-new-event></sr-navbar-new-event>\n  </ul>\n\n</nav>\n'),a.put("/template/views/popover_tpl.html",'<div class="popover" data-ng-class="classNames">\n  <div class="popover__content">\n    <div ng-transclude></div>\n  </div>\n</div>\n'),a.put("/template/views/sidebar_tpl.html",'<aside>\n\n  <header class="sidebar__top">\n    <div class="media media--0 media--overflow" data-ng-hide="!hasSearch">\n      <div class="media__object--rev">\n        <div class="sidebar__settings" tooltip="{{ :: i18n.SETTINGS }}" tooltip-placement="bottom" tooltip-popup-delay="800" tooltip-append-to-body="true">\n          <a data-ng-click="showSettings()" aria-label="{{ :: i18n.SETTINGS }}" role="button">\n            <sr-connection-warning data-ng-init="init()"></sr-connection-warning>\n            <i class="icon icon_gear"></i>\n          </a>\n        </div>\n      </div>\n      <div class="media__body">\n        <sr-sidebar-search-input search-text="searchText" input="input"></sr-sidebar-search-input>\n      </div>\n    </div>\n  </header>\n\n  <section class="sidebar__content">\n\n    <sr-sidebar-search-results data-ng-if="searchText" search-text="searchText" input="input"></sr-sidebar-search-results>\n\n    <ul class="sidebar__list" data-ng-if="!searchText">\n      <li>\n        <!-- Calendar List -->\n        <h2\n          class="sidebar__list__title"\n          data-ng-click="toggle(\'sidebarDatepicker\')"\n          aria-expanded="{{settings.sidebarDatepicker}}"\n          aria-owns="sidebar-calendar"\n          role="button"\n        >\n          {{ :: i18n.CALENDAR }}\n          <b class="float-right" data-ng-if="settings.sidebarDatepicker"><i class="icon icon_chevron-bottom"></i></b>\n          <b class="float-right" data-ng-if="!settings.sidebarDatepicker"><i class="icon icon_chevron-right"></i></b>\n        </h2>\n\n        <sr-sidebar-calendar id="sidebar-calendar" data-sr-ui-slide-toggle="settings.sidebarDatepicker"></sr-sidebar-calendar>\n      </li>\n\n      <li>\n        <!-- Calendar List -->\n        <h2\n          class="sidebar__list__title"\n          data-ng-click="toggle(\'sidebarCalendars\')"\n          aria-expanded="{{settings.sidebarCalendars}}"\n          aria-owns="sidebar-calendars-list"\n          role="button"\n        >\n          {{ :: i18n.ACCOUNTS }}\n          <b class="float-right" data-ng-if="settings.sidebarCalendars"><i class="icon icon_chevron-bottom"></i></b>\n          <b class="float-right" data-ng-if="!settings.sidebarCalendars"><i class="icon icon_chevron-right"></i></b>\n        </h2>\n\n        <sr-calendars-list id="sidebar-calendars-list" only-accounts="true" type="visibility" data-sr-ui-slide-toggle="settings.sidebarCalendars"></sr-calendars-list>\n      </li>\n\n      <li>\n        <h2\n          class="sidebar__list__title"\n          data-ng-click="toggle(\'sidebarInterestingCalendars\')"\n          aria-expanded="{{settings.sidebarInterestingCalendars}}"\n          aria-owns="sidebar-interesting-calendars-list"\n          role="button"\n        >\n          {{ :: i18n.INTERESTING_CALENDARS }}\n          <b class="float-right" data-ng-if="settings.sidebarInterestingCalendars"><i class="icon icon_chevron-bottom"></i></b>\n          <b class="float-right" data-ng-if="!settings.sidebarInterestingCalendars"><i class="icon icon_chevron-right"></i></b>\n        </h2>\n\n        <section data-sr-ui-slide-toggle="settings.sidebarInterestingCalendars">\n          <sr-calendars-list id="sidebar-interesting-calendars-list" only-interesting-calendars="true" no-headers="true" type="visibility"></sr-calendars-list>\n\n          <button class="interesting-calendar-button" data-ng-click=":: didClickInterestingCalendarButton()">\n            {{ :: \'HOLIDAYS_SPORTS_MORE\' | SRHelperFilter_translate }}\n          </button>\n        </section>\n      </li>\n\n      <li>\n        <sr-sidebar-support-button></sr-sidebar-support-button>\n      </li>\n    </ul>\n  </section>\n\n  <footer class="sidebar__bottom">\n    {{ :: i18n.SUNRISE_FOR }}\n    <a\n      tabindex="0"\n      href="https://itunes.apple.com/us/app/sunrise-calendrier-google/id599114150"\n      target="_blank"\n      aria-label="{{ :: i18n.SUNRISE_FOR }} iPhone"\n      role="link"\n    >\n      iPhone\n    </a>\n    |\n    <a\n      tabindex="0"\n      href="https://itunes.apple.com/us/app/sunrise-calendrier-google/id599114150"\n      target="_blank"\n      aria-label="{{ :: i18n.SUNRISE_FOR }} iPad"\n      role="link"\n    >\n      iPad\n    </a>\n    <span data-ng-if="!isMacApp">\n      |\n      <a\n        tabindex="0"\n        href="https://play.google.com/store/apps/details?id=am.sunrise.android.calendar"\n        target="_blank"\n        aria-label="{{ :: i18n.SUNRISE_FOR }} Android"\n        role="link"\n      >\n        Android\n      </a>\n    </span>\n  </footer>\n</aside>\n'),a.put("/template/views/timezone-picker_tpl.html",'<section class="timezone-picker">\n  <div class="timezone-picker__action">\n    <button\n      aria-label="{{ \'CURRENT_TIMEZONE\' | SRHelperFilter_translate:timezoneAbbr }}"\n      role="button"\n      type="button"\n\n      class="timezone-picker__btn js-float-label-input"\n      title="{{timezoneAbbr}}"\n\n      data-ng-attr-tabindex="{{:: tabindex}}"\n      data-ng-click="open()"\n    >\n      <div class="timezone-picker__btn-label" data-ng-class=":: {\'timezone-picker__btn-label--with-name\': options.showTimezoneName}">\n        <span class="timezone-picker__abbr" data-ng-bind="timezoneAbbr"></span>\n        <span class="timezone-picker__name" data-ng-if=":: options.showTimezoneName" data-ng-bind="timezoneName"></span>\n      </div>\n\n      <i class="icon icon_earth"></i>\n      <i class="icon icon_chevron-bottom"></i>\n    </button>\n  </div>\n  <div class="timezone-picker__popover" data-ng-if="togglePopover">\n    <sr-timezone-picker-dropdown></sr-timezone-picker-dropdown>\n  </div>\n</section>\n'),a.put("/template/views/wait_tpl.html",'<div class="wait">\n  <style type="text/css" media="screen">\n    html, body {\n      height: 100%;\n      width: 100%;\n      background: #FFF;\n      padding: 0;\n      margin: 0;\n      overflow: hidden;\n      -webkit-user-select: none;\n    }\n  </style>\n</div>\n')}]);