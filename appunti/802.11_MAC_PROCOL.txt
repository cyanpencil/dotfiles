802.11  MAC  PROCOL  

Una volta che la wireless station è associata con un AP, può iniziare a mandare e ricevere i frame a e da l'access point. Siccome diverse stazioni potrebbero voler trasmettere dati simultaneamente, un protocollo ad accesso multiplo è necessario per gestire il traffico. (Una stazione può essere o una stazione wireless o un AP). Trasportati dal successo di Ethernet e del suo random access protocol, gli sviluppatori dell'802.11 optarono nuovamente per un random access protocol denominato CSMA with collision avoidance, o più brevemente CSMA/CA. In quest'ultimo, similarmente a CSMA/CD per Ethernet, ogni stazione ascolta il canale prima di trasmettere e si astiene dal farlo se rileva che il canale è occupato. Di per sè il protocollo MAC 802.11 non implementa alcuna rilevazione di collisioni. Ci sono due importanti ragioni per questo: in primis perchè la possibilità di rilevare collisioni richiede la capacità d'inviare e ricevere contemporaneamente. Siccome la potenza del segnale ricevuto è nettamente inferiore alla potenza del segnale trasmesso, risulta molto costoso costruire hardware che rilevano la collisione. In secundis è molto importante il fatto che l'adattatore, anche nel caso in cui potesse trasmettere e ricevere simultanemante, non potrebbe rilevare tutte le collisioni a causa del problema del termianle nascostio de dell'attenuazione del segnale. Prima di considerare la collision avoidance, abbiamo bisdogno di esaminare il link-layer acknoledgemenet scheme necessario per ovviare al problema della dispersione dei frame nella rete wireless. Difatti quando la stazione di destinazione riceve un frame che passa il controllo CRC, attende per un breve periodo di tempo, noto come Short inter-frame Spacing (SIFS), dopo il quale invia al mittente un frame di conferma di avvenuta ricezione. Se la stazione trasmittente non riceverà questo riscontro entro un arco di tempo stabilito, presupporrà un errore e ritrasmetterà il frame, utilizzando ancora il protocollo CSMA/CA. Se il frame di acknoledgement non viene ricevuto dopo alcuni tentativi di ritrasmissione, la stazione che sta trasmettendo il frame abbandona e lo scarta. Supponiamo di avere una stazione che abbia un frame da trasmettere: 1. inizialmente la stazione ascolta il canale inattivo, trasmette il suo frame dopo un piccolo periodo di tempo noto come Distributed Inter-Frame Space (DIFS); 2. Altrimenti la stazione sceglie un valore di backoff randomicamente ricorrendo a binary exponential backoff e decrementa questo valore quando il canale viene percepito inattivo. Mentre il canale viene percipito occupato il suddetto valore viene congelato; 3. quando il valore raggiunge lo zero, cosa che può capitare mentre il canale è inattivo, la stazione trasmette l'intero frame e poi attende un acknowledgment; 4. se viene ricevuto l'ack, la stazione trasmittente sa che il frame è stato correttamente ricevuto. Se la medesima stazione ha un altro frame da inviare, avvia il protocollo CSMA/CA dal secondo passaggio. Altrimenti se l'ack non viene ricevuto, la stazione trasmittente rientra nella fase di backoff al secondo passaggio con un valore randomico estratto da un intervallo più grande.

[DA FARE DIFFERENZA APPROCCIO CSMA/CA E CSMA/CD]

{Dealing whit Hidden Terminals: RTS e CTS}: Il protocollo MAC 802.11 implementa anche un elegante schema di prenotazione che aiuta a evitare collisioni anche in presenza di terminali nascosti. Quest'ultimi potrebbero rivelarsi problematici poichè supponendo cheuna stazione s1 stia trasmettendo un frame e nel mezzo della sua trasmissione, la stazione s2 vuole inviare un frame as AP. S2, non potendo ascoltare la trasmissione da s1, in primis, aspetterà un intervallo DIFS  per poi trasmettere il frame, generando una collisione. Così facendo il canale verrà dunque sprecato l'intero periodo della trasmisisone di s1 come durante quello di s2. Per risolvere questo problema, ilprotocollo IEEE 802.11 permette alla stazione di ricorrere ad un piccolo Request to Send (RTS) control frame e anche ad un piccolo Clear to Send (CTS) control frame per riservare l'accesso al canale.

Quando il trasmittente vuole inviare il DATA frame, innanzitutto invia il frame RTS all'AP,
indicando il tempo totale richiesto per la trasmissione dello stesso DATA frame e del frame d'ACK. Quando l'AP riceve il frame RTS, risponderà diffondendo in broadcast il frame CTS.
Questo avviene per due motivi: comunica al trasmittente il permesso esplicito di inviare e comunica alle altre stazioni di non trasmettere durante il periodo di tempo riservato.

L'uso dei frame di controllo RTS E CTS può incrementare le performance in due modi importanti: 1. il problema della stazione nascosta viene mitigato dal momento che un long DATA frame viene trasmesso solo dopo che il canale è stato riservato; 2. siccome questi due frame sono di piccola dimensione, un'eventuale collisione riguardante essi durerebbe solo per la durata del breve RTS o CTS frame. UNa volta che i due frame vengono trasmessi correttamente i successivi DATA  e ACK frames dovrebbero essere trasmessi senza collisione.

Nonostante l' RTS/CTS exchange può aiutare a ridurre le collisioni, introduce un ritardo e consuma le risorse del canale. Per questo motivo, l'RTS/CTS exchange è usato solamente per riservare il canale per la trasmissione di un long DATA frame.

[DA VEDERE USING 802.11 AS A POINT-TO-POINT LINK]

{The IEEE 802.11 frame}: Nonostante il frame 802.11 condivida delle peculiarità con quello Ethernet, esso contiene anche un numero di campi specifici per l'utilizzo nelle reti wireless. Esaminiamo ora i campi nel frame come alcuni dei più importanti sotto-campi del campo di controllo.

{Campi Payload e CRC}: Il cuore del frame è il campo payload che tipicamente consiste di un daatgramma IP o di  un pacchetto ARP che, in genere, non supera i 1500 byte. Inoltre, come in Ethernet, i frame 802.11 hanno un campo CRC di 32 bit che permette al ricevente il rilevamento di eventuali errori nei bit.

{Campi indirizzo}: Probabilmente la differenza più sostanziale risiede nel fatto he il frame 802.11 contiene quattro campi indirizzo, ciascuno dei quali può contenere un indirizzo MAC di 6 byte. I primi tre indirizzi sono necessari per scopi d'interconnessione, in particolar modo per trasportare datagrammi del livello di rete da una stazione wireless, attraverso un AP, all'interfaccia router. Invece il quarto indirizzo viene utilizzato nelle reti ad hoc, ma non in quelle con infrastruttura. Siccome fino ad ora abbiamo preso in considerazione infrastrutture network, ci foccalizzeremo sui primi tre campi indirizzo. Lo standard 802.11 definisce questi campi nel seguente modo: 1. l'indirizzo 2 è l'indirizzo MAC della stazione che trasmette il frame. Ergo, se una stazione wireless trasmette un frame, l'indirizzo MAC della medesimia stazione verrà inserito nel campo Indirizzo 2. La stessa cosa vale per gli AP; 2. l'indirizzo 1 è l'indirizzo MAC della stazione wireless che sta ricevendo il frame. Ergo, se una stazione wireless mobile trasmette un frame, il campo Indirizzo 1 contiene l'indirizzo MAC dell'AP di destinazione. La stessa cosa vale per gli AP invertendo le due entità di rete; 3. per comprendere al meglio il campo Indirizzo 3, ricordiamo che il BSS, costituito dall'AP e dalle stazioni wireless, fa parte di una sottorete e quest'ultima connette le altre sottoreti attraverso un'interfaccia del router. L'indirizzo 3 contiene l'indirizzo di questa interfaccia.

{Sequence number, duration, and frame control fields}: Il campo numero di sequenza nel pacchetto 802.11 ha esattamente la stessa funzione a livello di collegamento che aveva a livello di trasporto ovvero permette al ricevente di riconoscere un frame appena trasmesso da un altro ritrasmesso. Inoltre 802.11 permette alla stazione trasmittente di riservare il canale per un periodo di tempo in cui avviene la trasmissione del suo frame e la ricezione del frame di conferma. Questo valore è incluso nel campo durata, per i frame DATA, RTS E CTS. Infine il campo di controllo del frame è articolato in sottocampi. I campi tipo e sottotipo sono utilizzati per distinguere frame di associazione, RTS, CTS, ACK e DATA. I campi 'verso AP' e 'da AP' definiscono lla funzione dei diversi campi indirizzo. Il significato di questi cambia a seconda che sia utilizzata una rete ad hoc o con infrastruttura e, in quest'ultimo caso, se il frame è inviatoo da una stazione o da un AP.

{Mobility in the same IP subnnet}: Per incrementare la copertura di una LAN wireless, aziende e università dispongono spesso di vari BSS all'interno di una stessa sottorete IP. Ciò naturalmente  fa sorgere il problema della mobilità all'interno dei BSS. Come vedremo, la mobilità può essere trattata  in modo semplice quando i BSS fanno parte della stessa sottorete. Quando una stazione di muove da una sottorete all'altra, è necessario un protocollo più sofisticato ( Paragrafo 7.5 e 7.6).

{Funzionalità avanzate di 802.11}:

1) Adattamento del tasso in 802.11 -> 

2) Gestione dell'energia ->

[ BLUETOOTH ]

{ Accesso cellulare a internet --> Panoramica dell'architettura di una rete cellulare }: Nella trattazione di questo argomento introduciamo lo standard global system for mobile communication (GSM). Spesso òe tecnologie cellulari sono classificate per 'generazioni'. Quelle più datate sono state progettate per il traffico telefonico. I sistemi di prima generazione (1G), erano analoghi ai sistemi FDMA progettati solamente per le comunicazioni audio. Questi sistemi sono stati sostituiti dai 2G digitali, progettati anch'essi per la fonia. Più tardi furono estesi a 2.5G per supportare i traffico dati. Attualmente i sistemi 3G supportano sia la voce che i dati, con una maggiore enfasi sulla capacità di trasporto dati e collegamenti di accesso radio. Dopodichè abbiamo i sistemi 4G che sono all'avanguardia, basati su una tecnologia LTE, nucleo di rete completamente basato su IP e forniscono voce e dati a velocità di Megabit.

{Architettura della rete cellulare 2G: connessioni voce alla rete telefonica}: Il termine cellulare si riferisce al fatto che un'area geografica è suddivisa in aree di copertura dette celle. Anche GSM ha una sua nomenclatura particolare. Ogni cella contiene una stazione di base che prende il nome di base transceiver station (BTS) che scammbia segnali con le stazioni mobili. L'area di copertura di una cella dipende da molti fattori, inclusi la potenza di trasmissione del BTS e quella della stazione mobile, la presenza di palazzi nella cella, e l'altezza dell'antenna della stazione base.
Lo standard GSM per i sistemi cellulari 2G usa una combinazione di FDM e TDM per l'interfaccia aerea. In questi sistemi ibridi FDM/TDM, il canale è ripartito in sottobande di frequenza all'interno delle quali il tempo è suddiviso in frame e slot. Quidni, in questi sistemi, se il canale è suddiviso in F sottobande e il tempo in T slot, i canali potranno supportare F x T chiamate simultanee. Anche le reti di accesso HFC usano un approccio ibrido. Una base station controller (BSC) nelle reti GSM serve tipicamente alcune decine di BTS. Il ruolo dei BSC è di allocare canali radio BTS agli utenti mobili, eseguendo la procedura di -paging-, che consiste nel trovare la cella in cui l'utente mobile risiede, ed eseguire l'handoff dell'utente mobile. Il BSC insieme alle BTS che controlla costituiscono il -base station system- (BSS) di una rete GSM. Il -mobile switching center- (MSC) gioca un ruolo fondamentale nell'autorizzazione ed identificazione degli utenti, nello stabilire o terminare una chiamata e nell'handoff. (Tipicamente, un singolo MSC contiene fino a 5 BSC, pari circa a 200.000 utenti per MSC).

{Rete dati cellulare 3G: accesso ad internet agli utenti delle reti cellulari --> 3G core network}: Il nucleo della rete dati cellulare 3G connette reti di accesso radio a Internet. La core network interopera con le componenti della rete cellulare esistente per la voce, in particolare l'MSC. Alla luce dell'infrastruttura già esistente in 2G i progettisti del servizio dati 3G hanno scelte il seguente approccio: lasciare invariato il nucle GSM esistente per la fonia, integrando parallelamente funzionalità di trasmissione dati. Alternativamente l'approccio che portava all'integrazione di nuovi servizi dati direttamente dal nucleo della rete voce cellulare già esistente avrebbe comportato le stesse sfide illustrate precedentemente per passare da IPv4 a IPv6. Nella core network 3G ci sono due tipi di nodi: -Serving GPRS Suppport Nodes (SGSN)- e -Gateway GPRS Support Nodes- (GGSN). GPRS è un acronimo che sta per Generalized Racket Radio Service ovvero un servizio implementato in 2G. Qui discutiamo la versione evoluta di quest'ultimo implementata nelle reti 3G. Un SGSN ha il compito di consegnare datagrammi a/da nodi mobili nella rete di accesso radio a cui l'SGSN è collegato. Quest'ultimo interagisce con l'MSC della rete voce cellulare di quell'area, fornendo agli utenti autorizzazioni e handoff, memorizzando le informazioni di posizione (cella) dei nodi mobili attivi e inoltrando i datagrammi sempre tra i nodi mobili di una rete di accesso radio e un GGSN, che agisce come gateway connettendo più SGSN a Internet. Quindi GGSN è la parte terminale dell'infrastruttura 3G.

{Rete di accesso radio 3G: il confine wireless}: Le 3G -radio access network- è la rete wireless di primo hop vista da un utente 3G. Il -Radio Network Controller- (RNC) controlla tipicamente alcune stazioni base simili ai BTS incontrati nei sistemi 2G che nel gergo UMTS vengono chiamati "Node B". Ogni collegamento wireless all'interno di una cella opera tra i nodi modibili e una BTS, come nelle reti 2G. L'RNC è connesso sia alla rete voce cellulare a commutazione di circuito tramite un MSC sia a Internet a commutazione di pacchetto tramite SGSN. Ergo sebbene i servizi voce e i servizi dati 3G usino nuclei di reti differenti, hanno in comune la rete di accesso radio di primo ed ultimo hop. Un cambiamento significativo avviene in UMTS dove si arriva ad usare una tecnica CDMA nota come Direct Sequence Wideband CDMA (DS-WCDMA) all'interno degli slot TDMA al posto dello schema GSM FDM/TDM. Questo cambiamento richiede una nuova rete di accesso cellulare 3G che operi in parallelo con la rete radio BSS 2G. Il servizio dati associato alle specifiche WCDMA è noto come HSPA (high speed packet access) e prospetta una velocità nell'ordine di Megabit.

{ Gestione della mobilià --> Principi }: L'utente fisicamente mobile presenta una serie di sfide a livello di rete, a seconda di come si sposta tra i punti di accesso alla rete. A un'estrmità dello spettro l'utente potrebbe trasferire il suo portatile con una scheda di rete wireless all'interno di un edificio. Questo non è un utente mobile sia dal punto di vista di rete che di collegamento, se si associa allo stesso AP indipendentemente dalla posizione. All'altra estremità dello spettro consideriamo un utente che viaggia, passando attraverso diverse reti di accesso wireless. Questo utente è mobile. Ovviamente tra i due esempi c'è un'infinità di casistiche di utenti mobili.

L'importanza che l'indirizzo del nodo mobile resti invariato è relativa alle applicazioni in esecuzione: se l'entità mobile è in grado di mantenere il proprio indirizzo IP quando si sposta, la mobilità diventa trasparente dal punto di vista dell'applicazione. Questa trasparenza è molto importante infatti se un'applicazione non si deve preoccupare circa un potenziale cambio di indirizzo IP, mentre lo stesso codice applicativo serve connessioni mobili e non mobili.

Nel caso in cui un'infrastruttura di rete venisse meno, le reti ad hoc forniscono precisamente le funzionalità necessarie.

In una rete, il luogo permanente in cui risiede un nodo mobile è detto -rete di appartenenza- (home network) e le entità che gestisconola mobilità per conto del nodo mobile all'interno di questa sono conosciute come -agenti domestici- (home agent). La rete in cui il nodo mobile viene a trovarsi occasionalmente costituisce la -rete ospitante- (foreign network) mentre l'entità al suo interno che si occupa della mobilità è detta -agente ospitante- (foreign agent). Il -corrispondente- è l'entità che desidera comunicare con il nodo mobile.

{ Indirizzamento/ Addressing}: ??? . Un approccio alternativo è di portare le funzionalità di mobilità dal nucleo della rete alla sua periferia. Una modalità intuitiva di questo approccio utilizza la rete di appartenenza del nodo mobile. Certamente è necessario un protocollo tra il nodo mobile e l'agente domestico per aggiornare la posizione/localizzazione del nodo stesso. Osserviamo attentamente l'agente ospitante. L'approccio concettualmente più semplice è porre l'agente ospitante nei router agli estrmi della rete visitata. Un compito di questo agente è la definizione di un -indirizzo di mediazione-, detto -COA- (care-of-address) per il nodo mobile. La parte direte del COA sarà quella della rete ospitante. Gli indirizzi associati alla modalità mobile sono quindi due: quello -permanente- e il COA.

{ Routing to a mobile node }: Per indirizzare e inviare il datagramma al nodo mobile esistono due approcci: l'instradamento diretto e indiretto.

{ Indirect routing to a mobile node }: Nell'approccio dell'-instradamento indiretto-, il corrispondente non fa altro che indirizzare il datagramma all'indirizzo permanente del nodoe inviarlo nella rete, completamente inconsapevole dell'effetiva localizzazione del nodo. Dunque la mobilità è cristallina al corrispondente. 

Alcuni datagrammi sono inizialmente instradati alla rete di appartenenza del nodo mobile. Focalizziamo l'attenzione sull'agente domestico che, oltre alla responsabilità di interagire con l'agente ospitante per monitorare il COA del nodo mobile, ha un'altra funzione molto importqante: il controllo dei datagrammi in entrata indirizzati ai nodi che fnno parte della rete di appartenenza, ma che si trovano al momento in una rete esterna. L'agente intercetta questi datagrammi e li invia al nodo mobile con un processo articolato in due passi. Il datagramma è innanzitutto inviato all'agente ospitante del nodo mobile, utilizzando il COA di quest'ultimo e poi viene inoltrato al nodo mobile stesso. Nella fase di re-instradamento l'agente domastico avrà bisogno di indirizzare il datagramma utilizzando il COA del nodo mobile mantenendo intatto il datagramma. Ciò si può ottente attraverso l'-incapsulamento-, da parte dell'agente domestico, dell'intero datagramma originale in uno nuovo di dimensioni maggiori. Quest'ultimo è indirizzato e inviato al COA del nodo. L'agente ospitante, che conosce il COA, riceverà e aprirà il datagramma più grande per recuperare quello incapsulato, e lo invierà al nodo mobile. Lo standard IP mobile utilizza l'approccio dell'instradamento indiretto.

{ Direct routing to a mobile node }: L'instradamento indiretto comporta un'efficienza conosciuta come -problema dell'instradamento triangolare- (triangle routing problem), in quanto i datagrammi indirizzati al nodo mobile devono prima essere instradatiall'agente domestico e poi alla rete ospitante, anche in presenza di percorsi più efficienti tra corrispondente e nodo mobile. L'-instradamento diretto- supera l'inefficienza insita nell'instradamento triangolare, ma al costo di una maggiore complessità. In questo approccio un -agente corrispondente-, nella rete del corrispondente, ottiene innanzitutto il COA del nodo mobile. Ciò può essere fatto con una richiesta presso l'agente domestico, assumendo che il nodo mobile disponga di un valore aggiornato del suo COAe che questo sia noto all'agente domestico. E' anche possibile che il corrispondente svolga la funzione di agente corrispondente, così come il nodo mobile potrebbe svolgere la funzione di agente ospitante. L'agente corrispondente, poi, invia tramite un tunnel i datagrammi direttamente al COA del nodo mobile, in modo analogo a come faceva l'agente domestico. Così facendo, l'instradamento diretto risolve il problema dell'instradamento triangolare ma, al contempo, introduce due ulteriori, fondamentali problemi: 1. la necessità di un -protocollo di localizzazione dell'utente mobile- tramite il quale l'agente corrispondente possa interrogare l'agente domestico oer ottenere il COA del nodo mobile; 2. come avviene l'invio dei dati all nuova rete quando il nodo mobile si sposta da una rete a un'altra? Per risolvere questo problema nell'instradamento triangolare bastava aggironare il COA presso l'agente domenstico. Al contrario con l'instradamento diretto, l'agente domestico è interrogato dall'agente corrispondente solo una volta, all'inizio della sessione. Così, aggiornare il COA nell'agente domestico non risolverà il problema dell'instradamento dei dati verso la nuova rete del nodo mobile. Una soluzione potrebbe essre un nuovo protocollo per avvisare il corrispondente del cambio di COA. Un'altra soluzione, come nel caso delle GSM, agisce non seguente modo: si supponga che, in una determinata sessione, siano inviati dati a un nodo mobile nella rete ospitante, nella quale si trova  inizialmente e identifichiamo l'agente in  quella rete come -agente di appoggio- (anchor foreign agent). Quando il nodo si sposta in una nuova rete, registra il nuovo COA presso il nuovo agente ospitante, che fornirà all'agente di appoggio il nuovo COA del nodo mobile. Quando l'agente di appoggio riceverà il datagramma incapsulato per il nodo non più presente, lo re-incapsulerà e lo invierà a quel nodo utilizzando il nuovo COA. Se infuturo il nodo si sposterà ancora in un'altra rete, l'agente della nuova rete ospitante dovrà contattare l'agente di appoggio per impostare l'invio dei datagrammi verso quella nuova rete. 
